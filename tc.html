<html>

<head></head>

<body>
    <div hidden="" by-polymer-bundler="">
        <script>
            (function() {
                "use strict";

                function c() {
                    this.end = this.start = 0, this.rules = this.parent = this.previous = null, this.cssText = this.parsedCssText = "", this.atRule = !1, this.type = 0, this.parsedSelector = this.selector = this.keyframesName = ""
                }

                function b(j) {
                    j = j.replace(y, "").replace(r, "");
                    var a = j,
                        b = new c;
                    b.start = 0, b.end = a.length;
                    for (var d = b, e = 0, f = a.length; e < f; e++)
                        if ("{" === a[e]) {
                            d.rules || (d.rules = []);
                            var h = d,
                                g = h.rules[h.rules.length - 1] || null;
                            d = new c, d.start = e + 1, d.parent = h, d.previous = g, h.rules.push(d)
                        } else "}" === a[e] && (d.end = e + 1, d = d.parent || b);
                    return i(b, j)
                }

                function i(h, a) {
                    var c = a.substring(h.start, h.end - 1);
                    if (h.parsedCssText = h.cssText = c.trim(), h.parent && (c = a.substring(h.previous ? h.previous.end : h.parent.start, h.start - 1), c = g(c), c = c.replace(R, " "), c = c.substring(c.lastIndexOf(";") + 1), c = h.parsedSelector = h.selector = c.trim(), h.atRule = 0 === c.indexOf("@"), h.atRule ? 0 === c.indexOf("@media") ? h.type = x : c.match(P) && (h.type = z, h.keyframesName = h.selector.split(R).pop()) : h.type = 0 === c.indexOf("--") ? v : k), c = h.rules)
                        for (var b, f = 0, d = c.length; f < d && (b = c[f]); f++) i(b, a);
                    return h
                }

                function g(b) {
                    return b.replace(/\\([0-9a-f]{1,6})\s/gi, function(c, a) {
                        for (c = a, a = 6 - c.length; a--;) c = "0" + c;
                        return "\\" + c
                    })
                }

                function j(i, a, c) {
                    c = void 0 === c ? "" : c;
                    var b = "";
                    if (i.cssText || i.rules) {
                        var d, f = i.rules;
                        if ((d = f) && (d = f[0], d = !(d && d.selector && 0 === d.selector.indexOf("--"))), d) {
                            d = 0;
                            for (var e, g = f.length; d < g && (e = f[d]); d++) b = j(e, a, b)
                        } else a ? a = i.cssText : (a = i.cssText, a = a.replace(K, "").replace(L, ""), a = a.replace(M, "").replace(N, "")), (b = a.trim()) && (b = "  " + b + "\n")
                    }
                    return b && (i.selector && (c += i.selector + " {\n"), c += b, i.selector && (c += "}\n\n")), c
                }

                function a(b) {
                    (b = D[b]) && (b._applyShimCurrentVersion = b._applyShimCurrentVersion || 0, b._applyShimValidatingVersion = b._applyShimValidatingVersion || 0, b._applyShimNextVersion = (b._applyShimNextVersion || 0) + 1)
                }

                function d(b) {
                    return b._applyShimCurrentVersion === b._applyShimNextVersion
                }

                function e(b) {
                    b._applyShimValidatingVersion = b._applyShimNextVersion, b.b || (b.b = !0, u.then(function() {
                        b._applyShimCurrentVersion = b._applyShimNextVersion, b.b = !1
                    }))
                }

                function f(b) {
                    F = !(b && b.shimcssproperties) && (S || !navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/) && window.CSS && CSS.supports && CSS.supports("box-shadow", "0 0 0 var(--foo)"))
                }

                function h(c) {
                    return c ? ("string" === typeof c && (c = b(c)), j(c, C)) : ""
                }

                function l(c) {
                    return !c.__cssRules && c.textContent && (c.__cssRules = b(c.textContent)), c.__cssRules || null
                }

                function m(i, a, c, b) {
                    if (i) {
                        var d = !1,
                            e = i.type;
                        if (b && 4 === e) {
                            var f = i.selector.match(I);
                            f && (window.matchMedia(f[1]).matches || (d = !0))
                        }
                        if (1 === e ? a(i) : c && 7 === e ? c(i) : 1000 === e && (d = !0), (i = i.rules) && !d) {
                            d = 0, e = i.length;
                            for (var h; d < e && (h = i[d]); d++) m(h, a, c, b)
                        }
                    }
                }

                function n(g, a) {
                    var c = g.indexOf("var(");
                    if (-1 === c) return a(g, "", "", "");
                    a: {
                        for (var b = 0, d = c + 3, e = g.length; d < e; d++)
                            if ("(" === g[d]) b++;
                            else if (")" === g[d] && 0 === --b) break a;d = -1
                    }
                    return b = g.substring(c + 4, d), c = g.substring(0, c), g = n(g.substring(d + 1), a), d = b.indexOf(","), -1 === d ? a(c, b.trim(), "", g) : a(c, b.substring(0, d).trim(), b.substring(d + 1).trim(), g)
                }

                function o() {
                    this.a = {}
                }

                function p() {
                    this.b = this.c = null, this.a = new o
                }

                function q(d, a) {
                    return a = a.replace(G, function(a, b, c, e) {
                        return w(d, a, b, c, e)
                    }), s(d, a)
                }

                function s(i, a) {
                    for (var c; c = H.exec(a);) {
                        var b = c[0],
                            d = c[1];
                        c = c.index;
                        var e = a.slice(0, c + b.indexOf("@apply"));
                        a = a.slice(c + b.length);
                        var f = t(i, e);
                        b = void 0;
                        var h = i;
                        d = d.replace(J, "");
                        var g = [],
                            j = h.a.get(d);
                        if (j || (h.a.set(d, {}), j = h.a.get(d)), j) {
                            h.c && (j.i[h.c] = !0);
                            var k = j.h;
                            for (b in k) h = f && f[b], j = [b, ": var(", d, "_-_", b], h && j.push(",", h.replace(W, "")), j.push(")"), W.test(k[b]) && j.push(" !important"), g.push(j.join(""))
                        }
                        b = g.join("; "), a = "" + e + b + a, H.lastIndex = c + b.length
                    }
                    return a
                }

                function t(i, a) {
                    a = a.split(";");
                    for (var c, b, d, h = {}, e = 0; e < a.length; e++)
                        if ((c = a[e]) && (d = c.split(":"), 1 < d.length)) {
                            c = d[0].trim();
                            var f = i;
                            b = c, d = d.slice(1).join(":");
                            var g = V.exec(d);
                            g && (g[1] ? (f.b || (f.b = document.createElement("meta"), f.b.setAttribute("apply-shim-measure", ""), f.b.style.all = "initial", document.head.appendChild(f.b)), b = window.getComputedStyle(f.b).getPropertyValue(b)) : b = "apply-shim-inherit", d = b), b = d, h[c] = b
                        } return h
                }

                function A(d, a) {
                    if (O)
                        for (var c in a.i) c !== d.c && O(c)
                }

                function w(i, a, c, b, d) {
                    if (b && n(b, function(a, c) {
                            c && i.a.get(c) && (d = "@apply " + c + ";")
                        }), !d) return a;
                    var e = s(i, "" + d),
                        f = a.slice(0, a.indexOf("--")),
                        h = e = t(i, e),
                        g = i.a.get(c),
                        j = g && g.h;
                    j ? h = Object.assign(Object.create(j), e) : i.a.set(c, h);
                    var k, l = [],
                        m = !1;
                    for (k in h) {
                        var o = e[k];
                        void 0 === o && (o = "initial"), !j || k in j || (m = !0), l.push("" + c + "_-_" + k + ": " + o)
                    }
                    return m && A(i, g), g && (g.h = h), b && (f = a + ";" + f), "" + f + l.join("; ") + ";"
                }

                function B() {
                    this.a = null, Q.invalidCallback = a
                }

                function E(b) {
                    b.a || (b.a = window.ShadyCSS.CustomStyleInterface, b.a && (b.a.transformCallback = function(b) {
                        Q.f(b)
                    }, b.a.validateCallback = function() {
                        requestAnimationFrame(function() {
                            b.a.enqueued && b.flushCustomStyles()
                        })
                    }))
                }
                var F, D = {},
                    k = 1,
                    z = 7,
                    x = 4,
                    v = 1E3,
                    y = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,
                    r = /@import[^;]*;/gim,
                    K = /(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,
                    L = /(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,
                    M = /@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,
                    N = /[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,
                    P = /^@[^\s]*keyframes/,
                    R = /\s+/g,
                    u = Promise.resolve(),
                    S = !(window.ShadyDOM && window.ShadyDOM.inUse);
                window.ShadyCSS && void 0 !== window.ShadyCSS.nativeCss ? F = window.ShadyCSS.nativeCss : window.ShadyCSS ? (f(window.ShadyCSS), window.ShadyCSS = void 0) : f(window.WebComponents && window.WebComponents.flags);
                var C = F,
                    G = /(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,
                    H = /(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,
                    I = /@media\s(.*)/,
                    T = new Set,
                    J = /;\s*/m,
                    V = /^\s*(initial)|(inherit)\s*$/,
                    W = /\s*!important/;
                o.prototype.set = function(b, a) {
                    b = b.trim(), this.a[b] = {
                        h: a,
                        i: {}
                    }
                }, o.prototype.get = function(b) {
                    return b = b.trim(), this.a[b] || null
                };
                var O = null;
                p.prototype.o = function(b) {
                    return b = H.test(b) || G.test(b), H.lastIndex = 0, G.lastIndex = 0, b
                }, p.prototype.m = function(g, a) {
                    if (void 0 === g.a) {
                        for (var c, f = [], b = g.content.querySelectorAll("style"), d = 0; d < b.length; d++)
                            if (c = b[d], !c.hasAttribute("shady-unscoped")) f.push(c.textContent), c.parentNode.removeChild(c);
                            else if (!S) {
                            var e = c.textContent;
                            T.has(e) || (T.add(e), e = c.cloneNode(!0), document.head.appendChild(e)), c.parentNode.removeChild(c)
                        }(f = f.join("").trim()) ? (b = document.createElement("style"), b.textContent = f, g.content.insertBefore(b, g.content.firstChild), f = b) : f = null, g.a = f
                    }
                    return (g = g.a) ? this.j(g, a) : null
                }, p.prototype.j = function(d, a) {
                    a = void 0 === a ? "" : a;
                    var c = l(d);
                    return this.l(c, a), d.textContent = h(c), c
                }, p.prototype.f = function(d) {
                    var e = this,
                        a = l(d);
                    return m(a, function(b) {
                        ":root" === b.selector && (b.selector = "html"), e.g(b)
                    }), d.textContent = h(a), a
                }, p.prototype.l = function(d, a) {
                    var c = this;
                    this.c = a, m(d, function(b) {
                        c.g(b)
                    }), this.c = null
                }, p.prototype.g = function(b) {
                    b.cssText = q(this, b.parsedCssText), ":root" === b.selector && (b.selector = ":host > *")
                }, p.prototype.detectMixin = p.prototype.o, p.prototype.transformStyle = p.prototype.j, p.prototype.transformCustomStyle = p.prototype.f, p.prototype.transformRules = p.prototype.l, p.prototype.transformRule = p.prototype.g, p.prototype.transformTemplate = p.prototype.m, p.prototype._separator = "_-_", Object.defineProperty(p.prototype, "invalidCallback", {
                    get: function() {
                        return O
                    },
                    set: function(b) {
                        O = b
                    }
                });
                var Q = new p;
                if (B.prototype.prepareTemplate = function(b, a) {
                        E(this), D[a] = b, a = Q.m(b, a), b._styleAst = a
                    }, B.prototype.flushCustomStyles = function() {
                        if (E(this), this.a) {
                            var d = this.a.processStyles();
                            if (this.a.enqueued) {
                                for (var a, b = 0; b < d.length; b++) a = this.a.getStyleForCustomStyle(d[b]), a && Q.f(a);
                                this.a.enqueued = !1
                            }
                        }
                    }, B.prototype.styleSubtree = function(d, a) {
                        if (E(this), a)
                            for (var c in a) null === c ? d.style.removeProperty(c) : d.style.setProperty(c, a[c]);
                        if (d.shadowRoot)
                            for (this.styleElement(d), d = d.shadowRoot.children || d.shadowRoot.childNodes, a = 0; a < d.length; a++) this.styleSubtree(d[a]);
                        else
                            for (d = d.children || d.childNodes, a = 0; a < d.length; a++) this.styleSubtree(d[a])
                    }, B.prototype.styleElement = function(f) {
                        E(this);
                        var a, b = f.localName;
                        a = b ? -1 < b.indexOf("-") ? b : f.getAttribute && f.getAttribute("is") || "" : f.is, (b = D[a]) && !d(b) && ((d(b) || b._applyShimValidatingVersion !== b._applyShimNextVersion) && (this.prepareTemplate(b, a), e(b)), (f = f.shadowRoot) && (f = f.querySelector("style")) && (f.__cssRules = b._styleAst, f.textContent = h(b._styleAst)))
                    }, B.prototype.styleDocument = function(b) {
                        E(this), this.styleSubtree(document.body, b)
                    }, !window.ShadyCSS || !window.ShadyCSS.ScopingShim) {
                    var U = new B,
                        X = window.ShadyCSS && window.ShadyCSS.CustomStyleInterface;
                    window.ShadyCSS = {
                        prepareTemplate: function(b, a) {
                            U.flushCustomStyles(), U.prepareTemplate(b, a)
                        },
                        styleSubtree: function(b, a) {
                            U.flushCustomStyles(), U.styleSubtree(b, a)
                        },
                        styleElement: function(b) {
                            U.flushCustomStyles(), U.styleElement(b)
                        },
                        styleDocument: function(b) {
                            U.flushCustomStyles(), U.styleDocument(b)
                        },
                        getComputedStyleValue: function(b, a) {
                            return (b = window.getComputedStyle(b).getPropertyValue(a)) ? b.trim() : ""
                        },
                        flushCustomStyles: function() {
                            U.flushCustomStyles()
                        },
                        nativeCss: C,
                        nativeShadow: S
                    }, X && (window.ShadyCSS.CustomStyleInterface = X)
                }
                window.ShadyCSS.ApplyShim = Q
            }).call(this);
        </script>
        <script>
            (function() {
                "use strict";
                const a = window.Polymer;
                window.Polymer = function(a) {
                    return window.Polymer._polymerFn(a)
                }, a && Object.assign(Polymer, a), window.Polymer._polymerFn = function() {
                    throw new Error("Load polymer.html to use the Polymer() function.")
                }, window.Polymer.version = "2.0.0", window.JSCompiler_renameProperty = function(a) {
                    return a
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a) {
                    return function(b) {
                        a.__mixinApplications || (a.__mixinApplications = new WeakMap);
                        let c = a.__mixinApplications,
                            d = c.get(b);
                        return d || (d = a(b), c.set(b, d)), d
                    }
                }
                let b = 0;
                Polymer.dedupingMixin = function(c) {
                    return c = a(c), c.__dedupeId = ++b,
                        function(a) {
                            let b = a.__mixinSet;
                            if (b && b[c.__dedupeId]) return a;
                            let d = c(a);
                            return d.__mixinSet = Object.create(d.__mixinSet || b || null), d.__mixinSet[c.__dedupeId] = !0, d
                        }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                const a = {},
                    b = /-[a-z]/g,
                    c = /([A-Z])/g,
                    d = {
                        dashToCamelCase(c) {
                            return a[c] || (a[c] = 0 > c.indexOf("-") ? c : c.replace(b, a => a[1].toUpperCase()))
                        },
                        camelToDashCase(b) {
                            return a[b] || (a[b] = b.replace(c, "-$1").toLowerCase())
                        }
                    };
                Polymer.CaseMap = d
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a, d) {
                    if (a && e.test(a)) return a;
                    if (void 0 === b) {
                        b = !1;
                        try {
                            const a = new URL("b", "http://a");
                            a.pathname = "c%20d", b = "http://a/c%20d" === a.href
                        } catch (a) {}
                    }
                    return (d || (d = document.baseURI || window.location.href), b) ? new URL(a, d).href : (c || (c = document.implementation.createHTMLDocument("temp"), c.base = c.createElement("base"), c.head.appendChild(c.base), c.anchor = c.createElement("a"), c.body.appendChild(c.anchor)), c.base.href = d, c.anchor.href = a, c.anchor.href || a)
                }
                let b, c, d = /(url\()([^)]*)(\))/g,
                    e = /(^\/)|(^#)|(^[\w-\d]*:)/;
                Polymer.ResolveUrl = {
                    resolveCss: function(b, c) {
                        return b.replace(d, function(b, d, e, f) {
                            return d + "'" + a(e.replace(/["']/g, ""), c) + "'" + f
                        })
                    },
                    resolveUrl: a,
                    pathFromUrl: function(a) {
                        return a.substring(0, a.lastIndexOf("/") + 1)
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a) {
                    return Polymer.DomModule ? Polymer.DomModule.import(a) : null
                }
                const b = {
                    cssFromModules(a) {
                        let b = a.trim().split(" "),
                            c = "";
                        for (let d = 0; d < b.length; d++) c += this.cssFromModule(b[d]);
                        return c
                    },
                    cssFromModule(b) {
                        let c = a(b);
                        if (c && void 0 === c._cssText) {
                            let a = "",
                                d = c.querySelector("template");
                            d && (a += this.cssFromTemplate(d, c.assetpath)), a += this.cssFromModuleImports(b), c._cssText = a || null
                        }
                        return c || console.warn("Could not find style data in module named", b), c && c._cssText || ""
                    },
                    cssFromTemplate(a, b) {
                        let c = "",
                            d = a.content.querySelectorAll("style");
                        for (let f = 0; f < d.length; f++) {
                            let a = d[f],
                                e = a.getAttribute("include");
                            e && (c += this.cssFromModules(e)), a.parentNode.removeChild(a), c += b ? Polymer.ResolveUrl.resolveCss(a.textContent, b) : a.textContent
                        }
                        return c
                    },
                    cssFromModuleImports(b) {
                        let c = "",
                            d = a(b);
                        if (!d) return c;
                        let e = d.querySelectorAll("link[rel=import][type~=css]");
                        for (let a, d = 0; d < e.length; d++)
                            if (a = e[d], a.import) {
                                let b = a.import,
                                    d = b.body ? b.body : b;
                                c += Polymer.ResolveUrl.resolveCss(d.textContent, b.baseURI)
                            } return c
                    }
                };
                Polymer.StyleGather = b
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a) {
                    return c[a] || d[a.toLowerCase()]
                }

                function b(a) {
                    a.querySelector("style") && console.warn("dom-module %s has style outside template", a.id)
                }
                let c = {},
                    d = {};
                class e extends HTMLElement {
                    static get observedAttributes() {
                        return ["id"]
                    }
                    static
                    import(b, c) {
                        if (b) {
                            let d = a(b);
                            return d && c ? d.querySelector(c) : d
                        }
                        return null
                    }
                    attributeChangedCallback(a, b, c) {
                        b !== c && this.register()
                    }
                    get assetpath() {
                        if (!this.__assetpath) {
                            const a = window.HTMLImports && HTMLImports.importForElement ? HTMLImports.importForElement(this) || document : this.ownerDocument,
                                b = Polymer.ResolveUrl.resolveUrl(this.getAttribute("assetpath") || "", a.baseURI);
                            this.__assetpath = Polymer.ResolveUrl.pathFromUrl(b)
                        }
                        return this.__assetpath
                    }
                    register(a) {
                        a = a || this.id, a && (this.id = a, c[a] = this, d[a.toLowerCase()] = this, b(this))
                    }
                }
                e.prototype.modules = c, customElements.define("dom-module", e), Polymer.DomModule = e
            })();
        </script>
        <script>
            (function() {
                "use strict";
                const a = {
                    isPath: function(a) {
                        return 0 <= a.indexOf(".")
                    },
                    root: function(a) {
                        let b = a.indexOf(".");
                        return -1 === b ? a : a.slice(0, b)
                    },
                    isAncestor: function(a, b) {
                        return 0 === a.indexOf(b + ".")
                    },
                    isDescendant: function(a, b) {
                        return 0 === b.indexOf(a + ".")
                    },
                    translate: function(a, b, c) {
                        return b + c.slice(a.length)
                    },
                    matches: function(a, b) {
                        return a === b || this.isAncestor(a, b) || this.isDescendant(a, b)
                    },
                    normalize: function(a) {
                        if (Array.isArray(a)) {
                            let b = [];
                            for (let c, d = 0; d < a.length; d++) {
                                c = a[d].toString().split(".");
                                for (let a = 0; a < c.length; a++) b.push(c[a])
                            }
                            return b.join(".")
                        }
                        return a
                    },
                    split: function(a) {
                        return Array.isArray(a) ? this.normalize(a).split(".") : a.toString().split(".")
                    },
                    get: function(a, b, c) {
                        let d = a,
                            e = this.split(b);
                        for (let f = 0; f < e.length; f++) {
                            if (!d) return;
                            let a = e[f];
                            d = d[a]
                        }
                        return c && (c.path = e.join(".")), d
                    },
                    set: function(a, b, c) {
                        let d = a,
                            e = this.split(b),
                            f = e[e.length - 1];
                        if (1 < e.length) {
                            for (let a, b = 0; b < e.length - 1; b++)
                                if (a = e[b], d = d[a], !d) return;
                            d[f] = c
                        } else d[b] = c;
                        return e.join(".")
                    }
                };
                a.isDeep = a.isPath, Polymer.Path = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = 0,
                    b = 0,
                    c = [],
                    d = 0,
                    e = document.createTextNode("");
                new window.MutationObserver(function() {
                    const a = c.length;
                    for (let b, d = 0; d < a; d++)
                        if (b = c[d], b) try {
                            b()
                        } catch (a) {
                            setTimeout(() => {
                                throw a
                            })
                        }
                    c.splice(0, a), b += a
                }).observe(e, {
                    characterData: !0
                }), Polymer.Async = {
                    timeOut: {
                        after(a) {
                            return {
                                run(b) {
                                    return setTimeout(b, a)
                                },
                                cancel: window.clearTimeout.bind(window)
                            }
                        },
                        run: window.setTimeout.bind(window),
                        cancel: window.clearTimeout.bind(window)
                    },
                    animationFrame: {
                        run: window.requestAnimationFrame.bind(window),
                        cancel: window.cancelAnimationFrame.bind(window)
                    },
                    idlePeriod: {
                        run(a) {
                            return window.requestIdleCallback ? window.requestIdleCallback(a) : window.setTimeout(a, 16)
                        },
                        cancel(a) {
                            window.cancelIdleCallback ? window.cancelIdleCallback(a) : window.clearTimeout(a)
                        }
                    },
                    microTask: {
                        run(b) {
                            return e.textContent = d++, c.push(b), a++
                        },
                        cancel(a) {
                            const d = a - b;
                            if (0 <= d) {
                                if (!c[d]) throw new Error("invalid async handle: " + a);
                                c[d] = null
                            }
                        }
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a, b) {
                    if (!d[b]) {
                        let c = a[b];
                        c !== void 0 && (a.__data ? a._setPendingProperty(b, c) : (a.__dataProto ? !a.hasOwnProperty(JSCompiler_renameProperty("__dataProto", a)) && (a.__dataProto = Object.create(a.__dataProto)) : a.__dataProto = {}, a.__dataProto[b] = c))
                    }
                }
                let b = Polymer.CaseMap,
                    c = Polymer.Async.microTask;
                const d = {};
                for (let a = HTMLElement.prototype; a;) {
                    let b = Object.getOwnPropertyNames(a);
                    for (let a = 0; a < b.length; a++) d[b[a]] = !0;
                    a = Object.getPrototypeOf(a)
                }
                Polymer.PropertyAccessors = Polymer.dedupingMixin(d => {
                    return class extends d {
                        static createPropertiesForAttributes() {
                            let a = this.observedAttributes;
                            for (let c = 0; c < a.length; c++) this.prototype._createPropertyAccessor(b.dashToCamelCase(a[c]))
                        }
                        constructor() {
                            super(), this._initializeProperties()
                        }
                        attributeChangedCallback(a, b, c) {
                            b !== c && this._attributeToProperty(a, c)
                        }
                        _initializeProperties() {
                            for (let a in this.__serializing = !1, this.__dataCounter = 0, this.__dataEnabled = !1, this.__dataInitialized = !1, this.__dataInvalid = !1, this.__data = {}, this.__dataPending = null, this.__dataOld = null, this.__dataProto && (this._initializeProtoProperties(this.__dataProto), this.__dataProto = null), this.__dataHasAccessor) this.hasOwnProperty(a) && (this.__dataInstanceProps = this.__dataInstanceProps || {}, this.__dataInstanceProps[a] = this[a], delete this[a])
                        }
                        _initializeProtoProperties(a) {
                            for (let b in a) this._setProperty(b, a[b])
                        }
                        _initializeInstanceProperties(a) {
                            Object.assign(this, a)
                        }
                        _ensureAttribute(a, b) {
                            this.hasAttribute(a) || this._valueToNodeAttribute(this, b, a)
                        }
                        _attributeToProperty(a, c, d) {
                            if (!this.__serializing) {
                                let e = b.dashToCamelCase(a);
                                this[e] = this._deserializeValue(c, d)
                            }
                        }
                        _propertyToAttribute(a, c, d) {
                            this.__serializing = !0, d = 3 > arguments.length ? this[a] : d, this._valueToNodeAttribute(this, d, c || b.camelToDashCase(a)), this.__serializing = !1
                        }
                        _valueToNodeAttribute(a, b, c) {
                            let d = this._serializeValue(b);
                            d === void 0 ? a.removeAttribute(c) : a.setAttribute(c, d)
                        }
                        _serializeValue(a) {
                            switch (typeof a) {
                                case "boolean":
                                    return a ? "" : void 0;
                                case "object":
                                    if (a instanceof Date) return a.toString();
                                    if (a) try {
                                        return JSON.stringify(a)
                                    } catch (a) {
                                        return ""
                                    }
                                    default: return null == a ? void 0 : a.toString();
                            }
                        }
                        _deserializeValue(a, b) {
                            let c;
                            switch (b) {
                                case Number:
                                    c = +a;
                                    break;
                                case Boolean:
                                    c = null !== a;
                                    break;
                                case Object:
                                    try {
                                        c = JSON.parse(a)
                                    } catch (a) {}
                                    break;
                                case Array:
                                    try {
                                        c = JSON.parse(a)
                                    } catch (b) {
                                        c = null, console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${a}`)
                                    }
                                    break;
                                case Date:
                                    c = new Date(a);
                                    break;
                                case String:
                                default:
                                    c = a;
                            }
                            return c
                        }
                        _createPropertyAccessor(b, c) {
                            this.hasOwnProperty("__dataHasAccessor") || (this.__dataHasAccessor = Object.assign({}, this.__dataHasAccessor)), this.__dataHasAccessor[b] || (this.__dataHasAccessor[b] = !0, a(this, b), Object.defineProperty(this, b, {
                                get: function() {
                                    return this.__data[b]
                                },
                                set: c ? function() {} : function(a) {
                                    this._setProperty(b, a)
                                }
                            }))
                        }
                        _hasAccessor(a) {
                            return this.__dataHasAccessor && this.__dataHasAccessor[a]
                        }
                        _setProperty(a, b) {
                            this._setPendingProperty(a, b) && this._invalidateProperties()
                        }
                        _setPendingProperty(a, b) {
                            let c = this.__data[a];
                            if (this._shouldPropertyChange(a, b, c)) return this.__dataPending || (this.__dataPending = {}, this.__dataOld = {}), a in this.__dataOld || (this.__dataOld[a] = c), this.__data[a] = b, this.__dataPending[a] = b, !0
                        }
                        _isPropertyPending(a) {
                            return this.__dataPending && a in this.__dataPending
                        }
                        _invalidateProperties() {
                            !this.__dataInvalid && this.__dataInitialized && (this.__dataInvalid = !0, c.run(() => {
                                this.__dataInvalid && (this.__dataInvalid = !1, this._flushProperties())
                            }))
                        }
                        _enableProperties() {
                            this.__dataEnabled || (this.__dataEnabled = !0, this.__dataInstanceProps && (this._initializeInstanceProperties(this.__dataInstanceProps), this.__dataInstanceProps = null), this.ready())
                        }
                        _flushProperties() {
                            if (this.__dataPending) {
                                let a = this.__dataPending;
                                this.__dataPending = null, this.__dataCounter++, this._propertiesChanged(this.__data, a, this.__dataOld), this.__dataCounter--
                            }
                        }
                        ready() {
                            this.__dataInitialized = !0, this._flushProperties()
                        }
                        _propertiesChanged() {}
                        _shouldPropertyChange(a, b, c) {
                            return c !== b && (c === c || b === b)
                        }
                    }
                })
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a) {
                    let b = a.getAttribute("is");
                    if (b && g[b]) {
                        let c = a;
                        for (c.removeAttribute("is"), a = c.ownerDocument.createElement(b), c.parentNode.replaceChild(a, c), a.appendChild(c); c.attributes.length;) a.setAttribute(c.attributes[0].name, c.attributes[0].value), c.removeAttribute(c.attributes[0].name)
                    }
                    return a
                }

                function b(a, c) {
                    let d = c.parentInfo && b(a, c.parentInfo);
                    if (d) {
                        for (let a = d.firstChild, b = 0; a; a = a.nextSibling)
                            if (c.parentIndex === b++) return a;
                    } else return a
                }

                function c(a, b, c, d) {
                    d.id && (b[d.id] = c)
                }

                function d(a, b, c) {
                    if (c.events && c.events.length)
                        for (let d, e = 0, f = c.events; e < f.length && (d = f[e]); e++) a._addMethodEventListenerToNode(b, d.name, d.value, a)
                }

                function e(a, b, c) {
                    c.templateInfo && (b._templateInfo = c.templateInfo)
                }

                function f(a, b, c) {
                    a = a._methodHost || a;
                    let d = function(b) {
                        a[c] ? a[c](b, b.detail) : console.warn("listener method `" + c + "` not defined")
                    };
                    return d
                }
                const g = {
                    "dom-if": !0,
                    "dom-repeat": !0
                };
                Polymer.TemplateStamp = Polymer.dedupingMixin(g => {
                    return class extends g {
                        static _parseTemplate(a, b) {
                            if (!a._templateInfo) {
                                let c = a._templateInfo = {};
                                c.nodeInfoList = [], c.stripWhiteSpace = b && b.stripWhiteSpace || a.hasAttribute("strip-whitespace"), this._parseTemplateContent(a, c, {
                                    parent: null
                                })
                            }
                            return a._templateInfo
                        }
                        static _parseTemplateContent(a, b, c) {
                            return this._parseTemplateNode(a.content, b, c)
                        }
                        static _parseTemplateNode(a, b, c) {
                            let d;
                            return "template" != a.localName || a.hasAttribute("preserve-content") ? "slot" === a.localName && (b.hasInsertionPoint = !0) : d = this._parseTemplateNestedTemplate(a, b, c) || d, a.firstChild && (d = this._parseTemplateChildNodes(a, b, c) || d), a.hasAttributes && a.hasAttributes() && (d = this._parseTemplateNodeAttributes(a, b, c) || d), d
                        }
                        static _parseTemplateChildNodes(b, c, d) {
                            for (let e, f = b.firstChild, g = 0; f; f = e) {
                                if ("template" == f.localName && (f = a(f)), e = f.nextSibling, f.nodeType === Node.TEXT_NODE) {
                                    for (let a = e; a && a.nodeType === Node.TEXT_NODE;) f.textContent += a.textContent, e = a.nextSibling, b.removeChild(a), a = e;
                                    if (c.stripWhiteSpace && !f.textContent.trim()) {
                                        b.removeChild(f);
                                        continue
                                    }
                                }
                                let h = {
                                    parentIndex: g,
                                    parentInfo: d
                                };
                                this._parseTemplateNode(f, c, h) && (h.infoIndex = c.nodeInfoList.push(h) - 1), f.parentNode && g++
                            }
                        }
                        static _parseTemplateNestedTemplate(a, b, c) {
                            let d = this._parseTemplate(a, b),
                                e = d.content = a.content.ownerDocument.createDocumentFragment();
                            return e.appendChild(a.content), c.templateInfo = d, !0
                        }
                        static _parseTemplateNodeAttributes(b, c, d) {
                            let e, f = Array.from(b.attributes);
                            for (let g, a = f.length - 1; g = f[a]; a--) e = this._parseTemplateNodeAttribute(b, c, d, g.name, g.value) || e;
                            return e
                        }
                        static _parseTemplateNodeAttribute(a, b, c, d, e) {
                            return "on-" === d.slice(0, 3) ? (a.removeAttribute(d), c.events = c.events || [], c.events.push({
                                name: d.slice(3),
                                value: e
                            }), !0) : "id" === d ? (c.id = e, !0) : void 0
                        }
                        static _contentForTemplate(a) {
                            let b = a.__templateInfo;
                            return b && b.content || a.content
                        }
                        _stampTemplate(a) {
                            a && !a.content && window.HTMLTemplateElement && HTMLTemplateElement.decorate && HTMLTemplateElement.decorate(a);
                            let f = this.constructor._parseTemplate(a),
                                g = f.nodeInfoList,
                                h = f.content || a.content,
                                j = document.importNode(h, !0);
                            j.__noInsertionPoint = !f.hasInsertionPoint;
                            let k = j.nodeList = Array(g.length);
                            j.$ = {};
                            for (let f, h, m = 0, i = g.length; m < i && (f = g[m]); m++) h = k[m] = b(j, f), c(this, j.$, h, f), e(this, h, f), d(this, h, f);
                            return j
                        }
                        _addMethodEventListenerToNode(a, b, c, d) {
                            d = d || a;
                            let e = f(d, b, c);
                            return this._addEventListenerToNode(a, b, e), e
                        }
                        _addEventListenerToNode(a, b, c) {
                            a.addEventListener(b, c)
                        }
                        _removeEventListenerFromNode(a, b, c) {
                            a.removeEventListener(b, c)
                        }
                    }
                })
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function e(e, t) {
                    let a = e[t];
                    if (!a) a = e[t] = {};
                    else if (!e.hasOwnProperty(t))
                        for (let n in a = e[t] = Object.create(e[t]), a) {
                            let e = a[n],
                                t = a[n] = Array(e.length);
                            for (let a = 0; a < e.length; a++) t[a] = e[a]
                        }
                    return a
                }

                function t(e, t, n, r, o, d) {
                    if (t) {
                        let i = !1,
                            s = R++;
                        for (let p in n) a(e, t, s, p, n, r, o, d) && (i = !0);
                        return i
                    }
                    return !1
                }

                function a(e, t, a, r, o, d, s, p) {
                    let _ = !1,
                        i = s ? Polymer.Path.root(r) : r,
                        h = t[i];
                    if (h)
                        for (let t, g = 0, i = h.length; g < i && (t = h[g]); g++) t.info && t.info.lastRun === a || s && !n(r, t.trigger) || (t.info && (t.info.lastRun = a), t.fn(e, r, o, d, t.info, s, p), _ = !0);
                    return _
                }

                function n(e, t) {
                    if (t) {
                        let a = t.name;
                        return a == e || t.structured && Polymer.Path.isAncestor(a, e) || t.wildcard && Polymer.Path.isDescendant(a, e)
                    }
                    return !0
                }

                function r(e, t, a, n, r) {
                    let o = e[r.methodName],
                        d = r.property;
                    o ? o.call(e, e.__data[d], n[d]) : !r.dynamicFn && console.warn("observer method `" + r.methodName + "` not defined")
                }

                function o(e, t, n, r, o) {
                    let i, s = e.__notifyEffects,
                        p = R++;
                    for (let _ in t) t[_] && (s && a(e, s, p, _, n, r, o) ? i = !0 : o && d(e, _, n) && (i = !0));
                    let _;
                    i && (_ = e.__dataHost) && _._invalidateProperties && _._invalidateProperties()
                }

                function d(e, t, a) {
                    let n = Polymer.Path.root(t);
                    if (n !== t) {
                        let r = Polymer.CaseMap.camelToDashCase(n) + "-changed";
                        return i(e, r, a[t], t), !0
                    }
                }

                function i(e, t, a, n) {
                    let r = {
                        value: a,
                        queueProperty: !0
                    };
                    n && (r.path = n), e.dispatchEvent(new CustomEvent(t, {
                        detail: r
                    }))
                }

                function s(e, t, a, n, r, o) {
                    let d = o ? Polymer.Path.root(t) : t,
                        s = d == t ? null : t,
                        p = s ? Polymer.Path.get(e, s) : e.__data[t];
                    s && p === void 0 && (p = a[t]), i(e, r.eventName, p, s)
                }

                function p(e, t, a, n, r) {
                    let o, d = e.detail,
                        i = d && d.path;
                    i ? (n = Polymer.Path.translate(a, n, i), o = d && d.value) : o = e.target[a], o = r ? !o : o, t.__readOnly && t.__readOnly[n] || !t._setPendingPropertyOrPath(n, o, !0, !!i) || d && d.queueProperty || t._invalidateProperties()
                }

                function _(e, t, a, n, r) {
                    let o = e.__data[t];
                    Polymer.sanitizeDOMValue && (o = Polymer.sanitizeDOMValue(o, r.attrName, "attribute", e)), e._propertyToAttribute(t, r.attrName, o)
                }

                function l(e, a, n, r) {
                    let o = e.__computeEffects;
                    if (o)
                        for (let d = a; t(e, o, d, n, r);) Object.assign(n, e.__dataOld), Object.assign(a, e.__dataPending), d = e.__dataPending, e.__dataPending = null
                }

                function h(e, t, a, n, r) {
                    let o = v(e, t, a, n, r),
                        d = r.methodInfo;
                    e.__dataHasAccessor && e.__dataHasAccessor[d] ? e._setPendingProperty(d, o, !0) : e[d] = o
                }

                function g(e, t, n) {
                    let r = e.__dataLinkedPaths;
                    if (r) {
                        let o;
                        for (let d in r) {
                            let a = r[d];
                            Polymer.Path.isDescendant(d, t) ? (o = Polymer.Path.translate(d, a, t), e._setPendingPropertyOrPath(o, n, !0, !0)) : Polymer.Path.isDescendant(a, t) && (o = Polymer.Path.translate(a, d, t), e._setPendingPropertyOrPath(o, n, !0, !0))
                        }
                    }
                }

                function f(e, t, a, n, r, o, d) {
                    a.bindings = a.bindings || [];
                    let s = {
                        kind: n,
                        target: r,
                        parts: o,
                        literal: d,
                        isCompound: 1 !== o.length
                    };
                    if (a.bindings.push(s), y(s)) {
                        let {
                            event: e,
                            negate: t
                        } = s.parts[0];
                        s.listenerEvent = e || z.camelToDashCase(r) + "-changed", s.listenerNegate = t
                    }
                    let p = t.nodeInfoList.length;
                    for (let _, l = 0; l < s.parts.length; l++) _ = s.parts[l], _.compoundIndex = l, P(e, t, s, _, p)
                }

                function P(e, t, a, n, r) {
                    if (!n.literal)
                        if ("attribute" === a.kind && "-" === a.target[0]) console.warn("Cannot set attribute " + a.target + " because \"-\" is not a valid attribute starting character");
                        else {
                            let o = n.dependencies,
                                d = {
                                    index: r,
                                    binding: a,
                                    part: n,
                                    evaluator: e
                                };
                            for (let a, n = 0; n < o.length; n++) a = o[n], "string" == typeof a && (a = x(a), a.wildcard = !0), e._addTemplatePropertyEffect(t, a.rootProperty, {
                                fn: c,
                                info: d,
                                trigger: a
                            })
                        }
                }

                function c(e, t, a, n, r, o, d) {
                    let i = d[r.index],
                        s = r.binding,
                        p = r.part;
                    if (o && p.source && t.length > p.source.length && "property" == s.kind && !s.isCompound && i.__dataHasAccessor && i.__dataHasAccessor[s.target]) {
                        let n = a[t];
                        t = Polymer.Path.translate(p.source, s.target, t), i._setPendingPropertyOrPath(t, n, !1, !0) && e._enqueueClient(i)
                    } else {
                        let d = r.evaluator._evaluateBinding(e, p, t, a, n, o);
                        u(e, i, s, p, d)
                    }
                }

                function u(e, t, a, n, r) {
                    if (r = m(t, r, a, n), Polymer.sanitizeDOMValue && (r = Polymer.sanitizeDOMValue(r, a.target, a.kind, t)), "attribute" == a.kind) e._valueToNodeAttribute(t, r, a.target);
                    else {
                        let n = a.target;
                        t.__dataHasAccessor && t.__dataHasAccessor[n] ? (!t.__readOnly || !t.__readOnly[n]) && t._setPendingProperty(n, r) && e._enqueueClient(t) : e._setUnmanagedPropertyToNode(t, n, r)
                    }
                }

                function m(e, t, a, n) {
                    if (a.isCompound) {
                        let r = e.__dataCompoundStorage[a.target];
                        r[n.compoundIndex] = t, t = r.join("")
                    }
                    return "attribute" !== a.kind && ("textContent" === a.target || "input" == e.localName && "value" == a.target) && (t = void 0 == t ? "" : t), t
                }

                function y(e) {
                    return e.target && "attribute" != e.kind && "text" != e.kind && !e.isCompound && "{" === e.parts[0].mode
                }

                function E(e, t) {
                    let {
                        nodeList: a,
                        nodeInfoList: n
                    } = t;
                    if (n.length)
                        for (let t = 0; t < n.length; t++) {
                            let r = n[t],
                                o = a[t],
                                d = r.bindings;
                            if (d)
                                for (let t, a = 0; a < d.length; a++) t = d[a], C(o, t), T(o, e, t);
                            o.__dataHost = e
                        }
                }

                function C(e, t) {
                    if (t.isCompound) {
                        let a = e.__dataCompoundStorage || (e.__dataCompoundStorage = {}),
                            n = t.parts,
                            r = Array(n.length);
                        for (let e = 0; e < n.length; e++) r[e] = n[e].literal;
                        let o = t.target;
                        a[o] = r, t.literal && "property" == t.kind && (e[o] = t.literal)
                    }
                }

                function T(e, t, a) {
                    if (a.listenerEvent) {
                        let n = a.parts[0];
                        e.addEventListener(a.listenerEvent, function(r) {
                            p(r, t, a.target, n.source, n.negate)
                        })
                    }
                }

                function O(e, t, a, n, r, o) {
                    o = t.static || o && ("object" !== typeof o || o[t.methodName]);
                    let d = {
                        methodName: t.methodName,
                        args: t.args,
                        methodInfo: r,
                        dynamicFn: o
                    };
                    for (let s, p = 0; p < t.args.length && (s = t.args[p]); p++) s.literal || e._addPropertyEffect(s.rootProperty, a, {
                        fn: n,
                        info: d,
                        trigger: s
                    });
                    o && e._addPropertyEffect(t.methodName, a, {
                        fn: n,
                        info: d
                    })
                }

                function v(e, t, a, n, r) {
                    let o = e._methodHost || e,
                        d = o[r.methodName];
                    if (d) {
                        let n = A(e.__data, r.args, t, a);
                        return d.apply(o, n)
                    }
                    r.dynamicFn || console.warn("method `" + r.methodName + "` not defined")
                }

                function b(e) {
                    let t = "";
                    for (let a, n = 0; n < e.length; n++) a = e[n].literal, t += a || "";
                    return t
                }

                function N(e) {
                    let t = e.match(/([^\s]+?)\(([\s\S]*)\)/);
                    if (t) {
                        let e = t[1],
                            a = {
                                methodName: e,
                                static: !0
                            };
                        if (t[2].trim()) {
                            let e = t[2].replace(/\\,/g, "&comma;").split(",");
                            return I(e, a)
                        }
                        return a.args = w, a
                    }
                    return null
                }

                function I(e, t) {
                    return t.args = e.map(function(e) {
                        let a = x(e);
                        return a.literal || (t.static = !1), a
                    }, this), t
                }

                function x(e) {
                    let t = e.trim().replace(/&comma;/g, ",").replace(/\\(.)/g, "$1"),
                        n = {
                            name: t
                        },
                        a = t[0];
                    return "-" === a && (a = t[1]), "0" <= a && "9" >= a && (a = "#"), "'" === a || "\"" === a ? (n.value = t.slice(1, -1), n.literal = !0) : "#" === a ? (n.value = +t, n.literal = !0) : void 0, (n.literal || (n.rootProperty = Polymer.Path.root(t), n.structured = Polymer.Path.isPath(t), n.structured && (n.wildcard = ".*" == t.slice(-2), n.wildcard && (n.name = t.slice(0, -2)))), n)
                }

                function A(e, t, a, n) {
                    let r = [];
                    for (let o = 0, d = t.length; o < d; o++) {
                        let d, i = t[o],
                            s = i.name;
                        if (i.literal ? d = i.value : i.structured ? (d = Polymer.Path.get(e, s), void 0 === d && (d = n[s])) : d = e[s], i.wildcard) {
                            let e = 0 === s.indexOf(a + "."),
                                t = 0 === a.indexOf(s) && !e;
                            r[o] = {
                                path: t ? a : s,
                                value: t ? n[a] : d,
                                base: d
                            }
                        } else r[o] = d
                    }
                    return r
                }

                function L(e, t, a, n) {
                    let r = a + ".splices";
                    e.notifyPath(r, {
                        indexSplices: n
                    }), e.notifyPath(a + ".length", t.length), e.__data[r] = {
                        indexSplices: null
                    }
                }

                function k(e, t, a, n, r, o) {
                    L(e, t, a, [{
                        index: n,
                        addedCount: r,
                        removed: o,
                        object: t,
                        type: "splice"
                    }])
                }

                function H(e) {
                    return e[0].toUpperCase() + e.substring(1)
                }
                const z = Polymer.CaseMap;
                let R = 0;
                const D = {
                        COMPUTE: "__computeEffects",
                        REFLECT: "__reflectEffects",
                        NOTIFY: "__notifyEffects",
                        PROPAGATE: "__propagateEffects",
                        OBSERVE: "__observeEffects",
                        READ_ONLY: "__readOnly"
                    },
                    w = [],
                    M = "(?:[a-zA-Z_$][\\w.:$\\-*]*)",
                    S = "(?:" + M + "|" + "(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)" + "|" + ("(?:" + "(?:'(?:[^'\\\\]|\\\\.)*')" + "|" + "(?:\"(?:[^\"\\\\]|\\\\.)*\")" + ")") + "\\s*)",
                    F = new RegExp("(\\[\\[|{{)\\s*" + "(?:(!)\\s*)?" + ("(" + M + "\\s*" + ("(?:\\(\\s*(?:" + ("(?:" + S + "(?:,\\s*" + S + ")*)") + "?)\\)\\s*)") + "?)") + "(?:]]|}})", "g");
                Polymer.PropertyEffects = Polymer.dedupingMixin(a => {
                    const n = Polymer.TemplateStamp(Polymer.PropertyAccessors(a));
                    class d extends n {
                        get PROPERTY_EFFECT_TYPES() {
                            return D
                        }
                        _initializeProperties() {
                            super._initializeProperties(), B.registerHost(this), this.__dataClientsInitialized = !1, this.__dataPendingClients = null, this.__dataToNotify = null, this.__dataLinkedPaths = null, this.__dataHasPaths = !1, this.__dataCompoundStorage = this.__dataCompoundStorage || null, this.__dataHost = this.__dataHost || null, this.__dataTemp = {}
                        }
                        _initializeProtoProperties(e) {
                            this.__data = Object.create(e), this.__dataPending = Object.create(e), this.__dataOld = {}
                        }
                        _initializeInstanceProperties(e) {
                            let t = this.__readOnly;
                            for (let a in e) t && t[a] || (this.__dataPending = this.__dataPending || {}, this.__dataOld = this.__dataOld || {}, this.__data[a] = this.__dataPending[a] = e[a])
                        }
                        _addPropertyEffect(t, a, n) {
                            this._createPropertyAccessor(t, a == D.READ_ONLY);
                            let r = e(this, a)[t];
                            r || (r = this[a][t] = []), r.push(n)
                        }
                        _removePropertyEffect(t, a, n) {
                            let r = e(this, a)[t],
                                o = r.indexOf(n);
                            0 <= o && r.splice(o, 1)
                        }
                        _hasPropertyEffect(e, t) {
                            let a = this[t];
                            return !!(a && a[e])
                        }
                        _hasReadOnlyEffect(e) {
                            return this._hasPropertyEffect(e, D.READ_ONLY)
                        }
                        _hasNotifyEffect(e) {
                            return this._hasPropertyEffect(e, D.NOTIFY)
                        }
                        _hasReflectEffect(e) {
                            return this._hasPropertyEffect(e, D.REFLECT)
                        }
                        _hasComputedEffect(e) {
                            return this._hasPropertyEffect(e, D.COMPUTE)
                        }
                        _setPendingPropertyOrPath(e, t, a, n) {
                            if (n || Polymer.Path.root(Array.isArray(e) ? e[0] : e) !== e) {
                                if (!n) {
                                    let a = Polymer.Path.get(this, e);
                                    if (e = Polymer.Path.set(this, e, t), !e || !super._shouldPropertyChange(e, t, a)) return !1
                                }
                                if (this.__dataHasPaths = !0, this._setPendingProperty(e, t, a)) return g(this, e, t), !0
                            } else {
                                if (this.__dataHasAccessor && this.__dataHasAccessor[e]) return this._setPendingProperty(e, t, a);
                                this[e] = t
                            }
                            return !1
                        }
                        _setUnmanagedPropertyToNode(e, t, a) {
                            (a !== e[t] || "object" == typeof a) && (e[t] = a)
                        }
                        _setPendingProperty(e, t, a) {
                            let n = this.__dataHasPaths && Polymer.Path.isPath(e),
                                r = n ? this.__dataTemp : this.__data;
                            if (this._shouldPropertyChange(e, t, r[e])) return this.__dataPending || (this.__dataPending = {}, this.__dataOld = {}), e in this.__dataOld || (this.__dataOld[e] = this.__data[e]), n ? this.__dataTemp[e] = t : this.__data[e] = t, this.__dataPending[e] = t, (n || this.__notifyEffects && this.__notifyEffects[e]) && (this.__dataToNotify = this.__dataToNotify || {}, this.__dataToNotify[e] = a), !0
                        }
                        _setProperty(e, t) {
                            this._setPendingProperty(e, t, !0) && this._invalidateProperties()
                        }
                        _invalidateProperties() {
                            this.__dataInitialized && this._flushProperties()
                        }
                        _enqueueClient(e) {
                            this.__dataPendingClients = this.__dataPendingClients || [], e !== this && this.__dataPendingClients.push(e)
                        }
                        _flushClients() {
                            if (!this.__dataClientsInitialized) this.__dataClientsInitialized = !0, this._readyClients(), this.__dataInitialized = !0;
                            else {
                                let e = this.__dataPendingClients;
                                if (e) {
                                    this.__dataPendingClients = null;
                                    for (let t, a = 0; a < e.length; a++) t = e[a], t.__dataPending && t._flushProperties()
                                }
                            }
                        }
                        _readyClients() {
                            let e = this.__dataPendingClients;
                            if (e) {
                                this.__dataPendingClients = null;
                                for (let t, a = 0; a < e.length; a++) t = e[a], t.__dataEnabled || t._enableProperties()
                            }
                        }
                        setProperties(e, t) {
                            for (let a in e) !t && this.__readOnly && this.__readOnly[a] || this._setPendingPropertyOrPath(a, e[a], !0);
                            this._invalidateProperties()
                        }
                        ready() {
                            this._flushProperties(), this.__dataClientsInitialized || this._flushClients(), this.__dataPending && this._flushProperties()
                        }
                        _propertiesChanged(e, a, n) {
                            let r = this.__dataHasPaths;
                            this.__dataHasPaths = !1, l(this, a, n, r);
                            let d = this.__dataToNotify;
                            this.__dataToNotify = null, this._propagatePropertyChanges(a, n, r), this._flushClients(), t(this, this.__reflectEffects, a, n, r), t(this, this.__observeEffects, a, n, r), d && o(this, d, a, n, r), 1 == this.__dataCounter && (this.__dataTemp = {})
                        }
                        _propagatePropertyChanges(e, a, n) {
                            this.__propagateEffects && t(this, this.__propagateEffects, e, a, n);
                            for (let r = this.__templateInfo; r;) t(this, r.propertyEffects, e, a, n, r.nodeList), r = r.nextTemplateInfo
                        }
                        linkPaths(e, t) {
                            e = Polymer.Path.normalize(e), t = Polymer.Path.normalize(t), this.__dataLinkedPaths = this.__dataLinkedPaths || {}, this.__dataLinkedPaths[e] = t
                        }
                        unlinkPaths(e) {
                            e = Polymer.Path.normalize(e), this.__dataLinkedPaths && delete this.__dataLinkedPaths[e]
                        }
                        notifySplices(e, t) {
                            let a = {},
                                n = Polymer.Path.get(this, e, a);
                            L(this, n, a.path, t)
                        }
                        get(e, t) {
                            return Polymer.Path.get(t || this, e)
                        }
                        set(e, t, a) {
                            a ? Polymer.Path.set(a, e, t) : (!this.__readOnly || !this.__readOnly[e]) && this._setPendingPropertyOrPath(e, t, !0) && this._invalidateProperties()
                        }
                        push(e, ...t) {
                            let a = {},
                                n = Polymer.Path.get(this, e, a),
                                r = n.length,
                                o = n.push(...t);
                            return t.length && k(this, n, a.path, r, t.length, []), o
                        }
                        pop(e) {
                            let t = {},
                                a = Polymer.Path.get(this, e, t),
                                n = !!a.length,
                                r = a.pop();
                            return n && k(this, a, t.path, a.length, 0, [r]), r
                        }
                        splice(e, t, a, ...n) {
                            var r = Math.floor;
                            let o = {},
                                d = Polymer.Path.get(this, e, o);
                            t = 0 > t ? d.length - r(-t) : r(t), t || (t = 0);
                            let i = d.splice(t, a, ...n);
                            return (n.length || i.length) && k(this, d, o.path, t, n.length, i), i
                        }
                        shift(e) {
                            let t = {},
                                a = Polymer.Path.get(this, e, t),
                                n = !!a.length,
                                r = a.shift();
                            return n && k(this, a, t.path, 0, 0, [r]), r
                        }
                        unshift(e, ...t) {
                            let a = {},
                                n = Polymer.Path.get(this, e, a),
                                r = n.unshift(...t);
                            return t.length && k(this, n, a.path, 0, t.length, []), r
                        }
                        notifyPath(e, t) {
                            let a;
                            if (1 == arguments.length) {
                                let n = {};
                                t = Polymer.Path.get(this, e, n), a = n.path
                            } else a = Array.isArray(e) ? Polymer.Path.normalize(e) : e;
                            this._setPendingPropertyOrPath(a, t, !0, !0) && this._invalidateProperties()
                        }
                        _createReadOnlyProperty(e, t) {
                            this._addPropertyEffect(e, D.READ_ONLY), t && (this["_set" + H(e)] = function(t) {
                                this._setProperty(e, t)
                            })
                        }
                        _createPropertyObserver(e, t, a) {
                            let n = {
                                property: e,
                                methodName: t,
                                dynamicFn: a
                            };
                            this._addPropertyEffect(e, D.OBSERVE, {
                                fn: r,
                                info: n,
                                trigger: {
                                    name: e
                                }
                            }), a && this._addPropertyEffect(t, D.OBSERVE, {
                                fn: r,
                                info: n,
                                trigger: {
                                    name: t
                                }
                            })
                        }
                        _createMethodObserver(e, t) {
                            let a = N(e);
                            if (!a) throw new Error("Malformed observer expression '" + e + "'");
                            O(this, a, D.OBSERVE, v, null, t)
                        }
                        _createNotifyingProperty(e) {
                            this._addPropertyEffect(e, D.NOTIFY, {
                                fn: s,
                                info: {
                                    eventName: z.camelToDashCase(e) + "-changed",
                                    property: e
                                }
                            })
                        }
                        _createReflectedProperty(e) {
                            let t = z.camelToDashCase(e);
                            "-" === t[0] ? console.warn("Property " + e + " cannot be reflected to attribute " + t + " because \"-\" is not a valid starting attribute name. Use a lowercase first letter for the property thisead.") : this._addPropertyEffect(e, D.REFLECT, {
                                fn: _,
                                info: {
                                    attrName: t
                                }
                            })
                        }
                        _createComputedProperty(e, t, a) {
                            let n = N(t);
                            if (!n) throw new Error("Malformed computed expression '" + t + "'");
                            O(this, n, D.COMPUTE, h, e, a)
                        }
                        static addPropertyEffect(e, t, a) {
                            this.prototype._addPropertyEffect(e, t, a)
                        }
                        static createPropertyObserver(e, t, a) {
                            this.prototype._createPropertyObserver(e, t, a)
                        }
                        static createMethodObserver(e, t) {
                            this.prototype._createMethodObserver(e, t)
                        }
                        static createNotifyingProperty(e) {
                            this.prototype._createNotifyingProperty(e)
                        }
                        static createReadOnlyProperty(e, t) {
                            this.prototype._createReadOnlyProperty(e, t)
                        }
                        static createReflectedProperty(e) {
                            this.prototype._createReflectedProperty(e)
                        }
                        static createComputedProperty(e, t, a) {
                            this.prototype._createComputedProperty(e, t, a)
                        }
                        static bindTemplate(e) {
                            return this.prototype._bindTemplate(e)
                        }
                        _bindTemplate(e, t) {
                            let a = this.constructor._parseTemplate(e),
                                n = this.__templateInfo == a;
                            if (!n)
                                for (let e in a.propertyEffects) this._createPropertyAccessor(e);
                            if (t && (a = Object.create(a), a.wasPreBound = n, !n && this.__templateInfo)) {
                                let e = this.__templateInfoLast || this.__templateInfo;
                                return this.__templateInfoLast = e.nextTemplateInfo = a, a.previousTemplateInfo = e, a
                            }
                            return this.__templateInfo = a
                        }
                        static _addTemplatePropertyEffect(e, t, a) {
                            let n = e.hostProps = e.hostProps || {};
                            n[t] = !0;
                            let r = e.propertyEffects = e.propertyEffects || {},
                                o = r[t] = r[t] || [];
                            o.push(a)
                        }
                        _stampTemplate(e) {
                            B.beginHosting(this);
                            let a = super._stampTemplate(e);
                            B.endHosting(this);
                            let n = this._bindTemplate(e, !0);
                            if (n.nodeList = a.nodeList, !n.wasPreBound) {
                                let e = n.childNodes = [];
                                for (let t = a.firstChild; t; t = t.nextSibling) e.push(t)
                            }
                            return a.templateInfo = n, E(this, n), this.__dataInitialized && t(this, n.propertyEffects, this.__data, null, !1, n.nodeList), a
                        }
                        _removeBoundDom(e) {
                            let t = e.templateInfo;
                            t.previousTemplateInfo && (t.previousTemplateInfo.nextTemplateInfo = t.nextTemplateInfo), t.nextTemplateInfo && (t.nextTemplateInfo.previousTemplateInfo = t.previousTemplateInfo), this.__templateInfoLast == t && (this.__templateInfoLast = t.previousTemplateInfo), t.previousTemplateInfo = t.nextTemplateInfo = null;
                            let a = t.childNodes;
                            for (let t, n = 0; n < a.length; n++) t = a[n], t.parentNode.removeChild(t)
                        }
                        static _parseTemplateNode(e, t, a) {
                            let n = super._parseTemplateNode(e, t, a);
                            if (e.nodeType === Node.TEXT_NODE) {
                                let r = this._parseBindings(e.textContent, t);
                                r && (e.textContent = b(r) || " ", f(this, t, a, "text", "textContent", r), n = !0)
                            }
                            return n
                        }
                        static _parseTemplateNodeAttribute(e, t, a, n, r) {
                            let o = this._parseBindings(r, t);
                            if (o) {
                                let r = n,
                                    d = "property";
                                "$" == n[n.length - 1] && (n = n.slice(0, -1), d = "attribute");
                                let i = b(o);
                                return i && "attribute" == d && e.setAttribute(n, i), "input" === e.localName && "value" === r && e.setAttribute(r, ""), e.removeAttribute(r), "property" === d && (n = Polymer.CaseMap.dashToCamelCase(n)), f(this, t, a, d, n, o, i), !0
                            }
                            return super._parseTemplateNodeAttribute(e, t, a, n, r)
                        }
                        static _parseTemplateNestedTemplate(e, t, a) {
                            let n = super._parseTemplateNestedTemplate(e, t, a),
                                r = a.templateInfo.hostProps;
                            for (let n in r) {
                                f(this, t, a, "property", "_host_" + n, [{
                                    mode: "{",
                                    source: n,
                                    dependencies: [n]
                                }])
                            }
                            return n
                        }
                        static _parseBindings(e, t) {
                            let a, n = [],
                                r = 0;
                            for (; null !== (a = F.exec(e));) {
                                a.index > r && n.push({
                                    literal: e.slice(r, a.index)
                                });
                                let o, d, i, s = a[1][0],
                                    p = !!a[2],
                                    _ = a[3].trim();
                                "{" == s && 0 < (i = _.indexOf("::")) && (d = _.substring(i + 2), _ = _.substring(0, i), o = !0);
                                let l = N(_),
                                    h = [];
                                if (l) {
                                    let {
                                        args: e,
                                        methodName: a
                                    } = l;
                                    for (let t, a = 0; a < e.length; a++) t = e[a], t.literal || h.push(t);
                                    let n = t.dynamicFns;
                                    (n && n[a] || l.static) && (h.push(a), l.dynamicFn = !0)
                                } else h.push(_);
                                n.push({
                                    source: _,
                                    mode: s,
                                    negate: p,
                                    customEvent: o,
                                    signature: l,
                                    dependencies: h,
                                    event: d
                                }), r = F.lastIndex
                            }
                            if (r && r < e.length) {
                                let t = e.substring(r);
                                t && n.push({
                                    literal: t
                                })
                            }
                            return n.length ? n : void 0
                        }
                        static _evaluateBinding(e, t, a, n, r, o) {
                            let d;
                            return d = t.signature ? v(e, a, n, r, t.signature) : a == t.source ? o && Polymer.Path.isPath(a) ? Polymer.Path.get(e, a) : e.__data[a] : Polymer.Path.get(e, t.source), t.negate && (d = !d), d
                        }
                    }
                    return d
                });
                let B = {
                    stack: [],
                    registerHost(e) {
                        if (this.stack.length) {
                            let t = this.stack[this.stack.length - 1];
                            t._enqueueClient(e)
                        }
                    },
                    beginHosting(e) {
                        this.stack.push(e)
                    },
                    endHosting(e) {
                        let t = this.stack.length;
                        t && this.stack[t - 1] == e && this.stack.pop()
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = function() {};
                a.is, a.extends, a.properties, a.observers, a.template, Polymer.ElementMixin = Polymer.dedupingMixin(a => {
                    function b(a) {
                        return a.hasOwnProperty(JSCompiler_renameProperty("__ownProperties", a)) || (a.__ownProperties = a.hasOwnProperty(JSCompiler_renameProperty("properties", a)) ? a.properties : {}), a.__ownProperties
                    }

                    function c(a) {
                        return a.hasOwnProperty(JSCompiler_renameProperty("__ownObservers", a)) || (a.__ownObservers = a.hasOwnProperty(JSCompiler_renameProperty("observers", a)) ? a.observers : []), a.__ownObservers
                    }

                    function d(a, b) {
                        for (let c in b) {
                            let d = b[c];
                            "function" == typeof d && (d = {
                                type: d
                            }), a[c] = d
                        }
                        return a
                    }

                    function e(a) {
                        if (!a.hasOwnProperty(JSCompiler_renameProperty("__classProperties", a))) {
                            a.__classProperties = d({}, b(a));
                            let c = Object.getPrototypeOf(a.prototype).constructor;
                            c.prototype instanceof p && (a.__classProperties = Object.assign(Object.create(e(c)), a.__classProperties))
                        }
                        return a.__classProperties
                    }

                    function f(a) {
                        if (!a.hasOwnProperty(JSCompiler_renameProperty("__classPropertyDefaults", a))) {
                            a.__classPropertyDefaults = null;
                            let b = e(a);
                            for (let c in b) {
                                let d = b[c];
                                "value" in d && (a.__classPropertyDefaults = a.__classPropertyDefaults || {}, a.__classPropertyDefaults[c] = d)
                            }
                        }
                        return a.__classPropertyDefaults
                    }

                    function g(a) {
                        return a.hasOwnProperty(JSCompiler_renameProperty("__finalized", a))
                    }

                    function h(a) {
                        let b = a.prototype,
                            c = Object.getPrototypeOf(b).constructor;
                        c.prototype instanceof p && c.finalize(), i(a)
                    }

                    function i(a) {
                        a.__finalized = !0;
                        let d = a.prototype;
                        a.hasOwnProperty(JSCompiler_renameProperty("is", a)) && a.is && Polymer.telemetry.register(d);
                        let e = b(a);
                        e && j(d, e);
                        let f = c(a);
                        f && k(d, f, e);
                        let g = a.template;
                        if (g) {
                            if ("string" === typeof g) {
                                let a = document.createElement("template");
                                a.innerHTML = g, g = a
                            } else g = g.cloneNode(!0);
                            d._template = g
                        }
                    }

                    function j(a, b) {
                        for (let c in b) l(a, c, b[c], b)
                    }

                    function k(a, b, c) {
                        for (let d = 0; d < b.length; d++) a._createMethodObserver(b[d], c)
                    }

                    function l(a, b, c, d) {
                        c.computed && (c.readOnly = !0), c.computed && !a._hasReadOnlyEffect(b) && a._createComputedProperty(b, c.computed, d), c.readOnly && !a._hasReadOnlyEffect(b) && a._createReadOnlyProperty(b, !c.computed), c.reflectToAttribute && !a._hasReflectEffect(b) && a._createReflectedProperty(b), c.notify && !a._hasNotifyEffect(b) && a._createNotifyingProperty(b), c.observer && a._createPropertyObserver(b, c.observer, d[c.observer])
                    }

                    function m(a, b, c, d, e) {
                        let f = Polymer.StyleGather.cssFromTemplate(b, c) + Polymer.StyleGather.cssFromModuleImports(d);
                        if (f) {
                            let a = document.createElement("style");
                            a.textContent = f, b.content.insertBefore(a, b.content.firstChild)
                        }
                        window.ShadyCSS && window.ShadyCSS.prepareTemplate(b, d, e), a._bindTemplate(b)
                    }
                    const n = Polymer.PropertyEffects(a);
                    let o = Polymer.CaseMap;
                    class p extends n {
                        static get observedAttributes() {
                            if (!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes", this))) {
                                let a = [],
                                    b = e(this);
                                for (let c in b) a.push(Polymer.CaseMap.camelToDashCase(c));
                                this.__observedAttributes = a
                            }
                            return this.__observedAttributes
                        }
                        static finalize() {
                            g(this) || h(this)
                        }
                        static get template() {
                            return this.hasOwnProperty(JSCompiler_renameProperty("_template", this)) || (this._template = Polymer.DomModule.import(this.is, "template") || Object.getPrototypeOf(this.prototype).constructor.template), this._template
                        }
                        static get importPath() {
                            if (!this.hasOwnProperty(JSCompiler_renameProperty("_importPath", this))) {
                                const a = Polymer.DomModule.import(this.is);
                                this._importPath = a ? a.assetpath : Object.getPrototypeOf(this.prototype).constructor.importPath
                            }
                            return this._importPath
                        }
                        _initializeProperties() {
                            Polymer.telemetry.instanceCount++, this.constructor.finalize();
                            const a = this.constructor.importPath;
                            if (this._template && !this._template.__polymerFinalized) {
                                this._template.__polymerFinalized = !0;
                                const b = a ? Polymer.ResolveUrl.resolveUrl(a) : "";
                                m(this.__proto__, this._template, b, this.localName)
                            }
                            super._initializeProperties(), this.rootPath = Polymer.rootPath, this.importPath = a;
                            let b = f(this.constructor);
                            if (b)
                                for (let a in b) {
                                    let c = b[a];
                                    if (!this.hasOwnProperty(a)) {
                                        let b = "function" == typeof c.value ? c.value.call(this) : c.value;
                                        this._hasAccessor(a) ? this._setPendingProperty(a, b, !0) : this[a] = b
                                    }
                                }
                        }
                        connectedCallback() {
                            window.ShadyCSS && this._template && window.ShadyCSS.styleElement(this), this._enableProperties()
                        }
                        disconnectedCallback() {}
                        ready() {
                            this._template && (this.root = this._stampTemplate(this._template), this.$ = this.root.$), super.ready()
                        }
                        _readyClients() {
                            this._template && (this.root = this._attachDom(this.root)), super._readyClients()
                        }
                        _attachDom(a) {
                            if (!this.attachShadow) throw new Error("ShadowDOM not available. Polymer.Element can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.");
                            else if (a) return this.shadowRoot || this.attachShadow({
                                mode: "open"
                            }), this.shadowRoot.appendChild(a), this.shadowRoot
                        }
                        attributeChangedCallback(a, b, c) {
                            if (b !== c) {
                                let b = o.dashToCamelCase(a),
                                    d = e(this.constructor)[b].type;
                                this._hasReadOnlyEffect(b) || this._attributeToProperty(a, c, d)
                            }
                        }
                        updateStyles(a) {
                            window.ShadyCSS && window.ShadyCSS.styleSubtree(this, a)
                        }
                        resolveUrl(a, b) {
                            return !b && this.importPath && (b = Polymer.ResolveUrl.resolveUrl(this.importPath)), Polymer.ResolveUrl.resolveUrl(a, b)
                        }
                        static _parseTemplateContent(a, b, c) {
                            return b.dynamicFns = b.dynamicFns || e(this), super._parseTemplateContent(a, b, c)
                        }
                    }
                    return p
                }), Polymer.telemetry = {
                    instanceCount: 0,
                    registrations: [],
                    _regLog: function(a) {
                        console.log("[" + a.is + "]: registered")
                    },
                    register: function(a) {
                        this.registrations.push(a), Polymer.log && this._regLog(a)
                    },
                    dumpRegistrations: function() {
                        this.registrations.forEach(this._regLog)
                    }
                }, Polymer.updateStyles = function(a) {
                    window.ShadyCSS && window.ShadyCSS.styleDocument(a)
                }, Polymer.rootPath = Polymer.rootPath || Polymer.ResolveUrl.pathFromUrl(document.baseURI || window.location.href)
            })();
        </script>
        <script>
            (function() {
                "use strict";
                class a {
                    constructor() {
                        this._asyncModule = null, this._callback = null, this._timer = null
                    }
                    setConfig(a, b) {
                        this._asyncModule = a, this._callback = b, this._timer = this._asyncModule.run(() => {
                            this._timer = null, this._callback()
                        })
                    }
                    cancel() {
                        this.isActive() && (this._asyncModule.cancel(this._timer), this._timer = null)
                    }
                    flush() {
                        this.isActive() && (this.cancel(), this._callback())
                    }
                    isActive() {
                        return null != this._timer
                    }
                    static debounce(b, c, d) {
                        return b instanceof a ? b.cancel() : b = new a, b.setConfig(c, d), b
                    }
                }
                Polymer.Debouncer = a
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a) {
                    let b = q ? ["click"] : m;
                    for (let c, d = 0; d < b.length; d++) c = b[d], a ? document.addEventListener(c, r, !0) : document.removeEventListener(c, r, !0)
                }

                function b(a) {
                    let b = a.type;
                    if (-1 === m.indexOf(b)) return !1;
                    if ("mousemove" === b) {
                        let b = void 0 === a.buttons ? 1 : a.buttons;
                        return a instanceof window.MouseEvent && !o && (b = n[a.which] || 0), !!(1 & b)
                    } else {
                        let b = void 0 === a.button ? 0 : a.button;
                        return 0 === b
                    }
                }

                function c(a) {
                    if ("click" === a.type) {
                        if (0 === a.detail) return !0;
                        let b = u._findOriginalTarget(a);
                        if (b.nodeType !== Node.ELEMENT_NODE) return !0;
                        let c = b.getBoundingClientRect(),
                            d = a.pageX,
                            e = a.pageY;
                        return !(d >= c.left && d <= c.right && e >= c.top && e <= c.bottom)
                    }
                    return !1
                }

                function d(a) {
                    let b = "auto",
                        c = a.composedPath && a.composedPath();
                    if (c)
                        for (let a, d = 0; d < c.length; d++)
                            if (a = c[d], a.__polymerGesturesTouchAction) {
                                b = a.__polymerGesturesTouchAction;
                                break
                            } return b
                }

                function f(a, b, c) {
                    a.movefn = b, a.upfn = c, document.addEventListener("mousemove", b), document.addEventListener("mouseup", c)
                }

                function g(a) {
                    document.removeEventListener("mousemove", a.movefn), document.removeEventListener("mouseup", a.upfn), a.movefn = null, a.upfn = null
                }
                var h = Math.abs;
                let e = "string" === typeof document.head.style.touchAction,
                    i = "__polymerGestures",
                    j = "__polymerGesturesHandled",
                    k = 25,
                    l = 5,
                    m = ["mousedown", "mousemove", "mouseup", "click"],
                    n = [0, 1, 4, 2],
                    o = function() {
                        try {
                            return 1 === new MouseEvent("test", {
                                buttons: 1
                            }).buttons
                        } catch (a) {
                            return !1
                        }
                    }(),
                    p = !1;
                (function() {
                    try {
                        let a = Object.defineProperty({}, "passive", {
                            get: function() {
                                p = !0
                            }
                        });
                        window.addEventListener("test", null, a), window.removeEventListener("test", null, a)
                    } catch (a) {}
                })();
                let q = navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),
                    r = function(a) {
                        let b = a.sourceCapabilities;
                        if ((!b || b.firesTouchEvents) && (a[j] = {
                                skip: !0
                            }, "click" === a.type)) {
                            let b = a.composedPath && a.composedPath();
                            if (b)
                                for (let a = 0; a < b.length; a++)
                                    if (b[a] === s.mouse.target) return;
                            a.preventDefault(), a.stopPropagation()
                        }
                    },
                    s = {
                        mouse: {
                            target: null,
                            mouseIgnoreJob: null
                        },
                        touch: {
                            x: 0,
                            y: 0,
                            id: -1,
                            scrollDecided: !1
                        }
                    };
                document.addEventListener("touchend", function(b) {
                    s.mouse.mouseIgnoreJob || a(!0);
                    s.mouse.target = b.composedPath()[0], s.mouse.mouseIgnoreJob = Polymer.Debouncer.debounce(s.mouse.mouseIgnoreJob, Polymer.Async.timeOut.after(2500), function() {
                        a(), s.mouse.target = null, s.mouse.mouseIgnoreJob = null
                    })
                }, !!p && {
                    passive: !0
                });
                const u = {
                    gestures: {},
                    recognizers: [],
                    deepTargetFind: function(a, b) {
                        let c = document.elementFromPoint(a, b),
                            d = c;
                        for (; d && d.shadowRoot && !window.ShadyDOM;) {
                            let e = d;
                            if (d = d.shadowRoot.elementFromPoint(a, b), e === d) break;
                            d && (c = d)
                        }
                        return c
                    },
                    _findOriginalTarget: function(a) {
                        return a.composedPath ? a.composedPath()[0] : a.target
                    },
                    _handleNative: function(a) {
                        let b, c = a.type,
                            d = a.currentTarget,
                            f = d[i];
                        if (f) {
                            let d = f[c];
                            if (d) {
                                if (!a[j] && (a[j] = {}, "touch" === c.slice(0, 5))) {
                                    let b = a.changedTouches[0];
                                    if ("touchstart" === c && 1 === a.touches.length && (s.touch.id = b.identifier), s.touch.id !== b.identifier) return;
                                    e || "touchstart" !== c && "touchmove" !== c || u._handleTouchAction(a)
                                }
                                if (b = a[j], !b.skip) {
                                    let e = u.recognizers;
                                    for (let c, f = 0; f < e.length; f++) c = e[f], d[c.name] && !b[c.name] && c.flow && -1 < c.flow.start.indexOf(a.type) && c.reset && c.reset();
                                    for (let f, g = 0; g < e.length; g++) f = e[g], d[f.name] && !b[f.name] && (b[f.name] = !0, f[c](a))
                                }
                            }
                        }
                    },
                    _handleTouchAction: function(a) {
                        let b = a.changedTouches[0],
                            c = a.type;
                        if ("touchstart" === c) s.touch.x = b.clientX, s.touch.y = b.clientY, s.touch.scrollDecided = !1;
                        else if ("touchmove" === c) {
                            if (s.touch.scrollDecided) return;
                            s.touch.scrollDecided = !0;
                            let c = d(a),
                                e = !1,
                                f = h(s.touch.x - b.clientX),
                                g = h(s.touch.y - b.clientY);
                            a.cancelable && ("none" === c ? e = !0 : "pan-x" === c ? e = g > f : "pan-y" === c && (e = f > g)), e ? a.preventDefault() : u.prevent("track")
                        }
                    },
                    addListener: function(a, b, c) {
                        if (this.gestures[b]) return this._add(a, b, c), !0
                    },
                    removeListener: function(a, b, c) {
                        if (this.gestures[b]) return this._remove(a, b, c), !0
                    },
                    _add: function(a, b, c) {
                        let d = this.gestures[b],
                            e = d.deps,
                            f = d.name,
                            g = a[i];
                        g || (a[i] = g = {});
                        for (let d, h, j = 0; j < e.length; j++)(d = e[j], !(q && -1 < m.indexOf(d) && "click" !== d)) && (h = g[d], h || (g[d] = h = {
                            _count: 0
                        }), 0 === h._count && a.addEventListener(d, this._handleNative), h[f] = (h[f] || 0) + 1, h._count = (h._count || 0) + 1);
                        a.addEventListener(b, c), d.touchAction && this.setTouchAction(a, d.touchAction)
                    },
                    _remove: function(a, b, c) {
                        let d = this.gestures[b],
                            e = d.deps,
                            f = d.name,
                            g = a[i];
                        if (g)
                            for (let b, c, d = 0; d < e.length; d++) b = e[d], c = g[b], c && c[f] && (c[f] = (c[f] || 1) - 1, c._count = (c._count || 1) - 1, 0 === c._count && a.removeEventListener(b, this._handleNative));
                        a.removeEventListener(b, c)
                    },
                    register: function(a) {
                        this.recognizers.push(a);
                        for (let b = 0; b < a.emits.length; b++) this.gestures[a.emits[b]] = a
                    },
                    _findRecognizerByEvent: function(a) {
                        for (let b, c = 0; c < this.recognizers.length; c++) {
                            b = this.recognizers[c];
                            for (let c, d = 0; d < b.emits.length; d++)
                                if (c = b.emits[d], c === a) return b
                        }
                        return null
                    },
                    setTouchAction: function(a, b) {
                        e && (a.style.touchAction = b), a["__polymerGesturesTouchAction"] = b
                    },
                    _fire: function(a, b, c) {
                        let d = new Event(b, {
                            bubbles: !0,
                            cancelable: !0,
                            composed: !0
                        });
                        if (d.detail = c, a.dispatchEvent(d), d.defaultPrevented) {
                            let a = c.preventer || c.sourceEvent;
                            a && a.preventDefault && a.preventDefault()
                        }
                    },
                    prevent: function(a) {
                        let b = this._findRecognizerByEvent(a);
                        b.info && (b.info.prevent = !0)
                    },
                    resetMouseCanceller: function() {
                        s.mouse.mouseIgnoreJob && s.mouse.mouseIgnoreJob.flush()
                    }
                };
                u.register({
                    name: "downup",
                    deps: ["mousedown", "touchstart", "touchend"],
                    flow: {
                        start: ["mousedown", "touchstart"],
                        end: ["mouseup", "touchend"]
                    },
                    emits: ["down", "up"],
                    info: {
                        movefn: null,
                        upfn: null
                    },
                    reset: function() {
                        g(this.info)
                    },
                    mousedown: function(a) {
                        if (!b(a)) return;
                        let c = u._findOriginalTarget(a),
                            d = this;
                        f(this.info, function(a) {
                            b(a) || (d._fire("up", c, a), g(d.info))
                        }, function(a) {
                            b(a) && d._fire("up", c, a), g(d.info)
                        }), this._fire("down", c, a)
                    },
                    touchstart: function(a) {
                        this._fire("down", u._findOriginalTarget(a), a.changedTouches[0], a)
                    },
                    touchend: function(a) {
                        this._fire("up", u._findOriginalTarget(a), a.changedTouches[0], a)
                    },
                    _fire: function(a, b, c, d) {
                        u._fire(b, a, {
                            x: c.clientX,
                            y: c.clientY,
                            sourceEvent: c,
                            preventer: d,
                            prevent: function(a) {
                                return u.prevent(a)
                            }
                        })
                    }
                }), u.register({
                    name: "track",
                    touchAction: "none",
                    deps: ["mousedown", "touchstart", "touchmove", "touchend"],
                    flow: {
                        start: ["mousedown", "touchstart"],
                        end: ["mouseup", "touchend"]
                    },
                    emits: ["track"],
                    info: {
                        x: 0,
                        y: 0,
                        state: "start",
                        started: !1,
                        moves: [],
                        addMove: function(a) {
                            this.moves.length > 2 && this.moves.shift(), this.moves.push(a)
                        },
                        movefn: null,
                        upfn: null,
                        prevent: !1
                    },
                    reset: function() {
                        this.info.state = "start", this.info.started = !1, this.info.moves = [], this.info.x = 0, this.info.y = 0, this.info.prevent = !1, g(this.info)
                    },
                    hasMovedEnough: function(a, b) {
                        if (this.info.prevent) return !1;
                        if (this.info.started) return !0;
                        let c = h(this.info.x - a),
                            d = h(this.info.y - b);
                        return c >= l || d >= l
                    },
                    mousedown: function(a) {
                        if (!b(a)) return;
                        let c = u._findOriginalTarget(a),
                            d = this,
                            h = function(a) {
                                let e = a.clientX,
                                    f = a.clientY;
                                d.hasMovedEnough(e, f) && (d.info.state = d.info.started ? "mouseup" === a.type ? "end" : "track" : "start", "start" === d.info.state && u.prevent("tap"), d.info.addMove({
                                    x: e,
                                    y: f
                                }), !b(a) && (d.info.state = "end", g(d.info)), d._fire(c, a), d.info.started = !0)
                            };
                        f(this.info, h, function(a) {
                            d.info.started && h(a), g(d.info)
                        }), this.info.x = a.clientX, this.info.y = a.clientY
                    },
                    touchstart: function(a) {
                        let b = a.changedTouches[0];
                        this.info.x = b.clientX, this.info.y = b.clientY
                    },
                    touchmove: function(a) {
                        let b = u._findOriginalTarget(a),
                            c = a.changedTouches[0],
                            d = c.clientX,
                            e = c.clientY;
                        this.hasMovedEnough(d, e) && ("start" === this.info.state && u.prevent("tap"), this.info.addMove({
                            x: d,
                            y: e
                        }), this._fire(b, c), this.info.state = "track", this.info.started = !0)
                    },
                    touchend: function(a) {
                        let b = u._findOriginalTarget(a),
                            c = a.changedTouches[0];
                        this.info.started && (this.info.state = "end", this.info.addMove({
                            x: c.clientX,
                            y: c.clientY
                        }), this._fire(b, c, a))
                    },
                    _fire: function(a, b) {
                        let c, d = this.info.moves[this.info.moves.length - 2],
                            e = this.info.moves[this.info.moves.length - 1],
                            f = e.x - this.info.x,
                            g = e.y - this.info.y,
                            h = 0;
                        return d && (c = e.x - d.x, h = e.y - d.y), u._fire(a, "track", {
                            state: this.info.state,
                            x: b.clientX,
                            y: b.clientY,
                            dx: f,
                            dy: g,
                            ddx: c,
                            ddy: h,
                            sourceEvent: b,
                            hover: function() {
                                return u.deepTargetFind(b.clientX, b.clientY)
                            }
                        })
                    }
                }), u.register({
                    name: "tap",
                    deps: ["mousedown", "click", "touchstart", "touchend"],
                    flow: {
                        start: ["mousedown", "touchstart"],
                        end: ["click", "touchend"]
                    },
                    emits: ["tap"],
                    info: {
                        x: NaN,
                        y: NaN,
                        prevent: !1
                    },
                    reset: function() {
                        this.info.x = NaN, this.info.y = NaN, this.info.prevent = !1
                    },
                    save: function(a) {
                        this.info.x = a.clientX, this.info.y = a.clientY
                    },
                    mousedown: function(a) {
                        b(a) && this.save(a)
                    },
                    click: function(a) {
                        b(a) && this.forward(a)
                    },
                    touchstart: function(a) {
                        this.save(a.changedTouches[0], a)
                    },
                    touchend: function(a) {
                        this.forward(a.changedTouches[0], a)
                    },
                    forward: function(a, b) {
                        let d = h(a.clientX - this.info.x),
                            e = h(a.clientY - this.info.y),
                            f = u._findOriginalTarget(a);
                        (isNaN(d) || isNaN(e) || d <= k && e <= k || c(a)) && !this.info.prevent && u._fire(f, "tap", {
                            x: a.clientX,
                            y: a.clientY,
                            sourceEvent: a,
                            preventer: b
                        })
                    }
                }), u.findOriginalTarget = u._findOriginalTarget, u.add = u.addListener, u.remove = u.removeListener, Polymer.Gestures = u
            })();
        </script>
        <script>
            (function() {
                "use strict";
                const a = Polymer.Gestures;
                Polymer.GestureEventListeners = Polymer.dedupingMixin(b => {
                    return class extends b {
                        _addEventListenerToNode(b, c, d) {
                            a.addListener(b, c, d) || super._addEventListenerToNode(b, c, d)
                        }
                        _removeEventListenerFromNode(b, c, d) {
                            a.removeListener(b, c, d) || super._removeEventListenerFromNode(b, c, d)
                        }
                    }
                })
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a) {
                    window.HTMLImports ? HTMLImports.whenReady(a) : a()
                }
                Polymer.importHref = function(b, c, d, e) {
                    let f = document.head.querySelector("link[href=\"" + b + "\"][import-href]");
                    f || (f = document.createElement("link"), f.rel = "import", f.href = b, f.setAttribute("import-href", "")), e && f.setAttribute("async", "");
                    let g = function() {
                            f.removeEventListener("load", h), f.removeEventListener("error", i)
                        },
                        h = function(b) {
                            g(), f.__dynamicImportLoaded = !0, c && a(() => {
                                c(b)
                            })
                        },
                        i = function(b) {
                            g(), f.parentNode && f.parentNode.removeChild(f), d && a(() => {
                                d(b)
                            })
                        };
                    return f.addEventListener("load", h), f.addEventListener("error", i), null == f.parentNode ? document.head.appendChild(f) : f.__dynamicImportLoaded && f.dispatchEvent(new Event("load")), f
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a() {
                    e = !0, requestAnimationFrame(function() {
                        e = !1, b(f), setTimeout(function() {
                            c(g)
                        })
                    })
                }

                function b(a) {
                    for (; a.length;) d(a.shift())
                }

                function c(a) {
                    for (let b = 0, c = a.length; b < c; b++) d(a.shift())
                }

                function d(a) {
                    const b = a[0],
                        c = a[1],
                        d = a[2];
                    try {
                        c.apply(b, d)
                    } catch (a) {
                        setTimeout(() => {
                            throw a
                        })
                    }
                }
                let e = !1,
                    f = [],
                    g = [];
                Polymer.RenderStatus = {
                    beforeNextRender: function(b, c, d) {
                        e || a(), f.push([b, c, d])
                    },
                    afterNextRender: function(b, c, d) {
                        e || a(), g.push([b, c, d])
                    },
                    flush: function() {
                        for (; f.length || g.length;) b(f), b(g);
                        e = !1
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a() {
                    document.body.removeAttribute("unresolved")
                }
                window.WebComponents ? window.addEventListener("WebComponentsReady", a) : "interactive" === document.readyState || "complete" === document.readyState ? a() : window.addEventListener("DOMContentLoaded", a)
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a, b, c) {
                    return {
                        index: a,
                        removed: b,
                        addedCount: c
                    }
                }
                const b = 1,
                    c = 2,
                    d = 3,
                    e = {
                        calcEditDistances(a, b, c, d, e, f) {
                            let g = f - e + 1,
                                h = c - b + 1,
                                k = Array(g);
                            for (let j = 0; j < g; j++) k[j] = Array(h), k[j][0] = j;
                            for (let g = 0; g < h; g++) k[0][g] = g;
                            for (let l = 1; l < g; l++)
                                for (let c = 1; c < h; c++)
                                    if (this.equals(a[b + c - 1], d[e + l - 1])) k[l][c] = k[l - 1][c - 1];
                                    else {
                                        let a = k[l - 1][c] + 1,
                                            b = k[l][c - 1] + 1;
                                        k[l][c] = a < b ? a : b
                                    } return k
                        },
                        spliceOperationsFromEditDistances(a) {
                            let e = a.length - 1,
                                f = a[0].length - 1,
                                g = a[e][f],
                                h = [];
                            for (; 0 < e || 0 < f;) {
                                if (0 == e) {
                                    h.push(c), f--;
                                    continue
                                }
                                if (0 == f) {
                                    h.push(d), e--;
                                    continue
                                }
                                let i, j = a[e - 1][f - 1],
                                    k = a[e - 1][f],
                                    l = a[e][f - 1];
                                i = k < l ? k < j ? k : j : l < j ? l : j, i == j ? (j == g ? h.push(0) : (h.push(b), g = j), e--, f--) : i == k ? (h.push(d), e--, g = k) : (h.push(c), f--, g = l)
                            }
                            return h.reverse(), h
                        },
                        calcSplices(e, f, g, h, i, j) {
                            let k, l = 0,
                                m = 0,
                                n = Math.min(g - f, j - i);
                            if (0 == f && 0 == i && (l = this.sharedPrefix(e, h, n)), g == e.length && j == h.length && (m = this.sharedSuffix(e, h, n - l)), f += l, i += l, g -= m, j -= m, 0 == g - f && 0 == j - i) return [];
                            if (f == g) {
                                for (k = a(f, [], 0); i < j;) k.removed.push(h[i++]);
                                return [k]
                            }
                            if (i == j) return [a(f, [], g - f)];
                            let o = this.spliceOperationsFromEditDistances(this.calcEditDistances(e, f, g, h, i, j));
                            k = void 0;
                            let p = [],
                                q = f,
                                r = i;
                            for (let l = 0; l < o.length; l++) switch (o[l]) {
                                case 0:
                                    k && (p.push(k), k = void 0), q++, r++;
                                    break;
                                case b:
                                    k || (k = a(q, [], 0)), k.addedCount++, q++, k.removed.push(h[r]), r++;
                                    break;
                                case c:
                                    k || (k = a(q, [], 0)), k.addedCount++, q++;
                                    break;
                                case d:
                                    k || (k = a(q, [], 0)), k.removed.push(h[r]), r++;
                            }
                            return k && p.push(k), p
                        },
                        sharedPrefix(a, b, c) {
                            for (let d = 0; d < c; d++)
                                if (!this.equals(a[d], b[d])) return d;
                            return c
                        },
                        sharedSuffix(a, b, c) {
                            let d = a.length,
                                e = b.length,
                                f = 0;
                            for (; f < c && this.equals(a[--d], b[--e]);) f++;
                            return f
                        },
                        calculateSplices(a, b) {
                            return this.calcSplices(a, 0, a.length, b, 0, b.length)
                        },
                        equals(a, b) {
                            return a === b
                        }
                    };
                Polymer.ArraySplice = {
                    calculateSplices(a, b) {
                        return e.calculateSplices(a, b)
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a) {
                    return "slot" === a.localName
                }
                Polymer.FlattenedNodesObserver = class {
                    static getFlattenedNodes(b) {
                        return a(b) ? b.assignedNodes({
                            flatten: !0
                        }) : Array.from(b.childNodes).map(b => a(b) ? b.assignedNodes({
                            flatten: !0
                        }) : [b]).reduce((c, a) => c.concat(a), [])
                    }
                    constructor(a, b) {
                        this._shadyChildrenObserver = null, this._nativeChildrenObserver = null, this._connected = !1, this._target = a, this.callback = b, this._effectiveNodes = [], this._observer = null, this._scheduled = !1, this._boundSchedule = () => {
                            this._schedule()
                        }, this.connect(), this._schedule()
                    }
                    connect() {
                        a(this._target) ? this._listenSlots([this._target]) : (this._listenSlots(this._target.children), window.ShadyDOM ? this._shadyChildrenObserver = ShadyDOM.observeChildren(this._target, a => {
                            this._processMutations(a)
                        }) : (this._nativeChildrenObserver = new MutationObserver(a => {
                            this._processMutations(a)
                        }), this._nativeChildrenObserver.observe(this._target, {
                            childList: !0
                        }))), this._connected = !0
                    }
                    disconnect() {
                        a(this._target) ? this._unlistenSlots([this._target]) : (this._unlistenSlots(this._target.children), window.ShadyDOM && this._shadyChildrenObserver ? (ShadyDOM.unobserveChildren(this._shadyChildrenObserver), this._shadyChildrenObserver = null) : this._nativeChildrenObserver && (this._nativeChildrenObserver.disconnect(), this._nativeChildrenObserver = null)), this._connected = !1
                    }
                    _schedule() {
                        this._scheduled || (this._scheduled = !0, Polymer.Async.microTask.run(() => this.flush()))
                    }
                    _processMutations(a) {
                        this._processSlotMutations(a), this.flush()
                    }
                    _processSlotMutations(a) {
                        if (a)
                            for (let b, c = 0; c < a.length; c++) b = a[c], b.addedNodes && this._listenSlots(b.addedNodes), b.removedNodes && this._unlistenSlots(b.removedNodes)
                    }
                    flush() {
                        if (!this._connected) return;
                        window.ShadyDOM && ShadyDOM.flush(), this._nativeChildrenObserver ? this._processSlotMutations(this._nativeChildrenObserver.takeRecords()) : this.shadyChildrenObserver && this._processSlotMutations(this._shadyChildrenObserver.takeRecords()), this._scheduled = !1;
                        let a = {
                                target: this._target,
                                addedNodes: [],
                                removedNodes: []
                            },
                            b = this.constructor.getFlattenedNodes(this._target),
                            c = Polymer.ArraySplice.calculateSplices(b, this._effectiveNodes);
                        for (let b, d = 0; d < c.length && (b = c[d]); d++)
                            for (let c, d = 0; d < b.removed.length && (c = b.removed[d]); d++) a.removedNodes.push(c);
                        for (let d, e = 0; e < c.length && (d = c[e]); e++)
                            for (let c = d.index; c < d.index + d.addedCount; c++) a.addedNodes.push(b[c]);
                        this._effectiveNodes = b;
                        let d = !1;
                        return (a.addedNodes.length || a.removedNodes.length) && (d = !0, this.callback.call(this._target, a)), d
                    }
                    _listenSlots(b) {
                        for (let c, d = 0; d < b.length; d++) c = b[d], a(c) && c.addEventListener("slotchange", this._boundSchedule)
                    }
                    _unlistenSlots(b) {
                        for (let c, d = 0; d < b.length; d++) c = b[d], a(c) && c.removeEventListener("slotchange", this._boundSchedule)
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a() {
                    const a = !!b.length;
                    for (; b.length;) try {
                        b.shift().flush()
                    } catch (a) {
                        setTimeout(() => {
                            throw a
                        })
                    }
                    return a
                }
                let b = [];
                Polymer.enqueueDebouncer = function(a) {
                    b.push(a)
                }, Polymer.flush = function() {
                    let b, c;
                    do b = window.ShadyDOM && ShadyDOM.flush(), window.ShadyCSS && window.ShadyCSS.ScopingShim && window.ShadyCSS.ScopingShim.flush(), c = a(); while (b || c)
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                const a = Element.prototype,
                    b = a.matches || a.matchesSelector || a.mozMatchesSelector || a.msMatchesSelector || a.oMatchesSelector || a.webkitMatchesSelector,
                    d = function(a, c) {
                        return b.call(a, c)
                    };
                class c {
                    constructor(a) {
                        this.node = a
                    }
                    observeNodes(a) {
                        return new Polymer.FlattenedNodesObserver(this.node, a)
                    }
                    unobserveNodes(a) {
                        a.disconnect()
                    }
                    notifyObserver() {}
                    deepContains(a) {
                        if (this.node.contains(a)) return !0;
                        let b = a,
                            c = a.ownerDocument;
                        for (; b && b !== c && b !== this.node;) b = b.parentNode || b.host;
                        return b === this.node
                    }
                    getOwnerRoot() {
                        return this.node.getRootNode()
                    }
                    getDistributedNodes() {
                        return "slot" === this.node.localName ? this.node.assignedNodes({
                            flatten: !0
                        }) : []
                    }
                    getDestinationInsertionPoints() {
                        let a = [],
                            b = this.node.assignedSlot;
                        for (; b;) a.push(b), b = b.assignedSlot;
                        return a
                    }
                    importNode(a, b) {
                        let c = this.node instanceof Document ? this.node : this.node.ownerDocument;
                        return c.importNode(a, b)
                    }
                    getEffectiveChildNodes() {
                        return Polymer.FlattenedNodesObserver.getFlattenedNodes(this.node)
                    }
                    queryDistributedElements(a) {
                        let b = this.getEffectiveChildNodes(),
                            e = [];
                        for (let f, c = 0, g = b.length; c < g && (f = b[c]); c++) f.nodeType === Node.ELEMENT_NODE && d(f, a) && e.push(f);
                        return e
                    }
                    get activeElement() {
                        let a = this.node;
                        return a._activeElement === void 0 ? a.activeElement : a._activeElement
                    }
                }(function(a, b) {
                    for (let c, d = 0; d < b.length; d++) c = b[d], a[c] = function() {
                        return this.node[c].apply(this.node, arguments)
                    }
                })(c.prototype, ["cloneNode", "appendChild", "insertBefore", "removeChild", "replaceChild", "setAttribute", "removeAttribute", "querySelector", "querySelectorAll"]),
                function(a, b) {
                    for (let c, d = 0; d < b.length; d++) c = b[d], Object.defineProperty(a, c, {
                        get: function() {
                            return this.node[c]
                        },
                        configurable: !0
                    })
                }(c.prototype, ["parentNode", "firstChild", "lastChild", "nextSibling", "previousSibling", "firstElementChild", "lastElementChild", "nextElementSibling", "previousElementSibling", "childNodes", "children", "classList"]),
                function(a, b) {
                    for (let c, d = 0; d < b.length; d++) c = b[d], Object.defineProperty(a, c, {
                        get: function() {
                            return this.node[c]
                        },
                        set: function(a) {
                            this.node[c] = a
                        },
                        configurable: !0
                    })
                }(c.prototype, ["textContent", "innerHTML"]);
                class e {
                    constructor(a) {
                        this.event = a
                    }
                    get rootTarget() {
                        return this.event.composedPath()[0]
                    }
                    get localTarget() {
                        return this.event.target
                    }
                    get path() {
                        return this.event.composedPath()
                    }
                }
                Polymer.dom = function(a) {
                    a = a || document;
                    let b = a instanceof Event ? e : c;
                    return a.__domApi || (a.__domApi = new b(a)), a.__domApi
                }, Polymer.dom.matchesSelector = d, Polymer.dom.flush = Polymer.flush, Polymer.dom.addDebouncer = Polymer.enqueueDebouncer;
                let f = Polymer.Settings || {};
                f.useShadow = !window.ShadyDOM, f.useNativeCSSProperties = !(window.ShadyCSS && !window.ShadyCSS.nativeCss), f.useNativeCustomElements = !window.customElements.polyfillWrapFlushCallback, Polymer.Settings = f
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = window.ShadyCSS;
                Polymer.LegacyElementMixin = Polymer.dedupingMixin(b => {
                    const c = Polymer.GestureEventListeners(Polymer.ElementMixin(b)),
                        d = {
                            x: "pan-x",
                            y: "pan-y",
                            none: "none",
                            all: "auto"
                        };
                    class e extends c {
                        constructor() {
                            super(), this.root = this, this.created()
                        }
                        created() {}
                        connectedCallback() {
                            super.connectedCallback(), this.isAttached = !0, this.attached()
                        }
                        attached() {}
                        disconnectedCallback() {
                            super.disconnectedCallback(), this.isAttached = !1, this.detached()
                        }
                        detached() {}
                        attributeChangedCallback(a, b, c) {
                            b !== c && (super.attributeChangedCallback(a, b, c), this.attributeChanged(a, b, c))
                        }
                        attributeChanged() {}
                        _initializeProperties() {
                            let a = Object.getPrototypeOf(this);
                            a.hasOwnProperty("__hasRegisterFinished") || (a.__hasRegisterFinished = !0, this._registered()), super._initializeProperties()
                        }
                        _registered() {}
                        ready() {
                            this._ensureAttributes(), this._applyListeners(), super.ready()
                        }
                        _ensureAttributes() {}
                        _applyListeners() {}
                        serialize(a) {
                            return this._serializeValue(a)
                        }
                        deserialize(a, b) {
                            return this._deserializeValue(a, b)
                        }
                        reflectPropertyToAttribute(a, b, c) {
                            this._propertyToAttribute(a, b, c)
                        }
                        serializeValueToAttribute(a, b, c) {
                            this._valueToNodeAttribute(c || this, a, b)
                        }
                        extend(a, b) {
                            if (!(a && b)) return a || b;
                            let c = Object.getOwnPropertyNames(b);
                            for (let d, e, f = 0; f < c.length && (d = c[f]); f++) e = Object.getOwnPropertyDescriptor(b, d), e && Object.defineProperty(a, d, e);
                            return a
                        }
                        mixin(a, b) {
                            for (let c in b) a[c] = b[c];
                            return a
                        }
                        chainObject(a, b) {
                            return a && b && a !== b && (a.__proto__ = b), a
                        }
                        instanceTemplate(a) {
                            let b = this.constructor._contentForTemplate(a),
                                c = document.importNode(b, !0);
                            return c
                        }
                        fire(a, b, c) {
                            c = c || {}, b = null === b || void 0 === b ? {} : b;
                            let d = new Event(a, {
                                bubbles: void 0 === c.bubbles || c.bubbles,
                                cancelable: !!c.cancelable,
                                composed: void 0 === c.composed || c.composed
                            });
                            d.detail = b;
                            let e = c.node || this;
                            return e.dispatchEvent(d), d
                        }
                        listen(a, b, c) {
                            a = a || this;
                            let d = this.__boundListeners || (this.__boundListeners = new WeakMap),
                                e = d.get(a);
                            e || (e = {}, d.set(a, e));
                            let f = b + c;
                            e[f] || (e[f] = this._addMethodEventListenerToNode(a, b, c, this))
                        }
                        unlisten(a, b, c) {
                            a = a || this;
                            let d = this.__boundListeners && this.__boundListeners.get(a),
                                e = b + c,
                                f = d && d[e];
                            f && (this._removeEventListenerFromNode(a, b, f), d[e] = null)
                        }
                        setScrollDirection(a, b) {
                            Polymer.Gestures.setTouchAction(b || this, d[a] || "auto")
                        }
                        $$(a) {
                            return this.root.querySelector(a)
                        }
                        get domHost() {
                            let a = this.getRootNode();
                            return a instanceof DocumentFragment ? a.host : a
                        }
                        distributeContent() {
                            window.ShadyDOM && this.shadowRoot && this.shadowRoot.forceRender()
                        }
                        getEffectiveChildNodes() {
                            return Polymer.dom(this).getEffectiveChildNodes()
                        }
                        queryDistributedElements(a) {
                            return Polymer.dom(this).queryDistributedElements(a)
                        }
                        getEffectiveChildren() {
                            let a = this.getEffectiveChildNodes();
                            return a.filter(function(a) {
                                return a.nodeType === Node.ELEMENT_NODE
                            })
                        }
                        getEffectiveTextContent() {
                            let a = this.getEffectiveChildNodes(),
                                b = [];
                            for (let d, c = 0; d = a[c]; c++) d.nodeType !== Node.COMMENT_NODE && b.push(d.textContent);
                            return b.join("")
                        }
                        queryEffectiveChildren(a) {
                            let b = this.queryDistributedElements(a);
                            return b && b[0]
                        }
                        queryAllEffectiveChildren(a) {
                            return this.queryDistributedElements(a)
                        }
                        getContentChildNodes(a) {
                            let b = this.root.querySelector(a || "slot");
                            return b ? Polymer.dom(b).getDistributedNodes() : []
                        }
                        getContentChildren(a) {
                            return this.getContentChildNodes(a).filter(function(a) {
                                return a.nodeType === Node.ELEMENT_NODE
                            })
                        }
                        isLightDescendant(a) {
                            return this !== a && this.contains(a) && this.getRootNode() === a.getRootNode()
                        }
                        isLocalDescendant(a) {
                            return this.root === a.getRootNode()
                        }
                        scopeSubtree() {}
                        getComputedStyleValue(b) {
                            return a.getComputedStyleValue(this, b)
                        }
                        debounce(a, b, c) {
                            return this._debouncers = this._debouncers || {}, this._debouncers[a] = Polymer.Debouncer.debounce(this._debouncers[a], 0 < c ? Polymer.Async.timeOut.after(c) : Polymer.Async.microTask, b.bind(this))
                        }
                        isDebouncerActive(a) {
                            this._debouncers = this._debouncers || {};
                            let b = this._debouncers[a];
                            return !!(b && b.isActive())
                        }
                        flushDebouncer(a) {
                            this._debouncers = this._debouncers || {};
                            let b = this._debouncers[a];
                            b && b.flush()
                        }
                        cancelDebouncer(a) {
                            this._debouncers = this._debouncers || {};
                            let b = this._debouncers[a];
                            b && b.cancel()
                        }
                        async (a, b) {
                            return 0 < b ? Polymer.Async.timeOut.run(a.bind(this), b) : ~Polymer.Async.microTask.run(a.bind(this))
                        }
                        cancelAsync(a) {
                            0 > a ? Polymer.Async.microTask.cancel(~a) : Polymer.Async.timeOut.cancel(a)
                        }
                        create(a, b) {
                            let c = document.createElement(a);
                            if (b)
                                if (c.setProperties) c.setProperties(b);
                                else
                                    for (let a in b) c[a] = b[a];
                            return c
                        }
                        importHref(a, b, c, d) {
                            let e = b ? b.bind(this) : null,
                                f = c ? c.bind(this) : null;
                            return Polymer.importHref(a, e, f, d)
                        }
                        elementMatches(a, b) {
                            return Polymer.dom.matchesSelector(b || this, a)
                        }
                        toggleAttribute(a, b, c) {
                            c = c || this, 1 == arguments.length && (b = !c.hasAttribute(a)), b ? c.setAttribute(a, "") : c.removeAttribute(a)
                        }
                        toggleClass(a, b, c) {
                            c = c || this, 1 == arguments.length && (b = !c.classList.contains(a)), b ? c.classList.add(a) : c.classList.remove(a)
                        }
                        transform(a, b) {
                            b = b || this, b.style.webkitTransform = a, b.style.transform = a
                        }
                        translate3d(a, b, c, d) {
                            d = d || this, this.transform("translate3d(" + a + "," + b + "," + c + ")", d)
                        }
                        arrayDelete(a, b) {
                            let c;
                            if (!Array.isArray(a)) {
                                let d = Polymer.Path.get(this, a);
                                if (c = d.indexOf(b), 0 <= c) return this.splice(a, c, 1)
                            } else if (c = a.indexOf(b), 0 <= c) return a.splice(c, 1);
                            return null
                        }
                        _logger(a, b) {
                            Array.isArray(b) && 1 === b.length && (b = b[0]);
                            "log" === a || "warn" === a || "error" === a ? console[a](...b) : void 0
                        }
                        _log(...a) {
                            this._logger("log", a)
                        }
                        _warn(...a) {
                            this._logger("warn", a)
                        }
                        _error(...a) {
                            this._logger("error", a)
                        }
                        _logf(...a) {
                            return ["[%s::%s]", this.is, ...a]
                        }
                    }
                    return e
                })
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a, e) {
                    if (!a) return e;
                    e = b(e), Array.isArray(a) || (a = [a]);
                    let f = e.prototype.behaviors;
                    return a = d(a, null, f), e = c(a, e), f && (a = f.concat(a)), e.prototype.behaviors = a, e
                }

                function c(a, d) {
                    for (let f, b = 0; b < a.length; b++) f = a[b], f && (d = Array.isArray(f) ? c(f, d) : e(f, d));
                    return d
                }

                function d(a, c, e) {
                    c = c || [];
                    for (let f, b = a.length - 1; 0 <= b; b--) f = a[b], f ? Array.isArray(f) ? d(f, c) : 0 > c.indexOf(f) && (!e || 0 > e.indexOf(f)) && c.unshift(f) : console.warn("behavior is null, check for missing or 404 import");
                    return c
                }

                function e(b, a) {
                    class c extends a {
                        static get properties() {
                            return b.properties
                        }
                        static get observers() {
                            return b.observers
                        }
                        static get template() {
                            return b._template || Polymer.DomModule.import(this.is, "template") || a.template || this.prototype._template
                        }
                        created() {
                            super.created(), b.created && b.created.call(this)
                        }
                        _registered() {
                            super._registered(), b.beforeRegister && b.beforeRegister.call(Object.getPrototypeOf(this)), b.registered && b.registered.call(Object.getPrototypeOf(this))
                        }
                        _applyListeners() {
                            if (super._applyListeners(), b.listeners)
                                for (let a in b.listeners) this._addMethodEventListenerToNode(this, a, b.listeners[a])
                        }
                        _ensureAttributes() {
                            if (b.hostAttributes)
                                for (let c in b.hostAttributes) this._ensureAttribute(c, b.hostAttributes[c]);
                            super._ensureAttributes()
                        }
                        ready() {
                            super.ready(), b.ready && b.ready.call(this)
                        }
                        attached() {
                            super.attached(), b.attached && b.attached.call(this)
                        }
                        detached() {
                            super.detached(), b.detached && b.detached.call(this)
                        }
                        attributeChanged(a, c, d) {
                            super.attributeChanged(a, c, d), b.attributeChanged && b.attributeChanged.call(this, a, c, d)
                        }
                    }
                    for (let d in c.generatedFrom = b, b)
                        if (!(d in f)) {
                            let a = Object.getOwnPropertyDescriptor(b, d);
                            a && Object.defineProperty(c.prototype, d, a)
                        } return c
                }
                let b = Polymer.LegacyElementMixin,
                    f = {
                        attached: !0,
                        detached: !0,
                        ready: !0,
                        created: !0,
                        beforeRegister: !0,
                        registered: !0,
                        attributeChanged: !0,
                        behaviors: !0
                    };
                Polymer.Class = function(c) {
                    c || console.warn("Polymer.Class requires `info` argument");
                    let d = e(c, c.behaviors ? a(c.behaviors, HTMLElement) : b(HTMLElement));
                    return d.is = c.is, d
                }, Polymer.mixinBehaviors = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.Polymer._polymerFn = function(a) {
                    let b;
                    return b = "function" === typeof a ? a : Polymer.Class(a), customElements.define(b.is, b), b
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a, b, c, d, e) {
                    let f;
                    e && (f = "object" === typeof c && null !== c, f && (d = a.__dataTemp[b]));
                    let g = d !== c && (d === d || c === c);
                    return f && g && (a.__dataTemp[b] = c), g
                }
                Polymer.MutableData = Polymer.dedupingMixin(b => {
                    return class extends b {
                        _shouldPropertyChange(b, c, d) {
                            return a(this, b, c, d, !0)
                        }
                    }
                }), Polymer.OptionalMutableData = Polymer.dedupingMixin(b => {
                    class c extends b {
                        static get properties() {
                            return {
                                mutableData: Boolean
                            }
                        }
                        _shouldPropertyChange(b, c, d) {
                            return a(this, b, c, d, this.mutableData)
                        }
                    }
                    return c
                }), Polymer.MutableData._mutablePropertyChange = a
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a() {
                    return j
                }

                function b(a, b) {
                    j = a, Object.setPrototypeOf(a, b.prototype), new b, j = null
                }

                function c(a) {
                    let b = a.__dataHost;
                    return b && b._methodHost || b
                }

                function d(a, b, c) {
                    let d = c.mutableData ? o : n,
                        e = class extends d {};
                    return e.prototype.__templatizeOptions = c, e.prototype._bindTemplate(a), g(e, a, b, c), e
                }

                function e(a, c, d) {
                    let e = d.forwardHostProp;
                    if (e) {
                        let g = c.templatizeTemplateClass;
                        if (!g) {
                            let a = d.mutableData ? l : k;
                            g = c.templatizeTemplateClass = class extends a {};
                            let b = c.hostProps;
                            for (let a in b) g.prototype._addPropertyEffect("_host_" + a, g.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE, {
                                fn: f(a, e)
                            }), g.prototype._createNotifyingProperty("_host_" + a)
                        }
                        b(a, g), a.__dataProto && Object.assign(a.__data, a.__dataProto), a.__dataTemp = {}, a.__dataPending = null, a.__dataOld = null, a._enableProperties()
                    }
                }

                function f(a, b) {
                    return function(a, c, d) {
                        b.call(a.__templatizeOwner, c.substring(6), d[c])
                    }
                }

                function g(a, b, c, d) {
                    let e = c.hostProps || {};
                    for (let f in d.instanceProps) {
                        delete e[f];
                        let b = d.notifyInstanceProp;
                        b && a.prototype._addPropertyEffect(f, a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY, {
                            fn: h(f, b)
                        })
                    }
                    if (d.forwardHostProp && b.__dataHost)
                        for (let b in e) a.prototype._addPropertyEffect(b, a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY, {
                            fn: i()
                        })
                }

                function h(a, b) {
                    return function(a, c, d) {
                        b.call(a.__templatizeOwner, a, c, d[c])
                    }
                }

                function i() {
                    return function(a, b, c) {
                        a.__dataHost._setPendingPropertyOrPath("_host_" + b, c[b], !0, !0)
                    }
                }
                let j = null;
                a.prototype = Object.create(HTMLTemplateElement.prototype, {
                    constructor: {
                        value: a,
                        writable: !0
                    }
                });
                const k = Polymer.PropertyEffects(a),
                    l = Polymer.MutableData(k),
                    m = Polymer.PropertyEffects(class {});
                class n extends m {
                    constructor(a) {
                        super(), this._configureProperties(a), this.root = this._stampTemplate(this.__dataHost);
                        let b = this.children = [];
                        for (let c = this.root.firstChild; c; c = c.nextSibling) b.push(c), c.__templatizeInstance = this;
                        this.__templatizeOwner.__hideTemplateChildren__ && this._showHideChildren(!0);
                        let c = this.__templatizeOptions;
                        (a && c.instanceProps || !c.instanceProps) && this._enableProperties()
                    }
                    _configureProperties(a) {
                        let b = this.__templatizeOptions;
                        if (a)
                            for (let c in b.instanceProps) c in a && this._setPendingProperty(c, a[c]);
                        for (let b in this.__hostProps) this._setPendingProperty(b, this.__dataHost["_host_" + b])
                    }
                    forwardHostProp(a, b) {
                        this._setPendingPropertyOrPath(a, b, !1, !0) && this.__dataHost._enqueueClient(this)
                    }
                    _addEventListenerToNode(a, b, c) {
                        if (this._methodHost && this.__templatizeOptions.parentModel) this._methodHost._addEventListenerToNode(a, b, a => {
                            a.model = this, c(a)
                        });
                        else {
                            let d = this.__dataHost.__dataHost;
                            d && d._addEventListenerToNode(a, b, c)
                        }
                    }
                    _showHideChildren(a) {
                        let b = this.children;
                        for (let c, d = 0; d < b.length; d++) c = b[d], !!a != !!c.__hideTemplateChildren__ && (c.nodeType === Node.TEXT_NODE ? a ? (c.__polymerTextContent__ = c.textContent, c.textContent = "") : c.textContent = c.__polymerTextContent__ : c.style && (a ? (c.__polymerDisplay__ = c.style.display, c.style.display = "none") : c.style.display = c.__polymerDisplay__)), c.__hideTemplateChildren__ = a, c._showHideChildren && c._showHideChildren(a)
                    }
                    _setUnmanagedPropertyToNode(a, b, c) {
                        a.__hideTemplateChildren__ && a.nodeType == Node.TEXT_NODE && "textContent" == b ? a.__polymerTextContent__ = c : super._setUnmanagedPropertyToNode(a, b, c)
                    }
                    get parentModel() {
                        let a = this.__parentModel;
                        if (!a) {
                            let b;
                            a = this;
                            do a = a.__dataHost.__dataHost; while ((b = a.__templatizeOptions) && !b.parentModel);
                            this.__parentModel = a
                        }
                        return a
                    }
                }
                const o = Polymer.MutableData(n),
                    p = {
                        templatize(a, b, f) {
                            if (f = f || {}, a.__templatizeOwner) throw new Error("A <template> can only be templatized once");
                            a.__templatizeOwner = b;
                            let g = b.constructor._parseTemplate(a),
                                h = g.templatizeInstanceClass;
                            h || (h = d(a, g, f), g.templatizeInstanceClass = h), e(a, g, f);
                            let i = class extends h {};
                            return i.prototype._methodHost = c(a), i.prototype.__dataHost = a, i.prototype.__templatizeOwner = b, i.prototype.__hostProps = g.hostProps, i
                        },
                        modelForElement(a, b) {
                            for (let c; b;)
                                if (!(c = b.__templatizeInstance)) b = b.parentNode;
                                else if (c.__dataHost != a) b = c.__dataHost;
                            else return c;
                            return null
                        }
                    };
                Polymer.Templatize = p
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = {
                    templatize(a, b) {
                        this._templatizerTemplate = a, this.ctor = Polymer.Templatize.templatize(a, this, {
                            mutableData: !!b,
                            parentModel: this._parentModel,
                            instanceProps: this._instanceProps,
                            forwardHostProp: this._forwardHostPropV2,
                            notifyInstanceProp: this._notifyInstancePropV2
                        })
                    },
                    stamp(a) {
                        return new this.ctor(a)
                    },
                    modelForElement(a) {
                        return Polymer.Templatize.modelForElement(this._templatizerTemplate, a)
                    }
                };
                Polymer.Templatizer = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                const a = Polymer.GestureEventListeners(Polymer.OptionalMutableData(Polymer.PropertyEffects(HTMLElement)));
                class b extends a {
                    static get observedAttributes() {
                        return ["mutable-data"]
                    }
                    attributeChangedCallback() {
                        this.mutableData = !0
                    }
                    connectedCallback() {
                        this.render()
                    }
                    disconnectedCallback() {
                        this.__removeChildren()
                    }
                    __insertChildren() {
                        this.parentNode.insertBefore(this.root, this)
                    }
                    __removeChildren() {
                        if (this.__children)
                            for (let a = 0; a < this.__children.length; a++) this.root.appendChild(this.__children[a])
                    }
                    render() {
                        let a;
                        if (!this.__children) {
                            if (a = a || this.querySelector("template"), !a) {
                                let b = new MutationObserver(() => {
                                    if (a = this.querySelector("template"), a) b.disconnect(), this.render(a);
                                    else throw new Error("dom-bind requires a <template> child")
                                });
                                return void b.observe(this, {
                                    childList: !0
                                })
                            }
                            this.root = this._stampTemplate(a), this.$ = this.root.$, this.__children = [];
                            for (let a = this.root.firstChild; a; a = a.nextSibling) this.__children[this.__children.length] = a;
                            this._enableProperties()
                        }
                        this.__insertChildren(), this.dispatchEvent(new CustomEvent("dom-change", {
                            bubbles: !0,
                            composed: !0
                        }))
                    }
                }
                customElements.define("dom-bind", b)
            })();
        </script>
        <script>
            (function() {
                "use strict";
                const a = Polymer.ElementMixin(HTMLElement);
                Polymer.Element = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                const a = Polymer.OptionalMutableData(Polymer.Element);
                class b extends a {
                    static get is() {
                        return "dom-repeat"
                    }
                    static get template() {
                        return null
                    }
                    static get properties() {
                        return {
                            items: {
                                type: Array
                            },
                            as: {
                                type: String,
                                value: "item"
                            },
                            indexAs: {
                                type: String,
                                value: "index"
                            },
                            itemsIndexAs: {
                                type: String,
                                value: "itemsIndex"
                            },
                            sort: {
                                type: Function,
                                observer: "__sortChanged"
                            },
                            filter: {
                                type: Function,
                                observer: "__filterChanged"
                            },
                            observe: {
                                type: String,
                                observer: "__observeChanged"
                            },
                            delay: Number,
                            renderedItemCount: {
                                type: Number,
                                notify: !0,
                                readOnly: !0
                            },
                            initialCount: {
                                type: Number,
                                observer: "__initializeChunking"
                            },
                            targetFramerate: {
                                type: Number,
                                value: 20
                            },
                            _targetFrameTime: {
                                type: Number,
                                computed: "__computeFrameTime(targetFramerate)"
                            }
                        }
                    }
                    static get observers() {
                        return ["__itemsChanged(items.*)"]
                    }
                    constructor() {
                        super(), this.__instances = [], this.__limit = Infinity, this.__pool = [], this.__renderDebouncer = null, this.__itemsIdxToInstIdx = {}, this.__chunkCount = null, this.__lastChunkTime = null, this.__needFullRefresh = !1, this.__sortFn = null, this.__filterFn = null, this.__observePaths = null, this.__ctor = null
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), this.__isDetached = !0;
                        for (let a = 0; a < this.__instances.length; a++) this.__detachInstance(a)
                    }
                    connectedCallback() {
                        if (super.connectedCallback(), this.__isDetached) {
                            this.__isDetached = !1;
                            let a = this.parentNode;
                            for (let b = 0; b < this.__instances.length; b++) this.__attachInstance(b, a)
                        }
                    }
                    __ensureTemplatized() {
                        if (!this.__ctor) {
                            let a = this.template = this.querySelector("template");
                            if (!a) {
                                let a = new MutationObserver(() => {
                                    if (this.querySelector("template")) a.disconnect(), this.__render();
                                    else throw new Error("dom-repeat requires a <template> child")
                                });
                                return a.observe(this, {
                                    childList: !0
                                }), !1
                            }
                            let b = {};
                            b[this.as] = !0, b[this.indexAs] = !0, b[this.itemsIndexAs] = !0, this.__ctor = Polymer.Templatize.templatize(a, this, {
                                mutableData: this.mutableData,
                                parentModel: !0,
                                instanceProps: b,
                                forwardHostProp: function(a, b) {
                                    let c = this.__instances;
                                    for (let d, e = 0; e < c.length && (d = c[e]); e++) d.forwardHostProp(a, b)
                                },
                                notifyInstanceProp: function(a, b, c) {
                                    if (Polymer.Path.matches(this.as, b)) {
                                        let d = a[this.itemsIndexAs];
                                        b == this.as && (this.items[d] = c);
                                        let e = Polymer.Path.translate(this.as, "items." + d, b);
                                        this.notifyPath(e, c)
                                    }
                                }
                            })
                        }
                        return !0
                    }
                    __getMethodHost() {
                        return this.__dataHost._methodHost || this.__dataHost
                    }
                    __sortChanged(a) {
                        let b = this.__getMethodHost();
                        this.__sortFn = a && ("function" == typeof a ? a : function() {
                            return b[a].apply(b, arguments)
                        }), this.__needFullRefresh = !0, this.items && this.__debounceRender(this.__render)
                    }
                    __filterChanged(a) {
                        let b = this.__getMethodHost();
                        this.__filterFn = a && ("function" == typeof a ? a : function() {
                            return b[a].apply(b, arguments)
                        }), this.__needFullRefresh = !0, this.items && this.__debounceRender(this.__render)
                    }
                    __computeFrameTime(a) {
                        return Math.ceil(1e3 / a)
                    }
                    __initializeChunking() {
                        this.initialCount && (this.__limit = this.initialCount, this.__chunkCount = this.initialCount, this.__lastChunkTime = performance.now())
                    }
                    __tryRenderChunk() {
                        this.items && this.__limit < this.items.length && this.__debounceRender(this.__requestRenderChunk)
                    }
                    __requestRenderChunk() {
                        requestAnimationFrame(() => this.__renderChunk())
                    }
                    __renderChunk() {
                        let a = performance.now(),
                            b = this._targetFrameTime / (a - this.__lastChunkTime);
                        this.__chunkCount = Math.round(this.__chunkCount * b) || 1, this.__limit += this.__chunkCount, this.__lastChunkTime = a, this.__debounceRender(this.__render)
                    }
                    __observeChanged() {
                        this.__observePaths = this.observe && this.observe.replace(".*", ".").split(" ")
                    }
                    __itemsChanged(a) {
                        this.items && !Array.isArray(this.items) && console.warn("dom-repeat expected array for `items`, found", this.items), this.__handleItemPath(a.path, a.value) || (this.__needFullRefresh = !0, this.__initializeChunking(), this.__debounceRender(this.__render))
                    }
                    __handleObservedPaths(a) {
                        if (this.__observePaths) {
                            a = a.substring(a.indexOf(".") + 1);
                            let b = this.__observePaths;
                            for (let c = 0; c < b.length; c++)
                                if (0 === a.indexOf(b[c])) return this.__needFullRefresh = !0, this.__debounceRender(this.__render, this.delay), !0
                        }
                    }
                    __debounceRender(a, b) {
                        this.__renderDebouncer = Polymer.Debouncer.debounce(this.__renderDebouncer, 0 < b ? Polymer.Async.timeOut.after(b) : Polymer.Async.microTask, a.bind(this)), Polymer.enqueueDebouncer(this.__renderDebouncer)
                    }
                    render() {
                        this.__needFullRefresh = !0, this.__debounceRender(this.__render), Polymer.flush()
                    }
                    __render() {
                        this.__ensureTemplatized() && (this.__applyFullRefresh(), this.__pool.length = 0, this._setRenderedItemCount(this.__instances.length), this.dispatchEvent(new CustomEvent("dom-change", {
                            bubbles: !0,
                            composed: !0
                        })), this.__tryRenderChunk())
                    }
                    __applyFullRefresh() {
                        const c = this.items || [];
                        let a = Array(c.length);
                        for (let b = 0; b < c.length; b++) a[b] = b;
                        this.__filterFn && (a = a.filter((a, b, d) => this.__filterFn(c[a], b, d))), this.__sortFn && a.sort((d, a) => this.__sortFn(c[d], c[a]));
                        const b = this.__itemsIdxToInstIdx = {};
                        let d = 0;
                        for (const e = Math.min(a.length, this.__limit); d < e; d++) {
                            let e = this.__instances[d],
                                f = a[d],
                                g = c[f];
                            b[f] = d, e && d < this.__limit ? (e._setPendingProperty(this.as, g), e._setPendingProperty(this.indexAs, d), e._setPendingProperty(this.itemsIndexAs, f), e._flushProperties()) : this.__insertInstance(g, d, f)
                        }
                        for (let a = this.__instances.length - 1; a >= d; a--) this.__detachAndRemoveInstance(a)
                    }
                    __detachInstance(a) {
                        let b = this.__instances[a];
                        for (let c, d = 0; d < b.children.length; d++) c = b.children[d], b.root.appendChild(c);
                        return b
                    }
                    __attachInstance(a, b) {
                        let c = this.__instances[a];
                        b.insertBefore(c.root, this)
                    }
                    __detachAndRemoveInstance(a) {
                        let b = this.__detachInstance(a);
                        b && this.__pool.push(b), this.__instances.splice(a, 1)
                    }
                    __stampInstance(a, b, c) {
                        let d = {};
                        return d[this.as] = a, d[this.indexAs] = b, d[this.itemsIndexAs] = c, new this.__ctor(d)
                    }
                    __insertInstance(a, b, c) {
                        let d = this.__pool.pop();
                        d ? (d._setPendingProperty(this.as, a), d._setPendingProperty(this.indexAs, b), d._setPendingProperty(this.itemsIndexAs, c), d._flushProperties()) : d = this.__stampInstance(a, b, c);
                        let e = this.__instances[b + 1],
                            f = e ? e.children[0] : this;
                        return this.parentNode.insertBefore(d.root, f), this.__instances[b] = d, d
                    }
                    _showHideChildren(a) {
                        for (let b = 0; b < this.__instances.length; b++) this.__instances[b]._showHideChildren(a)
                    }
                    __handleItemPath(a, b) {
                        let c = a.slice(6),
                            d = c.indexOf("."),
                            e = 0 > d ? c : c.substring(0, d);
                        if (e == parseInt(e, 10)) {
                            let a = 0 > d ? "" : c.substring(d + 1);
                            if (!this.__handleObservedPaths(a)) {
                                let c = this.__itemsIdxToInstIdx[e],
                                    d = this.__instances[c];
                                if (d) {
                                    let c = this.as + (a ? "." + a : "");
                                    d._setPendingPropertyOrPath(c, b, !1, !0), d._flushProperties()
                                }
                            }
                            return !0
                        }
                    }
                    itemForElement(a) {
                        let b = this.modelForElement(a);
                        return b && b[this.as]
                    }
                    indexForElement(a) {
                        let b = this.modelForElement(a);
                        return b && b[this.indexAs]
                    }
                    modelForElement(a) {
                        return Polymer.Templatize.modelForElement(this.template, a)
                    }
                }
                customElements.define(b.is, b), Polymer.DomRepeat = b
            })();
        </script>
        <script>
            (function() {
                "use strict";
                class a extends Polymer.Element {
                    static get is() {
                        return "dom-if"
                    }
                    static get template() {
                        return null
                    }
                    static get properties() {
                        return {
                            if: {
                                type: Boolean,
                                observer: "__debounceRender"
                            },
                            restamp: {
                                type: Boolean,
                                observer: "__debounceRender"
                            }
                        }
                    }
                    constructor() {
                        super(), this.__renderDebouncer = null, this.__invalidProps = null, this.__instance = null
                    }
                    __debounceRender() {
                        this.__renderDebouncer = Polymer.Debouncer.debounce(this.__renderDebouncer, Polymer.Async.microTask, () => this.__render()), Polymer.enqueueDebouncer(this.__renderDebouncer)
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), this.parentNode && (this.parentNode.nodeType != Node.DOCUMENT_FRAGMENT_NODE || this.parentNode.host) || this.__teardownInstance()
                    }
                    connectedCallback() {
                        super.connectedCallback(), this.if && this.__debounceRender()
                    }
                    render() {
                        Polymer.flush()
                    }
                    __render() {
                        if (this.if) {
                            if (!this.__ensureInstance()) return;
                            this._showHideChildren()
                        } else this.restamp && this.__teardownInstance();
                        !this.restamp && this.__instance && this._showHideChildren(), this.if != this._lastIf && (this.dispatchEvent(new CustomEvent("dom-change", {
                            bubbles: !0,
                            composed: !0
                        })), this._lastIf = this.if)
                    }
                    __ensureInstance() {
                        let a = this.parentNode;
                        if (a) {
                            if (!this.__ctor) {
                                let a = this.querySelector("template");
                                if (!a) {
                                    let a = new MutationObserver(() => {
                                        if (this.querySelector("template")) a.disconnect(), this.__render();
                                        else throw new Error("dom-if requires a <template> child")
                                    });
                                    return a.observe(this, {
                                        childList: !0
                                    }), !1
                                }
                                this.__ctor = Polymer.Templatize.templatize(a, this, {
                                    mutableData: !0,
                                    forwardHostProp: function(a, b) {
                                        this.__instance && (this.if ? this.__instance.forwardHostProp(a, b) : (this.__invalidProps = this.__invalidProps || Object.create(null), this.__invalidProps[Polymer.Path.root(a)] = !0))
                                    }
                                })
                            }
                            if (!this.__instance) this.__instance = new this.__ctor, a.insertBefore(this.__instance.root, this);
                            else {
                                this.__syncHostProperties();
                                let b = this.__instance.children;
                                if (b && b.length) {
                                    let c = this.previousSibling;
                                    if (c !== b[b.length - 1])
                                        for (let c, d = 0; d < b.length && (c = b[d]); d++) a.insertBefore(c, this)
                                }
                            }
                        }
                        return !0
                    }
                    __syncHostProperties() {
                        let a = this.__invalidProps;
                        if (a) {
                            for (let b in a) this.__instance._setPendingProperty(b, this.__dataHost[b]);
                            this.__invalidProps = null, this.__instance._flushProperties()
                        }
                    }
                    __teardownInstance() {
                        if (this.__instance) {
                            let a = this.__instance.children;
                            if (a && a.length) {
                                let b = a[0].parentNode;
                                for (let c, d = 0; d < a.length && (c = a[d]); d++) b.removeChild(c)
                            }
                            this.__instance = null, this.__invalidProps = null
                        }
                    }
                    _showHideChildren() {
                        let a = this.__hideTemplateChildren__ || !this.if;
                        this.__instance && this.__instance._showHideChildren(a)
                    }
                }
                customElements.define(a.is, a), Polymer.DomIf = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = Polymer.dedupingMixin(a => {
                    class b extends a {
                        static get properties() {
                            return {
                                items: {
                                    type: Array
                                },
                                multi: {
                                    type: Boolean,
                                    value: !1
                                },
                                selected: {
                                    type: Object,
                                    notify: !0
                                },
                                selectedItem: {
                                    type: Object,
                                    notify: !0
                                },
                                toggle: {
                                    type: Boolean,
                                    value: !1
                                }
                            }
                        }
                        static get observers() {
                            return ["__updateSelection(multi, items.*)"]
                        }
                        constructor() {
                            super(), this.__lastItems = null, this.__lastMulti = null, this.__selectedMap = null
                        }
                        __updateSelection(a, b) {
                            let c = b.path;
                            if ("items" == c) {
                                let c = b.base || [],
                                    d = this.__lastItems,
                                    e = this.__lastMulti;
                                if (a !== e && this.clearSelection(), d) {
                                    let a = Polymer.ArraySplice.calculateSplices(c, d);
                                    this.__applySplices(a)
                                }
                                this.__lastItems = c, this.__lastMulti = a
                            } else if ("items.splices" == b.path) this.__applySplices(b.value.indexSplices);
                            else {
                                let a = c.slice(6),
                                    b = parseInt(a, 10);
                                0 > a.indexOf(".") && a == b && this.__deselectChangedIdx(b)
                            }
                        }
                        __applySplices(a) {
                            let b = this.__selectedMap;
                            for (let c, d = 0; d < a.length; d++) {
                                c = a[d], b.forEach((a, d) => {
                                    a < c.index || (a >= c.index + c.removed.length ? b.set(d, a + c.addedCount - c.removed.length) : b.set(d, -1))
                                });
                                for (let a, d = 0; d < c.addedCount; d++) a = c.index + d, b.has(this.items[a]) && b.set(this.items[a], a)
                            }
                            this.__updateLinks();
                            let c = 0;
                            b.forEach((a, d) => {
                                0 > a ? (this.multi ? this.splice("selected", c, 1) : this.selected = this.selectedItem = null, b.delete(d)) : c++
                            })
                        }
                        __updateLinks() {
                            if (this.__dataLinkedPaths = {}, this.multi) {
                                let a = 0;
                                this.__selectedMap.forEach(b => {
                                    0 <= b && this.linkPaths("items." + b, "selected." + a++)
                                })
                            } else this.__selectedMap.forEach(a => {
                                this.linkPaths("selected", "items." + a), this.linkPaths("selectedItem", "items." + a)
                            })
                        }
                        clearSelection() {
                            this.__dataLinkedPaths = {}, this.__selectedMap = new Map, this.selected = this.multi ? [] : null, this.selectedItem = null
                        }
                        isSelected(a) {
                            return this.__selectedMap.has(a)
                        }
                        isIndexSelected(a) {
                            return this.isSelected(this.items[a])
                        }
                        __deselectChangedIdx(a) {
                            let b = this.__selectedIndexForItemIndex(a);
                            if (0 <= b) {
                                let a = 0;
                                this.__selectedMap.forEach((c, d) => {
                                    b == a++ && this.deselect(d)
                                })
                            }
                        }
                        __selectedIndexForItemIndex(a) {
                            let b = this.__dataLinkedPaths["items." + a];
                            if (b) return parseInt(b.slice(9), 10)
                        }
                        deselect(a) {
                            let b = this.__selectedMap.get(a);
                            if (0 <= b) {
                                this.__selectedMap.delete(a);
                                let c;
                                this.multi && (c = this.__selectedIndexForItemIndex(b)), this.__updateLinks(), this.multi ? this.splice("selected", c, 1) : this.selected = this.selectedItem = null
                            }
                        }
                        deselectIndex(a) {
                            this.deselect(this.items[a])
                        }
                        select(a) {
                            this.selectIndex(this.items.indexOf(a))
                        }
                        selectIndex(a) {
                            let b = this.items[a];
                            this.isSelected(b) ? this.toggle && this.deselectIndex(a) : (!this.multi && this.__selectedMap.clear(), this.__selectedMap.set(b, a), this.__updateLinks(), this.multi ? this.push("selected", b) : this.selected = this.selectedItem = b)
                        }
                    }
                    return b
                });
                Polymer.ArraySelectorMixin = a;
                let b = a(Polymer.Element);
                class c extends b {
                    static get is() {
                        return "array-selector"
                    }
                }
                customElements.define(c.is, c), Polymer.ArraySelector = c
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(b) {
                    i = !(b && b.shimcssproperties) && (f || !navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/) && window.CSS && CSS.supports && CSS.supports("box-shadow", "0 0 0 var(--foo)"))
                }

                function d(c, a) {
                    for (var b in a) null === b ? c.style.removeProperty(b) : c.style.setProperty(b, a[b])
                }

                function b(b) {
                    requestAnimationFrame(function() {
                        k ? k(b) : (j || (j = new Promise(function(b) {
                            h = b
                        }), "complete" === document.readyState ? h() : document.addEventListener("readystatechange", function() {
                            "complete" === document.readyState && h()
                        })), j.then(function() {
                            b && b()
                        }))
                    })
                }

                function e() {
                    this.customStyles = [], this.enqueued = !1, b(function() {
                        window.ShadyCSS.flushCustomStyles && window.ShadyCSS.flushCustomStyles()
                    })
                }

                function g(c) {
                    !c.enqueued && m && (c.enqueued = !0, b(m))
                }
                var i, f = !(window.ShadyDOM && window.ShadyDOM.inUse);
                window.ShadyCSS && void 0 !== window.ShadyCSS.nativeCss ? i = window.ShadyCSS.nativeCss : window.ShadyCSS ? (a(window.ShadyCSS), window.ShadyCSS = void 0) : a(window.WebComponents && window.WebComponents.flags);
                var c = i;
                var h, j = null,
                    k = window.HTMLImports && window.HTMLImports.whenReady || null;
                var l = null,
                    m = null;
                e.prototype.c = function(b) {
                    b.__seenByShadyCSS || (b.__seenByShadyCSS = !0, this.customStyles.push(b), g(this))
                }, e.prototype.b = function(c) {
                    if (c.__shadyCSSCachedStyle) return c.__shadyCSSCachedStyle;
                    var a;
                    return a = c.getStyle ? c.getStyle() : c, a
                }, e.prototype.a = function() {
                    for (var c, d = this.customStyles, a = 0; a < d.length; a++)
                        if (c = d[a], !c.__shadyCSSCachedStyle) {
                            var b = this.b(c);
                            b && (b = b.__appliedElement || b, l && l(b), c.__shadyCSSCachedStyle = b)
                        } return d
                }, e.prototype.addCustomStyle = e.prototype.c, e.prototype.getStyleForCustomStyle = e.prototype.b, e.prototype.processStyles = e.prototype.a, Object.defineProperties(e.prototype, {
                    transformCallback: {
                        get: function() {
                            return l
                        },
                        set: function(b) {
                            l = b
                        }
                    },
                    validateCallback: {
                        get: function() {
                            return m
                        },
                        set: function(c) {
                            var a = !1;
                            m || (a = !0), m = c, a && g(this)
                        }
                    }
                });
                var n = new e;
                window.ShadyCSS || (window.ShadyCSS = {
                    prepareTemplate: function() {},
                    styleSubtree: function(c, a) {
                        n.a(), d(c, a)
                    },
                    styleElement: function() {
                        n.a()
                    },
                    styleDocument: function(b) {
                        n.a(), d(document.body, b)
                    },
                    getComputedStyleValue: function(c, a) {
                        return (c = window.getComputedStyle(c).getPropertyValue(a)) ? c.trim() : ""
                    },
                    flushCustomStyles: function() {},
                    nativeCss: c,
                    nativeShadow: f
                }), window.ShadyCSS.CustomStyleInterface = n
            }).call(this);
        </script>
        <script>
            (function() {
                "use strict";
                const a = window.ShadyCSS.CustomStyleInterface;
                class b extends HTMLElement {
                    constructor() {
                        super(), this._style = null, a.addCustomStyle(this)
                    }
                    getStyle() {
                        if (this._style) return this._style;
                        const a = this.querySelector("style");
                        if (a) {
                            this._style = a;
                            const b = a.getAttribute("include");
                            return b && (a.removeAttribute("include"), a.textContent = Polymer.StyleGather.cssFromModules(b) + a.textContent), this._style
                        }
                    }
                }
                window.customElements.define("custom-style", b), Polymer.CustomStyle = b
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = Polymer.MutableData._mutablePropertyChange;
                Polymer.MutableDataBehavior = {
                    _shouldPropertyChange(b, c, d) {
                        return a(this, b, c, d, !0)
                    }
                }, Polymer.OptionalMutableDataBehavior = {
                    properties: {
                        mutableData: Boolean
                    },
                    _shouldPropertyChange(b, c, d) {
                        return a(this, b, c, d, this.mutableData)
                    }
                }
            })();
        </script>
        <script>
            Polymer.Base = Polymer.LegacyElementMixin(HTMLElement).prototype;
        </script>
        <dom-module id="client-app" assetpath="../../styles/"><template>
                <style>#room{display:flex;flex-direction:column;align-items:stretch;width:100%;max-width:inherit;padding:0 0 0 270px;transition:.8s;}#room.wider{padding-left:0;}#room-content{display:flex;flex-direction:row;align-items:stretch;height:100%;min-height:100px;text-align:left;background-color:#f6f6f6;}@media screen and (max-width: 1200px){#room-content{flex-direction:column;}}@media screen and (max-width: 1000px){:host > #room{padding-left:0;}}@media screen and (max-width: 600px){#room-content{padding-top:54px;}#room.full-screen > #room-content{padding-top:0;}}#room.full-screen{padding-left:0;}</style>
            </template></dom-module>
        <script>
            (function() {
                "use strict";
                window.requestAnimationFrame = function() {
                    return function(a) {
                        window.setTimeout(a, 1e3 / 30)
                    }
                }(), Object.equals = function(a, b) {
                    if (a === b) return !0;
                    if (!(a instanceof Object) || !(b instanceof Object)) return !1;
                    if (a.constructor !== b.constructor) return !1;
                    for (var c in a)
                        if (a.hasOwnProperty(c)) {
                            if (!b.hasOwnProperty(c)) return !1;
                            if (a[c] !== b[c]) {
                                if ("object" !== typeof a[c]) return !1;
                                if (!Object.equals(a[c], b[c])) return !1
                            }
                        } for (c in b)
                        if (b.hasOwnProperty(c) && !a.hasOwnProperty(c)) return !1;
                    return !0
                }, Object.isObj = () => "object" === typeof fun, Object.isFunc = a => "function" === typeof a, Object.getName = function(a) {
                    return null === a ? "[object Null]" : Object.prototype.toString.call(a)
                }, Number.prototype.timeToReadable = function() {
                    function a(a) {
                        return 1 < a ? "s" : ""
                    }
                    var b = Math.floor;
                    let c = this;
                    var d = b(c / 31536e3);
                    if (d) return d + " year" + a(d);
                    var e = b((c %= 31536e3) / 86400);
                    if (e) return e + " day" + a(e);
                    var f = b((c %= 86400) / 3600);
                    if (f) return f + " hour" + a(f);
                    var g = b((c %= 3600) / 60);
                    if (g) return g + " minute" + a(g);
                    var h = c % 60;
                    return h ? h + " second" + a(h) : "less than a second"
                }, Event.prototype.stopPropagation || (Event.prototype.stopPropagation = function() {
                    this.cancelBubble = !0
                }), Event.prototype.preventDefault || (Event.prototype.preventDefault = function() {
                    event.getPreventDefault ? event.getPreventDefault() : event.defaultPrevented
                })
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.CookieUtils = new class {
                    constructor() {}
                    getCookie(a) {
                        var b = document.cookie.match(new RegExp("(?:^|; )" + a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, "\\$1") + "=([^;]*)"));
                        return b ? decodeURIComponent(b[1]) : void 0
                    }
                    setCookie(a, b, c) {
                        c = c || {};
                        var e = c.expires;
                        if ("number" == typeof e && e) {
                            var f = new Date;
                            f.setTime(f.getTime() + 1e3 * e), e = c.expires = f
                        }
                        e && e.toUTCString && (c.expires = e.toUTCString()), b = encodeURIComponent(b);
                        var d = a + "=" + b;
                        for (var g in c) {
                            d += "; " + g;
                            var h = c[g];
                            !0 !== h && (d += "=" + h)
                        }
                        document.cookie = d
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.EventBus = class {
                    constructor() {
                        this.listeners = {}
                    }
                    _getListenerIdx(a, b, c) {
                        let d, e = this.listeners[a],
                            f = -1;
                        if (!e || 0 === e.length) return f;
                        for (d = 0; d < e.length; d++)
                            if (e[d].callback === b && (!c || c === e[d].scope)) {
                                f = d;
                                break
                            } return f
                    }
                    subscribe(a, b, c) {
                        let d, e;
                        if (!a) throw new Error("Event name cannot be null or undefined");
                        if (!b || "function" !== typeof b) throw new Error("Listener must be of type function.");
                        e = this._getListenerIdx(a, b, c);
                        0 <= e || (d = {
                            callback: b,
                            scope: c
                        }, this.listeners[a] = this.listeners[a] || [], this.listeners[a].push(d))
                    }
                    unsubscribe(a, b, c) {
                        let d;
                        a && b && this.listeners[a] && (d = this._getListenerIdx(a, b, c), -1 === d || this.listeners[a].splice(d, 1))
                    }
                    broadcast(a, b) {
                        let c = this.listeners[a];
                        a && this.listeners[a] && (b = b || {}, c.forEach(function(a) {
                            a.callback.call(a.scope, b)
                        }))
                    }
                    reset() {
                        this.listeners = {}
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.Math.Guid = window.Math.Guid || function() {
                    var a = function(b, c, d) {
                            return b.length >= c ? b : a(d + b, c, d || " ")
                        },
                        b = function(b) {
                            var c = b.toString(16);
                            return a(c, 4, "0")
                        },
                        c = function() {
                            var a = new window.Uint16Array(8);
                            return window.crypto.getRandomValues(a), [b(a[0]) + b(a[1]), b(a[2]), b(a[3]), b(a[4]), b(a[5]) + b(a[6]) + b(a[7])].join("-")
                        },
                        d = function() {
                            var a = new Date().getTime();
                            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(b) {
                                var c = 0 | (a + 16 * Math.random()) % 16;
                                return a = Math.floor(a / 16), ("x" === b ? c : 8 | 7 & c).toString(16)
                            })
                        };
                    return {
                        newGuid: function() {
                            var a = "undefined" != typeof window.crypto,
                                b = "undefined" != typeof window.crypto.getRandomValues;
                            return a && b ? c() : d()
                        },
                        empty: "00000000-0000-0000-0000-000000000000"
                    }
                }(), window.Math.easeInOutQuad = function(a, e, b, c) {
                    return (a /= c / 2, 1 > a) ? b / 2 * a * a + e : (a--, -b / 2 * (a * (a - 2) - 1) + e)
                }, window.Math.easeInCubic = function(a, e, b, c) {
                    var d = (a /= c) * a * a;
                    return e + b * d
                }, window.Math.inOutQuintic = function(a, e, b, c) {
                    var d = (a /= c) * a,
                        f = d * a;
                    return e + b * (6 * f * d + -15 * d * d + 10 * f)
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";

                function a(a) {
                    this.context = a, this.instant = 0, this.slow = 0, this.clip = 0, this.script = a.createScriptProcessor(2048, 1, 1);
                    var b = this;
                    this.script.onaudioprocess = function(a) {
                        var c, d = a.inputBuffer.getChannelData(0),
                            e = 0,
                            f = 0;
                        for (c = 0; c < d.length; ++c) e += d[c] * d[c], .99 < Math.abs(d[c]) && (f += 1);
                        b.instant = Math.sqrt(e / d.length), b.slow = .95 * b.slow + .05 * b.instant, b.clip = f / d.length
                    }
                }
                var b = window.MediaStream;
                "undefined" === typeof b && "undefined" !== typeof webkitMediaStream && (b = webkitMediaStream), "undefined" === typeof b || "stop" in b.prototype || (b.prototype.stop = function() {
                    this.getVideoTracks().forEach(function(a) {
                        a.stop()
                    }), this.getAudioTracks().forEach(function(a) {
                        a.stop()
                    })
                }), navigator.mediaDevices === void 0 && (navigator.mediaDevices = {}), navigator.mediaDevices.getUserMedia === void 0 && (navigator.mediaDevices.getUserMedia = a => {
                    var b = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
                    return b ? new Promise((c, d) => {
                        b.call(navigator, a, c, d)
                    }) : Promise.reject(new Error("getUserMedia is not implemented in this browser"))
                }), window.AudioContext = window.AudioContext || window.webkitAudioContext, a.prototype.connectToSource = function(a, b) {
                    try {
                        this.mic = this.context.createMediaStreamSource(a), this.mic.connect(this.script), this.script.connect(this.context.destination), "undefined" !== typeof b && b(null)
                    } catch (a) {
                        console.error(a), "undefined" !== typeof b && b(a)
                    }
                }, a.prototype.stop = function() {
                    this.mic && this.mic.disconnect(), this.script && this.script.disconnect()
                }, window.SoundMeter = a, window.fullscreenManager = {
                    request: a => {
                        void 0 == a || (a.requestFullscreen ? a.requestFullscreen() : a.webkitRequestFullscreen ? a.webkitRequestFullscreen() : a.mozRequestFullScreen && a.mozRequestFullScreen())
                    },
                    status: () => {
                        let a = document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen;
                        return a
                    },
                    exit: () => {
                        document.ExitFullscreen ? document.ExitFullscreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.cancelFullscreen && document.cancelFullscreen()
                    },
                    addEventListener: (a, b) => {
                        document.addEventListener("webkitfullscreenchange", a, b), document.addEventListener("mozfullscreenchange", a, b), document.addEventListener("fullscreenchange", a, b), document.addEventListener("MSFullscreenChange", a, b)
                    },
                    removeEventListener: (a, b) => {
                        document.removeEventListener("webkitfullscreenchange", a, b), document.removeEventListener("mozfullscreenchange", a, b), document.removeEventListener("fullscreenchange", a, b), document.removeEventListener("MSFullscreenChange", a, b)
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                var a = String.prototype;
                a.format = function() {
                    for (var a, b = this, c = 0; c < arguments.length; c++) a = new RegExp("\\{" + c + "\\}", "gi"), b = b.replace(a, arguments[c]);
                    return b
                }, a.isEmpty = function() {
                    return !this || 0 === this.length
                }, a.isNotEmpty = function() {
                    return !this.isEmpty()
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = null;
                class b {
                    constructor() {}
                    static getInstance() {
                        return null == a && (a = new b), a
                    }
                    wsj(a, b) {
                        var d = new Promise(function(d, f) {
                            a.method = a.method == void 0 ? "GET" : a.method;
                            let e = a.params,
                                g = e == void 0 ? "" : Object.keys(e).map(function(a) {
                                    return encodeURIComponent(a) + "=" + encodeURIComponent(e[a])
                                }).join("&"),
                                h = e == void 0 ? void 0 : g,
                                i = 0 <= a.src.indexOf("?") ? "&" : "?",
                                j = "GET" == a.method ? a.src + i + g : a.src;
                            var k = new XMLHttpRequest;
                            k.onreadystatechange = function() {
                                if (4 == k.readyState)
                                    if (400 > k.status) try {
                                        b ? d(k.response) : d(JSON.parse(k.response))
                                    } catch (a) {
                                        f(new c(a.message + "\n" + k.response))
                                    } else f(new c(k.statusText))
                            }, k.open(a.method, j, !0), a["content-type"] !== void 0 && k.setRequestHeader("Content-Type", a["content-type"]), k.send(h)
                        });
                        return d
                    }
                }
                class c extends Error {}
                window.WebAPI = b, window.AJAXError = c
            })();
        </script>
        <script>
            ! function(a, b) {
                "function" == typeof define && define.amd ? define([], b) : "object" == typeof exports ? module.exports = b() : a.Autolinker = b()
            }(this, function() {
                var b = Math.ceil,
                    j = Math.floor,
                    k = function(a) {
                        a = a || {}, this.version = k.version, this.urls = this.normalizeUrlsCfg(a.urls), this.email = "boolean" != typeof a.email || a.email, this.phone = "boolean" != typeof a.phone || a.phone, this.hashtag = a.hashtag || !1, this.mention = a.mention || !1, this.newWindow = "boolean" != typeof a.newWindow || a.newWindow, this.stripPrefix = this.normalizeStripPrefixCfg(a.stripPrefix), this.stripTrailingSlash = "boolean" != typeof a.stripTrailingSlash || a.stripTrailingSlash, this.decodePercentEncoding = "boolean" != typeof a.decodePercentEncoding || a.decodePercentEncoding;
                        var b = this.mention;
                        if (!1 !== b && "twitter" !== b && "instagram" !== b) throw new Error("invalid `mention` cfg - see docs");
                        var c = this.hashtag;
                        if (!1 !== c && "twitter" !== c && "facebook" !== c && "instagram" !== c) throw new Error("invalid `hashtag` cfg - see docs");
                        this.truncate = this.normalizeTruncateCfg(a.truncate), this.className = a.className || "", this.replaceFn = a.replaceFn || null, this.context = a.context || this, this.htmlParser = null, this.matchers = null, this.tagBuilder = null
                    };
                return k.link = function(a, b) {
                    var c = new k(b);
                    return c.link(a)
                }, k.parse = function(a, b) {
                    var c = new k(b);
                    return c.parse(a)
                }, k.version = "1.6.2", k.prototype = {
                    constructor: k,
                    normalizeUrlsCfg: function(a) {
                        return null == a && (a = !0), "boolean" == typeof a ? {
                            schemeMatches: a,
                            wwwMatches: a,
                            tldMatches: a
                        } : {
                            schemeMatches: "boolean" != typeof a.schemeMatches || a.schemeMatches,
                            wwwMatches: "boolean" != typeof a.wwwMatches || a.wwwMatches,
                            tldMatches: "boolean" != typeof a.tldMatches || a.tldMatches
                        }
                    },
                    normalizeStripPrefixCfg: function(a) {
                        return null == a && (a = !0), "boolean" == typeof a ? {
                            scheme: a,
                            www: a
                        } : {
                            scheme: "boolean" != typeof a.scheme || a.scheme,
                            www: "boolean" != typeof a.www || a.www
                        }
                    },
                    normalizeTruncateCfg: function(a) {
                        return "number" == typeof a ? {
                            length: a,
                            location: "end"
                        } : k.Util.defaults(a || {}, {
                            length: Number.POSITIVE_INFINITY,
                            location: "end"
                        })
                    },
                    parse: function(b) {
                        for (var d = this.getHtmlParser(), e = d.parse(b), f = 0, g = [], a = 0, i = e.length; a < i; a++) {
                            var j = e[a],
                                k = j.getType();
                            if ("element" === k && "a" === j.getTagName()) j.isClosing() ? f = Math.max(f - 1, 0) : f++;
                            else if ("text" === k && 0 === f) {
                                var c = this.parseText(j.getText(), j.getOffset());
                                g.push.apply(g, c)
                            }
                        }
                        return g = this.compactMatches(g), g = this.removeUnwantedMatches(g)
                    },
                    compactMatches: function(b) {
                        b.sort(function(a, b) {
                            return a.getOffset() - b.getOffset()
                        });
                        for (var c = 0; c < b.length - 1; c++) {
                            var d = b[c],
                                e = d.getOffset(),
                                f = d.getMatchedText().length;
                            if (c + 1 < b.length) {
                                if (b[c + 1].getOffset() === e) {
                                    var a = b[c + 1].getMatchedText().length > f ? c : c + 1;
                                    b.splice(a, 1);
                                    continue
                                }
                                b[c + 1].getOffset() <= e + f && b.splice(c + 1, 1)
                            }
                        }
                        return b
                    },
                    removeUnwantedMatches: function(a) {
                        var b = k.Util.remove;
                        return this.hashtag || b(a, function(a) {
                            return "hashtag" === a.getType()
                        }), this.email || b(a, function(a) {
                            return "email" === a.getType()
                        }), this.phone || b(a, function(a) {
                            return "phone" === a.getType()
                        }), this.mention || b(a, function(a) {
                            return "mention" === a.getType()
                        }), this.urls.schemeMatches || b(a, function(a) {
                            return "url" === a.getType() && "scheme" === a.getUrlMatchType()
                        }), this.urls.wwwMatches || b(a, function(a) {
                            return "url" === a.getType() && "www" === a.getUrlMatchType()
                        }), this.urls.tldMatches || b(a, function(a) {
                            return "url" === a.getType() && "tld" === a.getUrlMatchType()
                        }), a
                    },
                    parseText: function(b, d) {
                        d = d || 0;
                        for (var e = this.getMatchers(), f = [], g = 0, a = e.length; g < a; g++) {
                            for (var h = e[g].parseMatches(b), i = 0, j = h.length; i < j; i++) h[i].setOffset(d + h[i].getOffset());
                            f.push.apply(f, h)
                        }
                        return f
                    },
                    link: function(b) {
                        if (!b) return "";
                        for (var c, d = this.parse(b), e = [], f = 0, g = 0, a = d.length; g < a; g++) c = d[g], e.push(b.substring(f, c.getOffset())), e.push(this.createMatchReturnVal(c)), f = c.getOffset() + c.getMatchedText().length;
                        return e.push(b.substring(f)), e.join("")
                    },
                    createMatchReturnVal: function(a) {
                        var b;
                        if (this.replaceFn && (b = this.replaceFn.call(this.context, a)), "string" == typeof b) return b;
                        if (!1 === b) return a.getMatchedText();
                        if (b instanceof k.HtmlTag) return b.toAnchorString();
                        var c = a.buildTag();
                        return c.toAnchorString()
                    },
                    getHtmlParser: function() {
                        var a = this.htmlParser;
                        return a || (a = this.htmlParser = new k.htmlParser.HtmlParser), a
                    },
                    getMatchers: function() {
                        if (this.matchers) return this.matchers;
                        var a = k.matcher,
                            b = this.getTagBuilder(),
                            c = [new a.Hashtag({
                                tagBuilder: b,
                                serviceName: this.hashtag
                            }), new a.Email({
                                tagBuilder: b
                            }), new a.Phone({
                                tagBuilder: b
                            }), new a.Mention({
                                tagBuilder: b,
                                serviceName: this.mention
                            }), new a.Url({
                                tagBuilder: b,
                                stripPrefix: this.stripPrefix,
                                stripTrailingSlash: this.stripTrailingSlash,
                                decodePercentEncoding: this.decodePercentEncoding
                            })];
                        return this.matchers = c
                    },
                    getTagBuilder: function() {
                        var a = this.tagBuilder;
                        return a || (a = this.tagBuilder = new k.AnchorTagBuilder({
                            newWindow: this.newWindow,
                            truncate: this.truncate,
                            className: this.className
                        })), a
                    }
                }, k.match = {}, k.matcher = {}, k.htmlParser = {}, k.truncate = {}, k.Util = {
                    abstractMethod: function() {
                        throw "abstract"
                    },
                    trimRegex: /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
                    assign: function(a, b) {
                        for (var c in b) b.hasOwnProperty(c) && (a[c] = b[c]);
                        return a
                    },
                    defaults: function(a, b) {
                        for (var c in b) b.hasOwnProperty(c) && void 0 === a[c] && (a[c] = b[c]);
                        return a
                    },
                    extend: function(b, c) {
                        var d = b.prototype,
                            e = function() {};
                        e.prototype = d;
                        var a = c.hasOwnProperty("constructor") ? c.constructor : function() {
                            d.constructor.apply(this, arguments)
                        };
                        var f = a.prototype = new e;
                        return f.constructor = a, f.superclass = d, delete c.constructor, k.Util.assign(f, c), a
                    },
                    ellipsis: function(a, b, c) {
                        var d;
                        return a.length > b && (null == c ? (c = "&hellip;", d = 3) : d = c.length, a = a.substring(0, b - d) + c), a
                    },
                    indexOf: function(a, b) {
                        if (Array.prototype.indexOf) return a.indexOf(b);
                        for (var c = 0, d = a.length; c < d; c++)
                            if (a[c] === b) return c;
                        return -1
                    },
                    remove: function(a, b) {
                        for (var c = a.length - 1; 0 <= c; c--) !0 === b(a[c]) && a.splice(c, 1)
                    },
                    splitAndCapture: function(b, c) {
                        for (var d, e = [], f = 0; d = c.exec(b);) e.push(b.substring(f, d.index)), e.push(d[0]), f = d.index + d[0].length;
                        return e.push(b.substring(f)), e
                    },
                    trim: function(a) {
                        return a.replace(this.trimRegex, "")
                    }
                }, k.HtmlTag = k.Util.extend(Object, {
                    whitespaceRegex: /\s+/,
                    constructor: function(a) {
                        k.Util.assign(this, a), this.innerHtml = this.innerHtml || this.innerHTML
                    },
                    setTagName: function(a) {
                        return this.tagName = a, this
                    },
                    getTagName: function() {
                        return this.tagName || ""
                    },
                    setAttr: function(a, b) {
                        var c = this.getAttrs();
                        return c[a] = b, this
                    },
                    getAttr: function(a) {
                        return this.getAttrs()[a]
                    },
                    setAttrs: function(a) {
                        var b = this.getAttrs();
                        return k.Util.assign(b, a), this
                    },
                    getAttrs: function() {
                        return this.attrs || (this.attrs = {})
                    },
                    setClass: function(a) {
                        return this.setAttr("class", a)
                    },
                    addClass: function(b) {
                        for (var c, d = this.getClass(), e = this.whitespaceRegex, a = k.Util.indexOf, f = d ? d.split(e) : [], g = b.split(e); c = g.shift();) - 1 === a(f, c) && f.push(c);
                        return this.getAttrs()["class"] = f.join(" "), this
                    },
                    removeClass: function(b) {
                        for (var d, e, c = this.getClass(), f = this.whitespaceRegex, a = k.Util.indexOf, g = c ? c.split(f) : [], h = b.split(f); g.length && (d = h.shift());) e = a(g, d), -1 !== e && g.splice(e, 1);
                        return this.getAttrs()["class"] = g.join(" "), this
                    },
                    getClass: function() {
                        return this.getAttrs()["class"] || ""
                    },
                    hasClass: function(a) {
                        return -1 !== (" " + this.getClass() + " ").indexOf(" " + a + " ")
                    },
                    setInnerHtml: function(a) {
                        return this.innerHtml = a, this
                    },
                    getInnerHtml: function() {
                        return this.innerHtml || ""
                    },
                    toAnchorString: function() {
                        var a = this.getTagName(),
                            b = this.buildAttrsStr();
                        return b = b ? " " + b : "", ["<", a, b, ">", this.getInnerHtml(), "</", a, ">"].join("")
                    },
                    buildAttrsStr: function() {
                        if (!this.attrs) return "";
                        var a = this.getAttrs(),
                            b = [];
                        for (var c in a) a.hasOwnProperty(c) && b.push(c + "=\"" + a[c] + "\"");
                        return b.join(" ")
                    }
                }), k.RegexLib = function() {
                    var a = function(a) {
                        return "(?=([A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19](?:[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19\\-]{0,61}[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])?))\\" + a
                    };
                    return {
                        alphaNumericCharsStr: "A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19",
                        alphaCharsStr: "A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",
                        getDomainNameStr: function(b) {
                            return "(?:" + a(b) + "(?:\\." + a(b + 1) + "){0,126}|" + "(?:[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]{1,3}\\.){3}[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]{1,3}" + ")"
                        }
                    }
                }(), k.AnchorTagBuilder = k.Util.extend(Object, {
                    constructor: function(a) {
                        a = a || {}, this.newWindow = a.newWindow, this.truncate = a.truncate, this.className = a.className
                    },
                    build: function(a) {
                        return new k.HtmlTag({
                            tagName: "a",
                            attrs: this.createAttrs(a),
                            innerHtml: this.processAnchorText(a.getAnchorText())
                        })
                    },
                    createAttrs: function(a) {
                        var b = {
                                href: a.getAnchorHref()
                            },
                            c = this.createCssClass(a);
                        return c && (b["class"] = c), this.newWindow && (b.target = "_blank", b.rel = "noopener noreferrer"), this.truncate && this.truncate.length && this.truncate.length < a.getAnchorText().length && (b.title = a.getAnchorHref()), b
                    },
                    createCssClass: function(b) {
                        var c = this.className;
                        if (c) {
                            for (var d = [c], e = b.getCssClassSuffixes(), f = 0, a = e.length; f < a; f++) d.push(c + "-" + e[f]);
                            return d.join(" ")
                        }
                        return ""
                    },
                    processAnchorText: function(a) {
                        return a = this.doTruncate(a)
                    },
                    doTruncate: function(b) {
                        var c = this.truncate;
                        if (!c || !c.length) return b;
                        var d = c.length,
                            e = c.location;
                        return "smart" === e ? k.truncate.TruncateSmart(b, d) : "middle" === e ? k.truncate.TruncateMiddle(b, d) : k.truncate.TruncateEnd(b, d)
                    }
                }), k.htmlParser.HtmlParser = k.Util.extend(Object, {
                    htmlRegex: function() {
                        var b = /!--([\s\S]+?)--/,
                            c = /[0-9a-zA-Z][0-9a-zA-Z:]*/,
                            d = /[^\s"'>\/=\x00-\x1F\x7F]+/,
                            e = /(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,
                            f = "(?:\\s*?=\\s*?" + e.source + ")?",
                            a = function(a) {
                                return "(?=(" + d.source + "))\\" + a + f
                            };
                        return new RegExp(["(?:", "<(!DOCTYPE)", "(?:", "\\s+", "(?:", a(2), "|", e.source + ")", ")*", ">", ")", "|", "(?:", "<(/)?", "(?:", b.source, "|", "(?:", "(" + c.source + ")", "\\s*/?", ")", "|", "(?:", "(" + c.source + ")", "\\s+", "(?:", "(?:\\s+|\\b)", a(7), ")*", "\\s*/?", ")", ")", ">", ")"].join(""), "gi")
                    }(),
                    htmlCharacterEntitiesRegex: /(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,
                    parse: function(b) {
                        for (var d, e, f = this.htmlRegex, j = 0, a = []; null !== (d = f.exec(b));) {
                            var i = d[0],
                                k = d[4],
                                m = d[1] || d[5] || d[6],
                                c = !!d[3],
                                h = d.index,
                                l = b.substring(j, h);
                            l && (e = this.parseTextAndEntityNodes(j, l), a.push.apply(a, e)), k ? a.push(this.createCommentNode(h, i, k)) : a.push(this.createElementNode(h, i, m, c)), j = h + i.length
                        }
                        if (j < b.length) {
                            var n = b.substring(j);
                            n && (e = this.parseTextAndEntityNodes(j, n), e.forEach(function(b) {
                                a.push(b)
                            }))
                        }
                        return a
                    },
                    parseTextAndEntityNodes: function(b, d) {
                        for (var e = [], f = k.Util.splitAndCapture(d, this.htmlCharacterEntitiesRegex), a = 0, g = f.length; a < g; a += 2) {
                            var h = f[a],
                                i = f[a + 1];
                            h && (e.push(this.createTextNode(b, h)), b += h.length), i && (e.push(this.createEntityNode(b, i)), b += i.length)
                        }
                        return e
                    },
                    createCommentNode: function(a, b, c) {
                        return new k.htmlParser.CommentNode({
                            offset: a,
                            text: b,
                            comment: k.Util.trim(c)
                        })
                    },
                    createElementNode: function(b, c, d, e) {
                        return new k.htmlParser.ElementNode({
                            offset: b,
                            text: c,
                            tagName: d.toLowerCase(),
                            closing: e
                        })
                    },
                    createEntityNode: function(a, b) {
                        return new k.htmlParser.EntityNode({
                            offset: a,
                            text: b
                        })
                    },
                    createTextNode: function(a, b) {
                        return new k.htmlParser.TextNode({
                            offset: a,
                            text: b
                        })
                    }
                }), k.htmlParser.HtmlNode = k.Util.extend(Object, {
                    offset: void 0,
                    text: void 0,
                    constructor: function(a) {
                        k.Util.assign(this, a)
                    },
                    getType: k.Util.abstractMethod,
                    getOffset: function() {
                        return this.offset
                    },
                    getText: function() {
                        return this.text
                    }
                }), k.htmlParser.CommentNode = k.Util.extend(k.htmlParser.HtmlNode, {
                    comment: "",
                    getType: function() {
                        return "comment"
                    },
                    getComment: function() {
                        return this.comment
                    }
                }), k.htmlParser.ElementNode = k.Util.extend(k.htmlParser.HtmlNode, {
                    tagName: "",
                    closing: !1,
                    getType: function() {
                        return "element"
                    },
                    getTagName: function() {
                        return this.tagName
                    },
                    isClosing: function() {
                        return this.closing
                    }
                }), k.htmlParser.EntityNode = k.Util.extend(k.htmlParser.HtmlNode, {
                    getType: function() {
                        return "entity"
                    }
                }), k.htmlParser.TextNode = k.Util.extend(k.htmlParser.HtmlNode, {
                    getType: function() {
                        return "text"
                    }
                }), k.match.Match = k.Util.extend(Object, {
                    constructor: function(a) {
                        this.tagBuilder = a.tagBuilder, this.matchedText = a.matchedText, this.offset = a.offset
                    },
                    getType: k.Util.abstractMethod,
                    getMatchedText: function() {
                        return this.matchedText
                    },
                    setOffset: function(a) {
                        this.offset = a
                    },
                    getOffset: function() {
                        return this.offset
                    },
                    getAnchorHref: k.Util.abstractMethod,
                    getAnchorText: k.Util.abstractMethod,
                    getCssClassSuffixes: function() {
                        return [this.getType()]
                    },
                    buildTag: function() {
                        return this.tagBuilder.build(this)
                    }
                }), k.match.Email = k.Util.extend(k.match.Match, {
                    constructor: function(a) {
                        k.match.Match.prototype.constructor.call(this, a), this.email = a.email
                    },
                    getType: function() {
                        return "email"
                    },
                    getEmail: function() {
                        return this.email
                    },
                    getAnchorHref: function() {
                        return "mailto:" + this.email
                    },
                    getAnchorText: function() {
                        return this.email
                    }
                }), k.match.Hashtag = k.Util.extend(k.match.Match, {
                    constructor: function(a) {
                        k.match.Match.prototype.constructor.call(this, a), this.serviceName = a.serviceName, this.hashtag = a.hashtag
                    },
                    getType: function() {
                        return "hashtag"
                    },
                    getServiceName: function() {
                        return this.serviceName
                    },
                    getHashtag: function() {
                        return this.hashtag
                    },
                    getAnchorHref: function() {
                        var a = this.serviceName,
                            b = this.hashtag;
                        switch (a) {
                            case "twitter":
                                return "https://twitter.com/hashtag/" + b;
                            case "facebook":
                                return "https://www.facebook.com/hashtag/" + b;
                            case "instagram":
                                return "https://instagram.com/explore/tags/" + b;
                            default:
                                throw new Error("Unknown service name to point hashtag to: ", a);
                        }
                    },
                    getAnchorText: function() {
                        return "#" + this.hashtag
                    }
                }), k.match.Phone = k.Util.extend(k.match.Match, {
                    constructor: function(a) {
                        k.match.Match.prototype.constructor.call(this, a), this.number = a.number, this.plusSign = a.plusSign
                    },
                    getType: function() {
                        return "phone"
                    },
                    getNumber: function() {
                        return this.number
                    },
                    getAnchorHref: function() {
                        return "tel:" + (this.plusSign ? "+" : "") + this.number
                    },
                    getAnchorText: function() {
                        return this.matchedText
                    }
                }), k.match.Mention = k.Util.extend(k.match.Match, {
                    constructor: function(a) {
                        k.match.Match.prototype.constructor.call(this, a), this.mention = a.mention, this.serviceName = a.serviceName
                    },
                    getType: function() {
                        return "mention"
                    },
                    getMention: function() {
                        return this.mention
                    },
                    getServiceName: function() {
                        return this.serviceName
                    },
                    getAnchorHref: function() {
                        switch (this.serviceName) {
                            case "twitter":
                                return "https://twitter.com/" + this.mention;
                            case "instagram":
                                return "https://instagram.com/" + this.mention;
                            default:
                                throw new Error("Unknown service name to point mention to: ", this.serviceName);
                        }
                    },
                    getAnchorText: function() {
                        return "@" + this.mention
                    },
                    getCssClassSuffixes: function() {
                        var a = k.match.Match.prototype.getCssClassSuffixes.call(this),
                            b = this.getServiceName();
                        return b && a.push(b), a
                    }
                }), k.match.Url = k.Util.extend(k.match.Match, {
                    constructor: function(a) {
                        k.match.Match.prototype.constructor.call(this, a), this.urlMatchType = a.urlMatchType, this.url = a.url, this.protocolUrlMatch = a.protocolUrlMatch, this.protocolRelativeMatch = a.protocolRelativeMatch, this.stripPrefix = a.stripPrefix, this.stripTrailingSlash = a.stripTrailingSlash, this.decodePercentEncoding = a.decodePercentEncoding
                    },
                    schemePrefixRegex: /^(https?:\/\/)?/i,
                    wwwPrefixRegex: /^(https?:\/\/)?(www\.)?/i,
                    protocolRelativeRegex: /^\/\//,
                    protocolPrepended: !1,
                    getType: function() {
                        return "url"
                    },
                    getUrlMatchType: function() {
                        return this.urlMatchType
                    },
                    getUrl: function() {
                        var a = this.url;
                        return this.protocolRelativeMatch || this.protocolUrlMatch || this.protocolPrepended || (a = this.url = "http://" + a, this.protocolPrepended = !0), a
                    },
                    getAnchorHref: function() {
                        var a = this.getUrl();
                        return a.replace(/&amp;/g, "&")
                    },
                    getAnchorText: function() {
                        var a = this.getMatchedText();
                        return this.protocolRelativeMatch && (a = this.stripProtocolRelativePrefix(a)), this.stripPrefix.scheme && (a = this.stripSchemePrefix(a)), this.stripPrefix.www && (a = this.stripWwwPrefix(a)), this.stripTrailingSlash && (a = this.removeTrailingSlash(a)), this.decodePercentEncoding && (a = this.removePercentEncoding(a)), a
                    },
                    stripSchemePrefix: function(a) {
                        return a.replace(this.schemePrefixRegex, "")
                    },
                    stripWwwPrefix: function(a) {
                        return a.replace(this.wwwPrefixRegex, "$1")
                    },
                    stripProtocolRelativePrefix: function(a) {
                        return a.replace(this.protocolRelativeRegex, "")
                    },
                    removeTrailingSlash: function(a) {
                        return "/" === a.charAt(a.length - 1) && (a = a.slice(0, -1)), a
                    },
                    removePercentEncoding: function(a) {
                        try {
                            return decodeURIComponent(a.replace(/%22/gi, "&quot;").replace(/%26/gi, "&amp;").replace(/%27/gi, "&#39;").replace(/%3C/gi, "&lt;").replace(/%3E/gi, "&gt;"))
                        } catch (b) {
                            return a
                        }
                    }
                }), k.tldRegex = /(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermgensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermgensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|international|lifeinsurance|orientexpress|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|pamperedchef|scholarships|versicherung|xn--3e0b707e|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--3bst00m|xn--3ds443g|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b||accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|goodhands|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|mcdonalds|melbourne|microsoft|montblanc|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|telecity|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama||abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|panerai|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|spiegel|staples|starhub|statoil|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich||||||||abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|xperia|yachts|yandex|zappos||||||||||||actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|boots|bosch|build|canon|cards|chase|cheap|chloe|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vista|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|||||||||||aarp|able|adac|aero|aigo|akdn|ally|amex|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|mtpc|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sapo|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|||||||||||||||||||||aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|htc|ibm|ice|icu|ifm|ing|ink|int|ist|itv|iwc|jcb|jcp|jio|jlc|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|lol|lpl|ltd|man|mba|mcd|med|men|meo|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|||||||||||||||||||||||||||||ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)/, k.matcher.Matcher = k.Util.extend(Object, {
                    constructor: function(a) {
                        this.tagBuilder = a.tagBuilder
                    },
                    parseMatches: k.Util.abstractMethod
                }), k.matcher.Email = k.Util.extend(k.matcher.Matcher, {
                    matcherRegex: function() {
                        var b = k.RegexLib.alphaNumericCharsStr,
                            d = b + "!#$%&'*+\\-\\/=?^_`{|}~",
                            a = new RegExp("(?:[" + d + "](?:[" + d + "]|\\.(?!\\.|@))*|\\\"[" + (d + "\\s\"(),:;<>@\\[\\]") + ".]+\\\")@"),
                            e = k.RegexLib.getDomainNameStr,
                            f = k.tldRegex;
                        return new RegExp([a.source, e(1), "\\.", f.source].join(""), "gi")
                    }(),
                    parseMatches: function(b) {
                        for (var c, d, e = this.matcherRegex, f = this.tagBuilder, a = []; null !== (c = e.exec(b));) d = c[0], a.push(new k.match.Email({
                            tagBuilder: f,
                            matchedText: d,
                            offset: c.index,
                            email: d
                        }));
                        return a
                    }
                }), k.matcher.Hashtag = k.Util.extend(k.matcher.Matcher, {
                    matcherRegex: new RegExp("#[_" + k.RegexLib.alphaNumericCharsStr + "]{1,139}", "g"),
                    nonWordCharRegex: new RegExp("[^" + k.RegexLib.alphaNumericCharsStr + "]"),
                    constructor: function(a) {
                        k.matcher.Matcher.prototype.constructor.call(this, a), this.serviceName = a.serviceName
                    },
                    parseMatches: function(b) {
                        for (var d, e = this.matcherRegex, f = this.nonWordCharRegex, a = this.serviceName, g = this.tagBuilder, i = []; null !== (d = e.exec(b));) {
                            var j = d.index,
                                c = b.charAt(j - 1);
                            if (0 === j || f.test(c)) {
                                var h = d[0],
                                    l = d[0].slice(1);
                                i.push(new k.match.Hashtag({
                                    tagBuilder: g,
                                    matchedText: h,
                                    offset: j,
                                    serviceName: a,
                                    hashtag: l
                                }))
                            }
                        }
                        return i
                    }
                }), k.matcher.Phone = k.Util.extend(k.matcher.Matcher, {
                    matcherRegex: /(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4}([,;]*[0-9]+#?)*/g,
                    parseMatches: function(b) {
                        for (var d, e = this.matcherRegex, f = this.tagBuilder, a = []; null !== (d = e.exec(b));) {
                            var g = d[0],
                                h = g.replace(/[^0-9,;#]/g, ""),
                                i = !!d[1];
                            this.testMatch(d[2]) && this.testMatch(g) && a.push(new k.match.Phone({
                                tagBuilder: f,
                                matchedText: g,
                                offset: d.index,
                                number: h,
                                plusSign: i
                            }))
                        }
                        return a
                    },
                    testMatch: function(a) {
                        return /\D/.test(a)
                    }
                }), k.matcher.Mention = k.Util.extend(k.matcher.Matcher, {
                    matcherRegexes: {
                        twitter: new RegExp("@[_" + k.RegexLib.alphaNumericCharsStr + "]{1,20}", "g"),
                        instagram: new RegExp("@[_." + k.RegexLib.alphaNumericCharsStr + "]{1,50}", "g")
                    },
                    nonWordCharRegex: new RegExp("[^" + k.RegexLib.alphaNumericCharsStr + "]"),
                    constructor: function(a) {
                        k.matcher.Matcher.prototype.constructor.call(this, a), this.serviceName = a.serviceName
                    },
                    parseMatches: function(b) {
                        var d, e = this.matcherRegexes[this.serviceName],
                            f = this.nonWordCharRegex,
                            a = this.serviceName,
                            g = this.tagBuilder,
                            i = [];
                        if (!e) return i;
                        for (; null !== (d = e.exec(b));) {
                            var j = d.index,
                                c = b.charAt(j - 1);
                            if (0 === j || f.test(c)) {
                                var h = d[0].replace(/\.+$/g, ""),
                                    l = h.slice(1);
                                i.push(new k.match.Mention({
                                    tagBuilder: g,
                                    matchedText: h,
                                    offset: j,
                                    serviceName: a,
                                    mention: l
                                }))
                            }
                        }
                        return i
                    }
                }), k.matcher.Url = k.Util.extend(k.matcher.Matcher, {
                    matcherRegex: function() {
                        var b = /(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/,
                            c = /(?:www\.)/,
                            d = k.RegexLib.getDomainNameStr,
                            e = k.tldRegex,
                            a = k.RegexLib.alphaNumericCharsStr,
                            f = new RegExp("[/?#](?:[" + a + "\\-+&@#/%=~_()|'$*\\[\\]?!:,.;\u2713]*[" + a + "\\-+&@#/%=~_()|'$*\\[\\]\u2713])?");
                        return new RegExp(["(?:", "(", b.source, d(2), ")", "|", "(", "(//)?", c.source, d(6), ")", "|", "(", "(//)?", d(10) + "\\.", e.source, "(?![-" + a + "])", ")", ")", "(?::[0-9]+)?", "(?:" + f.source + ")?"].join(""), "gi")
                    }(),
                    wordCharRegExp: new RegExp("[" + k.RegexLib.alphaNumericCharsStr + "]"),
                    openParensRe: /\(/g,
                    closeParensRe: /\)/g,
                    constructor: function(a) {
                        k.matcher.Matcher.prototype.constructor.call(this, a), this.stripPrefix = a.stripPrefix, this.stripTrailingSlash = a.stripTrailingSlash, this.decodePercentEncoding = a.decodePercentEncoding
                    },
                    parseMatches: function(e) {
                        for (var j, q = this.matcherRegex, n = this.stripPrefix, a = this.stripTrailingSlash, i = this.decodePercentEncoding, r = this.tagBuilder, o = []; null !== (j = q.exec(e));) {
                            var c = j[0],
                                h = j[1],
                                l = j[4],
                                s = j[5],
                                g = j[9],
                                m = j.index,
                                f = s || g,
                                d = e.charAt(m - 1);
                            if (k.matcher.UrlMatchValidator.isValid(c, h) && !(0 < m && "@" === d || 0 < m && f && this.wordCharRegExp.test(d))) {
                                if (/\?$/.test(c) && (c = c.substr(0, c.length - 1)), this.matchHasUnbalancedClosingParen(c)) c = c.substr(0, c.length - 1);
                                else {
                                    var p = this.matchHasInvalidCharAfterTld(c, h); - 1 < p && (c = c.substr(0, p))
                                }
                                var t = h ? "scheme" : l ? "www" : "tld";
                                o.push(new k.match.Url({
                                    tagBuilder: r,
                                    matchedText: c,
                                    offset: m,
                                    urlMatchType: t,
                                    url: c,
                                    protocolUrlMatch: !!h,
                                    protocolRelativeMatch: !!f,
                                    stripPrefix: n,
                                    stripTrailingSlash: a,
                                    decodePercentEncoding: i
                                }))
                            }
                        }
                        return o
                    },
                    matchHasUnbalancedClosingParen: function(b) {
                        var c = b.charAt(b.length - 1);
                        if (")" === c) {
                            var d = b.match(this.openParensRe),
                                e = b.match(this.closeParensRe),
                                f = d && d.length || 0,
                                a = e && e.length || 0;
                            if (f < a) return !0
                        }
                        return !1
                    },
                    matchHasInvalidCharAfterTld: function(b, c) {
                        if (!b) return -1;
                        var d = 0;
                        c && (d = b.indexOf(":"), b = b.slice(d));
                        var e = k.RegexLib.alphaNumericCharsStr,
                            a = new RegExp("^((.?//)?[-." + e + "]*[-" + e + "]\\.[-" + e + "]+)"),
                            f = a.exec(b);
                        return null === f ? -1 : (d += f[1].length, b = b.slice(f[1].length), /^[^-.A-Za-z0-9:\/?#]/.test(b) ? d : -1)
                    }
                }), k.matcher.UrlMatchValidator = {
                    hasFullProtocolRegex: /^[A-Za-z][-.+A-Za-z0-9]*:\/\//,
                    uriSchemeRegex: /^[A-Za-z][-.+A-Za-z0-9]*:/,
                    hasWordCharAfterProtocolRegex: new RegExp(":[^\\s]*?[" + k.RegexLib.alphaCharsStr + "]"),
                    ipRegex: /[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,
                    isValid: function(a, b) {
                        return !(b && !this.isValidUriScheme(b) || this.urlMatchDoesNotHaveProtocolOrDot(a, b) || this.urlMatchDoesNotHaveAtLeastOneWordChar(a, b) && !this.isValidIpAddress(a) || this.containsMultipleDots(a))
                    },
                    isValidIpAddress: function(a) {
                        var b = new RegExp(this.hasFullProtocolRegex.source + this.ipRegex.source),
                            c = a.match(b);
                        return null !== c
                    },
                    containsMultipleDots: function(a) {
                        var b = a;
                        return this.hasFullProtocolRegex.test(a) && (b = a.split("://")[1]), -1 < b.split("/")[0].indexOf("..")
                    },
                    isValidUriScheme: function(a) {
                        var b = a.match(this.uriSchemeRegex)[0].toLowerCase();
                        return "javascript:" !== b && "vbscript:" !== b
                    },
                    urlMatchDoesNotHaveProtocolOrDot: function(a, b) {
                        return !(!a || b && this.hasFullProtocolRegex.test(b) || -1 !== a.indexOf("."))
                    },
                    urlMatchDoesNotHaveAtLeastOneWordChar: function(a, b) {
                        return a && b && !this.hasWordCharAfterProtocolRegex.test(a)
                    }
                }, k.truncate.TruncateEnd = function(a, b, c) {
                    return k.Util.ellipsis(a, b, c)
                }, k.truncate.TruncateMiddle = function(c, d, e) {
                    if (c.length <= d) return c;
                    var f, g;
                    null == e ? (e = "&hellip;", f = 8, g = 3) : (f = e.length, g = e.length);
                    var a = d - g,
                        h = "";
                    return 0 < a && (h = c.substr(-1 * j(a / 2))), (c.substr(0, b(a / 2)) + e + h).substr(0, a + f)
                }, k.truncate.TruncateSmart = function(k, e, q) {
                    var r, n;
                    null == q ? (q = "&hellip;", n = 3, r = 8) : (n = q.length, r = q.length);
                    var a = function(a) {
                            var b = {},
                                c = a,
                                d = c.match(/^([a-z]+):\/\//i);
                            return d && (b.scheme = d[1], c = c.substr(d[0].length)), d = c.match(/^(.*?)(?=(\?|#|\/|$))/i), d && (b.host = d[1], c = c.substr(d[0].length)), d = c.match(/^\/(.*?)(?=(\?|#|$))/i), d && (b.path = d[1], c = c.substr(d[0].length)), d = c.match(/^\?(.*?)(?=(#|$))/i), d && (b.query = d[1], c = c.substr(d[0].length)), d = c.match(/^#(.*?)$/i), d && (b.fragment = d[1]), b
                        },
                        i = function(a) {
                            var b = "";
                            return a.scheme && a.host && (b += a.scheme + "://"), a.host && (b += a.host), a.path && (b += "/" + a.path), a.query && (b += "?" + a.query), a.fragment && (b += "#" + a.fragment), b
                        },
                        s = function(c, d) {
                            var e = d / 2,
                                f = b(e),
                                a = -1 * j(e),
                                g = "";
                            return 0 > a && (g = c.substr(a)), c.substr(0, f) + q + g
                        };
                    if (k.length <= e) return k;
                    var o = e - n,
                        c = a(k);
                    if (c.query) {
                        var h = c.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);
                        h && (c.query = c.query.substr(0, h[1].length), k = i(c))
                    }
                    if (k.length <= e) return k;
                    if (c.host && (c.host = c.host.replace(/^www\./, ""), k = i(c)), k.length <= e) return k;
                    var l = "";
                    if (c.host && (l += c.host), l.length >= o) return c.host.length == e ? (c.host.substr(0, e - n) + q).substr(0, o + r) : s(l, o).substr(0, o + r);
                    var t = "";
                    if (c.path && (t += "/" + c.path), c.query && (t += "?" + c.query), t) {
                        if ((l + t).length >= o) {
                            if ((l + t).length == e) return (l + t).substr(0, e);
                            var g = o - l.length;
                            return (l + s(t, g)).substr(0, o + r)
                        }
                        l += t
                    }
                    if (c.fragment) {
                        var m = "#" + c.fragment;
                        if ((l + m).length >= o) {
                            if ((l + m).length == e) return (l + m).substr(0, e);
                            var f = o - l.length;
                            return (l + s(m, f)).substr(0, o + r)
                        }
                        l += m
                    }
                    if (c.scheme && c.host) {
                        var d = c.scheme + "://";
                        if ((l + d).length < o) return (d + l).substr(0, e)
                    }
                    if (l.length <= e) return l;
                    var p = "";
                    return 0 < o && (p = l.substr(-1 * j(o / 2))), (l.substr(0, b(o / 2)) + q + p).substr(0, o + r)
                }, k
            });
        </script>
        <script>
            (function() {
                "use strict";
                var a = window.TinychatApp || {};
                a.DAL = {}, window.TinychatApp = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.BanlistItemEntity = class {
                    constructor() {
                        this.id = "", this.username = "", this.nickname = "", this.reason = "", this.moderator = ""
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.BroadcastResultEntity = class {
                    constructor() {
                        this.broadcastStarted = !1, this.password = !1, this.banned = !1, this.moderating = !1, this.canceled = !1, this.permissions = !1
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                class a {
                    static get PUBLIC() {
                        return 0
                    }
                    static get PRIVATE() {
                        return 1
                    }
                    static get SYSTEM() {
                        return 2
                    }
                    static get GIFT() {
                        return 6
                    }
                    constructor() {
                        this.type = a.PUBLIC, this.user = null, this.chatname = 0, this.message_text = "", this.language = "", this.giftUrl = "", this.color = 0
                    }
                }
                window.TinychatApp.DAL.ChatLogItemEntity = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.EnterRoomResultEntity = class {
                    constructor() {
                        this.selfuser = new TinychatApp.DAL.UserEntity
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.GiftEntity = class {
                    constructor() {
                        this.fromUsername = "", this.fromUrl = "", this.fromIdInRoom = 0, this.toAchievement = "", this.toUsername = "", this.toIdInRoom = 0, this.toUrl = "", this.giftComment = "", this.giftExt = 0, this.giftName = "", this.giftStore = "", this.giftUrl = ""
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.LoginResultEntity = class {
                    constructor() {
                        this.loggedIn = !1, this.loginName = "", this.usersuggestion = "", this.errorcode = "", this.errormsg = "", this.userInfo = null
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.LoginUserInfoEntity = class {
                    constructor() {
                        this.email = "", this.stype = 0, this.promoted = !1, this.achivement = "", this.points = 0, this.coins = 0, this.avatar = "", this.intercom_hash = "", this.giftData = [], this.currentSubscriptionMessage = "", this.currentSubscriptionEnd = "", this.currentSubscriptionPlanInterval = ""
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.RoomHistoryEntity = class {
                    constructor() {
                        this.roomname = "", this.usage = 0
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.RoomSettingsEntity = class {
                    constructor() {
                        this.type = "", this.name = "", this.topic = "", this.subtype = 0, this.giftpoints = 0, this.pushtotalk = !1, this.recent_gifts = [], this.biography = "", this.location = "", this.website = "", this.avatar = ""
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.SettingsEntity = class {
                    constructor() {
                        this.enablePMs = !0, this.enableYoutube = !0, this.enableSound = !0, this. onfirmBans = !0, this.rememberVolume = !1, this.enableAcousticEchoCancelation = !0, this.enableHotkeys = !0, this.nickname = "", this.audio = null, this.video = null
                    }
                    equals(a) {
                        return JSON.stringify(this) === JSON.stringify(a)
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                class a {
                    constructor() {
                        this.nickname = "", this.username = "", this.avatarUrl = "", this.path = 0, this.subscriptionType = 0, this.isOwner = !1, this.isOperator = !1, this.isLurker = !1, this.giftpoints = 0, this.achivementUrl = "", this.isSelf = !1, this.isBroadcasting = !1, this.isDeleting = !1, this.isOffline = !1, this.needToUpprove = !1, this.isFeatured = !1
                    }
                    get handle() {
                        return this.path
                    }
                    get isUsername() {
                        return "" != this.username
                    }
                    get isGuest() {
                        return !this.isUsername
                    }
                    get hasSubscriptions() {
                        return TinychatApp.BLL.User.isSubscription(this.subscriptionType)
                    }
                    get canUseFilters() {
                        return TinychatApp.BLL.User.canUseFilters(this.subscriptionType)
                    }
                    toString() {
                        return "UserEntity:{ h(" + this.handle + ") n(" + this.nickname + ") u(" + this.username + ")}"
                    }
                }
                window.TinychatApp.DAL.UserEntity = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.UserProfileEntity = class {
                    constructor() {
                        this.username = "", this.biography = "", this.gender = "", this.age = 0, this.location = "", this.role = "", this.stype = 0, this.avatarUrl = "", this.achieveUrl = "", this.percentToNextAchieve = 0, this.giftpoints = 0, this.gifts = []
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.DAL.YoutubeItem = class {
                    constructor() {
                        this.id = "", this.title = "", this.imgurl = "", this.duration = void 0
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                var a = window.TinychatApp || {};
                a.BLL = {}, window.TinychatApp = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                const a = window.TinychatApp.BLL;
                window.TinychatApp.BLL.TCSocket = class {
                    constructor(a, b) {
                        this.chatRoom = a, this.app = a.app, this.EventBus = this.app.EventBus, this.packetWorker = b, this.closedLastReasonCode = -1, this.reconnect_timer = 0, this.reconnect_wait = 0, this.reconnect_tries = 0
                    }
                    connect(b) {
                        let c = this.chatRoom.wsEndpoint;
                        console.log(`Chatroom.Connecting (${c}/${this.chatRoom.roomname},
                    tc_token: ${this.chatRoom.tc_token},
                    debug: ${this.app.debug}) ... ${0<this.reconnect_tries?this.reconnect_tries:""} `), this.closedLastReasonCode = -2;
                        let d = new a.RoomConnectEvent(this.reconnect_tries);
                        if (this.EventBus.broadcast(a.RoomConnectEvent.ID, d), void 0 !== b && b) {
                            let b = new a.RoomReconnected;
                            this.EventBus.broadcast(a.RoomReconnected.ID, b), this.ws.onclose = function() {}, this.close()
                        }
                        this.ws = new WebSocket(c, "tc"), this.ws.onopen = a => this.onOpen(a), this.ws.onclose = a => this.onClose(a), this.ws.onmessage = a => this.packetWorker.onMessage(a)
                    }
                    onOpen() {
                        this.send(this.chatRoom.tcPkt_Connect(this.chatRoom.onRoomConnectCallback))
                    }
                    onClose() {
                        console.warn("Chatroom.Disconnected");
                        let b = new TinychatApp.BLL.RoomQuitEvent(TinychatApp.BLL.RoomQuitEvent.WS, this);
                        this.EventBus.broadcast(TinychatApp.BLL.RoomQuitEvent.ID, b), this.chatRoom.wsReset();
                        let c = this,
                            d = 1e3 + Math.floor(2e3 * Math.random());
                        this.reconnect_wait += d, this.reconnect_tries += 1;
                        let e = new a.RoomConnectStandby(this.reconnect_tries, this.reconnect_wait);
                        if (this.EventBus.broadcast(a.RoomConnectStandby.ID, e), 999 > c.reconnect_tries) switch (this.closedLastReasonCode) {
                            case 0:
                            case 1:
                            case 5:
                            case 7:
                            case 8:
                            case 9:
                            case 10:
                            case 11:
                                console.warn("Chatroom.ConnectStandby: " + c.reconnect_wait + "ms"), c.reconnect_timer = setInterval(() => {
                                    c.Reconnect()
                                }, c.reconnect_wait);
                                break;
                            default:
                        } else {
                            let b = new a.RoomConnectFatal;
                            this.EventBus.broadcast(a.RoomConnectFatal.ID, b), console.error("Chatroom.ConnectFatal")
                        }
                    }
                    reset() {
                        this.wsHandle = null
                    }
                    send(a) {
                        if (!(1 < this.ws.readyState)) {
                            const b = JSON.stringify(a);
                            this.ws.send(b)
                        }
                    }
                    close() {
                        this.ws.close()
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                const a = window.TinychatApp.BLL.TCSocket;
                class b {
                    constructor(b) {
                        this.chatRoom = b, this.app = b.app, this.EventBus = b.EventBus, this.reqid = 0, this.queue = {}, this.tcSocket = new a(this.chatRoom, this)
                    }
                    get userlist() {
                        return this.chatRoom.userlist
                    }
                    get videolist() {
                        return this.chatRoom.videolist
                    }
                    get chatlog() {
                        return this.chatRoom.chatlog
                    }
                    reset() {
                        this.tcSocket.reset(), this.reqid = 0, this.queue = {}
                    }
                    send(a) {
                        return this.tcSocket.send(a)
                    }
                    connect(a) {
                        this.tcSocket.connect(a)
                    }
                    onMessage(a) {
                        let b = JSON.parse(a.data),
                            c = b.req;
                        if (c !== void 0) {
                            let a = this.queue[c];
                            if (void 0 !== a) return Object.isObj(a) && Object.isFunc(a.func) ? a.func.call(this.chatRoom, b, a.params) : Object.isFunc(a) && a.call(this.chatRoom, b), void delete this.queue[c]
                        }
                        let d = b.tc;
                        "string" === typeof d ? "ping" === d ? this.chatRoom.onPing(b) : "userlist" === d ? this.chatRoom.onRoomUserlist(b) : "join" === d ? this.chatRoom.onRoomUserJoin(b) : "room_settings" === d ? this.chatRoom.onRoomSettings(b) : "quit" === d ? this.chatRoom.onRoomUserQuit(b) : "publish" === d ? this.chatRoom.onRoomPublish(b) : "unpublish" === d ? this.chatRoom.onRoomUnPublish(b) : "stream_connected" === d ? this.chatRoom.onStreamConnected(b) : "pending_moderation" === d ? this.chatRoom.onPendingModeration(b) : "waiting_slot" === d ? this.chatRoom.onWaitingSlot(b) : "stream_closed" === d ? this.chatRoom.onStreamClosed(b) : "stream_moder_allow" === d ? this.chatRoom.onStreamModerAllow(b) : "publish" === d ? this.chatRoom.onRoomPublish(b) : "unpublish" === d ? this.chatRoom.onRoomUnPublish(b) : "msg" === d ? this.chatRoom.onSendMessagePublicCallback(b) : "nick" === d ? this.chatRoom.onNicknameChanged(b) : "pvtmsg" === d ? this.chatRoom.onSendMessagePrivateCallback(b) : "closed" === d ? (this.chatRoom.onClosed(b), this.tcSocket.close()) : "sysmsg" === d ? this.chatRoom.onSystemMessage(b) : "gift" === d ? this.chatRoom.onGiftMessage(b) : d.startsWith("yut_") ? this.chatRoom.onYoutube(b) : d.startsWith("yutpls_") ? this.chatRoom.onYoutubePlaylist(b) : console.error("Unknown pkt: " + JSON.stringify(b)) : console.error("Unknown pkt format: " + JSON.stringify(b))
                    }
                    wsCreatePacket(a, b) {
                        const c = {
                            tc: a,
                            req: ++this.reqid
                        };
                        return this.registerPacketCallback(c, b), c
                    }
                    registerPacketCallback(a, b) {
                        b !== void 0 && (this.queue[a.req] = b)
                    }
                }
                window.TinychatApp.BLL.PacketWorker = b
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = null;
                class b {
                    constructor() {}
                    static getInstance() {
                        return null == a && (a = new b), a
                    }
                    getRoomEvent() {}
                }
                window.TinychatApp.BLL.Tracker = b
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = null;
                class b {
                    constructor() {}
                    static getInstance() {
                        return null == a && (a = new b), a
                    }
                    gotoUrl(a, b) {
                        if (b) {
                            let b = window.open(a, "_blank");
                            b.focus()
                        } else window.location.href = a
                    }
                    get backUrl() {
                        return window.location.href
                    }
                    LiveDirectory() {
                        this.gotoUrl(b.url_livedirectory(this.backUrl))
                    }
                    GiveAGift(a) {
                        this.gotoUrl(b.url_giveagift(a), !0)
                    }
                    EarnCoins() {
                        this.gotoUrl(b.url_get_coins(this.backUrl), !0)
                    }
                    UpgradeSub() {
                        this.gotoUrl(b.url_upgradenow(this.backUrl), !0)
                    }
                    Login() {
                        this.gotoUrl(b.urlpath_login(this.backUrl))
                    }
                    DevNews() {
                        this.gotoUrl(b.url_devnews(this.backUrl), !0)
                    }
                    WebSettings() {
                        this.gotoUrl(b.url_websettings(this.backUrl), !0)
                    }
                    Register() {
                        this.gotoUrl(b.urlpath_register(this.backUrl))
                    }
                    Logout() {
                        this.gotoUrl(b.urlpath_logout(this.backUrl))
                    }
                    PromoteRoom() {
                        this.gotoUrl(b.urlpath_promoteroom(this.backUrl))
                    }
                    GooglePlay() {
                        this.gotoUrl(b.url_download_android())
                    }
                    AppStore() {
                        this.gotoUrl(b.url_download_iphone())
                    }
                    static url_giveagift(a) {
                        var b = "/gifts/";
                        return "string" !== typeof a || a.isEmpty() || (b = b + "?to=" + encodeURI(a)), b
                    }
                    static url_earncoins() {
                        return "/offers"
                    }
                    static url_upgradenow() {
                        return "/subscription/intro"
                    }
                    static url_livedirectory() {
                        return "/"
                    }
                    static urlpath_register(a) {
                        return urlpath_login(a)
                    }
                    static urlpath_login(a) {
                        var b = "";
                        return void 0 != a && (b = "?next=" + encodeURI(a)), "/start/" + b
                    }
                    static urlpath_logout() {
                        return "/logout"
                    }
                    static urlpath_promoteroom() {
                        return "/promote/intro"
                    }
                    static url_devnews() {
                        return "https://twitter.com/tinychatdev"
                    }
                    static url_websettings() {
                        return "/settings/privacy"
                    }
                    static url_download_android() {
                        return "https://tinychat.com/download/android"
                    }
                    static url_download_iphone() {
                        return "https://tinychat.com/download/iphone"
                    }
                    static url_get_coins() {
                        return "https://tinychat.com/coins/intro"
                    }
                }
                window.TinychatApp.BLL.Router = b
            })();
        </script>
        <script>
            (function() {
                "use strict";
                let a = null;
                class b {
                    constructor(a) {
                        this.EventBus = a
                    }
                    static getInstance(c) {
                        return null == a && (a = new b(c)), a
                    }
                    isYoutube() {
                        let a = this.getSettings();
                        return a.enableYoutube
                    }
                    isPrivateMessage() {
                        let a = this.getSettings();
                        return a.enablePMs
                    }
                    isAcousticEchoCancelation() {
                        let a = this.getSettings();
                        return a.enableAcousticEchoCancelation
                    }
                    switchPrivatemessaging(a) {
                        let b = this.getSettings();
                        b.enablePMs = a, this.saveSettings(b)
                    }
                    switchYoutube(a) {
                        let b = this.getSettings();
                        b.enableYoutube = a, this.saveSettings(b)
                    }
                    switchSound(a) {
                        let b = this.getSettings();
                        b.enableSound = a, this.saveSettings(b)
                    }
                    switchConfirmBan(a) {
                        let b = this.getSettings();
                        b. onfirmBans = a, this.saveSettings(b)
                    }
                    switchAcousticEchoCancelation(a) {
                        let b = this.getSettings();
                        b.enableAcousticEchoCancelation = a, this.saveSettings(b)
                    }
                    switchRememberVolume(a) {
                        let b = this.getSettings();
                        b.rememberVolume = a, this.saveSettings(b)
                    }
                    changeNickname(a) {
                        let b = this.getSettings();
                        b.nickname = a, this.saveSettings(b)
                    }
                    getSettings() {
                        var a = this._get("tinychat_settings");
                        try {
                            a = Object.assign(new TinychatApp.DAL.SettingsEntity, JSON.parse(a))
                        } catch (a) {}
                        return (void 0 == a || "object" !== typeof a) && (a = new TinychatApp.DAL.SettingsEntity), a
                    }
                    saveSettings(a) {
                        if ("object" === typeof a) {
                            let b = this.getSettings();
                            this._set("tinychat_settings", JSON.stringify(a));
                            let c = this.getSettings();
                            if (!b.equals(c)) {
                                let a = new d(c);
                                this.EventBus.broadcast(d.ID, a)
                            }
                        }
                    }
                    _set(a, b) {
                        "undefined" === typeof Storage || (localStorage[a] = b)
                    }
                    _get(a, b) {
                        if ("undefined" === typeof Storage) return b;
                        var c = localStorage[a];
                        return void 0 === c && (c = b), c
                    }
                    _remove(a) {
                        localStorage.removeItem(a)
                    }
                }
                const c = "SettingsChangedEvent_" + Math.Guid.newGuid();
                class d {
                    static get ID() {
                        return c
                    }
                    constructor(a) {
                        return this.settingsEntity = a, this
                    }
                }
                window.TinychatApp.BLL.SettingsFeature = b, window.TinychatApp.BLL.SettingsChangedEvent = d
            })();
        </script>
        <script>
            (function() {
                "use strict";
                window.TinychatApp.BLL.SoundPlayer = class {
                    static playGift(a) {
                        let b = new Audio(window.rootDir + "/sound/magic.mp3");
                        b.volume = a, b.play()
                    }
                    static playMessage(a) {
                        let b = new Audio(window.rootDir + "/sound/pop.mp3");
                        b.volume = a, b.play()
                    }
                }
            })();
        </script>
        <script>
            (function() {
                "use strict";
                class a {
                    static get STYPE_FREE() {
                        return 0
                    }
                    static get STYPE_PRO() {
                        return 10
                    }
                    static get STYPE_EXTREME() {
                        return 20
                    }
                    static get STYPE_GOLD() {
                        return 30
                    }
                    static isSubscription(b) {
                        return b > a.STYPE_FREE
                    }
                    static isSubPro(b) {
                        return b >= a.STYPE_PRO && b < a.STYPE_EXTREME
                    }
                    static isSubExtreme(b) {
                        return b >= a.STYPE_EXTREME && b < a.STYPE_GOLD
                    }
                    static isSubGold(b) {
                        return b >= a.STYPE_GOLD
                    }
                    static isSubHighest(b) {
                        return a.isSubGold(b)
                    }
                    static canUseFilters(b) {
                        return b > a.STYPE_FREE
                    }
                    static getCssClass(b) {
                        var c = 0;
                        b instanceof TinychatApp.DAL.UserEntity && (c = b.subscriptionType), b instanceof TinychatApp.DAL.UserProfileEntity && (c = b.stype);
                        var d = "";
                        return a.isSubPro(c) ? d = "pro" : a.isSubExtreme(c) ? d = "extreme" : a.isSubGold(c) && (d = "gold"), d
                    }
                }
                window.TinychatApp.BLL.User = a
            })();
        </script>
        <script>
            (function() {
                "use strict";
                var a = Math.Guid;
                class b {
                    constructor(a) {
                        this.chatroom = a, this.EventBus = a.app.EventBus, this.items = [], this.bannedItems = [], this.ignored = [], this.firstBanlist = !0
                    }
                    get app() {
                        return this.chatroom.app
                    }
                    clear() {
                        this.items = [], this.bannedItems = [], this.ignored = [], this.firstBanlist = !0
                    }
                    start(a) {
                        this.items = a, this.sorting(this.items);
                        let b = new d(this.items, this.chatroom);
                        this.EventBus.broadcast(d.ID, b)
                    }
                    joined(a) {
                        this.items.push(a);
                        this.sorting(this.items);
                        let b = new f(this.items.indexOf(a), a, this.chatroom);
                        this.EventBus.broadcast(f.ID, b)
                    }
                    quited(a) {
                        for (var b in this.items) {
                            var c = this.items[b];
                            if (c.handle === a) {
                                this.items.splice(b, 1);
                                let a = new h(b, c, this.chatroom);
                                this.EventBus.broadcast(h.ID, a);
                                break
                            }
                        }
                    }
                    updateBroadcasting(a, b) {
                        this.generateUpdateEvent(a, a => {
                            a.isBroadcasting = b
                        })
                    }
                    updateNickname(a, b) {
                        this.generateUpdateEvent(a, a => {
                            a.nickname = b
                        })
                    }
                    generateUpdateEvent(a, b) {
                        var c = -1,
                            d = null,
                            e = -1,
                            f = null;
                        if ((Object.keys(this.items).forEach(b => {
                                let e = this.items[b];
                                if (e.handle === a) return c = Number.parseInt(b), d = Object.assign(new TinychatApp.DAL.UserEntity, e), f = e, !0
                            }), null != d) && (b(f), !Object.equals(d, f))) {
                            this.sorting(this.items), e = this.items.indexOf(f);
                            let a = new j(c, d, e, f, this);
                            this.EventBus.broadcast(j.ID, a)
                        }
                    }
                    sorting(a) {
                        a.sort((c, a) => {
                            let b = a.subscriptionType - c.subscriptionType || (a.isOperator ? 1 : 0) - (c.isOperator ? 1 : 0) || (a.isBroadcasting ? 1 : 0) - (c.isBroadcasting ? 1 : 0) || a.giftpoints - c.giftpoints || (a.username.localeCompare("") ? 1 : 0) - (c.username.localeCompare("") ? 1 : 0) || c.nickname.toLowerCase().localeCompare(a.nickname.toLowerCase()) || c.handle - a.handle;
                            return b
                        })
                    }
                    get(a) {
                        for (var b in this.items) {
                            var c = this.items[b];
                            if (c.handle === a) {
                                return c
                            }
                        }
                        return null
                    }
                    getByNickname(a) {
                        let b = a.toLowerCase();
                        for (var c in this.items) {
                            var d = this.items[c];
                            if (d.nickname.toLowerCase() === b) {
                                return d
                            }
                        }
                        return null
                    }
                    getItems() {
                        return this.items
                    }
                    getBannedItems() {
                        return this.bannedItems
                    }
                    isBanned() {
                        return !1
                    }
                    banIsAllowed(a) {
                        return !a.isSelf && !a.isOwner && this.chatroom.isOperator()
                    }
                    followIsAllowed(a) {
                        return !a.isSelf && !a.isGuest
                    }
                    ignoreIsAllowed(a) {
                        return !a.isSelf && !this.isIgnored(a)
                    }
                    kickIsAllowed(a) {
                        return !a.isSelf && !a.isOwner && this.chatroom.isOperator()
                    }
                    videoForceCloseAllow(a) {
                        if (this.chatroom.isOwner()) return !a.isSelf;
                        return !!this.chatroom.isOperator() && !a.isSelf && !a.isOwner && !a.isOperator
                    }
                    changenick(a) {
                        if (a.handle === this.chatroom.self_handle) {
                            let a = new TinychatApp.BLL.RoomNicknameChangeEvent("", ModalDialogChangeNickname.MODE_CHANGE);
                            this.EventBus.broadcast(TinychatApp.BLL.RoomNicknameChangeEvent.ID, a)
                        }
                    }
                    abuse(a) {
                        this.chatroom.Abuse(a)
                    }
                    kick(a) {
                        this.chatroom.Kick(a)
                    }
                    ban(a) {
                        this.chatroom.Ban(a)
                    }
                    videoForceClose(a) {
                        this.chatroom.VideoForceClose(a)
                    }
                    unban(a) {
                        this.app.showToast("unban " + a.handle)
                    }
                    isIgnored(a) {
                        let b = a.isUsername ? a.username : a.nickname;
                        return -1 < this.ignored.indexOf(b)
                    }
                    ignore(a) {
                        let b = a.isUsername ? a.username : a.nickname;
                        this.isIgnored(a) || this.ignored.push(b);
                        let c = new t(a);
                        this.EventBus.broadcast(t.ID, c), this.app.showToast(a.username + " ignored successfully")
                    }
                    unignore(a) {
                        let b = a.isUsername ? a.username : a.nickname,
                            c = this.ignored.indexOf(b); - 1 < c && this.ignored.splice(c, 1);
                        let d = new t(a);
                        this.EventBus.broadcast(t.ID, d), this.app.showToast(a.username + " unignored")
                    }
                    follow(a) {
                        if (a.isInsta) return void this.app.showToastWarn("Unfortunately, you can't follow insta-room", 4e3);
                        if (a.isGuest) return void this.app.showToastWarn("User is not signed in to Tinychat", 4e3);
                        let b = this;
                        this.app.Follow(a.username, function(c) {
                            "success" === c ? b.app.showToast("You are now following " + a.nickname) : "already" === c ? b.app.showToast("You are already following " + a.nickname) : "unregistered" === c ? b.app.showToastWarn("You must be logged into a Tinychat account to initiate follow. Please sign in (sign up) and try again", 4e3) : "unknown " === c && b.app.showToastWarn("User is not signed in to Tinychat", 4e3)
                        }, function() {})
                    }
                    unfollow(a) {
                        this.app.showToast("unfollow " + a.handle)
                    }
                }
                const c = "UserlistUpdateallEvent_" + a.newGuid();
                class d {
                    static get ID() {
                        return c
                    }
                    constructor(a, b) {
                        return this.users = a, this.chatroom = b, this
                    }
                }
                const e = "UserlistAddUserEvent_" + a.newGuid();
                class f {
                    static get ID() {
                        return e
                    }
                    constructor(a, b, c) {
                        return this.index = a, this.userentity = b, this.chatroom = c, this
                    }
                }
                const g = "UserlistRemoveUserEvent_" + a.newGuid();
                class h {
                    static get ID() {
                        return g
                    }
                    constructor(a, b, c) {
                        return this.index = a, this.userentity = b, this.chatroom = c, this
                    }
                }
                const i = "UserlistUpdateUserEvent_" + a.newGuid();
                class j {
                    static get ID() {
                        return i
                    }
                    constructor(a, b, c, d, e) {
                        return this.fromIndex = a, this.fromUserEntity = b, this.toIndex = c, this.toUserEntity = d, this.userlist = e, this
                    }
                }
                const k = "BanlistUpdateallEvent_" + a.newGuid();
                class l {
                    static get ID() {
                        return k
                    }
                    constructor(a) {
                        return this.chatroom = a, this
                    }
                }
                const m = "BanlistAddUserEvent_" + a.newGuid();
                class n {
                    static get ID() {
                        return m
                    }
                    constructor(a, b, c) {
                        return this.index = a, this.userentity = b, this.chatroom = c, this
                    }
                }
                const o = "BanlistRemoveUserEvent_" + a.newGuid();
                class p {
                    static get ID() {
                        return o
                    }
                    constructor(a, b, c) {
                        return this.index = a, this.userentity = b, this.chatroom = c, this
                    }
                }
                const q = "BanlistUpdateUserEvent_" + a.newGuid();
                class r {
                    static get ID() {
                        return q
                    }
                    constructor(a, b, c, d, e) {
                        return a, b, c, d, e, this.fromIndex = a, this.fromUserentity = b, this.toUserIndex = c, this.toUserEntity = d, this.chatroom = e, this
                    }
                }
                const s = "IgnorelistUpdateUserEvent_" + a.newGuid();
                class t {
                    static get ID() {
                        return s
                    }
                    constructor(a) {
                        return this.userentity = a, this
                    }
                }
                window.TinychatApp.BLL.Userlist = b, window.TinychatApp.BLL.UserlistUpdateallEvent = d, window.TinychatApp.BLL.UserlistAddUserEvent = f, window.TinychatApp.BLL.UserlistRemoveUserEvent = h, window.TinychatApp.BLL.UserlistUpdateUserEvent = j, window.TinychatApp.BLL.IgnorelistUpdateUserEvent = t
            })();
        </script>
        <script>
            (function() {
                "use strict";
                var a = Math.Guid;
                class b {
                    constructor(a) {
                        this.chatroom = a, this.EventBus = a.app.EventBus, this.items = {}, this.items[b.PUBLIC] = [], this.chatlist = [], this.selectedchat = b.PUBLIC, this.EventBus.subscribe(TinychatApp.BLL.UserlistUpdateUserEvent.ID, a => this.onUserlistUpdate(a)), this.EventBus.subscribe(TinychatApp.BLL.UserlistRemoveUserEvent.ID, a => this.onUserlistRemove(a))
                    }
                    static get PUBLIC() {
                        return -1
                    }
                    static get MAX() {
                        return 999
                    }
                    static get MAX_INPUT_LEN() {
                        return 500
                    }
                    get userlist() {
                        return this.chatroom.userlist
                    }
                    get settings() {
                        return this.chatroom.app.settings
                    }
                    SendMessage(a, c) {
                        c.length > b.MAX_INPUT_LEN && console.warn("Message length is limited by " + b.MAX_INPUT_LEN);
                        let d = this.chatroom.selfUser();
                        if (a === b.PUBLIC) return this.public_add_unconfirmed(c, d), this.chatroom.SendMessagePublic(c, d), !0;
                        if (a instanceof TinychatApp.DAL.UserEntity) {
                            let b = this.userlist.get(a.handle);
                            return null == b ? (this.system_add(a.handle, "Message has not delivered. User is offline ..."), !1) : (this.private_add_unconfirmed(c, d, a), this.chatroom.SendMessagePrivate(c, d, a), !0)
                        }
                        return !1
                    }
                    clear() {
                        this.items = {}, this.items[b.PUBLIC] = [], this.chatlist = [], this.selectedchat = b.PUBLIC
                    }
                    isequal(a, c) {
                        if (a === b.PUBLIC) return a === c;
                        return !!(a instanceof TinychatApp.DAL.UserEntity) && a.handle === c
                    }
                    gift_add(a) {
                        a.type = TinychatApp.DAL.ChatLogItemEntity.GIFT, a.chatname = b.PUBLIC;
                        let c = this.getitems(a.chatname);
                        this.additem(c, a);
                        let d = this.settings.getSettings();
                        d.enableSound && window.TinychatApp.BLL.SoundPlayer.playGift(this.chatroom.volume)
                    }
                    system_add(a, b) {
                        a instanceof TinychatApp.DAL.UserEntity && (a = a.handle);
                        let c = TinychatApp.DAL.ChatLogItemEntity,
                            d = new c;
                        d.type = c.SYSTEM, d.user = null, d.message_text = b, d.chatname = a;
                        let e = this.getitems(d.chatname);
                        this.additem(e, d)
                    }
                    public_add(a) {
                        if (null != a.user) {
                            if (null != a.user && a.user.handle === this.chatroom.self_handle) {
                                let b = new h(a, a.chatname);
                                return void this.EventBus.broadcast(h.ID, b)
                            }
                            a.chatname = b.PUBLIC;
                            let c = this.getitems(a.chatname);
                            this.additem(c, a);
                            let d = this.settings.getSettings();
                            d.enableSound && 5 >= this.userlist.items.length && window.TinychatApp.BLL.SoundPlayer.playMessage(this.chatroom.volume)
                        }
                    }
                    public_add_unconfirmed(a, c) {
                        if (null == c) return;
                        let d = TinychatApp.DAL.ChatLogItemEntity,
                            e = new d;
                        e.type = d.PUBLIC, e.user = c, e.message_text = a, e.chatname = b.PUBLIC;
                        let f = this.getitems(e.chatname);
                        this.additem(f, e);
                        let g = this.settings.getSettings();
                        g.enableSound && 5 >= this.userlist.items.length && window.TinychatApp.BLL.SoundPlayer.playMessage(this.chatroom.volume)
                    }
                    private_add(a) {
                        if (null != a.user) {
                            if (null != a.user && a.user.handle === this.chatroom.self_handle) {
                                let b = new h(a, a.chatname);
                                return void this.EventBus.broadcast(h.ID, b)
                            }
                            var b = this.settings.isPrivateMessage();
                            if (b && !this.isopenedprivate(a.user) && this.openprivate(a.user, !0), b) {
                                let b = this.getitems(a.chatname);
                                this.additem(b, a);
                                let c = this.settings.getSettings();
                                c.enableSound && window.TinychatApp.BLL.SoundPlayer.playMessage(this.chatroom.volume)
                            }
                        }
                    }
                    private_add_unconfirmed(a, b, c) {
                        if (null == a) return;
                        if (null == b) return;
                        if (null == c) return;
                        let d = TinychatApp.DAL.ChatLogItemEntity,
                            e = new d;
                        e.type = d.PRIVATE, e.user = b, e.chatname = c.handle, e.message_text = a;
                        let f = this.getitems(e.chatname);
                        this.additem(f, e);
                        let g = this.settings.getSettings();
                        g.enableSound && window.TinychatApp.BLL.SoundPlayer.playMessage(this.chatroom.volume)
                    }
                    getitems(a) {
                        let b = this.items[a];
                        return void 0 == b && (b = [], this.items[a] = b), b
                    }
                    additem(a, c) {
                        if (a.length >= b.MAX) {
                            let b = a.shift(),
                                d = new f(0, b, c.chatname);
                            this.EventBus.broadcast(f.ID, d)
                        }
                        var e = a.push(c) - 1;
                        let g = new d(e, c, c.chatname);
                        this.EventBus.broadcast(d.ID, g)
                    }
                    onUserlistRemove(a) {
                        let b = this.getopenedprivate(a.userentity);
                        if (null == b) return;
                        let c = TinychatApp.DAL.UserEntity;
                        b.isOffline = !0, this.selectedchat instanceof c && this.selectedchat.handle === b.handle && (this.selectedchat = Object.assign(this.selectedchat, b));
                        let d = this.chatlist.indexOf(b),
                            e = new n(d, b, d, b);
                        this.EventBus.broadcast(n.ID, e)
                    }
                    onUserlistUpdate(a) {
                        let b = this.getopenedprivate(a.toUserEntity);
                        if (null == b) return;
                        let c = this.chatlist.indexOf(b),
                            d = this.chatlist.indexOf(a.toUserEntity),
                            e = a.toUserEntity,
                            f = TinychatApp.DAL.UserEntity;
                        this.selectedchat instanceof f && this.selectedchat.handle === e.handle && (this.selectedchat = Object.assign(this.selectedchat, e));
                        let g = new n(c, b, d, e);
                        this.EventBus.broadcast(n.ID, g)
                    }
                    selectChat(a) {
                        this.selectedchat = a;
                        let b = new p(this.selectedchat, this.getitems(this.selectedchat.handle));
                        this.EventBus.broadcast(p.ID, b)
                    }
                    selectPublic(a) {
                        this.selectedchat = b.PUBLIC;
                        let c = new p(this.selectedchat, this.getitems(this.selectedchat));
                        this.EventBus.broadcast(p.ID, c), a instanceof TinychatApp.DAL.UserEntity && this.closeprivate(a)
                    }
                    closeChat(a) {
                        this.selectPublic(a)
                    }
                    chatlist() {
                        return this.chatlist
                    }
                    openprivate(a, b) {
                        let c = this.isopenedprivate(a);
                        if (c || this.chatlist.push(a), void 0 == b && this.selectChat(a), !c) {
                            let b = new j(this.chatlist.indexOf(a), a, this.chatroom);
                            this.EventBus.broadcast(j.ID, b)
                        }
                    }
                    closeprivate(a) {
                        for (var b in this.chatlist) {
                            var c = this.chatlist[b];
                            if (c.handle === a.handle) {
                                this.chatlist.splice(b, 1);
                                let a = new l(b, c, this.chatroom);
                                this.EventBus.broadcast(l.ID, a);
                                break
                            }
                        }
                    }
                    getopenedprivate(a) {
                        var b = null;
                        for (var c in this.chatlist) {
                            var d = this.chatlist[c];
                            if (d.handle === a.handle) {
                                b = d;
                                break
                            }
                        }
                        return b
                    }
                    isopenedprivate(a) {
                        var b = !1;
                        for (var c in this.chatlist) {
                            var d = this.chatlist[c];
                            if (d.handle === a.handle) {
                                b = !0;
                                break
                            }
                        }
                        return b
                    }
                }
                const c = "ChatlogItemAddedEvent_" + a.newGuid();
                class d {
                    static get ID() {
                        return c
                    }
                    constructor(a, b, c) {
                        return this.index = a, this.chatentity = b, this.chatname = c, this
                    }
                }
                const e = "ChatlogItemRemovedEvent_" + a.newGuid();
                class f {
                    static get ID() {
                        return e
                    }
                    constructor(a, b, c) {
                        return this.index = a, this.chatentity = b, this.chatname = c, this
                    }
                }
                const g = "ChatlogItemSentEvent_" + a.newGuid();
                class h {
                    static get ID() {
                        return g
                    }
                    constructor(a, b) {
                        return this.chatentity = a, this.chatname = b, this
                    }
                }
                const i = "ChatlistAddEvent_" + a.newGuid();
                class j {
                    static get ID() {
                        return i
                    }
                    constructor(a, b, c) {
                        return this.index = a, this.userentity = b, this.chatroom = c, this
                    }
                }
                const k = "ChatlistRemoveEvent_" + a.newGuid();
                class l {
                    static get ID() {
                        return k
                    }
                    constructor(a, b, c) {
                        return this.index = a, this.userentity = b, this.chatroom = c, this
                    }
                }
                const m = "ChatlistUpdateEvent_" + a.newGuid();
                class n {
                    static get ID() {
                        return m
                    }
                    constructor(a, b, c, d) {
                        return this.fromIndex = a, this.fromUserEntity = b, this.toIndex = c, this.toUserEntity = d, this
                    }
                }
                const o = "ChatlistSelectedEvent_" + a.newGuid();
                class p {
                    static get ID() {
                        return o
                    }
                    constructor(a, b) {
                        return this.userentity = a, this.chatitems = b, this
                    }
                }
                const q = "ChatlistUIUpdateEvent_" + a.newGuid();
                class r {
                    static get ID() {
                        return q
                    }
                    constructor() {
                        return this
                    }
                }
                window.TinychatApp.BLL.Chatlog = b, window.TinychatApp.BLL.ChatlogItemAddedEvent = d, window.TinychatApp.BLL.ChatlogItemRemovedEvent = f, window.TinychatApp.BLL.ChatlogItemSentEvent = h, window.TinychatApp.BLL.ChatlistAddEvent = j, window.TinychatApp.BLL.ChatlistRemoveEvent = l, window.TinychatApp.BLL.ChatlistUpdateEvent = n, window.TinychatApp.BLL.ChatlistSelectedEvent = p, window.TinychatApp.BLL.ChatlistUIUpdateEvent = r
            })();
        </script>
        <script>
            (function() {
                "use strict";
                var a = Math.Guid;
                class b {
                    constructor(a, b, d) {
                        this.videolist = a, this.userentity = b, this.mediastream = d, this.progress = !1, this.large = !1, this.hidden = !1, this.mute = !1, this.volume = 1, this.audiolevel = 0, this.featured = !1;
                        try {
                            let a = this,
                                b = d.getAudioTracks();
                            if (!Array.isArray(b) || 1 > b.length) return;
                            this.soundMeter = new SoundMeter(this.videolist.audioContext), this.soundMeter.connectToSource(this.mediastream, b => b ? void console.warn(b) : void(a.soundMeterTimer = setInterval(function() {
                                let b = a.audiolevel;
                                if (a.audiolevel = Math.ceil(10 * a.soundMeter.instant.toFixed(2)), 10 < a.audiolevel && (a.audiolevel = 10), b != a.audiolevel) {
                                    let b = a.videolist.getitems().indexOf(a);
                                    if (-1 < b) {
                                        let d = new f(c.Update, a, b);
                                        a.videolist.EventBus.broadcast(f.ID, d)
                                    }
                                }
                            }, 200)))
                        } catch (a) {
                            console.warn("Web Audio API not supported.", a)
                        }
                    }
                    Dispose() {
                        this.soundMeter && this.soundMeter.stop(), this.soundMeterTimer && clearInterval(this.soundMeterTimer)
                    }
                    get userlist() {
                        return this.videolist.chatroom.userlist
                    }
                    get handle() {
                        return this.userentity.handle
                    }
                    get nickname() {
                        return this.userentity.nickname
                    }
                    get muted() {
                        return this.mute || this.userentity.isSelf
                    }
                    get achivementUrl() {
                        return this.userentity.achivementUrl || ""
                    }
                    get videoForceCloseAllow() {
                        return this.videolist.chatroom.userlist.videoForceCloseAllow(this.userentity)
                    }
                    get ignoreAllow() {
                        return this.videolist.chatroom.userlist.ignoreIsAllowed(this.userentity)
                    }
                    get unignoreAllow() {
                        return this.videolist.chatroom.userlist.isIgnored(this.userentity)
                    }
                    get followAllow() {
                        return this.videolist.chatroom.userlist.followIsAllowed(this.userentity)
                    }
                    get openprivateAllow() {
                        return !this.userentity.isSelf && !this.videolist.chatroom.selfUser().isGuest
                    }
                    get profileAllow() {
                        return !0
                    }
                    get abuseAllow() {
                        return !this.userentity.isSelf
                    }
                    get banAllow() {
                        return this.userlist.banIsAllowed(this.userentity)
                    }
                    get kickAllow() {
                        return this.userlist.kickIsAllowed(this.userentity)
                    }
                    get filtersAllow() {
                        return this.userentity.isSelf
                    }
                    get giveagiftAllow() {
                        return !this.userentity.isSelf
                    }
                    get upgradeAllow() {
                        return this.userentity.isSelf
                    }
                    get volumeControlAllow() {
                        return !this.userentity.isSelf
                    }
                }
                const c = {
                        Add: "Add",
                        AddWaiting: "AddWaiting",
                        AddPending: "AddPending",
                        AddModeration: "AddModeration",
                        Remove: "Remove",
                        RemovePendingWaiting: "RemovePendingWaiting",
                        RemoveModeration: "RemoveModeration",
                        Update: "Update",
                        UpdateModeration: "UpdateModeration"
                    },
                    d = "VideolistEvent_" + a.newGuid();
                class f {
                    static get ID() {
                        return d
                    }
                    constructor(a, b, c) {
                        return this.action = a, this.videolistitem = b, this.index = c, this
                    }
                }
                const e = "VideolistClear_" + a.newGuid();
                class g {
                    static get ID() {
                        return e
                    }
                    constructor(a) {
                        return this.chatroom = a, this
                    }
                }
                const h = "VideolistAcceptedEvent_" + a.newGuid();
                class i {
                    static get ID() {
                        return h
                    }
                    constructor(a, b) {
                        return this.userId = a, this.chatroom = b, this
                    }
                }
                window.TinychatApp.BLL.Videolist = class {
                    constructor(a) {
                        this.chatroom = a, this.EventBus = a.app.EventBus, this.items = [], this.moderationitems = [], this.selfItem, this.audioContext = new AudioContext, this.EventBus.subscribe(TinychatApp.BLL.UserlistRemoveUserEvent.ID, a => this.onUserlistRemoved(a)), this.EventBus.subscribe(TinychatApp.BLL.UserlistUpdateUserEvent.ID, a => this.onUserlistUpdate(a))
                    }
                    getitems() {
                        return this.items
                    }
                    getModerationItems() {
                        return this.moderationitems
                    }
                    count() {
                        return this.items.length
                    }
                    clear() {
                        this.items = [], this.EventBus.broadcast(g.ID, new g(this.chatroom))
                    }
                    switchPTT(a) {
                        let b = this._getSelfMediaStream();
                        null != b && this._muteMediaStream(b, !a)
                    }
                    setVolume(a, b) {
                        b == void 0 ? (this.chatroom.volume = a, Object.keys(this.items).forEach(b => {
                            let c = this.items[b];
                            this._volMediaStream(c.mediastream, a)
                        })) : this._volMediaStream(b.mediastream, a)
                    }
                    toggleFeatured(a) {
                        let b = this.items.indexOf(a);
                        if (!(0 > b)) {
                            a.featured = !a.featured;
                            let d = new f(c.Update, a, b);
                            this.EventBus.broadcast(f.ID, d)
                        }
                    }
                    toggleSizeVW2Normal(a) {
                        Object.keys(this.items).forEach(b => {
                            let d = this.items[b];
                            if (d.large && (a == void 0 || d.userentity.handle != a.handle)) {
                                d.large = !1;
                                let a = new f(c.Update, d, b);
                                this.EventBus.broadcast(f.ID, a)
                            }
                        })
                    }
                    toggleSizeVW(a) {
                        a.large = !a.large, a.large && this.toggleSizeVW2Normal(a);
                        let b = this.items.indexOf(a);
                        if (0 <= b) {
                            let d = new f(c.Update, a, b);
                            this.EventBus.broadcast(f.ID, d)
                        }
                    }
                    toggleHiddenVW(a) {
                        let b = this.items.indexOf(a);
                        if (!(0 > b)) {
                            a.hidden = !a.hidden, this._pauseMediaStream(a.mediastream, a.hidden), a.hidden || this._muteMediaStream(a.mediastream, a.mute);
                            let d = new f(c.Update, a, b);
                            this.EventBus.broadcast(f.ID, d)
                        }
                    }
                    toggleMuteVW(a) {
                        let b = this.items.indexOf(a);
                        if (!(0 > b)) {
                            a.mute = !a.mute, a.hidden || this.switchMute(a.mute, a);
                            let d = new f(c.Update, a, b);
                            this.EventBus.broadcast(f.ID, d)
                        }
                    }
                    switchMicMute(a) {
                        this.chatroom.micmuted = void 0 == a ? !this.chatroom.micmuted : a;
                        let b = this._getSelfMediaStream();
                        return null != b && this._muteMediaStream(b, this.chatroom.micmuted), this.chatroom.micmuted
                    }
                    switchMute(a, b) {
                        let d = (d, a) => {
                            this._muteMediaStream(d.mediastream, d.mute);
                            let b = new f(c.Update, d, a);
                            this.EventBus.broadcast(f.ID, b)
                        };
                        if (void 0 == b) return this.chatroom.mute = void 0 == a ? !this.chatroom.mute : a, Object.keys(this.items).forEach(a => {
                            let b = this.items[a];
                            b.mute != this.chatroom.mute && b.userentity.handle != this.chatroom.self_handle && (b.mute = this.chatroom.mute, d(b, a))
                        }), this.chatroom.mute;
                        else {
                            let c = b,
                                e = this.items.indexOf(c);
                            c.mute = a, d(c, e)
                        }
                    }
                    CanMakeLargeVideo() {
                        let a = this.chatroom.selfUser().subscriptionType,
                            b = chatroom.app.IsLoggedIn() && TinychatApp.BLL.User.isSubscription(a);
                        return b
                    }
                    AddingVideoSelf() {}
                    RemovingVideoSelf(a) {
                        if (this.chatroom.self_handle == a) {
                            this.selfItem = null;
                            let a = new f(c.RemovePendingWaiting, this.selfItem, 0);
                            this.EventBus.broadcast(f.ID, a)
                        }
                    }
                    AddVideoSelf(a, c) {
                        let d = this.chatroom.userlist.get(a),
                            e = new b(this, d, c);
                        (this.chatroom.roomSettings.pushtotalk || this.chatroom.micmuted) && this._muteMediaStream(e.mediastream, !0), this._volMediaStream(e.mediastream, this.chatroom.volume), this.selfItem = e
                    }
                    PublishedVideoSelf() {
                        this.items.push(this.selfItem);
                        let a = new f(c.Add, this.selfItem, this.items.indexOf(this.selfItem));
                        this.EventBus.broadcast(f.ID, a), this.selfItem = null
                    }
                    PendingModerationVideoSelf() {
                        let a = new f(c.AddPending, this.selfItem, 0);
                        this.EventBus.broadcast(f.ID, a)
                    }
                    WaitingSlotVideoSelf() {
                        let a = new f(c.AddWaiting, this.selfItem, 0);
                        this.EventBus.broadcast(f.ID, a)
                    }
                    RemoveVideoSelf(a) {
                        this.RemovingVideoSelf(a), this.RemoveVideoRemote(a)
                    }
                    AcceptedSelfVideoByModerator(a) {
                        this.EventBus.broadcast(VideoModeratorAcceptedEvent.ID, new VideoModeratorAcceptedEvent(a, this.chatroom))
                    }
                    AddVideoRemote(a, d) {
                        let e = this.chatroom.userlist.get(a),
                            g = new b(this, e, d);
                        if (this._muteMediaStream(g.mediastream, this.chatroom.mute), this._volMediaStream(g.mediastream, this.chatroom.volume), e.needToUpprove) {
                            this.moderationitems.push(g);
                            let a = new f(c.AddModeration, g, this.moderationitems.indexOf(g));
                            this.EventBus.broadcast(f.ID, a)
                        } else {
                            this.items.push(g);
                            let a = new f(c.Add, g, this.items.indexOf(g));
                            this.EventBus.broadcast(f.ID, a)
                        }
                    }
                    onUserlistRemoved(a) {
                        this.RemoveVideoRemote(a.userentity.handle)
                    }
                    onUserlistUpdate(a) {
                        let d = this.items.find(b => b.userentity.handle === a.toUserEntity.handle);
                        if (d instanceof b) {
                            d.userentity = a.toUserEntity;
                            let b = this.items.indexOf(d),
                                e = new f(c.Update, d, b);
                            this.EventBus.broadcast(f.ID, e)
                        }
                    }
                    RemoveVideoRemote(a) {
                        var b = Number.parseInt;
                        let d = null,
                            e = -1;
                        if (Object.keys(this.items).forEach(c => {
                                let f = this.items[c];
                                if (f.userentity.handle === a) return d = f, e = b(c), !0
                            }), null != d) {
                            this.items.splice(e, 1), d.Dispose();
                            let a = new f(c.Remove, d, e);
                            this.EventBus.broadcast(f.ID, a)
                        } else {
                            let d = null,
                                e = -1;
                            if (Object.keys(this.moderationitems).forEach(c => {
                                    let f = this.moderationitems[c];
                                    if (f.userentity.handle === a) return d = f, e = b(c), !0
                                }), null != d) {
                                this.moderationitems.splice(e, 1), d.Dispose();
                                let a = new f(c.RemoveModeration, d, e);
                                this.EventBus.broadcast(f.ID, a)
                            }
                        }
                    }
                    _muteMediaStream(a, b) {
                        let c = a.getAudioTracks();
                        !Array.isArray(c) || 1 > c.length || Object.keys(c).forEach(a => {
                            c[a].enabled = !b
                        })
                    }
                    _pauseMediaStream(a, b) {
                        let c = a.getAudioTracks();
                        if (!Array.isArray(c) || 1 > c.length) return;
                        Object.keys(c).forEach(a => {
                            c[a].enabled = !b
                        });
                        let d = a.getVideoTracks();
                        !Array.isArray(d) || 1 > d.length || Object.keys(d).forEach(a => {
                            d[a].enabled = !b
                        })
                    }
                    _volMediaStream(a, b) {
                        let c = a.getAudioTracks();
                        !Array.isArray(c) || 1 > c.length || Object.keys(c).forEach(a => {
                            c[a].volume = b, console.log(c[a].kind + " - " + c[a].readyState + ", remote:" + c[a].remote + " - " + c[a].id + " -> vol: " + c[a].volume)
                        })
                    }
                    _getSelfMediaStream() {
                        let a = this.items.find(a => a.userentity.handle == this.chatroom.self_handle);
                        return a ? a.mediastream : null
                    }
                }, window.TinychatApp.BLL.VideolistItem = b, window.TinychatApp.BLL.VideolistAction = c, window.TinychatApp.BLL.VideolistEvent = f, window.TinychatApp.BLL.VideolistClear = g, window.TinychatApp.BLL.VideolistAcceptedEvent = i
            })();
        </script>
        <script>
            (function() {
                "use strict";
                var e = Math.Guid;
                const t = window.TinychatApp.BLL.PacketWorker;
                class a {
                    constructor(e, a, o, n) {
                        this.app = e, this.tc_token = a, this.roomname = o, this.nickname = n, this.EventBus = e.EventBus, this.roomSettings = null, this._enterroomresult = null, this._userlist = null, this._chatlog = null, this._videolist = null, this.reqid = 0, this.wsHandle = null, this.queue = {}, this.mediaConnections = {
                            local: null,
                            remote: {}
                        }, this.mediaStream = null, this.mediaStreamVideo = null, this.mediaStreamCanvas = null, this.mediaStreamFilter = window.TinychatApp.BLL.VideoFilters.getAll[0].name, this.mediaStreamOrigin = null, this.mediaLastState = null, this.mediaLastConstraints = null;
                        let s = this;
                        this.EventBus.subscribe(TinychatApp.BLL.BroadcastProgressEvent.ID, function(e) {
                            s.mediaLastState = e.stage
                        }), this.banlist = null, this.youtubelist = [], this.youtubelist_random = !1, this.youtubelist_repeat = !1, this.fullscreen = !1, this.mute = !1, this.volume = 1, this.micmuted = !1, this.wsEndpoint = "wss://wss.tinychat.com:443", this.packetWorker = new t(this), this.wsReset()
                    }
                    wsReset() {
                        for (var e in null != this.mediaStream && this.mediaStream.stop(), null != this.mediaConnections.local && this.mediaConnections.local.Close(), this.mediaConnections.remote) {
                            var t = this.mediaConnections.remote[e];
                            t.Close()
                        }
                        this.roomSettings = new TinychatApp.DAL.RoomSettingsEntity, this._enterroomresult = null, null != this._userlist && this.userlist.clear(), null != this._videolist && this._videolist.clear(), this.mediaConnections = {
                            local: null,
                            remote: {}
                        }, this.streamReset(), this.fullscreen = !1, this.mute = !1, this.packetWorker.reset()
                    }
                    streamReset() {
                        null != this.mediaStream && this.mediaStream.stop(), this.mediaStream = null, this.mediaStreamCanvas = null, this.mediaStreamVideo = null, null != this.mediaStreamOrigin && this.mediaStreamOrigin.stop(), this.mediaStreamOrigin = null
                    }
                    get settings() {
                        return this.app.settings
                    }
                    get enterroomresult() {
                        return null == this._enterroomresult && (this._enterroomresult = new TinychatApp.DAL.EnterRoomResultEntity), this._enterroomresult
                    }
                    get userlist() {
                        return null == this._userlist && (this._userlist = new TinychatApp.BLL.Userlist(this)), this._userlist
                    }
                    get chatlog() {
                        return null == this._chatlog && (this._chatlog = new TinychatApp.BLL.Chatlog(this)), this._chatlog
                    }
                    get videolist() {
                        return null == this._videolist && (this._videolist = new TinychatApp.BLL.Videolist(this)), this._videolist
                    }
                    get _tracker() {
                        return TinychatApp.BLL.Tracker.getInstance()
                    }
                    get _router() {
                        return TinychatApp.BLL.Router.getInstance()
                    }
                    get _api() {
                        return WebAPI.getInstance()
                    }
                    get _cookie() {
                        return CookieUtils
                    }
                    get self_handle() {
                        let e = this.enterroomresult;
                        return null == e || null == e.selfuser ? -1 : e.selfuser.handle
                    }
                    get url() {
                        return TinychatApp.url + "/room/" + this.chatroomName()
                    }
                    get id__miconly() {
                        return "__miconly"
                    }
                    getRoomAvatarUrl() {
                        return this.app.GetAvatarUrl(this.chatroomName())
                    }
                    selfUser() {
                        return this.enterroomresult.selfuser
                    }
                    chatroomName() {
                        let e = TinychatApp.DAL.RoomSettingsEntity,
                            t = this.roomSettings instanceof e && this.roomSettings.name.isNotEmpty() ? this.roomSettings.name : this.roomname;
                        return t
                    }
                    updateSelfUser(e) {
                        e.isSelf = !0, this.enterroomresult.selfuser = e
                    }
                    updateRoomSettings(e) {
                        this.roomSettings = e;
                        let t = new n(this.roomSettings);
                        this.EventBus.broadcast(n.ID, t)
                    }
                    isLurker() {
                        return null != this.enterroomresult.selfuser && this.enterroomresult.selfuser.isLurker
                    }
                    isOperator() {
                        return null != this.enterroomresult.selfuser && this.enterroomresult.selfuser.isOperator
                    }
                    isOwner() {
                        return null != this.enterroomresult.selfuser && this.enterroomresult.selfuser.isOwner
                    }
                    gotoGift(e) {
                        this.app.GiveAGift(e.username)
                    }
                    gotoLiveDirectory() {
                        this.app.LiveDirectory()
                    }
                    Reconnect() {
                        clearInterval(this.reconnect_timer), null != this.wsHandle && this.wsReset(), this.Connect(!0)
                    }
                    Connect(e) {
                        let t = this;
                        this.app.isDebug() ? this.packetWorker.connect(e) : (console.log("Chatroom.Connecting: reinvoke tc token ..."), this._api.wsj({
                            src: TinychatApp.url_api_room_token(t.chatroomName())
                        }).then(a => {
                            t.tc_token = a.result, t.wsEndpoint = a.endpoint, t.packetWorker.connect(e)
                        }).catch(a => {
                            console.error(a), t.app.showToastWarn("Some unknown server error occurred"), t.packetWorker.connect(e)
                        }))
                    }
                    ConnectSolveCaptcha(e) {
                        this.packetWorker.send(this.tcPkt_ConnectCaptcha(e, this.onRoomConnectCallback))
                    }
                    ConnectSolveSkip() {
                        this.packetWorker.send(this.tcPkt_ConnectCaptcha("", this.onRoomConnectCallback))
                    }
                    ConnectSolveTimeout() {
                        this.packetWorker.send(this.tcPkt_ConnectCaptcha("", this.onRoomConnectCallback))
                    }
                    ConnectPassword(e) {
                        this.packetWorker.send(this.tcPkt_ConnectPassword(e, this.onRoomConnectCallback))
                    }
                    NicknameChange(e, t) {
                        this.packetWorker.send(this.tcPkt_NickChange(e, this.onNicknameChanged)), t && this.app.settings.changeNickname(e)
                    }
                    NicknameIsValid(e) {
                        return this.app.IsValidNickname(e)
                    }
                    NicknameIsInUseFast(e) {
                        if ("string" != typeof e || e.isEmpty()) return !1;
                        let t = this.userlist.getByNickname(e);
                        return null != t
                    }
                    BroadcastSwitch(e) {
                        e ? this.BroadcastStop() : this.BroadcastStart()
                    }
                    IsLastCam(e, t) {
                        let a = !0;
                        for (let o in e) {
                            let n = e[o];
                            "videoinput" === n.kind && (a = n.deviceId === t.deviceId)
                        }
                        return a
                    }
                    BroadcastStart(e) {
                        let t = this,
                            a = this.settings,
                            o = this.settings.getSettings();
                        if (null === o.video) return void this.app.MediaSettings(() => this.BroadcastStart());
                        this.videolist.AddingVideoSelf(this.self_handle);
                        var n = {};
                        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) n.audio = !0, n.video = {
                            width: 320,
                            height: 240
                        };
                        else {
                            let s = !1;
                            navigator.mediaDevices.enumerateDevices().then(r => {
                                let d = !1;
                                for (let a in r) {
                                    let i = r[a];
                                    "videoinput" === i.kind && (console.log(i), n.video === void 0 && (n.video = {
                                        width: 320,
                                        height: 240,
                                        frameRate: {
                                            ideal: 15,
                                            max: 30
                                        }
                                    }), d && (o.video = i, d = !1, this.settings.saveSettings(o), s = t.IsLastCam(r, i)), null === o.video && (o.video = i, this.settings.saveSettings(o)), null != o.video && "object" == typeof o.video && o.video.deviceId == i.deviceId && o.video.deviceId !== e ? n.video.deviceId = {
                                        exact: o.video.deviceId
                                    } : o.video.deviceId === e && (d = !0)), "audioinput" === i.kind && (console.log(i), n.audio === void 0 && (n.audio = {}), null != o.audio && "object" == typeof o.audio && o.audio.deviceId == i.deviceId && (n.audio.deviceId = {
                                        exact: o.audio.deviceId
                                    }))
                                }
                                null != n.video && null != o.video && o.video.deviceId == t.id__miconly && delete n.video;
                                let i = navigator.mediaDevices.getSupportedConstraints();
                                for (let e in i) i.hasOwnProperty(e) && "echoCancellation" == e && n.audio && (n.audio[e] = a.isAcousticEchoCancelation());
                                if (!(n.audio || n.video)) t.onMediaFailedCallback(new Error("No media devices to start broadcast."));
                                else if ("https:" === location.protocol || this.app.isDebug()) {
                                    console.log("Broadcast: Media ...");
                                    let e = new S(S.MEDIA_START);
                                    this.EventBus.broadcast(S.ID, e), console.log(n), t.mediaLastConstraints = n, navigator.mediaDevices.getUserMedia(n).then(e => {
                                        t.onMediaSuccessCallback(e)
                                    }).catch(e => {
                                        s ? t.onMediaFailedCallback(e) : this.BroadcastStart(n.video.deviceId.exact)
                                    })
                                } else t.onMediaFailedCallback(new Error("Use https:// protocol for safe open media devices."))
                            }).catch(e => {
                                console.log(e)
                            })
                        }
                    }
                    BroadcastStop() {
                        console.log("Broadcast: Media ... stop");
                        let e = new S(S.MEDIA_STOPING);
                        this.EventBus.broadcast(S.ID, e);
                        let t = this.tcPkt_StreamClose(this.self_handle, this.onStreamClosed);
                        this.packetWorker.send(t)
                    }
                    Youtube(e) {
                        let t = this.tcPkt_Youtube(e.cmd, e);
                        this.packetWorker.send(t)
                    }
                    YoutubePlaylistLoad(e) {
                        let t = this,
                            a = this.tcPkt_YoutubePlaylist(a => {
                                t.onYoutubePlaylist(a), e && e()
                            });
                        this.packetWorker.send(a)
                    }
                    YoutubePlaylistMode(e, t, a) {
                        let o = this,
                            n = this.tcPkt_YoutubePlaylistMode(e, t, e => {
                                let t = e.success,
                                    o = e.reason;
                                !0 === t && a && a()
                            });
                        this.packetWorker.send(n)
                    }
                    YoutubePlaylistAdd(e, t) {
                        let a = this,
                            o = this.tcPkt_YoutubePlaylistAdd(e, e => {
                                let a = e.success,
                                    o = e.reason;
                                !0 === a && t && t()
                            });
                        this.packetWorker.send(o)
                    }
                    YoutubePlaylistRemove(e, t) {
                        let a = this,
                            o = this.tcPkt_YoutubePlaylistRemove(e, e => {
                                let a = e.success,
                                    o = e.reason;
                                !0 === a && t && t()
                            });
                        this.packetWorker.send(o)
                    }
                    YoutubePlaylistClear(e) {
                        let t = this,
                            a = this.tcPkt_YoutubePlaylistClear(t => {
                                let a = t.success,
                                    o = t.reason;
                                !0 === a && e && e()
                            });
                        this.packetWorker.send(a)
                    }
                    SendMessagePublic(e) {
                        this.packetWorker.send(this.tcPkt_Msg(e, this.onSendMessagePublicCallback))
                    }
                    SendMessagePrivate(e, t, a) {
                        this.packetWorker.send(this.tcPkt_Msg_Private(e, a.handle, this.onSendMessagePrivateCallback))
                    }
                    Kick(e) {
                        this.packetWorker.send(this.tcPkt_Kick(e.handle))
                    }
                    Abuse(e) {
                        this.app.showToast("[" + e.nickname + "] was reported"), this.packetWorker.send(this.tcPkt_Abuse(e.handle))
                    }
                    Ban(e) {
                        this.app.showToast("[" + e.nickname + "] has been banned"), this.packetWorker.send(this.tcPkt_Ban(e.handle, this.onBanCallback))
                    }
                    Unban(e) {
                        this.packetWorker.send(this.tcPkt_Unban(e.id, this.onUnbanCallback))
                    }
                    Banlist(e) {
                        let t = this;
                        this.packetWorker.send(this.tcPkt_Banlist(a => {
                            t.onBanlistCallback(a), e(Array.isArray(t.banlist) ? t.banlist : [])
                        }))
                    }
                    VideoForceClose(e) {
                        this.packetWorker.send(this.tcPkt_VideoForceClose(e.handle, this.onVideoForceCloseCallback))
                    }
                    VideoAllow(e) {
                        this.packetWorker.send(this.tcPkt_VideoAllow(e.handle))
                    }
                    switchFullscreen(e) {
                        return this.fullscreen = void 0 == e ? !this.fullscreen : e, this.fullscreen
                    }
                    takeSnapshot() {
                        return !0
                    }
                    tcPkt_Connect(e) {
                        var t = this.packetWorker.wsCreatePacket("join", e);
                        return t.useragent = this.app.useragent, t.token = this.tc_token, t.room = this.roomname, t.nick = this.nickname, t
                    }
                    tcPkt_Pong() {
                        var e = this.packetWorker.wsCreatePacket("pong");
                        return e
                    }
                    tcPkt_GetICE(e) {
                        var t = this.packetWorker.wsCreatePacket("getice", e);
                        return t
                    }
                    tcPkt_Trickle(e, t) {
                        var a = this.packetWorker.wsCreatePacket("trickle");
                        return a.handle = e, a.candidate = t, a
                    }
                    tcPkt_SDP(e, t, a, o) {
                        var n = this.packetWorker.wsCreatePacket("sdp", o);
                        return n.type = e, n.sdp = t, n.handle = a, n
                    }
                    tcPkt_Subscribe(e, t) {
                        var a = this.packetWorker.wsCreatePacket("subscribe", t);
                        return a.handle = e, a
                    }
                    tcPkt_Msg(e, t) {
                        var a = this.packetWorker.wsCreatePacket("msg", t);
                        return a.text = this.tcPktPrepareText(e), a
                    }
                    tcPkt_Msg_Private(e, t, a) {
                        var o = this.packetWorker.wsCreatePacket("pvtmsg", a);
                        return o.text = this.tcPktPrepareText(e), o.handle = t, o
                    }
                    tcPkt_Kick(e, t) {
                        var a = this.packetWorker.wsCreatePacket("kick", t);
                        return a.handle = e, a
                    }
                    tcPkt_Ban(e, t) {
                        var a = this.packetWorker.wsCreatePacket("ban", t);
                        return a.handle = e, a
                    }
                    tcPkt_Unban(e, t) {
                        var a = this.packetWorker.wsCreatePacket("unban", t);
                        return a.id = e, a
                    }
                    tcPkt_Banlist(e) {
                        var t = this.packetWorker.wsCreatePacket("banlist", e);
                        return t
                    }
                    tcPkt_VideoForceClose(e, t) {
                        var a = this.packetWorker.wsCreatePacket("stream_moder_close", t);
                        return a.handle = e, a
                    }
                    tcPkt_VideoAllow(e) {
                        var t = this.packetWorker.wsCreatePacket("stream_moder_allow");
                        return t.handle = e, t
                    }
                    tcPkt_Youtube(e, t, a) {
                        var o = this.packetWorker.wsCreatePacket(e, a);
                        return o.item = {
                            id: t.id,
                            duration: t.duration,
                            offset: t.offset
                        }, void 0 !== t.title && (o.item.title = t.title), !0 === t.seekByUser && (o.item.seek = !0), o.item.playlist = t.playlist, o
                    }
                    tcPkt_YoutubePlaylist(e) {
                        var t = this.packetWorker.wsCreatePacket("yut_playlist", e);
                        return t
                    }
                    tcPkt_YoutubePlaylistMode(e, t, a) {
                        var o = this.packetWorker.wsCreatePacket("yut_playlist_mode", a);
                        return o.mode = {
                            random: e,
                            repeat: t
                        }, o
                    }
                    tcPkt_YoutubePlaylistAdd(e, t) {
                        var a = this.packetWorker.wsCreatePacket("yut_playlist_add", t);
                        return a.item = {
                            id: e.id,
                            duration: e.duration,
                            title: e.title,
                            image: e.imgurl
                        }, a
                    }
                    tcPkt_YoutubePlaylistRemove(e, t) {
                        var a = this.packetWorker.wsCreatePacket("yut_playlist_remove", t);
                        return a.item = {
                            id: e.id,
                            duration: e.duration,
                            title: e.title,
                            image: e.imgurl
                        }, a
                    }
                    tcPkt_YoutubePlaylistClear(e) {
                        var t = this.packetWorker.wsCreatePacket("yut_playlist_clear", e);
                        return t
                    }
                    tcPkt_Abuse(e, t) {
                        var a = this.packetWorker.wsCreatePacket("abuse", t);
                        return a.handle = e, a
                    }
                    tcPkt_ConnectCaptcha(e, t) {
                        var a = this.packetWorker.wsCreatePacket("captcha", t);
                        return a.token = e, a
                    }
                    tcPkt_ConnectPassword(e, t) {
                        var a = this.packetWorker.wsCreatePacket("password", t);
                        return a.password = e, a
                    }
                    tcPkt_NickChange(e, t) {
                        var a = this.packetWorker.wsCreatePacket("nick", t);
                        return a.nick = e, a
                    }
                    tcPkt_StreamClose(e, t) {
                        var a = this.packetWorker.wsCreatePacket("stream_close", t);
                        return a.handle = e, a
                    }
                    tcPktPrepareText(e) {
                        return e
                    }
                    tcPkt_UserParse(e) {
                        let t = new TinychatApp.DAL.UserEntity;
                        return t.path = e.handle || 0, t.nickname = e.nick || "", t.username = e.username || "", t.subscriptionType = e.subscription || 0, t.avatarUrl = e.avatar || "", t.giftpoints = e.giftpoints || 0, t.achivementUrl = e.achievement_url || "", t.isLurker = e.lurker || !1, t.isOwner = e.owner || !1, t.isOperator = e.mod || !1, t.isFeatured = e.featured || !1, t
                    }
                    tcPkt_RoomSettingsParse(e) {
                        let t = new TinychatApp.DAL.RoomSettingsEntity;
                        t.type = e.type || "", t.name = e.name || "", t.topic = e.topic || "", t.subtype = e.subscription || 0, t.giftpoints = e.giftpoints || 0, t.pushtotalk = "boolean" == typeof e.pushtotalk ? e.pushtotalk : e.pushtotalk || !1;
                        let a = e.recent_gifts,
                            o = [];
                        return Array.isArray(a) && Object.keys(a).forEach(e => {
                            let t = new TinychatApp.DAL.GiftEntity;
                            t.giftUrl = a[e], o.push(t)
                        }), t.recent_gifts = o, t.biography = e.biography || "", t.location = e.location || "", t.website = e.website || "", t.avatar = e.avatar || "", t
                    }
                    tcPkt_MsgParse(e) {
                        var t = new TinychatApp.DAL.ChatLogItemEntity;
                        t.message_text = e.text || "";
                        let a = e.handle || 0;
                        return t.user = this.userlist.get(a), t
                    }
                    tcPkt_GiftParse(e) {
                        var t = new TinychatApp.DAL.GiftEntity;
                        let a = e.gift,
                            o = a.anon;
                        if (t.giftComment = a.comment, t.giftExt = a.extensions, t.giftName = a.name, t.giftStore = a.store_url, t.giftUrl = a.url, !o) {
                            let a = e.from;
                            t.fromUsername = a.name, t.fromUrl = a.url
                        } else t.fromUsername = "", t.fromUrl = "";
                        let n = e.to;
                        return t.toUsername = n.name, t.toUrl = n.url, t
                    }
                    tcPkt_BanlistItemParse(e) {
                        var t = new TinychatApp.DAL.BanlistItemEntity;
                        return t.id = e.id || "", t.username = e.username || "", t.nickname = e.nick || "", t.reason = e.reason || "", t.moderator = e.moderator || "", t
                    }
                    tcPkt_TcCallbackCheck(e, t) {
                        return !(e.tc !== t) || (console.error("Unexpected pkt: " + JSON.stringify(e)), console.error("Protocol Callback error:" + t + " ~ " + e.tc), !1)
                    }
                    _stopRemoteMediaConnection(e) {
                        this.mediaConnections.remote[e] !== void 0 && (this.mediaConnections.remote[e].Close(), delete this.mediaConnections.remote[e])
                    }
                    onPing() {
                        this.packetWorker.send(this.tcPkt_Pong())
                    }
                    onRoomUserlist(e) {
                        var t = e.users,
                            a = [];
                        for (var o in t) {
                            let e = t[o],
                                n = this.tcPkt_UserParse(e);
                            n.handle == this.self_handle && (n.isSelf = !0), a.push(n)
                        }
                        this.userlist.start(a)
                    }
                    onRoomUserJoin(e) {
                        var t = this.tcPkt_UserParse(e);
                        t.handle == this.self_handle && (t.isSelf = !0), this.userlist.joined(t)
                    }
                    onRoomSettings(e) {
                        if (this.tcPkt_TcCallbackCheck(e, "room_settings")) {
                            var t = this.tcPkt_RoomSettingsParse(e.room);
                            this.updateRoomSettings(t)
                        }
                    }
                    onRoomUserQuit(e) {
                        let t = e.handle;
                        this._stopRemoteMediaConnection(t), this.userlist.quited(t)
                    }
                    onRoomPublish(e) {
                        let t = e.handle;
                        if (this.userlist.updateBroadcasting(t, !0), t === this.self_handle) return void this.videolist.PublishedVideoSelf();
                        let a = this.tcPkt_Subscribe(t, this.onRemoteConnectionReadyCallback);
                        this.packetWorker.send(a)
                    }
                    onRoomPublishReconnect(e) {
                        if (e !== this.self_handle) {
                            let t = this.userlist.get(e);
                            if (null !== t && (t.isBroadcasting || t.needToUpprove)) {
                                let t = this.tcPkt_Subscribe(e, this.onRemoteConnectionReadyCallback);
                                this.packetWorker.send(t)
                            }
                        }
                    }
                    onRoomUnPublish(e) {
                        let t = e.handle;
                        this._stopRemoteMediaConnection(t), this.userlist.updateBroadcasting(t, !1)
                    }
                    onStreamConnected(e) {
                        !this.tcPkt_TcCallbackCheck(e, "stream_connected")
                    }
                    onPendingModeration(e) {
                        let t = e.handle;
                        if (t === this.self_handle) return void this.videolist.PendingModerationVideoSelf();
                        const a = this.userlist.get(t);
                        a.needToUpprove = !0;
                        var o = this.tcPkt_Subscribe(t, this.onRemoteConnectionReadyCallback);
                        this.packetWorker.send(o)
                    }
                    onWaitingSlot(e) {
                        let t = e.handle;
                        t === this.self_handle && this.videolist.WaitingSlotVideoSelf()
                    }
                    onStreamClosed(e) {
                        if (!this.tcPkt_TcCallbackCheck(e, "stream_closed")) return;
                        let t = e.publish,
                            a = e.handle;
                        this.self_handle == a ? (this._selfMediaStreamStop(a, "Broadcast closed due server request"), e.reason !== void 0 && null !== e.reason && this._selfShowReason(e.reason)) : (this._stopRemoteMediaConnection(a), this.onRoomPublishReconnect(a))
                    }
                    onStreamModerAllow(e) {
                        if (!this.tcPkt_TcCallbackCheck(e, "stream_moder_allow")) return;
                        let t = e.handle,
                            a = e.allowed_by;
                        this._stopRemoteMediaConnection(t);
                        let o = this.userlist.get(t),
                            n = this.userlist.get(a);
                        o.needToUpprove = !1, null !== n && this.app.showToast(`[${o.nickname}]'s broadcast allowed by [${n.nickname}]`)
                    }
                    _selfMediaStreamStop(e, t) {
                        if (null != this.mediaConnections.local) {
                            if (null != this.mediaStream && this.mediaStream.active && this.mediaLastState !== S.MEDIA_STOPING) {
                                this.mediaStream.stop(), null != this.mediaStreamOrigin && this.mediaStreamOrigin.stop();
                                let e = TinychatApp.BLL.BroadcastProgressEvent,
                                    a = new e(e.MEDIA_RTC_FAILED);
                                a.error = new Error(t), this.EventBus.broadcast(e.ID, a)
                            }
                            this.mediaConnections.local.Close(), this.mediaConnections.local = null
                        }
                        null != this.mediaStream && (this.mediaStream.stop(), this.mediaStream = null, this.streamReset()), this.videolist.RemoveVideoSelf(e);
                        let a = new S(S.MEDIA_STOPED);
                        this.EventBus.broadcast(S.ID, a)
                    }
                    _selfShowReason(e) {
                        this.app.Notify(e.text)
                    }
                    onMediaSuccessCallback(e) {
                        this.mediaStream = this.mediaLastConstraints.video ? this.prepareStream(e) : e;
                        var t = this.tcPkt_GetICE(this.onPublisherConnectionReadyCallback);
                        this.packetWorker.send(t), console.log("Broadcast: Media OK ...");
                        let a = new S(S.MEDIA_OK);
                        this.EventBus.broadcast(S.ID, a)
                    }
                    applyFilter(e) {
                        this.mediaStreamFilter = e
                    }
                    prepareStream(e) {
                        function t() {
                            if (null == self.mediaStreamCanvas) return;
                            ctx.clearRect(0, 0, self.mediaStreamCanvas.width, self.mediaStreamCanvas.height);
                            let e = self.mediaStreamVideo.videoHeight,
                                a = self.mediaStreamVideo.videoWidth;
                            self.mediaStreamCanvas.width = a, self.mediaStreamCanvas.height = e, window.TinychatApp.BLL.VideoFilters.getFilter(self.mediaStreamFilter).apply(ctx, a, e), ctx.drawImage(self.mediaStreamVideo, 0, 0, a, e, 0, 0, self.mediaStreamCanvas.width, self.mediaStreamCanvas.height), requestAnimationFrame(t)
                        }
                        return e
                    }
                    onMediaFailedCallback(e) {
                        console.warn("Broadcast: Media Failed ..."), this.mediaStream = null, this.videolist.RemoveVideoSelf(this.self_handle);
                        var t = e.message;
                        if ("" == e.message) switch (e.name) {
                            case "NotFoundError":
                            case "DevicesNotFoundError":
                                t = "Please setup your webcam first.";
                                break;
                            case "SourceUnavailableError":
                                t = "Your webcam is busy.";
                                break;
                            case "PermissionDeniedError":
                            case "SecurityError":
                            case "NotAllowedError":
                                t = "CAMERA/MICROPHONE access permission denied!";
                                break;
                            case "PermissionDismissedError":
                                t = "Tinychat is required to access CAMERA/MICROPHONE to have media broadcast!";
                                break;
                            default:
                                t = "Failed to start broadcast... Please check your webcam!";
                        } else switch (e.name) {
                            case "OverconstrainedError":
                                t = "Failed to start broadcast... Please check your webcam!";
                        }
                        let a = new S(S.MEDIA_FAILED);
                        a.error = new Error(t), this.EventBus.broadcast(S.ID, a)
                    }
                    onBanCallback(e) {
                        if (this.tcPkt_TcCallbackCheck(e, "ban")) {
                            let t = e.success;
                            if (!0 === t);
                            else {
                                e.reason;
                                console.error(e)
                            }
                        }
                    }
                    onUnbanCallback(e) {
                        if (this.tcPkt_TcCallbackCheck(e, "unban")) {
                            let t = e.success;
                            if (!0 === t) {
                                e.id
                            } else {
                                e.reason;
                                console.error(e)
                            }
                        }
                    }
                    onBanlistCallback(e) {
                        if (!this.tcPkt_TcCallbackCheck(e, "banlist")) return;
                        let t = e.success,
                            a = e.items;
                        if (!0 === t && Array.isArray(a))
                            for (var o in this.banlist = [], a) {
                                let e = this.tcPkt_BanlistItemParse(a[o]);
                                this.banlist.push(e)
                            } else {
                                e.reason;
                                console.error(e)
                            }
                    }
                    onVideoForceCloseCallback(e) {
                        if (this.tcPkt_TcCallbackCheck(e, "stream_moder_close")) {
                            let t = e.success;
                            if (!0 === t) {
                                const t = e.handle,
                                    a = this.userlist.get(t);
                                null === a ? this.app.showToast("There is no such user to close video") : this.app.showToast("[" + a.nickname + "] video was closed")
                            } else {
                                const t = e.error;
                                this.app.showToastWarn(t.text)
                            }
                        }
                    }
                    onRoomConnectCallback(e) {
                        if ("joined" === e.tc) {
                            var t = this.tcPkt_UserParse(e.self),
                                a = this.tcPkt_RoomSettingsParse(e.room);
                            this.updateSelfUser(t), this.updateRoomSettings(a), t.isLurker ? console.warn("Chatroom.Connected: nickname: " + t.nickname + " - IsLurker!") : console.log("Chatroom.Connected: nickname: " + t.nickname), this.reconnect_wait = 0;
                            let o = new C;
                            if (this.EventBus.broadcast(C.ID, o), "" == this.nickname) {
                                let e = new P("", ModalDialogChangeNickname.MODE_GUEST);
                                this.EventBus.broadcast(P.ID, e)
                            }
                        } else if ("password" === e.tc) {
                            let e = new l;
                            this.EventBus.broadcast(l.ID, e)
                        } else if ("captcha" === e.tc) {
                            let t = e.key,
                                a = new d(t);
                            this.EventBus.broadcast(d.ID, a)
                        } else "closed" === e.tc ? this.onClosed(e) : this.tcPkt_TcCallbackCheck(e, null)
                    }
                    onPublisherConnectionReadyCallback(e) {
                        if (this.tcPkt_TcCallbackCheck(e, "iceservers"))
                            if (!0 == e.success) {
                                let t = e.servers,
                                    a = this.self_handle,
                                    o = new TinychatApp.BLL.MediaConnection(this.videolist, a, !0, t);
                                o.AddStream(this.mediaStream), this.mediaConnections.local = o, console.log("Broadcast: Media.ICE.SDP ...");
                                let n = new S(S.MEDIA_ICE);
                                this.EventBus.broadcast(S.ID, n), o.Connect()
                            } else {
                                console.error(e);
                                try {
                                    this._selfMediaStreamStop(this.self_handle, "Broadcast closed due server request (ICE)");
                                    let e = TinychatApp.BLL.BroadcastProgressEvent,
                                        t = new e(e.MEDIA_RTC_FAILED);
                                    t.error = new Error("Broadcast closed due server request (ICE)"), this.EventBus.broadcast(e.ID, t)
                                } catch (e) {
                                    console.error(e)
                                }
                            }
                    }
                    onRemoteConnectionReadyCallback(e) {
                        if (!this.tcPkt_TcCallbackCheck(e, "sdp")) return;
                        if (!0 !== e.success || "offer" !== e.type) return;
                        let t = e.servers,
                            a = e.sdp,
                            o = e.handle,
                            n = new TinychatApp.BLL.MediaConnection(this.videolist, o, !1, t, a);
                        this.mediaConnections.remote[o] = n, n.Connect()
                    }
                    onSendMessagePublicCallback(e) {
                        if (this.tcPkt_TcCallbackCheck(e, "msg")) {
                            var t = this.tcPkt_MsgParse(e);
                            this._userlist.isIgnored(t.user) || this.chatlog.public_add(t)
                        }
                    }
                    onSendMessagePrivateCallback(e) {
                        if (this.tcPkt_TcCallbackCheck(e, "pvtmsg")) {
                            var t = this.tcPkt_MsgParse(e);
                            let a = TinychatApp.DAL.ChatLogItemEntity;
                            t.type = a.PRIVATE, t.chatname = t.user.handle, this._userlist.isIgnored(t.user) || this.chatlog.private_add(t)
                        }
                    }
                    onSystemMessage(e) {
                        if (!this.tcPkt_TcCallbackCheck(e, "sysmsg")) return;
                        let t = e.handle || 0;
                        if (0 < t) {
                            let e = this.userlist.get(t);
                            null == e && (t = 0)
                        }
                        let a = 0 < t ? t : TinychatApp.BLL.Chatlog.PUBLIC,
                            o = e.text || "";
                        this.chatlog.system_add(a, o)
                    }
                    onGiftMessage(e) {
                        if (!this.tcPkt_TcCallbackCheck(e, "gift")) return;
                        let t = this.tcPkt_GiftParse(e),
                            a = new TinychatApp.DAL.ChatLogItemEntity;
                        a.chatname = TinychatApp.BLL.Chatlog.PUBLIC, a.user = null, a.message_text = "[" + (t.fromUsername.isEmpty() ? "Anonymous" : t.fromUsername) + "] sent gift '" + t.giftName + "' to [" + t.toUsername + "]\n >" + t.giftComment + "", a.giftUrl = t.giftUrl, this.chatlog.gift_add(a)
                    }
                    onClosed(e) {
                        if (this.tcPkt_TcCallbackCheck(e, "closed")) {
                            let t = e.error;
                            this.closedLastReasonCode = t, console.warn("Chatroom.ConnectionClosed: " + this.closedLastReasonCode)
                        }
                    }
                    onNicknameChanged(e) {
                        if (!this.tcPkt_TcCallbackCheck(e, "nick")) return;
                        let t = e.handle,
                            a = e.nick;
                        if (!(t == this.self_handle)) this.userlist.updateNickname(t, a);
                        else if (!0 === e.success) {
                            let e = this.selfUser();
                            e.nickname = a, this.updateSelfUser(e), this.userlist.updateNickname(t, a)
                        } else console.warn(e), this.app.showToastWarn("Nickname was not changed for some reason...")
                    }
                    onYoutube(e) {
                        if (!this.app.settings.isYoutube()) return void console.log("YouTube cmds blocked by chat settings...");
                        var t = "";
                        let a = e.tc;
                        if ("yut_play" === a) t = L.YT_PLAY;
                        else if ("yut_pause" === a) t = L.YT_PAUSE;
                        else if ("yut_stop" === a) t = L.YT_STOP;
                        else return void this.tcPkt_TcCallbackCheck(e, "-");
                        let o = new L(t);
                        if (o.cmd = t, void 0 != e.item) {
                            let t = e.item;
                            o.id = t.id, o.duration = t.duration, o.offset = parseFloat(t.offset), o.playlist = t.playlist
                        } else o.id = e.id, o.duration = e.duration, o.offset = parseFloat(e.offset);
                        o.handle = parseInt(e.handle), o.server = !0, o.success = void 0 == e.success || e.success, o.reason = void 0 == e.reason ? "" : e.reason, isNaN(o.offset) && (o.offset = 0), isNaN(o.handle) && (o.handle = -1), o.success ? this.EventBus.broadcast(L.ID, o) : this.app.showToastWarn("Youtube command has failed, due: " + o.reason)
                    }
                    onYoutubePlaylist(e) {
                        if (!this.tcPkt_TcCallbackCheck(e, "yut_playlist")) return;
                        let t = TinychatApp.DAL.YoutubeItem,
                            a = e.success,
                            o = e.reason;
                        if (!0 === a) {
                            let a = [],
                                o = e.items;
                            if (Array.isArray(o))
                                for (var n in o) {
                                    let e = o[n],
                                        s = new t;
                                    s.id = e.id, s.duration = e.duration, s.title = e.title, s.imgurl = e.image, a.push(s)
                                }
                            if (void 0 != e.mode) {
                                let t = e.mode;
                                this.youtubelist_random = t.random, this.youtubelist_repeat = t.repeat
                            }
                            this.youtubelist = a
                        } else this.app.showToastWarn("Youtube Playlist load has failed, due: " + o)
                    }
                    sendPushForUnreadPrivateMessage() {
                        var e = "username=" + encodeURIComponent(this.enterroomresult.selfuser.username),
                            t = new XMLHttpRequest;
                        t.open("POST", "/pushnotification/privatemessage", !0), t.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), t.send(e)
                    }
                }
                const o = "RoomSettingsEvent_" + e.newGuid();
                class n {
                    static get ID() {
                        return o
                    }
                    constructor(e) {
                        return this.roomSettings = e, this
                    }
                }
                const s = "RoomConnectEvent_" + e.newGuid();
                class r {
                    static get ID() {
                        return s
                    }
                    constructor(e) {
                        return this.attempts = e, this
                    }
                }
                const i = "RoomConnectCaptcha_" + e.newGuid();
                class d {
                    static get ID() {
                        return i
                    }
                    constructor(e) {
                        return this.key = e, this
                    }
                }
                const c = "RoomConnectPassword_" + e.newGuid();
                class l {
                    static get ID() {
                        return c
                    }
                    constructor() {
                        return this
                    }
                }
                const m = "RoomConnectStandby_" + e.newGuid();
                class u {
                    static get ID() {
                        return m
                    }
                    constructor(e, t) {
                        return this.tries = e, this.waitms = t, this
                    }
                }
                const k = "RoomConnectFatal_" + e.newGuid();
                class p {
                    static get ID() {
                        return k
                    }
                    constructor() {
                        return this
                    }
                }
                const h = "RoomConnected_" + e.newGuid();
                class C {
                    static get ID() {
                        return h
                    }
                    constructor() {
                        return this
                    }
                }
                const _ = "RoomReconnected_" + e.newGuid();
                class f {
                    static get ID() {
                        return _
                    }
                    constructor() {
                        return this
                    }
                }
                const g = "RoomQuitEvent_" + e.newGuid();
                class v {
                    static get ID() {
                        return g
                    }
                    constructor(e, t) {
                        return this.reasonCode = e, this.chatroom = t, this
                    }
                    static get WS() {
                        return -3
                    }
                    static ConvertReason(e) {
                        let t = "";
                        switch (e) {
                            case 0:
                                t = "There is no internet connection...";
                                break;
                            case 1:
                                t = "Opss, chatroom has no free slots for users";
                                break;
                            case 2:
                                t = "Chatroom has been closed by administrator";
                                break;
                            case 3:
                                t = "This room does not allow guests to join, please sign in";
                                break;
                            case 4:
                                t = "You have been banned by a moderator";
                                break;
                            case 5:
                                t = "Wrong password";
                                break;
                            case 6:
                                t = "Single connection is allowed for chatroom";
                                break;
                            case 7:
                                t = "An error occurred while connecting to the server...";
                                break;
                            case 8:
                                t = "An error occurred while connecting to the server...";
                                break;
                            case 9:
                                t = "An error occurred while connecting to the server...";
                                break;
                            case 10:
                                t = "An error occurred while connecting to the server...";
                                break;
                            case 11:
                                t = "An error occurred while connecting to the server...";
                                break;
                            case 12:
                                t = "You have been kicked by a moderator";
                                break;
                            default:
                                t = "There is no internet connection...";
                        }
                        return t
                    }
                    static ConvertAction(e) {
                        let t = "";
                        switch (e) {
                            case 3:
                                t = "SIGN IN";
                                break;
                            default:
                                t = "RETRY";
                        }
                        return t
                    }
                }
                const b = "RoomNicknameChangeEvent_" + e.newGuid();
                class P {
                    static get ID() {
                        return b
                    }
                    constructor(e, t) {
                        return this.nickname = e, this.type = t, this
                    }
                }
                const y = "BroadcastProgressEvent_" + e.newGuid();
                class S {
                    static get ID() {
                        return y
                    }
                    static get MEDIA_START() {
                        return "media_start"
                    }
                    static get MEDIA_OK() {
                        return "media_ok"
                    }
                    static get MEDIA_ICE() {
                        return "media_ice"
                    }
                    static get MEDIA_STARTED_SUCCESS() {
                        return "media_started_success"
                    }
                    static get MEDIA_FAILED() {
                        return "media_failed"
                    }
                    static get MEDIA_RTC_FAILED() {
                        return "media_rtc_failed"
                    }
                    static get MEDIA_STOPING() {
                        return "media_stoping"
                    }
                    static get MEDIA_STOPED() {
                        return "media_stoped"
                    }
                    constructor(e) {
                        return this.stage = e, this.error = "", this
                    }
                }
                const w = "YoutubeEvent_" + e.newGuid();
                class L {
                    static get ID() {
                        return w
                    }
                    static get YT_PLAY() {
                        return "yut_play"
                    }
                    static get YT_STOP() {
                        return "yut_stop"
                    }
                    static get YT_PAUSE() {
                        return "yut_pause"
                    }
                    constructor(e) {
                        return this.handle = -1, this.cmd = e, this.id = "", this.offset = 0, this.duration = void 0, this.playlist = void 0, this.seekByUser = void 0, this.success = !0, this.reason = "", this.server = void 0, this
                    }
                }
                window.TinychatApp.BLL.ChatRoom = a, window.TinychatApp.BLL.RoomSettingsEvent = n, window.TinychatApp.BLL.RoomConnectEvent = r, window.TinychatApp.BLL.RoomConnectCaptcha = d, window.TinychatApp.BLL.RoomConnectPassword = l, window.TinychatApp.BLL.RoomConnectStandby = u, window.TinychatApp.BLL.RoomConnectFatal = p, window.TinychatApp.BLL.RoomConnected = C, window.TinychatApp.BLL.RoomReconnected = f, window.TinychatApp.BLL.RoomQuitEvent = v, window.TinychatApp.BLL.RoomNicknameChangeEvent = P, window.TinychatApp.BLL.BroadcastProgressEvent = S, window.TinychatApp.BLL.YoutubeEvent = L
            })();
        </script>
        <script>
            (function() {
                "use strict";
                class a {
                    static get getAll() {
                        return [{
                            name: "No Filter",
                            css: "nofilter",
                            filter: "",
                            background: "",
                            mixBlendMode: "",
                            apply: function() {}
                        }, {
                            name: "1977",
                            css: "_1977",
                            filter: "contrast(1.1) brightness(1.1) saturate(1.3)",
                            background: "rgba(243,106,188,.3)",
                            mixBlendMode: "screen",
                            apply: function(a, b, c) {
                                a.filter = this.filter, a.fillStyle = this.background, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }, {
                            name: "Aden",
                            css: "aden",
                            filter: "hue-rotate(-20deg) contrast(.9) saturate(.85) brightness(1.2)",
                            background: "linear-gradient(to right,rgba(66,10,14,.2),transparent)",
                            mixBlendMode: "darken",
                            apply: function(a, b, c) {
                                a.filter = this.filter;
                                let d = a.createLinearGradient(0, 0, b, c);
                                d.addColorStop(0, "rgba(66, 10, 14, .2)"), d.addColorStop(1, "rgba(0, 0, 0, .0)"), a.fillStyle = d, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }, {
                            name: "Brannan",
                            css: "brannan",
                            filter: "sepia(.5) contrast(1.4)",
                            background: "rgba(161,44,199,.31)",
                            mixBlendMode: "lighten",
                            apply: function(a, b, c) {
                                a.filter = this.filter, a.fillStyle = this.background, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }, {
                            name: "Brooklyn",
                            css: "brooklyn",
                            filter: "contrast(.9) brightness(1.1)",
                            background: "radial-gradient(circle, rgba(168,223,193,.4) 70%, #c4b7c8)",
                            mixBlendMode: "overlay",
                            apply: function(a, b, c) {
                                a.filter = this.filter;
                                let d = a.createRadialGradient(b / 2, c / 2, 0, b / 2, c / 2, .7 * b);
                                d.addColorStop(0, "rgba(168,223,193,.4)"), d.addColorStop(1, "#c4b7c8"), a.fillStyle = d, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }, {
                            name: "Clarendon",
                            css: "clarendon",
                            filter: "contrast(1.2) saturate(1.35)",
                            background: "rgba(127,187,227,.2)",
                            mixBlendMode: "overlay",
                            apply: function(a, b, c) {
                                a.filter = this.filter, a.fillStyle = this.background, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }, {
                            name: "Earlybird",
                            css: "earlybird",
                            filter: "contrast(.9) sepia(.2)",
                            background: "radial-gradient(circle,#d0ba8e 20%,#360309 85%,#1d0210 100%)",
                            mixBlendMode: "overlay",
                            apply: function(a, b, c) {
                                a.filter = this.filter;
                                let d = a.createRadialGradient(b / 2, c / 2, .2 * (b / 2), b / 2, c / 2, .85 * (b / 2));
                                d.addColorStop(0, "rgba(208, 186, 142, .5)"), d.addColorStop(1, "rgba(54, 3, 9, .5)"), a.fillStyle = d, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }, {
                            name: "Gingham",
                            css: "gingham",
                            filter: "brightness(1.05) hue-rotate(-10deg)",
                            background: "rgba(230, 230, 250, .3)",
                            mixBlendMode: "soft-light",
                            apply: function(a, b, c) {
                                a.filter = this.filter, a.fillStyle = this.background, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }, {
                            name: "Hudson",
                            css: "hudson",
                            filter: "brightness(1.2) contrast(.9) saturate(1.1)",
                            background: "radial-gradient(circle,#a6b1ff 50%,#342134)",
                            mixBlendMode: "multiply",
                            apply: function(a, b, c) {
                                a.filter = this.filter;
                                let d = a.createRadialGradient(b / 2, c / 2, .5 * (b / 2), b / 2, c / 2, b / 2);
                                d.addColorStop(0, "rgba(166, 177, 255, .5)"), d.addColorStop(1, "rgba(52, 33, 52, .5)"), a.fillStyle = d, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }, {
                            name: "Inkwell",
                            css: "inkwell",
                            filter: "sepia(.3) contrast(1.1) brightness(1.1) grayscale(1)",
                            background: "",
                            mixBlendMode: "",
                            apply: function(a) {
                                a.filter = this.filter
                            }
                        }, {
                            name: "Lo-Fi",
                            css: "lofi",
                            filter: "saturate(1.1) contrast(1.5)",
                            background: "radial-gradient(circle,transparent 70%,#222 150%)",
                            mixBlendMode: "multiply",
                            apply: function(a, b, c) {
                                a.filter = this.filter;
                                let d = a.createRadialGradient(b / 2, c / 2, .7 * (b / 2), b / 2, c / 2, 1.5 * (b / 2));
                                d.addColorStop(0, "rgba(0, 0, 0, 0)"), d.addColorStop(1, "rgb(34, 34, 34)"), a.fillStyle = d, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }, {
                            name: "Maven",
                            css: "maven",
                            filter: "sepia(.25) brightness(.95) contrast(.95) saturate(1.5)",
                            background: "rgba(3, 230, 26, .2)",
                            mixBlendMode: "hue",
                            apply: function(a, b, c) {
                                a.filter = this.filter, a.fillStyle = this.background, a.fillRect(0, 0, b, c), a.globalCompositeOperation = this.mixBlendMode
                            }
                        }]
                    }
                    static getFilter(b) {
                        return a.getAll.find(a => a.name === b)
                    }
                }
                window.TinychatApp.BLL.VideoFilters = a
            })();
        </script>
        <script type="text/javascript" charset="utf-8">
            (function(e) {
                if ("object" === typeof exports && "undefined" !== typeof module) module.exports = e();
                else if ("function" === typeof define && define.amd) define([], e);
                else {
                    var t;
                    t = "undefined" === typeof window ? "undefined" === typeof global ? "undefined" === typeof self ? this : self : global : window, t.adapter = e()
                }
            })(function() {
                var e = Math.min;
                return function c(d, e, t) {
                    function r(i, o) {
                        if (!e[i]) {
                            if (!d[i]) {
                                var s = "function" == typeof require && require;
                                if (!o && s) return s(i, !0);
                                if (n) return n(i, !0);
                                var a = new Error("Cannot find module '" + i + "'");
                                throw a.code = "MODULE_NOT_FOUND", a
                            }
                            var p = e[i] = {
                                exports: {}
                            };
                            d[i][0].call(p.exports, function(t) {
                                var e = d[i][1][t];
                                return r(e ? e : t)
                            }, p, p.exports, c, d, e, t)
                        }
                        return e[i].exports
                    }
                    for (var n = "function" == typeof require && require, a = 0; a < t.length; a++) r(t[a]);
                    return r
                }({
                    1: [function(t, r) {
                        "use strict";

                        function a(e) {
                            return {
                                inboundrtp: "inbound-rtp",
                                outboundrtp: "outbound-rtp",
                                candidatepair: "candidate-pair",
                                localcandidate: "local-candidate",
                                remotecandidate: "remote-candidate"
                            } [e.type] || e.type
                        }

                        function n(e, t, r, a, n) {
                            var i = p.writeRtpDescription(e.kind, t);
                            if (i += p.writeIceParameters(e.iceGatherer.getLocalParameters()), i += p.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), "offer" === r ? "actpass" : n || "active"), i += "a=mid:" + e.mid + "\r\n", i += e.rtpSender && e.rtpReceiver ? "a=sendrecv\r\n" : e.rtpSender ? "a=sendonly\r\n" : e.rtpReceiver ? "a=recvonly\r\n" : "a=inactive\r\n", e.rtpSender) {
                                var o = e.rtpSender._initialTrackId || e.rtpSender.track.id;
                                e.rtpSender._initialTrackId = o;
                                var s = "msid:" + (a ? a.id : "-") + " " + o + "\r\n";
                                i += "a=" + s, i += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " " + s, e.sendEncodingParameters[0].rtx && (i += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " " + s, i += "a=ssrc-group:FID " + e.sendEncodingParameters[0].ssrc + " " + e.sendEncodingParameters[0].rtx.ssrc + "\r\n")
                            }
                            return i += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " cname:" + p.localCName + "\r\n", e.rtpSender && e.sendEncodingParameters[0].rtx && (i += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " cname:" + p.localCName + "\r\n"), i
                        }

                        function o(e, t) {
                            var r = !1;
                            return e = JSON.parse(JSON.stringify(e)), e.filter(function(e) {
                                if (e && (e.urls || e.url)) {
                                    var a = e.urls || e.url;
                                    e.url && !e.urls && console.warn("RTCIceServer.url is deprecated! Use urls instead.");
                                    var n = "string" === typeof a;
                                    return n && (a = [a]), a = a.filter(function(e) {
                                        var a = 0 === e.indexOf("turn:") && -1 !== e.indexOf("transport=udp") && -1 === e.indexOf("turn:[") && !r;
                                        return a ? (r = !0, !0) : 0 === e.indexOf("stun:") && 14393 <= t && -1 === e.indexOf("?transport=udp")
                                    }), delete e.url, e.urls = n ? a[0] : a, !!a.length
                                }
                            })
                        }

                        function i(t, r) {
                            var a = {
                                    codecs: [],
                                    headerExtensions: [],
                                    fecMechanisms: []
                                },
                                n = function(e, t) {
                                    e = parseInt(e, 10);
                                    for (var r = 0; r < t.length; r++)
                                        if (t[r].payloadType === e || t[r].preferredPayloadType === e) return t[r]
                                },
                                i = function(e, t, r, a) {
                                    var i = n(e.parameters.apt, r),
                                        o = n(t.parameters.apt, a);
                                    return i && o && i.name.toLowerCase() === o.name.toLowerCase()
                                };
                            return t.codecs.forEach(function(n) {
                                for (var o, s = 0; s < r.codecs.length; s++)
                                    if (o = r.codecs[s], n.name.toLowerCase() === o.name.toLowerCase() && n.clockRate === o.clockRate) {
                                        if ("rtx" === n.name.toLowerCase() && n.parameters && o.parameters.apt && !i(n, o, t.codecs, r.codecs)) continue;
                                        o = JSON.parse(JSON.stringify(o)), o.numChannels = e(n.numChannels, o.numChannels), a.codecs.push(o), o.rtcpFeedback = o.rtcpFeedback.filter(function(e) {
                                            for (var t = 0; t < n.rtcpFeedback.length; t++)
                                                if (n.rtcpFeedback[t].type === e.type && n.rtcpFeedback[t].parameter === e.parameter) return !0;
                                            return !1
                                        });
                                        break
                                    }
                            }), t.headerExtensions.forEach(function(e) {
                                for (var t, n = 0; n < r.headerExtensions.length; n++)
                                    if (t = r.headerExtensions[n], e.uri === t.uri) {
                                        a.headerExtensions.push(t);
                                        break
                                    }
                            }), a
                        }

                        function s(e, t, r) {
                            return -1 !== {
                                offer: {
                                    setLocalDescription: ["stable", "have-local-offer"],
                                    setRemoteDescription: ["stable", "have-remote-offer"]
                                },
                                answer: {
                                    setLocalDescription: ["have-remote-offer", "have-local-pranswer"],
                                    setRemoteDescription: ["have-local-offer", "have-remote-pranswer"]
                                }
                            } [t][e].indexOf(r)
                        }

                        function c(e, t) {
                            var r = e.getRemoteCandidates().find(function(e) {
                                return t.foundation === e.foundation && t.ip === e.ip && t.port === e.port && t.priority === e.priority && t.protocol === e.protocol && t.type === e.type
                            });
                            return r || e.addRemoteCandidate(t), !r
                        }

                        function d(t, r) {
                            var a = new Error(r);
                            return a.name = t, a.code = {
                                NotSupportedError: 9,
                                InvalidStateError: 11,
                                InvalidAccessError: 15,
                                TypeError: void 0,
                                OperationError: void 0
                            } [t], a
                        }
                        var p = t("sdp");
                        r.exports = function(e, t) {
                            function r(t, r) {
                                r.addTrack(t), r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack", {
                                    track: t
                                }))
                            }

                            function m(t, r) {
                                r.removeTrack(t), r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack", {
                                    track: t
                                }))
                            }

                            function l(t, r, a, n) {
                                var i = new Event("track");
                                i.track = r, i.receiver = a, i.transceiver = {
                                    receiver: a
                                }, i.streams = n, e.setTimeout(function() {
                                    t._dispatchEvent("track", i)
                                })
                            }
                            var h = function(r) {
                                var a = this,
                                    n = document.createDocumentFragment();
                                if (["addEventListener", "removeEventListener", "dispatchEvent"].forEach(function(e) {
                                        a[e] = n[e].bind(n)
                                    }), this.canTrickleIceCandidates = null, this.needNegotiation = !1, this.localStreams = [], this.remoteStreams = [], this.localDescription = null, this.remoteDescription = null, this.signalingState = "stable", this.iceConnectionState = "new", this.connectionState = "new", this.iceGatheringState = "new", r = JSON.parse(JSON.stringify(r || {})), this.usingBundle = "max-bundle" === r.bundlePolicy, "negotiate" === r.rtcpMuxPolicy) throw d("NotSupportedError", "rtcpMuxPolicy 'negotiate' is not supported");
                                else r.rtcpMuxPolicy || (r.rtcpMuxPolicy = "require");
                                switch (r.iceTransportPolicy) {
                                    case "all":
                                    case "relay":
                                        break;
                                    default:
                                        r.iceTransportPolicy = "all";
                                }
                                switch (r.bundlePolicy) {
                                    case "balanced":
                                    case "max-compat":
                                    case "max-bundle":
                                        break;
                                    default:
                                        r.bundlePolicy = "balanced";
                                }
                                if (r.iceServers = o(r.iceServers || [], t), this._iceGatherers = [], r.iceCandidatePoolSize)
                                    for (var s = r.iceCandidatePoolSize; 0 < s; s--) this._iceGatherers.push(new e.RTCIceGatherer({
                                        iceServers: r.iceServers,
                                        gatherPolicy: r.iceTransportPolicy
                                    }));
                                else r.iceCandidatePoolSize = 0;
                                this._config = r, this.transceivers = [], this._sdpSessionId = p.generateSessionId(), this._sdpSessionVersion = 0, this._dtlsRole = void 0, this._isClosed = !1
                            };
                            h.prototype.onicecandidate = null, h.prototype.onaddstream = null, h.prototype.ontrack = null, h.prototype.onremovestream = null, h.prototype.onsignalingstatechange = null, h.prototype.oniceconnectionstatechange = null, h.prototype.onconnectionstatechange = null, h.prototype.onicegatheringstatechange = null, h.prototype.onnegotiationneeded = null, h.prototype.ondatachannel = null, h.prototype._dispatchEvent = function(e, t) {
                                this._isClosed || (this.dispatchEvent(t), "function" === typeof this["on" + e] && this["on" + e](t))
                            }, h.prototype._emitGatheringStateChange = function() {
                                var e = new Event("icegatheringstatechange");
                                this._dispatchEvent("icegatheringstatechange", e)
                            }, h.prototype.getConfiguration = function() {
                                return this._config
                            }, h.prototype.getLocalStreams = function() {
                                return this.localStreams
                            }, h.prototype.getRemoteStreams = function() {
                                return this.remoteStreams
                            }, h.prototype._createTransceiver = function(e, t) {
                                var r = 0 < this.transceivers.length,
                                    a = {
                                        track: null,
                                        iceGatherer: null,
                                        iceTransport: null,
                                        dtlsTransport: null,
                                        localCapabilities: null,
                                        remoteCapabilities: null,
                                        rtpSender: null,
                                        rtpReceiver: null,
                                        kind: e,
                                        mid: null,
                                        sendEncodingParameters: null,
                                        recvEncodingParameters: null,
                                        stream: null,
                                        associatedRemoteMediaStreams: [],
                                        wantReceive: !0
                                    };
                                if (this.usingBundle && r) a.iceTransport = this.transceivers[0].iceTransport, a.dtlsTransport = this.transceivers[0].dtlsTransport;
                                else {
                                    var n = this._createIceAndDtlsTransports();
                                    a.iceTransport = n.iceTransport, a.dtlsTransport = n.dtlsTransport
                                }
                                return t || this.transceivers.push(a), a
                            }, h.prototype.addTrack = function(t, r) {
                                if (this._isClosed) throw d("InvalidStateError", "Attempted to call addTrack on a closed peerconnection.");
                                var a = this.transceivers.find(function(e) {
                                    return e.track === t
                                });
                                if (a) throw d("InvalidAccessError", "Track already exists.");
                                for (var n, o = 0; o < this.transceivers.length; o++) this.transceivers[o].track || this.transceivers[o].kind !== t.kind || (n = this.transceivers[o]);
                                return n || (n = this._createTransceiver(t.kind)), this._maybeFireNegotiationNeeded(), -1 === this.localStreams.indexOf(r) && this.localStreams.push(r), n.track = t, n.stream = r, n.rtpSender = new e.RTCRtpSender(t, n.dtlsTransport), n.rtpSender
                            }, h.prototype.addStream = function(e) {
                                var r = this;
                                if (15025 <= t) e.getTracks().forEach(function(t) {
                                    r.addTrack(t, e)
                                });
                                else {
                                    var a = e.clone();
                                    e.getTracks().forEach(function(e, t) {
                                        var r = a.getTracks()[t];
                                        e.addEventListener("enabled", function(e) {
                                            r.enabled = e.enabled
                                        })
                                    }), a.getTracks().forEach(function(e) {
                                        r.addTrack(e, a)
                                    })
                                }
                            }, h.prototype.removeTrack = function(r) {
                                if (this._isClosed) throw d("InvalidStateError", "Attempted to call removeTrack on a closed peerconnection.");
                                if (!(r instanceof e.RTCRtpSender)) throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");
                                var t = this.transceivers.find(function(e) {
                                    return e.rtpSender === r
                                });
                                if (!t) throw d("InvalidAccessError", "Sender was not created by this connection.");
                                var a = t.stream;
                                t.rtpSender.stop(), t.rtpSender = null, t.track = null, t.stream = null;
                                var n = this.transceivers.map(function(e) {
                                    return e.stream
                                }); - 1 === n.indexOf(a) && -1 < this.localStreams.indexOf(a) && this.localStreams.splice(this.localStreams.indexOf(a), 1), this._maybeFireNegotiationNeeded()
                            }, h.prototype.removeStream = function(e) {
                                var t = this;
                                e.getTracks().forEach(function(e) {
                                    var r = t.getSenders().find(function(t) {
                                        return t.track === e
                                    });
                                    r && t.removeTrack(r)
                                })
                            }, h.prototype.getSenders = function() {
                                return this.transceivers.filter(function(e) {
                                    return !!e.rtpSender
                                }).map(function(e) {
                                    return e.rtpSender
                                })
                            }, h.prototype.getReceivers = function() {
                                return this.transceivers.filter(function(e) {
                                    return !!e.rtpReceiver
                                }).map(function(e) {
                                    return e.rtpReceiver
                                })
                            }, h.prototype._createIceGatherer = function(t, r) {
                                var a = this;
                                if (r && 0 < t) return this.transceivers[0].iceGatherer;
                                if (this._iceGatherers.length) return this._iceGatherers.shift();
                                var n = new e.RTCIceGatherer({
                                    iceServers: this._config.iceServers,
                                    gatherPolicy: this._config.iceTransportPolicy
                                });
                                return Object.defineProperty(n, "state", {
                                    value: "new",
                                    writable: !0
                                }), this.transceivers[t].bufferedCandidateEvents = [], this.transceivers[t].bufferCandidates = function(e) {
                                    var r = !e.candidate || 0 === Object.keys(e.candidate).length;
                                    n.state = r ? "completed" : "gathering", null !== a.transceivers[t].bufferedCandidateEvents && a.transceivers[t].bufferedCandidateEvents.push(e)
                                }, n.addEventListener("localcandidate", this.transceivers[t].bufferCandidates), n
                            }, h.prototype._gather = function(t, r) {
                                var a = this,
                                    n = this.transceivers[r].iceGatherer;
                                if (!n.onlocalcandidate) {
                                    var i = this.transceivers[r].bufferedCandidateEvents;
                                    this.transceivers[r].bufferedCandidateEvents = null, n.removeEventListener("localcandidate", this.transceivers[r].bufferCandidates), n.onlocalcandidate = function(e) {
                                        if (!(a.usingBundle && 0 < r)) {
                                            var i = new Event("icecandidate");
                                            i.candidate = {
                                                sdpMid: t,
                                                sdpMLineIndex: r
                                            };
                                            var o = e.candidate,
                                                s = !o || 0 === Object.keys(o).length;
                                            if (s)("new" === n.state || "gathering" === n.state) && (n.state = "completed");
                                            else {
                                                "new" === n.state && (n.state = "gathering"), o.component = 1, o.ufrag = n.getLocalParameters().usernameFragment;
                                                var c = p.writeCandidate(o);
                                                i.candidate = Object.assign(i.candidate, p.parseCandidate(c)), i.candidate.candidate = c, i.candidate.toJSON = function() {
                                                    return {
                                                        candidate: i.candidate.candidate,
                                                        sdpMid: i.candidate.sdpMid,
                                                        sdpMLineIndex: i.candidate.sdpMLineIndex,
                                                        usernameFragment: i.candidate.usernameFragment
                                                    }
                                                }
                                            }
                                            var d = p.getMediaSections(a.localDescription.sdp);
                                            d[i.candidate.sdpMLineIndex] += s ? "a=end-of-candidates\r\n" : "a=" + i.candidate.candidate + "\r\n", a.localDescription.sdp = p.getDescription(a.localDescription.sdp) + d.join("");
                                            var m = a.transceivers.every(function(e) {
                                                return e.iceGatherer && "completed" === e.iceGatherer.state
                                            });
                                            "gathering" !== a.iceGatheringState && (a.iceGatheringState = "gathering", a._emitGatheringStateChange()), s || a._dispatchEvent("icecandidate", i), m && (a._dispatchEvent("icecandidate", new Event("icecandidate")), a.iceGatheringState = "complete", a._emitGatheringStateChange())
                                        }
                                    }, e.setTimeout(function() {
                                        i.forEach(function(t) {
                                            n.onlocalcandidate(t)
                                        })
                                    }, 0)
                                }
                            }, h.prototype._createIceAndDtlsTransports = function() {
                                var t = this,
                                    r = new e.RTCIceTransport(null);
                                r.onicestatechange = function() {
                                    t._updateIceConnectionState(), t._updateConnectionState()
                                };
                                var a = new e.RTCDtlsTransport(r);
                                return a.ondtlsstatechange = function() {
                                    t._updateConnectionState()
                                }, a.onerror = function() {
                                    Object.defineProperty(a, "state", {
                                        value: "failed",
                                        writable: !0
                                    }), t._updateConnectionState()
                                }, {
                                    iceTransport: r,
                                    dtlsTransport: a
                                }
                            }, h.prototype._disposeIceAndDtlsTransports = function(e) {
                                var t = this.transceivers[e].iceGatherer;
                                t && (delete t.onlocalcandidate, delete this.transceivers[e].iceGatherer);
                                var r = this.transceivers[e].iceTransport;
                                r && (delete r.onicestatechange, delete this.transceivers[e].iceTransport);
                                var a = this.transceivers[e].dtlsTransport;
                                a && (delete a.ondtlsstatechange, delete a.onerror, delete this.transceivers[e].dtlsTransport)
                            }, h.prototype._transceive = function(e, r, a) {
                                var n = i(e.localCapabilities, e.remoteCapabilities);
                                r && e.rtpSender && (n.encodings = e.sendEncodingParameters, n.rtcp = {
                                    cname: p.localCName,
                                    compound: e.rtcpParameters.compound
                                }, e.recvEncodingParameters.length && (n.rtcp.ssrc = e.recvEncodingParameters[0].ssrc), e.rtpSender.send(n)), a && e.rtpReceiver && 0 < n.codecs.length && ("video" === e.kind && e.recvEncodingParameters && 15019 > t && e.recvEncodingParameters.forEach(function(e) {
                                    delete e.rtx
                                }), n.encodings = e.recvEncodingParameters.length ? e.recvEncodingParameters : [{}], n.rtcp = {
                                    compound: e.rtcpParameters.compound
                                }, e.rtcpParameters.cname && (n.rtcp.cname = e.rtcpParameters.cname), e.sendEncodingParameters.length && (n.rtcp.ssrc = e.sendEncodingParameters[0].ssrc), e.rtpReceiver.receive(n))
                            }, h.prototype.setLocalDescription = function(e) {
                                var t = this;
                                if (-1 === ["offer", "answer"].indexOf(e.type)) return Promise.reject(d("TypeError", "Unsupported type \"" + e.type + "\""));
                                if (!s("setLocalDescription", e.type, t.signalingState) || t._isClosed) return Promise.reject(d("InvalidStateError", "Can not set local " + e.type + " in state " + t.signalingState));
                                var r, a;
                                if ("offer" === e.type) r = p.splitSections(e.sdp), a = r.shift(), r.forEach(function(e, r) {
                                    var a = p.parseRtpParameters(e);
                                    t.transceivers[r].localCapabilities = a
                                }), t.transceivers.forEach(function(e, r) {
                                    t._gather(e.mid, r)
                                });
                                else if ("answer" === e.type) {
                                    r = p.splitSections(t.remoteDescription.sdp), a = r.shift();
                                    var n = 0 < p.matchPrefix(a, "a=ice-lite").length;
                                    r.forEach(function(e, r) {
                                        var o = t.transceivers[r],
                                            s = o.iceGatherer,
                                            c = o.iceTransport,
                                            d = o.dtlsTransport,
                                            m = o.localCapabilities,
                                            l = o.remoteCapabilities,
                                            h = p.isRejected(e) && 0 === p.matchPrefix(e, "a=bundle-only").length;
                                        if (!h && !o.rejected) {
                                            var g = p.getIceParameters(e, a),
                                                f = p.getDtlsParameters(e, a);
                                            n && (f.role = "server"), t.usingBundle && 0 !== r || (t._gather(o.mid, r), "new" === c.state && c.start(s, g, n ? "controlling" : "controlled"), "new" === d.state && d.start(f));
                                            var C = i(m, l);
                                            t._transceive(o, 0 < C.codecs.length, !1)
                                        }
                                    })
                                }
                                return t.localDescription = {
                                    type: e.type,
                                    sdp: e.sdp
                                }, "offer" === e.type ? t._updateSignalingState("have-local-offer") : t._updateSignalingState("stable"), Promise.resolve()
                            }, h.prototype.setRemoteDescription = function(a) {
                                var n = this;
                                if (-1 === ["offer", "answer"].indexOf(a.type)) return Promise.reject(d("TypeError", "Unsupported type \"" + a.type + "\""));
                                if (!s("setRemoteDescription", a.type, n.signalingState) || n._isClosed) return Promise.reject(d("InvalidStateError", "Can not set remote " + a.type + " in state " + n.signalingState));
                                var i = {};
                                n.remoteStreams.forEach(function(e) {
                                    i[e.id] = e
                                });
                                var o = [],
                                    h = p.splitSections(a.sdp),
                                    g = h.shift(),
                                    f = 0 < p.matchPrefix(g, "a=ice-lite").length,
                                    C = 0 < p.matchPrefix(g, "a=group:BUNDLE ").length;
                                n.usingBundle = C;
                                var v = p.matchPrefix(g, "a=ice-options:")[0];
                                return n.canTrickleIceCandidates = !!v && 0 <= v.substr(14).split(" ").indexOf("trickle"), h.forEach(function(s, d) {
                                    var l = p.splitLines(s),
                                        h = p.getKind(s),
                                        v = p.isRejected(s) && 0 === p.matchPrefix(s, "a=bundle-only").length,
                                        y = l[0].substr(2).split(" ")[2],
                                        u = p.getDirection(s, g),
                                        T = p.parseMsid(s),
                                        S = p.getMid(s) || p.generateIdentifier();
                                    if ("application" === h && "DTLS/SCTP" === y || v) return void(n.transceivers[d] = {
                                        mid: S,
                                        kind: h,
                                        rejected: !0
                                    });
                                    !v && n.transceivers[d] && n.transceivers[d].rejected && (n.transceivers[d] = n._createTransceiver(h, !0));
                                    var R, P, E, k, b, _, x, M, L, I, D, w = p.parseRtpParameters(s);
                                    v || (I = p.getIceParameters(s, g), D = p.getDtlsParameters(s, g), D.role = "client"), x = p.parseRtpEncodingParameters(s);
                                    var j = p.parseRtcpParameters(s),
                                        O = 0 < p.matchPrefix(s, "a=end-of-candidates", g).length,
                                        A = p.matchPrefix(s, "a=candidate:").map(function(e) {
                                            return p.parseCandidate(e)
                                        }).filter(function(e) {
                                            return 1 === e.component
                                        });
                                    if (("offer" === a.type || "answer" === a.type) && !v && C && 0 < d && n.transceivers[d] && (n._disposeIceAndDtlsTransports(d), n.transceivers[d].iceGatherer = n.transceivers[0].iceGatherer, n.transceivers[d].iceTransport = n.transceivers[0].iceTransport, n.transceivers[d].dtlsTransport = n.transceivers[0].dtlsTransport, n.transceivers[d].rtpSender && n.transceivers[d].rtpSender.setTransport(n.transceivers[0].dtlsTransport), n.transceivers[d].rtpReceiver && n.transceivers[d].rtpReceiver.setTransport(n.transceivers[0].dtlsTransport)), "offer" === a.type && !v) {
                                        R = n.transceivers[d] || n._createTransceiver(h), R.mid = S, R.iceGatherer || (R.iceGatherer = n._createIceGatherer(d, C)), A.length && "new" === R.iceTransport.state && (O && (!C || 0 === d) ? R.iceTransport.setRemoteCandidates(A) : A.forEach(function(e) {
                                            c(R.iceTransport, e)
                                        })), M = e.RTCRtpReceiver.getCapabilities(h), 15019 > t && (M.codecs = M.codecs.filter(function(e) {
                                            return "rtx" !== e.name
                                        })), _ = R.sendEncodingParameters || [{
                                            ssrc: 1001 * (2 * d + 2)
                                        }];
                                        var U = !1;
                                        if ("sendrecv" !== u && "sendonly" !== u) R.rtpReceiver && R.rtpReceiver.track && (R.associatedRemoteMediaStreams.forEach(function(e) {
                                            var t = e.getTracks().find(function(e) {
                                                return e.id === R.rtpReceiver.track.id
                                            });
                                            t && m(t, e)
                                        }), R.associatedRemoteMediaStreams = []);
                                        else if (U = !R.rtpReceiver, b = R.rtpReceiver || new e.RTCRtpReceiver(R.dtlsTransport, h), U) {
                                            var G;
                                            L = b.track, T && "-" === T.stream || (T ? (!i[T.stream] && (i[T.stream] = new e.MediaStream, Object.defineProperty(i[T.stream], "id", {
                                                get: function() {
                                                    return T.stream
                                                }
                                            })), Object.defineProperty(L, "id", {
                                                get: function() {
                                                    return T.track
                                                }
                                            }), G = i[T.stream]) : (!i.default && (i.default = new e.MediaStream), G = i.default)), G && (r(L, G), R.associatedRemoteMediaStreams.push(G)), o.push([L, b, G])
                                        }
                                        R.localCapabilities = M, R.remoteCapabilities = w, R.rtpReceiver = b, R.rtcpParameters = j, R.sendEncodingParameters = _, R.recvEncodingParameters = x, n._transceive(n.transceivers[d], !1, U)
                                    } else "answer" !== a.type || v || (R = n.transceivers[d], P = R.iceGatherer, E = R.iceTransport, k = R.dtlsTransport, b = R.rtpReceiver, _ = R.sendEncodingParameters, M = R.localCapabilities, n.transceivers[d].recvEncodingParameters = x, n.transceivers[d].remoteCapabilities = w, n.transceivers[d].rtcpParameters = j, A.length && "new" === E.state && ((f || O) && (!C || 0 === d) ? E.setRemoteCandidates(A) : A.forEach(function(e) {
                                        c(R.iceTransport, e)
                                    })), C && 0 !== d || ("new" === E.state && E.start(P, I, "controlling"), "new" === k.state && k.start(D)), n._transceive(R, "sendrecv" === u || "recvonly" === u, "sendrecv" === u || "sendonly" === u), b && ("sendrecv" === u || "sendonly" === u) ? (L = b.track, T ? (!i[T.stream] && (i[T.stream] = new e.MediaStream), r(L, i[T.stream]), o.push([L, b, i[T.stream]])) : (!i.default && (i.default = new e.MediaStream), r(L, i.default), o.push([L, b, i.default]))) : delete R.rtpReceiver)
                                }), void 0 === n._dtlsRole && (n._dtlsRole = "offer" === a.type ? "active" : "passive"), n.remoteDescription = {
                                    type: a.type,
                                    sdp: a.sdp
                                }, "offer" === a.type ? n._updateSignalingState("have-remote-offer") : n._updateSignalingState("stable"), Object.keys(i).forEach(function(t) {
                                    var r = i[t];
                                    if (r.getTracks().length) {
                                        if (-1 === n.remoteStreams.indexOf(r)) {
                                            n.remoteStreams.push(r);
                                            var a = new Event("addstream");
                                            a.stream = r, e.setTimeout(function() {
                                                n._dispatchEvent("addstream", a)
                                            })
                                        }
                                        o.forEach(function(e) {
                                            var t = e[0],
                                                a = e[1];
                                            r.id !== e[2].id || l(n, t, a, [r])
                                        })
                                    }
                                }), o.forEach(function(e) {
                                    e[2] || l(n, e[0], e[1], [])
                                }), e.setTimeout(function() {
                                    n && n.transceivers && n.transceivers.forEach(function(e) {
                                        e.iceTransport && "new" === e.iceTransport.state && 0 < e.iceTransport.getRemoteCandidates().length && (console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"), e.iceTransport.addRemoteCandidate({}))
                                    })
                                }, 4e3), Promise.resolve()
                            }, h.prototype.close = function() {
                                this.transceivers.forEach(function(e) {
                                    e.iceTransport && e.iceTransport.stop(), e.dtlsTransport && e.dtlsTransport.stop(), e.rtpSender && e.rtpSender.stop(), e.rtpReceiver && e.rtpReceiver.stop()
                                }), this._isClosed = !0, this._updateSignalingState("closed")
                            }, h.prototype._updateSignalingState = function(e) {
                                this.signalingState = e;
                                var t = new Event("signalingstatechange");
                                this._dispatchEvent("signalingstatechange", t)
                            }, h.prototype._maybeFireNegotiationNeeded = function() {
                                var t = this;
                                "stable" !== this.signalingState || !0 === this.needNegotiation || (this.needNegotiation = !0, e.setTimeout(function() {
                                    if (t.needNegotiation) {
                                        t.needNegotiation = !1;
                                        var e = new Event("negotiationneeded");
                                        t._dispatchEvent("negotiationneeded", e)
                                    }
                                }, 0))
                            }, h.prototype._updateIceConnectionState = function() {
                                var e, t = {
                                    new: 0,
                                    closed: 0,
                                    checking: 0,
                                    connected: 0,
                                    completed: 0,
                                    disconnected: 0,
                                    failed: 0
                                };
                                if (this.transceivers.forEach(function(e) {
                                        t[e.iceTransport.state]++
                                    }), e = "new", 0 < t.failed ? e = "failed" : 0 < t.checking ? e = "checking" : 0 < t.disconnected ? e = "disconnected" : 0 < t.new ? e = "new" : 0 < t.connected ? e = "connected" : 0 < t.completed && (e = "completed"), e !== this.iceConnectionState) {
                                    this.iceConnectionState = e;
                                    var r = new Event("iceconnectionstatechange");
                                    this._dispatchEvent("iceconnectionstatechange", r)
                                }
                            }, h.prototype._updateConnectionState = function() {
                                var e, t = {
                                    new: 0,
                                    closed: 0,
                                    connecting: 0,
                                    connected: 0,
                                    completed: 0,
                                    disconnected: 0,
                                    failed: 0
                                };
                                if (this.transceivers.forEach(function(e) {
                                        t[e.iceTransport.state]++, t[e.dtlsTransport.state]++
                                    }), t.connected += t.completed, e = "new", 0 < t.failed ? e = "failed" : 0 < t.connecting ? e = "connecting" : 0 < t.disconnected ? e = "disconnected" : 0 < t.new ? e = "new" : 0 < t.connected && (e = "connected"), e !== this.connectionState) {
                                    this.connectionState = e;
                                    var r = new Event("connectionstatechange");
                                    this._dispatchEvent("connectionstatechange", r)
                                }
                            }, h.prototype.createOffer = function() {
                                var r = this;
                                if (r._isClosed) return Promise.reject(d("InvalidStateError", "Can not call createOffer after close"));
                                var a = r.transceivers.filter(function(e) {
                                        return "audio" === e.kind
                                    }).length,
                                    i = r.transceivers.filter(function(e) {
                                        return "video" === e.kind
                                    }).length,
                                    o = arguments[0];
                                if (o) {
                                    if (o.mandatory || o.optional) throw new TypeError("Legacy mandatory/optional constraints not supported.");
                                    void 0 !== o.offerToReceiveAudio && (!0 === o.offerToReceiveAudio ? a = 1 : !1 === o.offerToReceiveAudio ? a = 0 : a = o.offerToReceiveAudio), void 0 !== o.offerToReceiveVideo && (!0 === o.offerToReceiveVideo ? i = 1 : !1 === o.offerToReceiveVideo ? i = 0 : i = o.offerToReceiveVideo)
                                }
                                for (r.transceivers.forEach(function(e) {
                                        "audio" === e.kind ? (a--, 0 > a && (e.wantReceive = !1)) : "video" === e.kind && (i--, 0 > i && (e.wantReceive = !1))
                                    }); 0 < a || 0 < i;) 0 < a && (r._createTransceiver("audio"), a--), 0 < i && (r._createTransceiver("video"), i--);
                                var s = p.writeSessionBoilerplate(r._sdpSessionId, r._sdpSessionVersion++);
                                r.transceivers.forEach(function(a, n) {
                                    var i = a.track,
                                        o = a.kind,
                                        s = a.mid || p.generateIdentifier();
                                    a.mid = s, a.iceGatherer || (a.iceGatherer = r._createIceGatherer(n, r.usingBundle));
                                    var c = e.RTCRtpSender.getCapabilities(o);
                                    15019 > t && (c.codecs = c.codecs.filter(function(e) {
                                        return "rtx" !== e.name
                                    })), c.codecs.forEach(function(e) {
                                        "H264" === e.name && void 0 === e.parameters["level-asymmetry-allowed"] && (e.parameters["level-asymmetry-allowed"] = "1"), a.remoteCapabilities && a.remoteCapabilities.codecs && a.remoteCapabilities.codecs.forEach(function(t) {
                                            e.name.toLowerCase() === t.name.toLowerCase() && e.clockRate === t.clockRate && (e.preferredPayloadType = t.payloadType)
                                        })
                                    }), c.headerExtensions.forEach(function(e) {
                                        var t = a.remoteCapabilities && a.remoteCapabilities.headerExtensions || [];
                                        t.forEach(function(t) {
                                            e.uri === t.uri && (e.id = t.id)
                                        })
                                    });
                                    var d = a.sendEncodingParameters || [{
                                        ssrc: 1001 * (2 * n + 1)
                                    }];
                                    i && 15019 <= t && "video" === o && !d[0].rtx && (d[0].rtx = {
                                        ssrc: d[0].ssrc + 1
                                    }), a.wantReceive && (a.rtpReceiver = new e.RTCRtpReceiver(a.dtlsTransport, o)), a.localCapabilities = c, a.sendEncodingParameters = d
                                }), "max-compat" !== r._config.bundlePolicy && (s += "a=group:BUNDLE " + r.transceivers.map(function(e) {
                                    return e.mid
                                }).join(" ") + "\r\n"), s += "a=ice-options:trickle\r\n", r.transceivers.forEach(function(e, t) {
                                    s += n(e, e.localCapabilities, "offer", e.stream, r._dtlsRole), s += "a=rtcp-rsize\r\n", e.iceGatherer && "new" !== r.iceGatheringState && (0 === t || !r.usingBundle) && (e.iceGatherer.getLocalCandidates().forEach(function(e) {
                                        e.component = 1, s += "a=" + p.writeCandidate(e) + "\r\n"
                                    }), "completed" === e.iceGatherer.state && (s += "a=end-of-candidates\r\n"))
                                });
                                var c = new e.RTCSessionDescription({
                                    type: "offer",
                                    sdp: s
                                });
                                return Promise.resolve(c)
                            }, h.prototype.createAnswer = function() {
                                var r = this;
                                if (r._isClosed) return Promise.reject(d("InvalidStateError", "Can not call createAnswer after close"));
                                if ("have-remote-offer" !== r.signalingState && "have-local-pranswer" !== r.signalingState) return Promise.reject(d("InvalidStateError", "Can not call createAnswer in signalingState " + r.signalingState));
                                var a = p.writeSessionBoilerplate(r._sdpSessionId, r._sdpSessionVersion++);
                                r.usingBundle && (a += "a=group:BUNDLE " + r.transceivers.map(function(e) {
                                    return e.mid
                                }).join(" ") + "\r\n");
                                var o = p.getMediaSections(r.remoteDescription.sdp).length;
                                r.transceivers.forEach(function(e, s) {
                                    if (!(s + 1 > o)) {
                                        if (e.rejected) return "application" === e.kind ? a += "m=application 0 DTLS/SCTP 5000\r\n" : "audio" === e.kind ? a += "m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n" : "video" === e.kind && (a += "m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"), void(a += "c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:" + e.mid + "\r\n");
                                        if (e.stream) {
                                            var c;
                                            "audio" === e.kind ? c = e.stream.getAudioTracks()[0] : "video" === e.kind && (c = e.stream.getVideoTracks()[0]), c && 15019 <= t && "video" === e.kind && !e.sendEncodingParameters[0].rtx && (e.sendEncodingParameters[0].rtx = {
                                                ssrc: e.sendEncodingParameters[0].ssrc + 1
                                            })
                                        }
                                        var d = i(e.localCapabilities, e.remoteCapabilities),
                                            p = d.codecs.filter(function(e) {
                                                return "rtx" === e.name.toLowerCase()
                                            }).length;
                                        !p && e.sendEncodingParameters[0].rtx && delete e.sendEncodingParameters[0].rtx, a += n(e, d, "answer", e.stream, r._dtlsRole), e.rtcpParameters && e.rtcpParameters.reducedSize && (a += "a=rtcp-rsize\r\n")
                                    }
                                });
                                var s = new e.RTCSessionDescription({
                                    type: "answer",
                                    sdp: a
                                });
                                return Promise.resolve(s)
                            }, h.prototype.addIceCandidate = function(e) {
                                var t, r = this;
                                return e && !(void 0 !== e.sdpMLineIndex || e.sdpMid) ? Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")) : new Promise(function(a, n) {
                                    if (!r.remoteDescription) return n(d("InvalidStateError", "Can not add ICE candidate without a remote description"));
                                    if (!e || "" === e.candidate)
                                        for (var o = 0; o < r.transceivers.length && (r.transceivers[o].rejected || (r.transceivers[o].iceTransport.addRemoteCandidate({}), t = p.getMediaSections(r.remoteDescription.sdp), t[o] += "a=end-of-candidates\r\n", r.remoteDescription.sdp = p.getDescription(r.remoteDescription.sdp) + t.join(""), !r.usingBundle)); o++);
                                    else {
                                        var s = e.sdpMLineIndex;
                                        if (e.sdpMid)
                                            for (var m = 0; m < r.transceivers.length; m++)
                                                if (r.transceivers[m].mid === e.sdpMid) {
                                                    s = m;
                                                    break
                                                } var i = r.transceivers[s];
                                        if (i) {
                                            if (i.rejected) return a();
                                            var l = 0 < Object.keys(e.candidate).length ? p.parseCandidate(e.candidate) : {};
                                            if ("tcp" === l.protocol && (0 === l.port || 9 === l.port)) return a();
                                            if (l.component && 1 !== l.component) return a();
                                            if ((0 === s || 0 < s && i.iceTransport !== r.transceivers[0].iceTransport) && !c(i.iceTransport, l)) return n(d("OperationError", "Can not add ICE candidate"));
                                            var h = e.candidate.trim();
                                            0 === h.indexOf("a=") && (h = h.substr(2)), t = p.getMediaSections(r.remoteDescription.sdp), t[s] += "a=" + (l.type ? h : "end-of-candidates") + "\r\n", r.remoteDescription.sdp = p.getDescription(r.remoteDescription.sdp) + t.join("")
                                        } else return n(d("OperationError", "Can not add ICE candidate"))
                                    }
                                    a()
                                })
                            }, h.prototype.getStats = function(t) {
                                if (t && t instanceof e.MediaStreamTrack) {
                                    var r = null;
                                    if (this.transceivers.forEach(function(e) {
                                            e.rtpSender && e.rtpSender.track === t ? r = e.rtpSender : e.rtpReceiver && e.rtpReceiver.track === t && (r = e.rtpReceiver)
                                        }), !r) throw d("InvalidAccessError", "Invalid selector.");
                                    return r.getStats()
                                }
                                var a = [];
                                return this.transceivers.forEach(function(e) {
                                    ["rtpSender", "rtpReceiver", "iceGatherer", "iceTransport", "dtlsTransport"].forEach(function(t) {
                                        e[t] && a.push(e[t].getStats())
                                    })
                                }), Promise.all(a).then(function(e) {
                                    var t = new Map;
                                    return e.forEach(function(e) {
                                        e.forEach(function(e) {
                                            t.set(e.id, e)
                                        })
                                    }), t
                                })
                            };
                            ["RTCRtpSender", "RTCRtpReceiver", "RTCIceGatherer", "RTCIceTransport", "RTCDtlsTransport"].forEach(function(t) {
                                var r = e[t];
                                if (r && r.prototype && r.prototype.getStats) {
                                    var n = r.prototype.getStats;
                                    r.prototype.getStats = function() {
                                        return n.apply(this).then(function(e) {
                                            var t = new Map;
                                            return Object.keys(e).forEach(function(r) {
                                                e[r].type = a(e[r]), t.set(r, e[r])
                                            }), t
                                        })
                                    }
                                }
                            });
                            var g = ["createOffer", "createAnswer"];
                            return g.forEach(function(e) {
                                var t = h.prototype[e];
                                h.prototype[e] = function() {
                                    var e = arguments;
                                    return "function" === typeof e[0] || "function" === typeof e[1] ? t.apply(this, [arguments[2]]).then(function(t) {
                                        "function" === typeof e[0] && e[0].apply(null, [t])
                                    }, function(t) {
                                        "function" === typeof e[1] && e[1].apply(null, [t])
                                    }) : t.apply(this, arguments)
                                }
                            }), g = ["setLocalDescription", "setRemoteDescription", "addIceCandidate"], g.forEach(function(e) {
                                var t = h.prototype[e];
                                h.prototype[e] = function() {
                                    var e = arguments;
                                    return "function" === typeof e[1] || "function" === typeof e[2] ? t.apply(this, arguments).then(function() {
                                        "function" === typeof e[1] && e[1].apply(null)
                                    }, function(t) {
                                        "function" === typeof e[2] && e[2].apply(null, [t])
                                    }) : t.apply(this, arguments)
                                }
                            }), ["getStats"].forEach(function(e) {
                                var t = h.prototype[e];
                                h.prototype[e] = function() {
                                    var e = arguments;
                                    return "function" === typeof e[1] ? t.apply(this, arguments).then(function() {
                                        "function" === typeof e[1] && e[1].apply(null)
                                    }) : t.apply(this, arguments)
                                }
                            }), h
                        }
                    }, {
                        sdp: 2
                    }],
                    2: [function(e, t) {
                        "use strict";
                        var r = {};
                        r.generateIdentifier = function() {
                            return Math.random().toString(36).substr(2, 10)
                        }, r.localCName = r.generateIdentifier(), r.splitLines = function(e) {
                            return e.trim().split("\n").map(function(e) {
                                return e.trim()
                            })
                        }, r.splitSections = function(e) {
                            var t = e.split("\nm=");
                            return t.map(function(e, t) {
                                return (0 < t ? "m=" + e : e).trim() + "\r\n"
                            })
                        }, r.getDescription = function(e) {
                            var t = r.splitSections(e);
                            return t && t[0]
                        }, r.getMediaSections = function(e) {
                            var t = r.splitSections(e);
                            return t.shift(), t
                        }, r.matchPrefix = function(e, t) {
                            return r.splitLines(e).filter(function(e) {
                                return 0 === e.indexOf(t)
                            })
                        }, r.parseCandidate = function(e) {
                            var t = 0 === e.indexOf("a=candidate:") ? e.substring(12).split(" ") : e.substring(10).split(" ");
                            for (var r = {
                                    foundation: t[0],
                                    component: parseInt(t[1], 10),
                                    protocol: t[2].toLowerCase(),
                                    priority: parseInt(t[3], 10),
                                    ip: t[4],
                                    port: parseInt(t[5], 10),
                                    type: t[7]
                                }, a = 8; a < t.length; a += 2) switch (t[a]) {
                                case "raddr":
                                    r.relatedAddress = t[a + 1];
                                    break;
                                case "rport":
                                    r.relatedPort = parseInt(t[a + 1], 10);
                                    break;
                                case "tcptype":
                                    r.tcpType = t[a + 1];
                                    break;
                                case "ufrag":
                                    r.ufrag = t[a + 1], r.usernameFragment = t[a + 1];
                                    break;
                                default:
                                    r[t[a]] = t[a + 1];
                            }
                            return r
                        }, r.writeCandidate = function(e) {
                            var t = [e.foundation, e.component, e.protocol.toUpperCase(), e.priority, e.ip, e.port],
                                r = e.type;
                            return t.push("typ"), t.push(r), "host" !== r && e.relatedAddress && e.relatedPort && (t.push("raddr"), t.push(e.relatedAddress), t.push("rport"), t.push(e.relatedPort)), e.tcpType && "tcp" === e.protocol.toLowerCase() && (t.push("tcptype"), t.push(e.tcpType)), (e.usernameFragment || e.ufrag) && (t.push("ufrag"), t.push(e.usernameFragment || e.ufrag)), "candidate:" + t.join(" ")
                        }, r.parseIceOptions = function(e) {
                            return e.substr(14).split(" ")
                        }, r.parseRtpMap = function(e) {
                            var t = e.substr(9).split(" "),
                                r = {
                                    payloadType: parseInt(t.shift(), 10)
                                };
                            return t = t[0].split("/"), r.name = t[0], r.clockRate = parseInt(t[1], 10), r.channels = 3 === t.length ? parseInt(t[2], 10) : 1, r.numChannels = r.channels, r
                        }, r.writeRtpMap = function(e) {
                            var t = e.payloadType;
                            e.preferredPayloadType !== void 0 && (t = e.preferredPayloadType);
                            var r = e.channels || e.numChannels || 1;
                            return "a=rtpmap:" + t + " " + e.name + "/" + e.clockRate + (1 === r ? "" : "/" + r) + "\r\n"
                        }, r.parseExtmap = function(e) {
                            var t = e.substr(9).split(" ");
                            return {
                                id: parseInt(t[0], 10),
                                direction: 0 < t[0].indexOf("/") ? t[0].split("/")[1] : "sendrecv",
                                uri: t[1]
                            }
                        }, r.writeExtmap = function(e) {
                            return "a=extmap:" + (e.id || e.preferredId) + (e.direction && "sendrecv" !== e.direction ? "/" + e.direction : "") + " " + e.uri + "\r\n"
                        }, r.parseFmtp = function(e) {
                            for (var t, r = {}, a = e.substr(e.indexOf(" ") + 1).split(";"), n = 0; n < a.length; n++) t = a[n].trim().split("="), r[t[0].trim()] = t[1];
                            return r
                        }, r.writeFmtp = function(e) {
                            var t = "",
                                r = e.payloadType;
                            if (void 0 !== e.preferredPayloadType && (r = e.preferredPayloadType), e.parameters && Object.keys(e.parameters).length) {
                                var a = [];
                                Object.keys(e.parameters).forEach(function(t) {
                                    e.parameters[t] ? a.push(t + "=" + e.parameters[t]) : a.push(t)
                                }), t += "a=fmtp:" + r + " " + a.join(";") + "\r\n"
                            }
                            return t
                        }, r.parseRtcpFb = function(e) {
                            var t = e.substr(e.indexOf(" ") + 1).split(" ");
                            return {
                                type: t.shift(),
                                parameter: t.join(" ")
                            }
                        }, r.writeRtcpFb = function(e) {
                            var t = "",
                                r = e.payloadType;
                            return void 0 !== e.preferredPayloadType && (r = e.preferredPayloadType), e.rtcpFeedback && e.rtcpFeedback.length && e.rtcpFeedback.forEach(function(e) {
                                t += "a=rtcp-fb:" + r + " " + e.type + (e.parameter && e.parameter.length ? " " + e.parameter : "") + "\r\n"
                            }), t
                        }, r.parseSsrcMedia = function(e) {
                            var t = e.indexOf(" "),
                                r = {
                                    ssrc: parseInt(e.substr(7, t - 7), 10)
                                },
                                a = e.indexOf(":", t);
                            return -1 < a ? (r.attribute = e.substr(t + 1, a - t - 1), r.value = e.substr(a + 1)) : r.attribute = e.substr(t + 1), r
                        }, r.getMid = function(e) {
                            var t = r.matchPrefix(e, "a=mid:")[0];
                            if (t) return t.substr(6)
                        }, r.parseFingerprint = function(e) {
                            var t = e.substr(14).split(" ");
                            return {
                                algorithm: t[0].toLowerCase(),
                                value: t[1]
                            }
                        }, r.getDtlsParameters = function(e, t) {
                            var a = r.matchPrefix(e + t, "a=fingerprint:");
                            return {
                                role: "auto",
                                fingerprints: a.map(r.parseFingerprint)
                            }
                        }, r.writeDtlsParameters = function(e, t) {
                            var r = "a=setup:" + t + "\r\n";
                            return e.fingerprints.forEach(function(e) {
                                r += "a=fingerprint:" + e.algorithm + " " + e.value + "\r\n"
                            }), r
                        }, r.getIceParameters = function(e, t) {
                            var a = r.splitLines(e);
                            a = a.concat(r.splitLines(t));
                            var n = {
                                usernameFragment: a.filter(function(e) {
                                    return 0 === e.indexOf("a=ice-ufrag:")
                                })[0].substr(12),
                                password: a.filter(function(e) {
                                    return 0 === e.indexOf("a=ice-pwd:")
                                })[0].substr(10)
                            };
                            return n
                        }, r.writeIceParameters = function(e) {
                            return "a=ice-ufrag:" + e.usernameFragment + "\r\na=ice-pwd:" + e.password + "\r\n"
                        }, r.parseRtpParameters = function(e) {
                            for (var t = {
                                    codecs: [],
                                    headerExtensions: [],
                                    fecMechanisms: [],
                                    rtcp: []
                                }, a = r.splitLines(e), n = a[0].split(" "), o = 3; o < n.length; o++) {
                                var i = n[o],
                                    s = r.matchPrefix(e, "a=rtpmap:" + i + " ")[0];
                                if (s) {
                                    var c = r.parseRtpMap(s),
                                        d = r.matchPrefix(e, "a=fmtp:" + i + " ");
                                    switch (c.parameters = d.length ? r.parseFmtp(d[0]) : {}, c.rtcpFeedback = r.matchPrefix(e, "a=rtcp-fb:" + i + " ").map(r.parseRtcpFb), t.codecs.push(c), c.name.toUpperCase()) {
                                        case "RED":
                                        case "ULPFEC":
                                            t.fecMechanisms.push(c.name.toUpperCase());
                                            break;
                                        default:
                                    }
                                }
                            }
                            return r.matchPrefix(e, "a=extmap:").forEach(function(e) {
                                t.headerExtensions.push(r.parseExtmap(e))
                            }), t
                        }, r.writeRtpDescription = function(e, t) {
                            var a = "";
                            a += "m=" + e + " ", a += 0 < t.codecs.length ? "9" : "0", a += " UDP/TLS/RTP/SAVPF ", a += t.codecs.map(function(e) {
                                return void 0 === e.preferredPayloadType ? e.payloadType : e.preferredPayloadType
                            }).join(" ") + "\r\n", a += "c=IN IP4 0.0.0.0\r\n", a += "a=rtcp:9 IN IP4 0.0.0.0\r\n", t.codecs.forEach(function(e) {
                                a += r.writeRtpMap(e), a += r.writeFmtp(e), a += r.writeRtcpFb(e)
                            });
                            var n = 0;
                            return t.codecs.forEach(function(e) {
                                e.maxptime > n && (n = e.maxptime)
                            }), 0 < n && (a += "a=maxptime:" + n + "\r\n"), a += "a=rtcp-mux\r\n", t.headerExtensions && t.headerExtensions.forEach(function(e) {
                                a += r.writeExtmap(e)
                            }), a
                        }, r.parseRtpEncodingParameters = function(e) {
                            var t, a = [],
                                n = r.parseRtpParameters(e),
                                i = -1 !== n.fecMechanisms.indexOf("RED"),
                                o = -1 !== n.fecMechanisms.indexOf("ULPFEC"),
                                s = r.matchPrefix(e, "a=ssrc:").map(function(e) {
                                    return r.parseSsrcMedia(e)
                                }).filter(function(e) {
                                    return "cname" === e.attribute
                                }),
                                c = 0 < s.length && s[0].ssrc,
                                d = r.matchPrefix(e, "a=ssrc-group:FID").map(function(e) {
                                    var t = e.substr(17).split(" ");
                                    return t.map(function(e) {
                                        return parseInt(e, 10)
                                    })
                                });
                            0 < d.length && 1 < d[0].length && d[0][0] === c && (t = d[0][1]), n.codecs.forEach(function(e) {
                                if ("RTX" === e.name.toUpperCase() && e.parameters.apt) {
                                    var r = {
                                        ssrc: c,
                                        codecPayloadType: parseInt(e.parameters.apt, 10)
                                    };
                                    c && t && (r.rtx = {
                                        ssrc: t
                                    }), a.push(r), i && (r = JSON.parse(JSON.stringify(r)), r.fec = {
                                        ssrc: t,
                                        mechanism: o ? "red+ulpfec" : "red"
                                    }, a.push(r))
                                }
                            }), 0 === a.length && c && a.push({
                                ssrc: c
                            });
                            var p = r.matchPrefix(e, "b=");
                            return p.length && (p = 0 === p[0].indexOf("b=TIAS:") ? parseInt(p[0].substr(7), 10) : 0 === p[0].indexOf("b=AS:") ? .95 * (1e3 * parseInt(p[0].substr(5), 10)) - 16000 : void 0, a.forEach(function(e) {
                                e.maxBitrate = p
                            })), a
                        }, r.parseRtcpParameters = function(e) {
                            var t = {},
                                a = r.matchPrefix(e, "a=ssrc:").map(function(e) {
                                    return r.parseSsrcMedia(e)
                                }).filter(function(e) {
                                    return "cname" === e.attribute
                                })[0];
                            a && (t.cname = a.value, t.ssrc = a.ssrc);
                            var n = r.matchPrefix(e, "a=rtcp-rsize");
                            t.reducedSize = 0 < n.length, t.compound = 0 === n.length;
                            var i = r.matchPrefix(e, "a=rtcp-mux");
                            return t.mux = 0 < i.length, t
                        }, r.parseMsid = function(e) {
                            var t, a = r.matchPrefix(e, "a=msid:");
                            if (1 === a.length) return t = a[0].substr(7).split(" "), {
                                stream: t[0],
                                track: t[1]
                            };
                            var n = r.matchPrefix(e, "a=ssrc:").map(function(e) {
                                return r.parseSsrcMedia(e)
                            }).filter(function(e) {
                                return "msid" === e.attribute
                            });
                            if (0 < n.length) return t = n[0].value.split(" "), {
                                stream: t[0],
                                track: t[1]
                            }
                        }, r.generateSessionId = function() {
                            return Math.random().toString().substr(2, 21)
                        }, r.writeSessionBoilerplate = function(e, t) {
                            var a, n = void 0 === t ? 2 : t;
                            return a = e ? e : r.generateSessionId(), "v=0\r\no=thisisadapterortc " + a + " " + n + " IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"
                        }, r.writeMediaSection = function(e, t, a, n) {
                            var i = r.writeRtpDescription(e.kind, t);
                            if (i += r.writeIceParameters(e.iceGatherer.getLocalParameters()), i += r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), "offer" === a ? "actpass" : "active"), i += "a=mid:" + e.mid + "\r\n", i += e.direction ? "a=" + e.direction + "\r\n" : e.rtpSender && e.rtpReceiver ? "a=sendrecv\r\n" : e.rtpSender ? "a=sendonly\r\n" : e.rtpReceiver ? "a=recvonly\r\n" : "a=inactive\r\n", e.rtpSender) {
                                var o = "msid:" + n.id + " " + e.rtpSender.track.id + "\r\n";
                                i += "a=" + o, i += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " " + o, e.sendEncodingParameters[0].rtx && (i += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " " + o, i += "a=ssrc-group:FID " + e.sendEncodingParameters[0].ssrc + " " + e.sendEncodingParameters[0].rtx.ssrc + "\r\n")
                            }
                            return i += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " cname:" + r.localCName + "\r\n", e.rtpSender && e.sendEncodingParameters[0].rtx && (i += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " cname:" + r.localCName + "\r\n"), i
                        }, r.getDirection = function(e, t) {
                            for (var a = r.splitLines(e), n = 0; n < a.length; n++) switch (a[n]) {
                                case "a=sendrecv":
                                case "a=sendonly":
                                case "a=recvonly":
                                case "a=inactive":
                                    return a[n].substr(2);
                                default:
                            }
                            return t ? r.getDirection(t) : "sendrecv"
                        }, r.getKind = function(e) {
                            var t = r.splitLines(e),
                                a = t[0].split(" ");
                            return a[0].substr(2)
                        }, r.isRejected = function(e) {
                            return "0" === e.split(" ", 2)[1]
                        }, r.parseMLine = function(e) {
                            var t = r.splitLines(e),
                                a = t[0].substr(2).split(" ");
                            return {
                                kind: a[0],
                                port: parseInt(a[1], 10),
                                protocol: a[2],
                                fmt: a.slice(3).join(" ")
                            }
                        }, r.parseOLine = function(e) {
                            var t = r.matchPrefix(e, "o=")[0],
                                a = t.substr(2).split(" ");
                            return {
                                username: a[0],
                                sessionId: a[1],
                                sessionVersion: parseInt(a[2], 10),
                                netType: a[3],
                                addressType: a[4],
                                address: a[5]
                            }
                        }, "object" === typeof t && (t.exports = r)
                    }, {}],
                    3: [function(e, t) {
                        (function(r) {
                            "use strict";
                            var a = e("./adapter_factory.js");
                            t.exports = a({
                                window: r.window
                            })
                        }).call(this, "undefined" === typeof global ? "undefined" === typeof self ? "undefined" === typeof window ? {} : window : self : global)
                    }, {
                        "./adapter_factory.js": 4
                    }],
                    4: [function(e, t) {
                        "use strict";
                        var r = e("./utils");
                        t.exports = function(t, a) {
                            var n = t && t.window,
                                i = {
                                    shimChrome: !0,
                                    shimFirefox: !0,
                                    shimEdge: !0,
                                    shimSafari: !0
                                };
                            for (var o in a) hasOwnProperty.call(a, o) && (i[o] = a[o]);
                            var s = r.log,
                                c = r.detectBrowser(n),
                                d = e("./chrome/chrome_shim") || null,
                                p = e("./edge/edge_shim") || null,
                                m = e("./firefox/firefox_shim") || null,
                                l = e("./safari/safari_shim") || null,
                                h = e("./common_shim") || null,
                                g = {
                                    browserDetails: c,
                                    commonShim: h,
                                    extractVersion: r.extractVersion,
                                    disableLog: r.disableLog,
                                    disableWarnings: r.disableWarnings
                                };
                            switch (c.browser) {
                                case "chrome":
                                    if (!d || !d.shimPeerConnection || !i.shimChrome) return s("Chrome shim is not included in this adapter release."), g;
                                    s("adapter.js shimming chrome."), g.browserShim = d, h.shimCreateObjectURL(n), d.shimGetUserMedia(n), d.shimMediaStream(n), d.shimSourceObject(n), d.shimPeerConnection(n), d.shimOnTrack(n), d.shimAddTrackRemoveTrack(n), d.shimGetSendersWithDtmf(n), d.shimSenderReceiverGetStats(n), h.shimRTCIceCandidate(n), h.shimMaxMessageSize(n), h.shimSendThrowTypeError(n);
                                    break;
                                case "firefox":
                                    if (!m || !m.shimPeerConnection || !i.shimFirefox) return s("Firefox shim is not included in this adapter release."), g;
                                    s("adapter.js shimming firefox."), g.browserShim = m, h.shimCreateObjectURL(n), m.shimGetUserMedia(n), m.shimSourceObject(n), m.shimPeerConnection(n), m.shimOnTrack(n), m.shimRemoveStream(n), m.shimSenderGetStats(n), m.shimReceiverGetStats(n), m.shimRTCDataChannel(n), h.shimRTCIceCandidate(n), h.shimMaxMessageSize(n), h.shimSendThrowTypeError(n);
                                    break;
                                case "edge":
                                    if (!p || !p.shimPeerConnection || !i.shimEdge) return s("MS edge shim is not included in this adapter release."), g;
                                    s("adapter.js shimming edge."), g.browserShim = p, h.shimCreateObjectURL(n), p.shimGetUserMedia(n), p.shimPeerConnection(n), p.shimReplaceTrack(n), h.shimMaxMessageSize(n), h.shimSendThrowTypeError(n);
                                    break;
                                case "safari":
                                    if (!l || !i.shimSafari) return s("Safari shim is not included in this adapter release."), g;
                                    s("adapter.js shimming safari."), g.browserShim = l, h.shimCreateObjectURL(n), l.shimRTCIceServerUrls(n), l.shimCallbacksAPI(n), l.shimLocalStreamsAPI(n), l.shimRemoteStreamsAPI(n), l.shimTrackEventTransceiver(n), l.shimGetUserMedia(n), l.shimCreateOfferLegacy(n), h.shimRTCIceCandidate(n), h.shimMaxMessageSize(n), h.shimSendThrowTypeError(n);
                                    break;
                                default:
                                    s("Unsupported browser!");
                            }
                            return g
                        }
                    }, {
                        "./chrome/chrome_shim": 5,
                        "./common_shim": 7,
                        "./edge/edge_shim": 8,
                        "./firefox/firefox_shim": 11,
                        "./safari/safari_shim": 13,
                        "./utils": 14
                    }],
                    5: [function(e, t) {
                        "use strict";

                        function r(e, t, a) {
                            !t || a.has(t.id) || (a.set(t.id, t), Object.keys(t).forEach(function(n) {
                                n.endsWith("Id") ? r(e, e.get(t[n]), a) : n.endsWith("Ids") && t[n].forEach(function(t) {
                                    r(e, e.get(t), a)
                                })
                            }))
                        }

                        function a(e, t, a) {
                            var n = a ? "outbound-rtp" : "inbound-rtp",
                                i = new Map;
                            if (null === t) return i;
                            var o = [];
                            return e.forEach(function(e) {
                                "track" === e.type && e.trackIdentifier === t.id && o.push(e)
                            }), o.forEach(function(t) {
                                e.forEach(function(a) {
                                    a.type === n && a.trackId === t.id && r(e, a, i)
                                })
                            }), i
                        }
                        var n = e("../utils.js"),
                            i = n.log;
                        t.exports = {
                            shimGetUserMedia: e("./getusermedia"),
                            shimMediaStream: function(e) {
                                e.MediaStream = e.MediaStream || e.webkitMediaStream
                            },
                            shimOnTrack: function(t) {
                                if ("object" === typeof t && t.RTCPeerConnection && !("ontrack" in t.RTCPeerConnection.prototype)) {
                                    Object.defineProperty(t.RTCPeerConnection.prototype, "ontrack", {
                                        get: function() {
                                            return this._ontrack
                                        },
                                        set: function(e) {
                                            this._ontrack && this.removeEventListener("track", this._ontrack), this.addEventListener("track", this._ontrack = e)
                                        }
                                    });
                                    var e = t.RTCPeerConnection.prototype.setRemoteDescription;
                                    t.RTCPeerConnection.prototype.setRemoteDescription = function() {
                                        var r = this;
                                        return r._ontrackpoly || (r._ontrackpoly = function(a) {
                                            a.stream.addEventListener("addtrack", function(e) {
                                                var n = t.RTCPeerConnection.prototype.getReceivers ? r.getReceivers().find(function(t) {
                                                    return t.track && t.track.id === e.track.id
                                                }) : {
                                                    track: e.track
                                                };
                                                var i = new Event("track");
                                                i.track = e.track, i.receiver = n, i.transceiver = {
                                                    receiver: n
                                                }, i.streams = [a.stream], r.dispatchEvent(i)
                                            }), a.stream.getTracks().forEach(function(e) {
                                                var n = t.RTCPeerConnection.prototype.getReceivers ? r.getReceivers().find(function(t) {
                                                    return t.track && t.track.id === e.id
                                                }) : {
                                                    track: e
                                                };
                                                var i = new Event("track");
                                                i.track = e, i.receiver = n, i.transceiver = {
                                                    receiver: n
                                                }, i.streams = [a.stream], r.dispatchEvent(i)
                                            })
                                        }, r.addEventListener("addstream", r._ontrackpoly)), e.apply(r, arguments)
                                    }
                                } else "RTCRtpTransceiver" in t || n.wrapPeerConnectionEvent(t, "track", function(t) {
                                    return t.transceiver || (t.transceiver = {
                                        receiver: t.receiver
                                    }), t
                                })
                            },
                            shimGetSendersWithDtmf: function(e) {
                                if ("object" === typeof e && e.RTCPeerConnection && !("getSenders" in e.RTCPeerConnection.prototype) && "createDTMFSender" in e.RTCPeerConnection.prototype) {
                                    var t = function(e, t) {
                                        return {
                                            track: t,
                                            get dtmf() {
                                                return void 0 === this._dtmf && ("audio" === t.kind ? this._dtmf = e.createDTMFSender(t) : this._dtmf = null), this._dtmf
                                            },
                                            _pc: e
                                        }
                                    };
                                    if (!e.RTCPeerConnection.prototype.getSenders) {
                                        e.RTCPeerConnection.prototype.getSenders = function() {
                                            return this._senders = this._senders || [], this._senders.slice()
                                        };
                                        var r = e.RTCPeerConnection.prototype.addTrack;
                                        e.RTCPeerConnection.prototype.addTrack = function(e) {
                                            var a = this,
                                                n = r.apply(a, arguments);
                                            return n || (n = t(a, e), a._senders.push(n)), n
                                        };
                                        var a = e.RTCPeerConnection.prototype.removeTrack;
                                        e.RTCPeerConnection.prototype.removeTrack = function(e) {
                                            var t = this;
                                            a.apply(t, arguments);
                                            var r = t._senders.indexOf(e); - 1 !== r && t._senders.splice(r, 1)
                                        }
                                    }
                                    var n = e.RTCPeerConnection.prototype.addStream;
                                    e.RTCPeerConnection.prototype.addStream = function(e) {
                                        var r = this;
                                        r._senders = r._senders || [], n.apply(r, [e]), e.getTracks().forEach(function(e) {
                                            r._senders.push(t(r, e))
                                        })
                                    };
                                    var i = e.RTCPeerConnection.prototype.removeStream;
                                    e.RTCPeerConnection.prototype.removeStream = function(e) {
                                        var t = this;
                                        t._senders = t._senders || [], i.apply(t, [e]), e.getTracks().forEach(function(e) {
                                            var r = t._senders.find(function(t) {
                                                return t.track === e
                                            });
                                            r && t._senders.splice(t._senders.indexOf(r), 1)
                                        })
                                    }
                                } else if ("object" === typeof e && e.RTCPeerConnection && "getSenders" in e.RTCPeerConnection.prototype && "createDTMFSender" in e.RTCPeerConnection.prototype && e.RTCRtpSender && !("dtmf" in e.RTCRtpSender.prototype)) {
                                    var o = e.RTCPeerConnection.prototype.getSenders;
                                    e.RTCPeerConnection.prototype.getSenders = function() {
                                        var e = this,
                                            t = o.apply(e, []);
                                        return t.forEach(function(t) {
                                            t._pc = e
                                        }), t
                                    }, Object.defineProperty(e.RTCRtpSender.prototype, "dtmf", {
                                        get: function() {
                                            return void 0 === this._dtmf && ("audio" === this.track.kind ? this._dtmf = this._pc.createDTMFSender(this.track) : this._dtmf = null), this._dtmf
                                        }
                                    })
                                }
                            },
                            shimSenderReceiverGetStats: function(e) {
                                if ("object" === typeof e && e.RTCPeerConnection && e.RTCRtpSender && e.RTCRtpReceiver) {
                                    if (!("getStats" in e.RTCRtpSender.prototype)) {
                                        var t = e.RTCPeerConnection.prototype.getSenders;
                                        t && (e.RTCPeerConnection.prototype.getSenders = function() {
                                            var e = this,
                                                r = t.apply(e, []);
                                            return r.forEach(function(t) {
                                                t._pc = e
                                            }), r
                                        });
                                        var r = e.RTCPeerConnection.prototype.addTrack;
                                        r && (e.RTCPeerConnection.prototype.addTrack = function() {
                                            var e = r.apply(this, arguments);
                                            return e._pc = this, e
                                        }), e.RTCRtpSender.prototype.getStats = function() {
                                            var e = this;
                                            return this._pc.getStats().then(function(t) {
                                                return a(t, e.track, !0)
                                            })
                                        }
                                    }
                                    if (!("getStats" in e.RTCRtpReceiver.prototype)) {
                                        var i = e.RTCPeerConnection.prototype.getReceivers;
                                        i && (e.RTCPeerConnection.prototype.getReceivers = function() {
                                            var e = this,
                                                t = i.apply(e, []);
                                            return t.forEach(function(t) {
                                                t._pc = e
                                            }), t
                                        }), n.wrapPeerConnectionEvent(e, "track", function(t) {
                                            return t.receiver._pc = t.srcElement, t
                                        }), e.RTCRtpReceiver.prototype.getStats = function() {
                                            var e = this;
                                            return this._pc.getStats().then(function(t) {
                                                return a(t, e.track, !1)
                                            })
                                        }
                                    }
                                    if ("getStats" in e.RTCRtpSender.prototype && "getStats" in e.RTCRtpReceiver.prototype) {
                                        var o = e.RTCPeerConnection.prototype.getStats;
                                        e.RTCPeerConnection.prototype.getStats = function() {
                                            var t = this;
                                            if (0 < arguments.length && arguments[0] instanceof e.MediaStreamTrack) {
                                                var r, a, n, i = arguments[0];
                                                return (t.getSenders().forEach(function(e) {
                                                    e.track === i && (r ? n = !0 : r = e)
                                                }), t.getReceivers().forEach(function(e) {
                                                    return e.track === i && (a ? n = !0 : a = e), e.track === i
                                                }), n || r && a) ? Promise.reject(new DOMException("There are more than one sender or receiver for the track.", "InvalidAccessError")) : r ? r.getStats() : a ? a.getStats() : Promise.reject(new DOMException("There is no sender or receiver for the track.", "InvalidAccessError"))
                                            }
                                            return o.apply(t, arguments)
                                        }
                                    }
                                }
                            },
                            shimSourceObject: function(e) {
                                var t = e && e.URL;
                                "object" === typeof e && e.HTMLMediaElement && !("srcObject" in e.HTMLMediaElement.prototype) && Object.defineProperty(e.HTMLMediaElement.prototype, "srcObject", {
                                    get: function() {
                                        return this._srcObject
                                    },
                                    set: function(e) {
                                        var r = this;
                                        return this._srcObject = e, this.src && t.revokeObjectURL(this.src), e ? void(this.src = t.createObjectURL(e), e.addEventListener("addtrack", function() {
                                            r.src && t.revokeObjectURL(r.src), r.src = t.createObjectURL(e)
                                        }), e.addEventListener("removetrack", function() {
                                            r.src && t.revokeObjectURL(r.src), r.src = t.createObjectURL(e)
                                        })) : void(this.src = "")
                                    }
                                })
                            },
                            shimAddTrackRemoveTrackWithNative: function(e) {
                                e.RTCPeerConnection.prototype.getLocalStreams = function() {
                                    var e = this;
                                    return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, Object.keys(this._shimmedLocalStreams).map(function(t) {
                                        return e._shimmedLocalStreams[t][0]
                                    })
                                };
                                var t = e.RTCPeerConnection.prototype.addTrack;
                                e.RTCPeerConnection.prototype.addTrack = function(e, r) {
                                    if (!r) return t.apply(this, arguments);
                                    this._shimmedLocalStreams = this._shimmedLocalStreams || {};
                                    var a = t.apply(this, arguments);
                                    return this._shimmedLocalStreams[r.id] ? -1 === this._shimmedLocalStreams[r.id].indexOf(a) && this._shimmedLocalStreams[r.id].push(a) : this._shimmedLocalStreams[r.id] = [r, a], a
                                };
                                var r = e.RTCPeerConnection.prototype.addStream;
                                e.RTCPeerConnection.prototype.addStream = function(e) {
                                    var t = this;
                                    this._shimmedLocalStreams = this._shimmedLocalStreams || {}, e.getTracks().forEach(function(e) {
                                        var r = t.getSenders().find(function(t) {
                                            return t.track === e
                                        });
                                        if (r) throw new DOMException("Track already exists.", "InvalidAccessError")
                                    });
                                    var a = t.getSenders();
                                    r.apply(this, arguments);
                                    var n = t.getSenders().filter(function(e) {
                                        return -1 === a.indexOf(e)
                                    });
                                    this._shimmedLocalStreams[e.id] = [e].concat(n)
                                };
                                var a = e.RTCPeerConnection.prototype.removeStream;
                                e.RTCPeerConnection.prototype.removeStream = function(e) {
                                    return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, delete this._shimmedLocalStreams[e.id], a.apply(this, arguments)
                                };
                                var n = e.RTCPeerConnection.prototype.removeTrack;
                                e.RTCPeerConnection.prototype.removeTrack = function(e) {
                                    var t = this;
                                    return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, e && Object.keys(this._shimmedLocalStreams).forEach(function(r) {
                                        var a = t._shimmedLocalStreams[r].indexOf(e); - 1 !== a && t._shimmedLocalStreams[r].splice(a, 1), 1 === t._shimmedLocalStreams[r].length && delete t._shimmedLocalStreams[r]
                                    }), n.apply(this, arguments)
                                }
                            },
                            shimAddTrackRemoveTrack: function(e) {
                                function t(e, t) {
                                    var r = t.sdp;
                                    return Object.keys(e._reverseStreams || []).forEach(function(t) {
                                        var a = e._reverseStreams[t],
                                            n = e._streams[a.id];
                                        r = r.replace(new RegExp(n.id, "g"), a.id)
                                    }), new RTCSessionDescription({
                                        type: t.type,
                                        sdp: r
                                    })
                                }

                                function r(e, t) {
                                    var r = t.sdp;
                                    return Object.keys(e._reverseStreams || []).forEach(function(t) {
                                        var a = e._reverseStreams[t],
                                            n = e._streams[a.id];
                                        r = r.replace(new RegExp(a.id, "g"), n.id)
                                    }), new RTCSessionDescription({
                                        type: t.type,
                                        sdp: r
                                    })
                                }
                                var a = n.detectBrowser(e);
                                if (e.RTCPeerConnection.prototype.addTrack && 65 <= a.version) return this.shimAddTrackRemoveTrackWithNative(e);
                                var i = e.RTCPeerConnection.prototype.getLocalStreams;
                                e.RTCPeerConnection.prototype.getLocalStreams = function() {
                                    var e = this,
                                        t = i.apply(this);
                                    return e._reverseStreams = e._reverseStreams || {}, t.map(function(t) {
                                        return e._reverseStreams[t.id]
                                    })
                                };
                                var o = e.RTCPeerConnection.prototype.addStream;
                                e.RTCPeerConnection.prototype.addStream = function(t) {
                                    var r = this;
                                    if (r._streams = r._streams || {}, r._reverseStreams = r._reverseStreams || {}, t.getTracks().forEach(function(e) {
                                            var t = r.getSenders().find(function(t) {
                                                return t.track === e
                                            });
                                            if (t) throw new DOMException("Track already exists.", "InvalidAccessError")
                                        }), !r._reverseStreams[t.id]) {
                                        var a = new e.MediaStream(t.getTracks());
                                        r._streams[t.id] = a, r._reverseStreams[a.id] = t, t = a
                                    }
                                    o.apply(r, [t])
                                };
                                var s = e.RTCPeerConnection.prototype.removeStream;
                                e.RTCPeerConnection.prototype.removeStream = function(e) {
                                    var t = this;
                                    t._streams = t._streams || {}, t._reverseStreams = t._reverseStreams || {}, s.apply(t, [t._streams[e.id] || e]), delete t._reverseStreams[t._streams[e.id] ? t._streams[e.id].id : e.id], delete t._streams[e.id]
                                }, e.RTCPeerConnection.prototype.addTrack = function(r, t) {
                                    var a = this;
                                    if ("closed" === a.signalingState) throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError");
                                    var n = [].slice.call(arguments, 1);
                                    if (1 !== n.length || !n[0].getTracks().find(function(e) {
                                            return e === r
                                        })) throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.", "NotSupportedError");
                                    var i = a.getSenders().find(function(e) {
                                        return e.track === r
                                    });
                                    if (i) throw new DOMException("Track already exists.", "InvalidAccessError");
                                    a._streams = a._streams || {}, a._reverseStreams = a._reverseStreams || {};
                                    var o = a._streams[t.id];
                                    if (o) o.addTrack(r), Promise.resolve().then(function() {
                                        a.dispatchEvent(new Event("negotiationneeded"))
                                    });
                                    else {
                                        var s = new e.MediaStream([r]);
                                        a._streams[t.id] = s, a._reverseStreams[s.id] = t, a.addStream(s)
                                    }
                                    return a.getSenders().find(function(e) {
                                        return e.track === r
                                    })
                                }, ["createOffer", "createAnswer"].forEach(function(r) {
                                    var a = e.RTCPeerConnection.prototype[r];
                                    e.RTCPeerConnection.prototype[r] = function() {
                                        var e = this,
                                            r = arguments,
                                            n = arguments.length && "function" === typeof arguments[0];
                                        return n ? a.apply(e, [function(a) {
                                            var n = t(e, a);
                                            r[0].apply(null, [n])
                                        }, function(e) {
                                            r[1] && r[1].apply(null, e)
                                        }, arguments[2]]) : a.apply(e, arguments).then(function(r) {
                                            return t(e, r)
                                        })
                                    }
                                });
                                var c = e.RTCPeerConnection.prototype.setLocalDescription;
                                e.RTCPeerConnection.prototype.setLocalDescription = function() {
                                    var e = this;
                                    return arguments.length && arguments[0].type ? (arguments[0] = r(e, arguments[0]), c.apply(e, arguments)) : c.apply(e, arguments)
                                };
                                var d = Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype, "localDescription");
                                Object.defineProperty(e.RTCPeerConnection.prototype, "localDescription", {
                                    get: function() {
                                        var e = this,
                                            r = d.get.apply(this);
                                        return "" === r.type ? r : t(e, r)
                                    }
                                }), e.RTCPeerConnection.prototype.removeTrack = function(e) {
                                    var t = this;
                                    if ("closed" === t.signalingState) throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError");
                                    if (!e._pc) throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.", "TypeError");
                                    var r = e._pc === t;
                                    if (!r) throw new DOMException("Sender was not created by this connection.", "InvalidAccessError");
                                    t._streams = t._streams || {};
                                    var a;
                                    Object.keys(t._streams).forEach(function(r) {
                                        var n = t._streams[r].getTracks().find(function(t) {
                                            return e.track === t
                                        });
                                        n && (a = t._streams[r])
                                    }), a && (1 === a.getTracks().length ? t.removeStream(t._reverseStreams[a.id]) : a.removeTrack(e.track), t.dispatchEvent(new Event("negotiationneeded")))
                                }
                            },
                            shimPeerConnection: function(e) {
                                var t = n.detectBrowser(e);
                                if (!e.RTCPeerConnection && e.webkitRTCPeerConnection) e.RTCPeerConnection = function(t, r) {
                                    return i("PeerConnection"), t && t.iceTransportPolicy && (t.iceTransports = t.iceTransportPolicy), new e.webkitRTCPeerConnection(t, r)
                                }, e.RTCPeerConnection.prototype = e.webkitRTCPeerConnection.prototype, e.webkitRTCPeerConnection.generateCertificate && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
                                    get: function() {
                                        return e.webkitRTCPeerConnection.generateCertificate
                                    }
                                });
                                else {
                                    var r = e.RTCPeerConnection;
                                    e.RTCPeerConnection = function(e, t) {
                                        if (e && e.iceServers) {
                                            for (var a, o = [], s = 0; s < e.iceServers.length; s++) a = e.iceServers[s], !a.hasOwnProperty("urls") && a.hasOwnProperty("url") ? (n.deprecated("RTCIceServer.url", "RTCIceServer.urls"), a = JSON.parse(JSON.stringify(a)), a.urls = a.url, o.push(a)) : o.push(e.iceServers[s]);
                                            e.iceServers = o
                                        }
                                        return new r(e, t)
                                    }, e.RTCPeerConnection.prototype = r.prototype, Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
                                        get: function() {
                                            return r.generateCertificate
                                        }
                                    })
                                }
                                var a = e.RTCPeerConnection.prototype.getStats;
                                e.RTCPeerConnection.prototype.getStats = function(e, t, r) {
                                    var n = this,
                                        i = arguments;
                                    if (0 < arguments.length && "function" === typeof e) return a.apply(this, arguments);
                                    if (0 === a.length && (0 === arguments.length || "function" !== typeof arguments[0])) return a.apply(this, []);
                                    var o = function(e) {
                                            var t = {},
                                                r = e.result();
                                            return r.forEach(function(e) {
                                                var r = {
                                                    id: e.id,
                                                    timestamp: e.timestamp,
                                                    type: {
                                                        localcandidate: "local-candidate",
                                                        remotecandidate: "remote-candidate"
                                                    } [e.type] || e.type
                                                };
                                                e.names().forEach(function(t) {
                                                    r[t] = e.stat(t)
                                                }), t[r.id] = r
                                            }), t
                                        },
                                        s = function(e) {
                                            return new Map(Object.keys(e).map(function(t) {
                                                return [t, e[t]]
                                            }))
                                        };
                                    if (2 <= arguments.length) {
                                        var c = function(e) {
                                            i[1](s(o(e)))
                                        };
                                        return a.apply(this, [c, arguments[0]])
                                    }
                                    return new Promise(function(e, t) {
                                        a.apply(n, [function(t) {
                                            e(s(o(t)))
                                        }, t])
                                    }).then(t, r)
                                }, 51 > t.version && ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function(t) {
                                    var r = e.RTCPeerConnection.prototype[t];
                                    e.RTCPeerConnection.prototype[t] = function() {
                                        var e = arguments,
                                            t = this,
                                            a = new Promise(function(a, n) {
                                                r.apply(t, [e[0], a, n])
                                            });
                                        return 2 > e.length ? a : a.then(function() {
                                            e[1].apply(null, [])
                                        }, function(t) {
                                            3 <= e.length && e[2].apply(null, [t])
                                        })
                                    }
                                }), 52 > t.version && ["createOffer", "createAnswer"].forEach(function(t) {
                                    var r = e.RTCPeerConnection.prototype[t];
                                    e.RTCPeerConnection.prototype[t] = function() {
                                        var e = this;
                                        if (1 > arguments.length || 1 === arguments.length && "object" === typeof arguments[0]) {
                                            var t = 1 === arguments.length ? arguments[0] : void 0;
                                            return new Promise(function(a, n) {
                                                r.apply(e, [a, n, t])
                                            })
                                        }
                                        return r.apply(this, arguments)
                                    }
                                }), ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function(t) {
                                    var r = e.RTCPeerConnection.prototype[t];
                                    e.RTCPeerConnection.prototype[t] = function() {
                                        return arguments[0] = new("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), r.apply(this, arguments)
                                    }
                                });
                                var o = e.RTCPeerConnection.prototype.addIceCandidate;
                                e.RTCPeerConnection.prototype.addIceCandidate = function() {
                                    return arguments[0] ? o.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Promise.resolve())
                                }
                            }
                        }
                    }, {
                        "../utils.js": 14,
                        "./getusermedia": 6
                    }],
                    6: [function(e, t) {
                        "use strict";
                        var r = e("../utils.js"),
                            a = r.log;
                        t.exports = function(e) {
                            var t = r.detectBrowser(e),
                                n = e && e.navigator,
                                i = function(e) {
                                    if ("object" !== typeof e || e.mandatory || e.optional) return e;
                                    var t = {};
                                    return Object.keys(e).forEach(function(a) {
                                        if ("require" !== a && "advanced" !== a && "mediaSource" !== a) {
                                            var n = "object" === typeof e[a] ? e[a] : {
                                                ideal: e[a]
                                            };
                                            void 0 !== n.exact && "number" === typeof n.exact && (n.min = n.max = n.exact);
                                            var r = function(e, t) {
                                                return e ? e + t.charAt(0).toUpperCase() + t.slice(1) : "deviceId" === t ? "sourceId" : t
                                            };
                                            if (void 0 !== n.ideal) {
                                                t.optional = t.optional || [];
                                                var i = {};
                                                "number" === typeof n.ideal ? (i[r("min", a)] = n.ideal, t.optional.push(i), i = {}, i[r("max", a)] = n.ideal, t.optional.push(i)) : (i[r("", a)] = n.ideal, t.optional.push(i))
                                            }
                                            void 0 !== n.exact && "number" !== typeof n.exact ? (t.mandatory = t.mandatory || {}, t.mandatory[r("", a)] = n.exact) : ["min", "max"].forEach(function(e) {
                                                void 0 !== n[e] && (t.mandatory = t.mandatory || {}, t.mandatory[r(e, a)] = n[e])
                                            })
                                        }
                                    }), e.advanced && (t.optional = (t.optional || []).concat(e.advanced)), t
                                },
                                o = function(e, r) {
                                    if (61 <= t.version) return r(e);
                                    if (e = JSON.parse(JSON.stringify(e)), e && "object" === typeof e.audio) {
                                        var o = function(e, t, r) {
                                            t in e && !(r in e) && (e[r] = e[t], delete e[t])
                                        };
                                        e = JSON.parse(JSON.stringify(e)), o(e.audio, "autoGainControl", "googAutoGainControl"), o(e.audio, "noiseSuppression", "googNoiseSuppression"), e.audio = i(e.audio)
                                    }
                                    if (e && "object" === typeof e.video) {
                                        var s = e.video.facingMode;
                                        s = s && ("object" === typeof s ? s : {
                                            ideal: s
                                        });
                                        var c = 66 > t.version;
                                        if (s && ("user" === s.exact || "environment" === s.exact || "user" === s.ideal || "environment" === s.ideal) && !(n.mediaDevices.getSupportedConstraints && n.mediaDevices.getSupportedConstraints().facingMode && !c)) {
                                            delete e.video.facingMode;
                                            var p;
                                            if ("environment" === s.exact || "environment" === s.ideal ? p = ["back", "rear"] : ("user" === s.exact || "user" === s.ideal) && (p = ["front"]), p) return n.mediaDevices.enumerateDevices().then(function(t) {
                                                t = t.filter(function(e) {
                                                    return "videoinput" === e.kind
                                                });
                                                var n = t.find(function(e) {
                                                    return p.some(function(t) {
                                                        return -1 !== e.label.toLowerCase().indexOf(t)
                                                    })
                                                });
                                                return !n && t.length && -1 !== p.indexOf("back") && (n = t[t.length - 1]), n && (e.video.deviceId = s.exact ? {
                                                    exact: n.deviceId
                                                } : {
                                                    ideal: n.deviceId
                                                }), e.video = i(e.video), a("chrome: " + JSON.stringify(e)), r(e)
                                            })
                                        }
                                        e.video = i(e.video)
                                    }
                                    return a("chrome: " + JSON.stringify(e)), r(e)
                                },
                                s = function(t) {
                                    return {
                                        name: {
                                            PermissionDeniedError: "NotAllowedError",
                                            PermissionDismissedError: "NotAllowedError",
                                            InvalidStateError: "NotAllowedError",
                                            DevicesNotFoundError: "NotFoundError",
                                            ConstraintNotSatisfiedError: "OverconstrainedError",
                                            TrackStartError: "NotReadableError",
                                            MediaDeviceFailedDueToShutdown: "NotAllowedError",
                                            MediaDeviceKillSwitchOn: "NotAllowedError",
                                            TabCaptureError: "AbortError",
                                            ScreenCaptureError: "AbortError",
                                            DeviceCaptureError: "AbortError"
                                        } [t.name] || t.name,
                                        message: t.message,
                                        constraint: t.constraintName,
                                        toString: function() {
                                            return this.name + (this.message && ": ") + this.message
                                        }
                                    }
                                };
                            n.getUserMedia = function(e, t, r) {
                                o(e, function(e) {
                                    n.webkitGetUserMedia(e, t, function(t) {
                                        r && r(s(t))
                                    })
                                })
                            };
                            var c = function(e) {
                                return new Promise(function(t, r) {
                                    n.getUserMedia(e, t, r)
                                })
                            };
                            if (n.mediaDevices || (n.mediaDevices = {
                                    getUserMedia: c,
                                    enumerateDevices: function() {
                                        return new Promise(function(t) {
                                            var r = {
                                                audio: "audioinput",
                                                video: "videoinput"
                                            };
                                            return e.MediaStreamTrack.getSources(function(e) {
                                                t(e.map(function(e) {
                                                    return {
                                                        label: e.label,
                                                        kind: r[e.kind],
                                                        deviceId: e.id,
                                                        groupId: ""
                                                    }
                                                }))
                                            })
                                        })
                                    },
                                    getSupportedConstraints: function() {
                                        return {
                                            deviceId: !0,
                                            echoCancellation: !0,
                                            facingMode: !0,
                                            frameRate: !0,
                                            height: !0,
                                            width: !0
                                        }
                                    }
                                }), !n.mediaDevices.getUserMedia) n.mediaDevices.getUserMedia = function(e) {
                                return c(e)
                            };
                            else {
                                var d = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
                                n.mediaDevices.getUserMedia = function(e) {
                                    return o(e, function(e) {
                                        return d(e).then(function(t) {
                                            if (e.audio && !t.getAudioTracks().length || e.video && !t.getVideoTracks().length) throw t.getTracks().forEach(function(e) {
                                                e.stop()
                                            }), new DOMException("", "NotFoundError");
                                            return t
                                        }, function(t) {
                                            return Promise.reject(s(t))
                                        })
                                    })
                                }
                            }
                            "undefined" === typeof n.mediaDevices.addEventListener && (n.mediaDevices.addEventListener = function() {
                                a("Dummy mediaDevices.addEventListener called.")
                            }), "undefined" === typeof n.mediaDevices.removeEventListener && (n.mediaDevices.removeEventListener = function() {
                                a("Dummy mediaDevices.removeEventListener called.")
                            })
                        }
                    }, {
                        "../utils.js": 14
                    }],
                    7: [function(t, r) {
                        "use strict";
                        var a = t("sdp"),
                            n = t("./utils");
                        r.exports = {
                            shimRTCIceCandidate: function(t) {
                                if (!(!t.RTCIceCandidate || t.RTCIceCandidate && "foundation" in t.RTCIceCandidate.prototype)) {
                                    var e = t.RTCIceCandidate;
                                    t.RTCIceCandidate = function(t) {
                                        if ("object" === typeof t && t.candidate && 0 === t.candidate.indexOf("a=") && (t = JSON.parse(JSON.stringify(t)), t.candidate = t.candidate.substr(2)), t.candidate && t.candidate.length) {
                                            var r = new e(t),
                                                n = a.parseCandidate(t.candidate),
                                                i = Object.assign(r, n);
                                            return i.toJSON = function() {
                                                return {
                                                    candidate: i.candidate,
                                                    sdpMid: i.sdpMid,
                                                    sdpMLineIndex: i.sdpMLineIndex,
                                                    usernameFragment: i.usernameFragment
                                                }
                                            }, i
                                        }
                                        return new e(t)
                                    }, t.RTCIceCandidate.prototype = e.prototype, n.wrapPeerConnectionEvent(t, "icecandidate", function(r) {
                                        return r.candidate && Object.defineProperty(r, "candidate", {
                                            value: new t.RTCIceCandidate(r.candidate),
                                            writable: "false"
                                        }), r
                                    })
                                }
                            },
                            shimCreateObjectURL: function(e) {
                                var t = e && e.URL;
                                if ("object" === typeof e && e.HTMLMediaElement && "srcObject" in e.HTMLMediaElement.prototype && t.createObjectURL && t.revokeObjectURL) {
                                    var r = t.createObjectURL.bind(t),
                                        a = t.revokeObjectURL.bind(t),
                                        i = new Map,
                                        o = 0;
                                    t.createObjectURL = function(e) {
                                        if ("getTracks" in e) {
                                            var t = "polyblob:" + ++o;
                                            return i.set(t, e), n.deprecated("URL.createObjectURL(stream)", "elem.srcObject = stream"), t
                                        }
                                        return r(e)
                                    }, t.revokeObjectURL = function(e) {
                                        a(e), i.delete(e)
                                    };
                                    var s = Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype, "src");
                                    Object.defineProperty(e.HTMLMediaElement.prototype, "src", {
                                        get: function() {
                                            return s.get.apply(this)
                                        },
                                        set: function(e) {
                                            return this.srcObject = i.get(e) || null, s.set.apply(this, [e])
                                        }
                                    });
                                    var c = e.HTMLMediaElement.prototype.setAttribute;
                                    e.HTMLMediaElement.prototype.setAttribute = function() {
                                        return 2 === arguments.length && "src" === ("" + arguments[0]).toLowerCase() && (this.srcObject = i.get(arguments[1]) || null), c.apply(this, arguments)
                                    }
                                }
                            },
                            shimMaxMessageSize: function(t) {
                                if (!t.RTCSctpTransport && t.RTCPeerConnection) {
                                    var r = n.detectBrowser(t);
                                    "sctp" in t.RTCPeerConnection.prototype || Object.defineProperty(t.RTCPeerConnection.prototype, "sctp", {
                                        get: function() {
                                            return "undefined" === typeof this._sctp ? null : this._sctp
                                        }
                                    });
                                    var i = function(e) {
                                            var t = a.splitSections(e.sdp);
                                            return t.shift(), t.some(function(e) {
                                                var t = a.parseMLine(e);
                                                return t && "application" === t.kind && -1 !== t.protocol.indexOf("SCTP")
                                            })
                                        },
                                        o = function(e) {
                                            var t = e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
                                            if (null === t || 2 > t.length) return -1;
                                            var r = parseInt(t[1], 10);
                                            return r === r ? r : -1
                                        },
                                        s = function(e) {
                                            var t = 65536;
                                            return "firefox" === r.browser && (57 > r.version ? -1 === e ? t = 16384 : t = 2147483637 : 60 > r.version ? t = 57 === r.version ? 65535 : 65536 : t = 2147483637), t
                                        },
                                        c = function(e, t) {
                                            var n = 65536;
                                            "firefox" === r.browser && 57 === r.version && (n = 65535);
                                            var i = a.matchPrefix(e.sdp, "a=max-message-size:");
                                            return 0 < i.length ? n = parseInt(i[0].substr(19), 10) : "firefox" === r.browser && -1 !== t && (n = 2147483637), n
                                        },
                                        d = t.RTCPeerConnection.prototype.setRemoteDescription;
                                    t.RTCPeerConnection.prototype.setRemoteDescription = function() {
                                        var t = this;
                                        if (t._sctp = null, i(arguments[0])) {
                                            var r, a = o(arguments[0]),
                                                n = s(a),
                                                p = c(arguments[0], a);
                                            r = 0 === n && 0 === p ? Number.POSITIVE_INFINITY : 0 === n || 0 === p ? Math.max(n, p) : e(n, p);
                                            var m = {};
                                            Object.defineProperty(m, "maxMessageSize", {
                                                get: function() {
                                                    return r
                                                }
                                            }), t._sctp = m
                                        }
                                        return d.apply(t, arguments)
                                    }
                                }
                            },
                            shimSendThrowTypeError: function(e) {
                                function t(e, t) {
                                    var r = e.send;
                                    e.send = function() {
                                        var a = arguments[0],
                                            n = a.length || a.size || a.byteLength;
                                        if ("open" === e.readyState && t.sctp && n > t.sctp.maxMessageSize) throw new TypeError("Message too large (can send a maximum of " + t.sctp.maxMessageSize + " bytes)");
                                        return r.apply(e, arguments)
                                    }
                                }
                                if (e.RTCPeerConnection && "createDataChannel" in e.RTCPeerConnection.prototype) {
                                    var r = e.RTCPeerConnection.prototype.createDataChannel;
                                    e.RTCPeerConnection.prototype.createDataChannel = function() {
                                        var e = this,
                                            a = r.apply(e, arguments);
                                        return t(a, e), a
                                    }, n.wrapPeerConnectionEvent(e, "datachannel", function(r) {
                                        return t(r.channel, r.target), r
                                    })
                                }
                            }
                        }
                    }, {
                        "./utils": 14,
                        sdp: 2
                    }],
                    8: [function(e, t) {
                        "use strict";
                        var r = e("../utils"),
                            a = e("./filtericeservers"),
                            n = e("rtcpeerconnection-shim");
                        t.exports = {
                            shimGetUserMedia: e("./getusermedia"),
                            shimPeerConnection: function(e) {
                                var t = r.detectBrowser(e);
                                if (e.RTCIceGatherer && (e.RTCIceCandidate || (e.RTCIceCandidate = function(e) {
                                        return e
                                    }), e.RTCSessionDescription || (e.RTCSessionDescription = function(e) {
                                        return e
                                    }), 15025 > t.version)) {
                                    var i = Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype, "enabled");
                                    Object.defineProperty(e.MediaStreamTrack.prototype, "enabled", {
                                        set: function(e) {
                                            i.set.call(this, e);
                                            var t = new Event("enabled");
                                            t.enabled = e, this.dispatchEvent(t)
                                        }
                                    })
                                }
                                e.RTCRtpSender && !("dtmf" in e.RTCRtpSender.prototype) && Object.defineProperty(e.RTCRtpSender.prototype, "dtmf", {
                                    get: function() {
                                        return void 0 === this._dtmf && ("audio" === this.track.kind ? this._dtmf = new e.RTCDtmfSender(this) : "video" === this.track.kind && (this._dtmf = null)), this._dtmf
                                    }
                                }), e.RTCDtmfSender && !e.RTCDTMFSender && (e.RTCDTMFSender = e.RTCDtmfSender);
                                var o = n(e, t.version);
                                e.RTCPeerConnection = function(e) {
                                    return e && e.iceServers && (e.iceServers = a(e.iceServers)), new o(e)
                                }, e.RTCPeerConnection.prototype = o.prototype
                            },
                            shimReplaceTrack: function(e) {
                                e.RTCRtpSender && !("replaceTrack" in e.RTCRtpSender.prototype) && (e.RTCRtpSender.prototype.replaceTrack = e.RTCRtpSender.prototype.setTrack)
                            }
                        }
                    }, {
                        "../utils": 14,
                        "./filtericeservers": 9,
                        "./getusermedia": 10,
                        "rtcpeerconnection-shim": 1
                    }],
                    9: [function(e, t) {
                        "use strict";
                        var r = e("../utils");
                        t.exports = function(e, t) {
                            var a = !1;
                            return e = JSON.parse(JSON.stringify(e)), e.filter(function(e) {
                                if (e && (e.urls || e.url)) {
                                    var n = e.urls || e.url;
                                    e.url && !e.urls && r.deprecated("RTCIceServer.url", "RTCIceServer.urls");
                                    var i = "string" === typeof n;
                                    return i && (n = [n]), n = n.filter(function(e) {
                                        var r = 0 === e.indexOf("turn:") && -1 !== e.indexOf("transport=udp") && -1 === e.indexOf("turn:[") && !a;
                                        return r ? (a = !0, !0) : 0 === e.indexOf("stun:") && 14393 <= t && -1 === e.indexOf("?transport=udp")
                                    }), delete e.url, e.urls = i ? n[0] : n, !!n.length
                                }
                            })
                        }
                    }, {
                        "../utils": 14
                    }],
                    10: [function(e, t) {
                        "use strict";
                        t.exports = function(e) {
                            var t = e && e.navigator,
                                r = function(t) {
                                    return {
                                        name: {
                                            PermissionDeniedError: "NotAllowedError"
                                        } [t.name] || t.name,
                                        message: t.message,
                                        constraint: t.constraint,
                                        toString: function() {
                                            return this.name
                                        }
                                    }
                                },
                                a = t.mediaDevices.getUserMedia.bind(t.mediaDevices);
                            t.mediaDevices.getUserMedia = function(e) {
                                return a(e).catch(function(t) {
                                    return Promise.reject(r(t))
                                })
                            }
                        }
                    }, {}],
                    11: [function(e, t) {
                        "use strict";
                        var r = e("../utils");
                        t.exports = {
                            shimGetUserMedia: e("./getusermedia"),
                            shimOnTrack: function(e) {
                                "object" === typeof e && e.RTCPeerConnection && !("ontrack" in e.RTCPeerConnection.prototype) && Object.defineProperty(e.RTCPeerConnection.prototype, "ontrack", {
                                    get: function() {
                                        return this._ontrack
                                    },
                                    set: function(e) {
                                        this._ontrack && (this.removeEventListener("track", this._ontrack), this.removeEventListener("addstream", this._ontrackpoly)), this.addEventListener("track", this._ontrack = e), this.addEventListener("addstream", this._ontrackpoly = function(t) {
                                            t.stream.getTracks().forEach(function(e) {
                                                var r = new Event("track");
                                                r.track = e, r.receiver = {
                                                    track: e
                                                }, r.transceiver = {
                                                    receiver: r.receiver
                                                }, r.streams = [t.stream], this.dispatchEvent(r)
                                            }.bind(this))
                                        }.bind(this))
                                    }
                                }), "object" === typeof e && e.RTCTrackEvent && "receiver" in e.RTCTrackEvent.prototype && !("transceiver" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
                                    get: function() {
                                        return {
                                            receiver: this.receiver
                                        }
                                    }
                                })
                            },
                            shimSourceObject: function(e) {
                                "object" === typeof e && e.HTMLMediaElement && !("srcObject" in e.HTMLMediaElement.prototype) && Object.defineProperty(e.HTMLMediaElement.prototype, "srcObject", {
                                    get: function() {
                                        return this.mozSrcObject
                                    },
                                    set: function(e) {
                                        this.mozSrcObject = e
                                    }
                                })
                            },
                            shimPeerConnection: function(e) {
                                var t = r.detectBrowser(e);
                                if ("object" === typeof e && (e.RTCPeerConnection || e.mozRTCPeerConnection)) {
                                    e.RTCPeerConnection || (e.RTCPeerConnection = function(r, a) {
                                        if (38 > t.version && r && r.iceServers) {
                                            for (var n, o = [], s = 0; s < r.iceServers.length; s++)
                                                if (n = r.iceServers[s], n.hasOwnProperty("urls"))
                                                    for (var i, c = 0; c < n.urls.length; c++) i = {
                                                        url: n.urls[c]
                                                    }, 0 === n.urls[c].indexOf("turn") && (i.username = n.username, i.credential = n.credential), o.push(i);
                                                else o.push(r.iceServers[s]);
                                            r.iceServers = o
                                        }
                                        return new e.mozRTCPeerConnection(r, a)
                                    }, e.RTCPeerConnection.prototype = e.mozRTCPeerConnection.prototype, e.mozRTCPeerConnection.generateCertificate && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
                                        get: function() {
                                            return e.mozRTCPeerConnection.generateCertificate
                                        }
                                    }), e.RTCSessionDescription = e.mozRTCSessionDescription, e.RTCIceCandidate = e.mozRTCIceCandidate), ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function(t) {
                                        var r = e.RTCPeerConnection.prototype[t];
                                        e.RTCPeerConnection.prototype[t] = function() {
                                            return arguments[0] = new("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), r.apply(this, arguments)
                                        }
                                    });
                                    var a = e.RTCPeerConnection.prototype.addIceCandidate;
                                    e.RTCPeerConnection.prototype.addIceCandidate = function() {
                                        return arguments[0] ? a.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Promise.resolve())
                                    };
                                    var n = function(e) {
                                            var t = new Map;
                                            return Object.keys(e).forEach(function(r) {
                                                t.set(r, e[r]), t[r] = e[r]
                                            }), t
                                        },
                                        o = {
                                            inboundrtp: "inbound-rtp",
                                            outboundrtp: "outbound-rtp",
                                            candidatepair: "candidate-pair",
                                            localcandidate: "local-candidate",
                                            remotecandidate: "remote-candidate"
                                        },
                                        i = e.RTCPeerConnection.prototype.getStats;
                                    e.RTCPeerConnection.prototype.getStats = function(e, r, a) {
                                        return i.apply(this, [e || null]).then(function(a) {
                                            if (48 > t.version && (a = n(a)), 53 > t.version && !r) try {
                                                a.forEach(function(e) {
                                                    e.type = o[e.type] || e.type
                                                })
                                            } catch (t) {
                                                if ("TypeError" !== t.name) throw t;
                                                a.forEach(function(e, t) {
                                                    a.set(t, Object.assign({}, e, {
                                                        type: o[e.type] || e.type
                                                    }))
                                                })
                                            }
                                            return a
                                        }).then(r, a)
                                    }
                                }
                            },
                            shimSenderGetStats: function(e) {
                                if ("object" === typeof e && e.RTCPeerConnection && e.RTCRtpSender && !(e.RTCRtpSender && "getStats" in e.RTCRtpSender.prototype)) {
                                    var t = e.RTCPeerConnection.prototype.getSenders;
                                    t && (e.RTCPeerConnection.prototype.getSenders = function() {
                                        var e = this,
                                            r = t.apply(e, []);
                                        return r.forEach(function(t) {
                                            t._pc = e
                                        }), r
                                    });
                                    var r = e.RTCPeerConnection.prototype.addTrack;
                                    r && (e.RTCPeerConnection.prototype.addTrack = function() {
                                        var e = r.apply(this, arguments);
                                        return e._pc = this, e
                                    }), e.RTCRtpSender.prototype.getStats = function() {
                                        return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map)
                                    }
                                }
                            },
                            shimReceiverGetStats: function(e) {
                                if ("object" === typeof e && e.RTCPeerConnection && e.RTCRtpSender && !(e.RTCRtpSender && "getStats" in e.RTCRtpReceiver.prototype)) {
                                    var t = e.RTCPeerConnection.prototype.getReceivers;
                                    t && (e.RTCPeerConnection.prototype.getReceivers = function() {
                                        var e = this,
                                            r = t.apply(e, []);
                                        return r.forEach(function(t) {
                                            t._pc = e
                                        }), r
                                    }), r.wrapPeerConnectionEvent(e, "track", function(t) {
                                        return t.receiver._pc = t.srcElement, t
                                    }), e.RTCRtpReceiver.prototype.getStats = function() {
                                        return this._pc.getStats(this.track)
                                    }
                                }
                            },
                            shimRemoveStream: function(e) {
                                !e.RTCPeerConnection || "removeStream" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function(e) {
                                    var t = this;
                                    r.deprecated("removeStream", "removeTrack"), this.getSenders().forEach(function(r) {
                                        r.track && -1 !== e.getTracks().indexOf(r.track) && t.removeTrack(r)
                                    })
                                })
                            },
                            shimRTCDataChannel: function(e) {
                                e.DataChannel && !e.RTCDataChannel && (e.RTCDataChannel = e.DataChannel)
                            }
                        }
                    }, {
                        "../utils": 14,
                        "./getusermedia": 12
                    }],
                    12: [function(e, t) {
                        "use strict";
                        var r = e("../utils"),
                            a = r.log;
                        t.exports = function(e) {
                            var t = r.detectBrowser(e),
                                n = e && e.navigator,
                                i = e && e.MediaStreamTrack,
                                o = function(t) {
                                    return {
                                        name: {
                                            InternalError: "NotReadableError",
                                            NotSupportedError: "TypeError",
                                            PermissionDeniedError: "NotAllowedError",
                                            SecurityError: "NotAllowedError"
                                        } [t.name] || t.name,
                                        message: {
                                            "The operation is insecure.": "The request is not allowed by the user agent or the platform in the current context."
                                        } [t.message] || t.message,
                                        constraint: t.constraint,
                                        toString: function() {
                                            return this.name + (this.message && ": ") + this.message
                                        }
                                    }
                                },
                                s = function(e, r, i) {
                                    var s = function(e) {
                                        if ("object" !== typeof e || e.require) return e;
                                        var t = [];
                                        return Object.keys(e).forEach(function(a) {
                                            if ("require" !== a && "advanced" !== a && "mediaSource" !== a) {
                                                var n = e[a] = "object" === typeof e[a] ? e[a] : {
                                                    ideal: e[a]
                                                };
                                                if ((void 0 !== n.min || void 0 !== n.max || void 0 !== n.exact) && t.push(a), void 0 !== n.exact && ("number" === typeof n.exact ? n.min = n.max = n.exact : e[a] = n.exact, delete n.exact), void 0 !== n.ideal) {
                                                    e.advanced = e.advanced || [];
                                                    var r = {};
                                                    r[a] = "number" === typeof n.ideal ? {
                                                        min: n.ideal,
                                                        max: n.ideal
                                                    } : n.ideal, e.advanced.push(r), delete n.ideal, Object.keys(n).length || delete e[a]
                                                }
                                            }
                                        }), t.length && (e.require = t), e
                                    };
                                    return e = JSON.parse(JSON.stringify(e)), 38 > t.version && (a("spec: " + JSON.stringify(e)), e.audio && (e.audio = s(e.audio)), e.video && (e.video = s(e.video)), a("ff37: " + JSON.stringify(e))), n.mozGetUserMedia(e, r, function(t) {
                                        i(o(t))
                                    })
                                };
                            if (n.mediaDevices || (n.mediaDevices = {
                                    getUserMedia: function(e) {
                                        return new Promise(function(t, r) {
                                            s(e, t, r)
                                        })
                                    },
                                    addEventListener: function() {},
                                    removeEventListener: function() {}
                                }), n.mediaDevices.enumerateDevices = n.mediaDevices.enumerateDevices || function() {
                                    return new Promise(function(e) {
                                        e([{
                                            kind: "audioinput",
                                            deviceId: "default",
                                            label: "",
                                            groupId: ""
                                        }, {
                                            kind: "videoinput",
                                            deviceId: "default",
                                            label: "",
                                            groupId: ""
                                        }])
                                    })
                                }, 41 > t.version) {
                                var c = n.mediaDevices.enumerateDevices.bind(n.mediaDevices);
                                n.mediaDevices.enumerateDevices = function() {
                                    return c().then(void 0, function(t) {
                                        if ("NotFoundError" === t.name) return [];
                                        throw t
                                    })
                                }
                            }
                            if (49 > t.version) {
                                var d = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
                                n.mediaDevices.getUserMedia = function(e) {
                                    return d(e).then(function(t) {
                                        if (e.audio && !t.getAudioTracks().length || e.video && !t.getVideoTracks().length) throw t.getTracks().forEach(function(e) {
                                            e.stop()
                                        }), new DOMException("The object can not be found here.", "NotFoundError");
                                        return t
                                    }, function(t) {
                                        return Promise.reject(o(t))
                                    })
                                }
                            }
                            if (!(55 < t.version && "autoGainControl" in n.mediaDevices.getSupportedConstraints())) {
                                var p = function(e, t, r) {
                                        t in e && !(r in e) && (e[r] = e[t], delete e[t])
                                    },
                                    m = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
                                if (n.mediaDevices.getUserMedia = function(e) {
                                        return "object" === typeof e && "object" === typeof e.audio && (e = JSON.parse(JSON.stringify(e)), p(e.audio, "autoGainControl", "mozAutoGainControl"), p(e.audio, "noiseSuppression", "mozNoiseSuppression")), m(e)
                                    }, i && i.prototype.getSettings) {
                                    var l = i.prototype.getSettings;
                                    i.prototype.getSettings = function() {
                                        var e = l.apply(this, arguments);
                                        return p(e, "mozAutoGainControl", "autoGainControl"), p(e, "mozNoiseSuppression", "noiseSuppression"), e
                                    }
                                }
                                if (i && i.prototype.applyConstraints) {
                                    var h = i.prototype.applyConstraints;
                                    i.prototype.applyConstraints = function(e) {
                                        return "audio" === this.kind && "object" === typeof e && (e = JSON.parse(JSON.stringify(e)), p(e, "autoGainControl", "mozAutoGainControl"), p(e, "noiseSuppression", "mozNoiseSuppression")), h.apply(this, [e])
                                    }
                                }
                            }
                            n.getUserMedia = function(e, a, i) {
                                return 44 > t.version ? s(e, a, i) : void(r.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"), n.mediaDevices.getUserMedia(e).then(a, i))
                            }
                        }
                    }, {
                        "../utils": 14
                    }],
                    13: [function(e, t) {
                        "use strict";
                        var r = e("../utils");
                        t.exports = {
                            shimLocalStreamsAPI: function(e) {
                                if ("object" === typeof e && e.RTCPeerConnection) {
                                    if ("getLocalStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function() {
                                            return this._localStreams || (this._localStreams = []), this._localStreams
                                        }), "getStreamById" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getStreamById = function(e) {
                                            var t = null;
                                            return this._localStreams && this._localStreams.forEach(function(r) {
                                                r.id === e && (t = r)
                                            }), this._remoteStreams && this._remoteStreams.forEach(function(r) {
                                                r.id === e && (t = r)
                                            }), t
                                        }), !("addStream" in e.RTCPeerConnection.prototype)) {
                                        var t = e.RTCPeerConnection.prototype.addTrack;
                                        e.RTCPeerConnection.prototype.addStream = function(e) {
                                            this._localStreams || (this._localStreams = []), -1 === this._localStreams.indexOf(e) && this._localStreams.push(e);
                                            var r = this;
                                            e.getTracks().forEach(function(a) {
                                                t.call(r, a, e)
                                            })
                                        }, e.RTCPeerConnection.prototype.addTrack = function(e, r) {
                                            return r && (this._localStreams ? -1 === this._localStreams.indexOf(r) && this._localStreams.push(r) : this._localStreams = [r]), t.call(this, e, r)
                                        }
                                    }
                                    "removeStream" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function(e) {
                                        this._localStreams || (this._localStreams = []);
                                        var t = this._localStreams.indexOf(e);
                                        if (-1 !== t) {
                                            this._localStreams.splice(t, 1);
                                            var r = this,
                                                a = e.getTracks();
                                            this.getSenders().forEach(function(e) {
                                                -1 !== a.indexOf(e.track) && r.removeTrack(e)
                                            })
                                        }
                                    })
                                }
                            },
                            shimRemoteStreamsAPI: function(e) {
                                "object" === typeof e && e.RTCPeerConnection && (!("getRemoteStreams" in e.RTCPeerConnection.prototype) && (e.RTCPeerConnection.prototype.getRemoteStreams = function() {
                                    return this._remoteStreams ? this._remoteStreams : []
                                }), !("onaddstream" in e.RTCPeerConnection.prototype) && Object.defineProperty(e.RTCPeerConnection.prototype, "onaddstream", {
                                    get: function() {
                                        return this._onaddstream
                                    },
                                    set: function(e) {
                                        var t = this;
                                        this._onaddstream && (this.removeEventListener("addstream", this._onaddstream), this.removeEventListener("track", this._onaddstreampoly)), this.addEventListener("addstream", this._onaddstream = e), this.addEventListener("track", this._onaddstreampoly = function(r) {
                                            r.streams.forEach(function(e) {
                                                if (t._remoteStreams || (t._remoteStreams = []), !(0 <= t._remoteStreams.indexOf(e))) {
                                                    t._remoteStreams.push(e);
                                                    var r = new Event("addstream");
                                                    r.stream = e, t.dispatchEvent(r)
                                                }
                                            })
                                        })
                                    }
                                }))
                            },
                            shimCallbacksAPI: function(e) {
                                if ("object" === typeof e && e.RTCPeerConnection) {
                                    var t = e.RTCPeerConnection.prototype,
                                        r = t.createOffer,
                                        a = t.createAnswer,
                                        n = t.setLocalDescription,
                                        i = t.setRemoteDescription,
                                        o = t.addIceCandidate;
                                    t.createOffer = function(e, t) {
                                        var a = 2 <= arguments.length ? arguments[2] : arguments[0],
                                            n = r.apply(this, [a]);
                                        return t ? (n.then(e, t), Promise.resolve()) : n
                                    }, t.createAnswer = function(e, t) {
                                        var r = 2 <= arguments.length ? arguments[2] : arguments[0],
                                            n = a.apply(this, [r]);
                                        return t ? (n.then(e, t), Promise.resolve()) : n
                                    };
                                    var s = function(e, t, r) {
                                        var a = n.apply(this, [e]);
                                        return r ? (a.then(t, r), Promise.resolve()) : a
                                    };
                                    t.setLocalDescription = s, s = function(e, t, r) {
                                        var a = i.apply(this, [e]);
                                        return r ? (a.then(t, r), Promise.resolve()) : a
                                    }, t.setRemoteDescription = s, s = function(e, t, r) {
                                        var a = o.apply(this, [e]);
                                        return r ? (a.then(t, r), Promise.resolve()) : a
                                    }, t.addIceCandidate = s
                                }
                            },
                            shimGetUserMedia: function(e) {
                                var t = e && e.navigator;
                                t.getUserMedia || (t.webkitGetUserMedia ? t.getUserMedia = t.webkitGetUserMedia.bind(t) : t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = function(e, r, a) {
                                    t.mediaDevices.getUserMedia(e).then(r, a)
                                }.bind(t)))
                            },
                            shimRTCIceServerUrls: function(e) {
                                var t = e.RTCPeerConnection;
                                e.RTCPeerConnection = function(e, a) {
                                    if (e && e.iceServers) {
                                        for (var n, o = [], s = 0; s < e.iceServers.length; s++) n = e.iceServers[s], !n.hasOwnProperty("urls") && n.hasOwnProperty("url") ? (r.deprecated("RTCIceServer.url", "RTCIceServer.urls"), n = JSON.parse(JSON.stringify(n)), n.urls = n.url, delete n.url, o.push(n)) : o.push(e.iceServers[s]);
                                        e.iceServers = o
                                    }
                                    return new t(e, a)
                                }, e.RTCPeerConnection.prototype = t.prototype, "generateCertificate" in e.RTCPeerConnection && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
                                    get: function() {
                                        return t.generateCertificate
                                    }
                                })
                            },
                            shimTrackEventTransceiver: function(e) {
                                "object" === typeof e && e.RTCPeerConnection && "receiver" in e.RTCTrackEvent.prototype && !e.RTCTransceiver && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
                                    get: function() {
                                        return {
                                            receiver: this.receiver
                                        }
                                    }
                                })
                            },
                            shimCreateOfferLegacy: function(e) {
                                var t = e.RTCPeerConnection.prototype.createOffer;
                                e.RTCPeerConnection.prototype.createOffer = function(e) {
                                    var r = this;
                                    if (e) {
                                        "undefined" !== typeof e.offerToReceiveAudio && (e.offerToReceiveAudio = !!e.offerToReceiveAudio);
                                        var a = r.getTransceivers().find(function(e) {
                                            return e.sender.track && "audio" === e.sender.track.kind
                                        });
                                        !1 === e.offerToReceiveAudio && a ? "sendrecv" === a.direction ? a.setDirection ? a.setDirection("sendonly") : a.direction = "sendonly" : "recvonly" === a.direction && (a.setDirection ? a.setDirection("inactive") : a.direction = "inactive") : !0 === e.offerToReceiveAudio && !a && r.addTransceiver("audio"), "undefined" !== typeof e.offerToReceiveAudio && (e.offerToReceiveVideo = !!e.offerToReceiveVideo);
                                        var n = r.getTransceivers().find(function(e) {
                                            return e.sender.track && "video" === e.sender.track.kind
                                        });
                                        !1 === e.offerToReceiveVideo && n ? "sendrecv" === n.direction ? n.setDirection("sendonly") : "recvonly" === n.direction && n.setDirection("inactive") : !0 === e.offerToReceiveVideo && !n && r.addTransceiver("video")
                                    }
                                    return t.apply(r, arguments)
                                }
                            }
                        }
                    }, {
                        "../utils": 14
                    }],
                    14: [function(e, t) {
                        "use strict";

                        function r(e, t, r) {
                            var a = e.match(t);
                            return a && a.length >= r && parseInt(a[r], 10)
                        }
                        var a = !0,
                            n = !0;
                        t.exports = {
                            extractVersion: r,
                            wrapPeerConnectionEvent: function(e, t, r) {
                                if (e.RTCPeerConnection) {
                                    var a = e.RTCPeerConnection.prototype,
                                        n = a.addEventListener;
                                    a.addEventListener = function(e, a) {
                                        if (e !== t) return n.apply(this, arguments);
                                        var i = function(t) {
                                            a(r(t))
                                        };
                                        return this._eventMap = this._eventMap || {}, this._eventMap[a] = i, n.apply(this, [e, i])
                                    };
                                    var i = a.removeEventListener;
                                    a.removeEventListener = function(e, r) {
                                        if (e !== t || !this._eventMap || !this._eventMap[r]) return i.apply(this, arguments);
                                        var a = this._eventMap[r];
                                        return delete this._eventMap[r], i.apply(this, [e, a])
                                    }, Object.defineProperty(a, "on" + t, {
                                        get: function() {
                                            return this["_on" + t]
                                        },
                                        set: function(e) {
                                            this["_on" + t] && (this.removeEventListener(t, this["_on" + t]), delete this["_on" + t]), e && this.addEventListener(t, this["_on" + t] = e)
                                        },
                                        enumerable: !0,
                                        configurable: !0
                                    })
                                }
                            },
                            disableLog: function(e) {
                                return "boolean" === typeof e ? (a = e, e ? "adapter.js logging disabled" : "adapter.js logging enabled") : new Error("Argument type: " + typeof e + ". Please use a boolean.")
                            },
                            disableWarnings: function(e) {
                                return "boolean" === typeof e ? (n = !e, "adapter.js deprecation warnings " + (e ? "disabled" : "enabled")) : new Error("Argument type: " + typeof e + ". Please use a boolean.")
                            },
                            log: function() {
                                if ("object" === typeof window) {
                                    if (a) return;
                                    "undefined" !== typeof console && "function" === typeof console.log && console.log.apply(console, arguments)
                                }
                            },
                            deprecated: function(e, t) {
                                n && console.warn(e + " is deprecated, please use " + t + " instead.")
                            },
                            detectBrowser: function(e) {
                                var t = e && e.navigator,
                                    a = {};
                                if (a.browser = null, a.version = null, "undefined" === typeof e || !e.navigator) return a.browser = "Not a browser.", a;
                                if (t.mozGetUserMedia) a.browser = "firefox", a.version = r(t.userAgent, /Firefox\/(\d+)\./, 1);
                                else if (t.webkitGetUserMedia) a.browser = "chrome", a.version = r(t.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
                                else if (t.mediaDevices && t.userAgent.match(/Edge\/(\d+).(\d+)$/)) a.browser = "edge", a.version = r(t.userAgent, /Edge\/(\d+).(\d+)$/, 2);
                                else if (e.RTCPeerConnection && t.userAgent.match(/AppleWebKit\/(\d+)\./)) a.browser = "safari", a.version = r(t.userAgent, /AppleWebKit\/(\d+)\./, 1);
                                else return a.browser = "Not a supported browser.", a;
                                return a
                            }
                        }
                    }, {}]
                }, {}, [3])(3)
            });
        </script>
        <script>(function(){"use strict";class a{constructor(a,b,c,d,e){this.videolist=a,this.chatroom=a.chatroom,this.app=a.chatroom.app,this.EventBus=a.chatroom.app.EventBus,this.handle=b,this.outgoing=c,this.sdp=e,this.mediaStream=null,this.iceStateLast="",this.iceConnectedCount=0;let f=this;this.rtc=new RTCPeerConnection({rtcpMuxPolicy:"require",bundlePolicy:"max-bundle",iceServers:[{urls:d}]},{}),this.rtc.onicecandidate=function(a){f.onICE_Candidate(a)},this.rtc.oniceconnectionstatechange=function(a){f.onICE_ConnectionStateChange(a)},this.rtc.onaddstream=function(a){f.onAddStream(a)},this.rtc.onremovestream=a=>{f.onRemoveStream(a)}}get ingoing(){return!this.outgoing}Connect(){this.outgoing?this._sendOfferPublisher():this._sendOfferRemote()}Close(){if(null!=this.rtc){let a=this.rtc;this.rtc=null,null!=this.mediaStream&&(this.mediaStream.active&&"closed"!==a.signalingState&&"function"===typeof a.removeStream&&a.removeStream(this.mediaStream),this.mediaStream.stop(),this.mediaStream=null),"closed"!==a.signalingState&&a.close(),console.log("MediaConnection.SignalingState: "+a.signalingState+" ->>> Close")}}AddStream(a){this.rtc.addStream(a),this.mediaStream=a}onICE_Candidate(a){if(console.log(a.candidate),null!=a.candidate&&"object"===typeof a.candidate&&"string"===typeof a.candidate.candidate){var b=this.chatroom.tcPkt_Trickle(this.handle,a.candidate.candidate);this.chatroom.packetWorker.send(b)}}onICE_ConnectionStateChange(a){console.log(a);let b=TinychatApp.BLL.BroadcastProgressEvent,c=a.target;if(null!=c){switch(c.iceConnectionState){case"starting":break;case"checking":break;case"completed":break;case"connected":if(this.outgoing&&0===this.iceConnectedCount){console.log("Broadcast: Started Successfully"),this.videolist.AddVideoSelf(this.handle,this.mediaStream);let a=new b(b.MEDIA_STARTED_SUCCESS);this.EventBus.broadcast(b.ID,a)}this.iceConnectedCount+=1;break;case"disconnected":break;case"failed":console.error(a);case"closed":if(this.outgoing){this.videolist.RemoveVideoSelf(this.handle);let a=new b(b.MEDIA_STOPED);this.EventBus.broadcast(b.ID,a)}else this.videolist.RemoveVideoRemote(this.handle);}this.iceStateLast=c.iceConnectionState}}onAddStream(a){return this.outgoing?void console.log("Broadcast: LocalMedia.Added ("+this.handle+")!!!"):void(console.log("Broadcast: RemoteMedia.Added ("+this.handle+")!!!"),this.videolist.AddVideoRemote(this.handle,a.stream))}onRemoveStream(){return this.outgoing?void console.log("Broadcast: LocalMedia.Removed ("+this.handle+")!!!"):void(console.log("Broadcast: RemoteMedia.Removed ("+this.handle+")!!!"),this.videolist.RemoveVideoRemote(this.handle,event.stream))}_sendOfferPublisher(){let a=this;this.rtc.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!1}).then(function(b){a.rtc.setLocalDescription(b),console.log({sdp:b.sdp});var c=a.chatroom.tcPkt_SDP(b.type,b.sdp,0,function(b){a._onOfferPublisher(b)});a.chatroom.packetWorker.send(c)},function(a){console.error(a);let b=TinychatApp.BLL.BroadcastProgressEvent,c=new b(b.MEDIA_RTC_FAILED);c.error=a,this.EventBus.broadcast(b.ID,c)})}_onOfferPublisher(a){if(this.chatroom.tcPkt_TcCallbackCheck(a,"sdp"))if(!0===a.success)console.log({sdp:a.sdp}),this.rtc.setRemoteDescription(new RTCSessionDescription({type:a.type,sdp:a.sdp}));else{if(void 0!==a.reason&&null!==a.reason)if(16===a.reason.code){let b=a.timeout.timeToReadable();60<a.timeout?this.app.showToastWarn(`${a.reason.text}, you can try to broadcast again in ${b}`,4e3):this.app.showToast(`${a.reason.text}, you can try to broadcast again in ${b}`,4e3)}else 18===a.reason.code&&this.app.showToast(a.reason.text,3e3);this.rtc.close()}}_sendOfferRemote(){let a=this;this.rtc.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:this.sdp})).then(function(){return a.rtc.remoteDescription}).then(function(){a.rtc.createAnswer().then(function(b){return a.rtc.setLocalDescription(b)}).then(function(){let b=a.rtc.localDescription.type,c=a.rtc.localDescription.sdp,d=a.handle;var e=a.chatroom.tcPkt_SDP(b,c,d,function(){});a.chatroom.packetWorker.send(e)}).catch(function(a){console.error(a)})}).catch(function(a){console.error(a)})}_onOfferRemote(a){this.chatroom.tcPkt_TcCallbackCheck(a,"sdp")&&(!0!==a.success&&this.Close(),console.log("Broadcast: RemoteMedia.SDP ..."))}}window.TinychatApp.BLL.MediaConnection=a})();</script>
        <script>(function(){"use strict";var a=Math.Guid;let b=null;class c{constructor(a,b,c){this.debug=c,c&&(window.DEBUG=c),this.EventBus=new EventBus,this._version=new i(2,0,20,420,c),window.rootDir=this._version.rootDir(),this.defaultChatroom=null,console.log("App.useragent - "+this.useragent),this.tc_token=a,this.loginState=null,this.LoginInfo(b),this.showShareHandler=null,this.showMediaFiltersHandler=null,this.showMediaSettingsHandler=null,this.showSettingsHandler=null,this.showUpgradeHandler=null,this.showNotificationHandler=null,this.showUserProfile=null,this.showBanlistHandler=null,this.showYoutubeHandler=null,this.showMobileAppHandler=null}static getInstance(a,d,e){return null==b&&(b=new c(a,d,e)),b}static get RegExp_Nickname(){return /\w+/ig}static get url(){return"https://tinychat.com"}static url_avatar(a){var a=a==void 0?"guest":a;return"https://upload.tinychat.com/pic/"+encodeURI(a)}static url_api_v1_0(){return c.url+"/api/v1.0"}static url_api_login_info(){return this.url_api_v1_0()+"/user/info"}static url_api_room_token(a){return this.url_api_v1_0()+"/room/token/"+encodeURI(a)}static url_api_settings_switchclient(a){return"/settings/version/"+encodeURI(a)}static url_api_userprofile(a){var a=a==void 0?"guest":a;return this.url_api_v1_0()+"/user/profile?username="+encodeURI(a)}static url_api_follow(){return this.url+"/user/follow"}get version(){return this._version}get useragent(){return this._version.userAgent()}get settings(){return TinychatApp.BLL.SettingsFeature.getInstance(this.EventBus)}get _tracker(){return TinychatApp.BLL.Tracker.getInstance()}get _router(){return TinychatApp.BLL.Router.getInstance()}get _api(){return WebAPI.getInstance()}get _cookie(){return CookieUtils}isDebug(){return this.debug}GetChatroom(a){if(this.isDebug()&&console.warn("App.isDebug"),void 0==a)throw new Exception("Roomname is empty");let b=this.settings.getSettings();return this.defaultChatroom=new TinychatApp.BLL.ChatRoom(this,this.tc_token,a,b.nickname),this.defaultChatroom}GiveAGift(a){"string"==typeof a&&0<a.length?this._router.GiveAGift(a):this._router.GiveAGift()}LiveDirectory(){this._router.LiveDirectory()}EarnCoins(){this._router.EarnCoins()}UpgradeSub(){this._router.UpgradeSub()}SwitchClientVersion(){let a=this;this._api.wsj({src:a.url_api_settings_switchclient("old")}).then(a=>{console.log(a),window.location.reload()}).catch(b=>{console.error(b),a.showToastWarn("Some unknown server error occurred")})}PromoteRoom(){this._router.PromoteRoom()}Login(){this._router.Login()}Register(){this._router.Register()}Logout(){this._router.Logout()}Share(){Object.isFunc(this.showShareHandler)&&this.showShareHandler()}Banlist(){Object.isFunc(this.showBanlistHandler)&&this.showBanlistHandler()}Youtube(){Object.isFunc(this.showYoutubeHandler)&&this.showYoutubeHandler()}MediaFilters(){Object.isFunc(this.showMediaFiltersHandler)&&this.showMediaFiltersHandler()}MediaSettings(a){Object.isFunc(this.showMediaSettingsHandler)&&this.showMediaSettingsHandler(a)}Settings(){Object.isFunc(this.showSettingsHandler)&&this.showSettingsHandler()}Upgrade(a){Object.isFunc(this.showUpgradeHandler)&&this.showUpgradeHandler(a)}Notify(a,b){Object.isFunc(this.showNotificationHandler)&&this.showNotificationHandler(a,b)}MoblileApp(a){Object.isFunc(this.showMobileAppHandler)&&this.showMobileAppHandler(a)}DevNews(){this._router.DevNews()}WebSettings(){this._router.WebSettings()}GoGooglePlay(){this._router.GooglePlay()}GoAppStore(){this._router.AppStore()}UserProfile(a){Object.isFunc(this.showUserProfile)&&this.showUserProfile(a)}LoginInfo(a){var b=this;if("object"===typeof a){let b=a,c=new TinychatApp.DAL.LoginUserInfoEntity,d=new TinychatApp.DAL.LoginResultEntity;return d.loggedIn=b.loggedIn,d.loginName=b.username,d.userInfo=c,void this.OnLoginInfo(d)}this._api.wsj({src:c.url_api_login_info()}).then(function(a){let c=new TinychatApp.DAL.LoginResultEntity;if(c.errorcode=a.result,c.errormsg=a.message,"success"==a.result){var d=new TinychatApp.DAL.LoginUserInfoEntity;c.usersuggestion=a.username,c.userInfo=d,b.OnLoginInfo(c)}let f=b._parseLoginCookies();c.loggedIn=null!=f,c.loginName=null==f?"":f.login_name;let g=b.loginState,h=new e(g,c);b.EventBus.broadcast(e.ID,h)}).catch(function(a){console.error(a)})}OnLoginInfo(a){this.loginState=a==void 0?null:a}LoginState(){return this.loginState}IsLoggedIn(){return null!=this.loginState&&this.loginState.loggedIn}LoginName(){return null==this.loginState?null:this.loginState.loginName}IsFree(){return!(null!=this.loginState)||!(null!=this.loginState.userInfo)||0===this.loginState.userInfo.stype}GetAvatarUrl(a){return c.url_avatar(a)}Follow(a,b,d){return this._api.wsj({src:c.url_api_follow(),params:{event:1,favourite:a}},!0).then(function(a){Object.isFunc(b)&&b(a)}).catch(function(a){console.error(a),Object.isFunc(d)&&d(a)})}GetProfile(a,b,d){return this._api.wsj({src:c.url_api_userprofile(a)}).then(function(a){if("success"!=a.result)return!1;let c=new TinychatApp.DAL.UserProfileEntity;c.username=a.username,c.biography=a.biography,c.gender=a.gender,c.age=a.age,c.location=a.location,c.role=a.role,c.stype=a.stype,c.avatarUrl=a.avatarUrl,c.achieveUrl=a.achieveUrl,c.percentToNextAchieve=a.percentToNextAchieve,c.giftpoints=a.giftpoints;let d=a.virtualgifts,e=[];Array.isArray(d)&&Object.keys(d).forEach(a=>{let b=new TinychatApp.DAL.GiftEntity,c=d[a];b.giftUrl=c.imageSource,b.giftName=c.name,e.push(b)}),c.gifts=e,Object.isFunc(b)&&b(c)}).catch(function(a){console.error(a),Object.isFunc(d)&&d(a)})}IsValidNickname(a){if("string"!=typeof a)return!1;if(1>a.length)return!1;var b=c.RegExp_Nickname.exec(a);return null!=b&&b.input.length==b[0].length}IsValidRoomname(a){return this.IsValidNickname(a)}ReconnectDefaultChatroom(){this.defaultChatroom?this.defaultChatroom.Reconnect():window.location.reload()}showToastLurker(){let a=this,b=Toast.TYPE.WARN,c=new g(b,"You're in view-only mode. Reconnect and solve captcha...",4e3,()=>{a.ReconnectDefaultChatroom()},"Solve Captcha");this.EventBus.broadcast(g.ID,c)}showToastWarn(a,b=2e3){let c=Toast.TYPE.WARN,d=new g(c,a,b,null);this.EventBus.broadcast(g.ID,d)}showToast(a,b=2e3){let c=new g("",a,b,null);this.EventBus.broadcast(g.ID,c)}_readLoginState(){let a=this._parseLoginCookies(),b=new TinychatApp.DAL.LoginResultEntity;return b.loggedIn=null!=a,b.loginName=null==a?"":a.login_name,b}_parseLoginCookies(){try{let a=this._cookie.getCookie("pass"),b=this._cookie.getCookie("user"),c=this._cookie.getCookie("hash"),d=new h;if(d.login_hash=c,d.login_passhash=a,d.login_name=b,void 0!=d.login_hash&&"string"===typeof d.login_hash&&void 0!=d.login_passhash&&"string"===typeof d.login_passhash&&void 0!=d.login_name&&"string"===typeof d.login_name)return d}catch(a){}return null}}const d="LoginStateChangedEvent_"+a.newGuid();class e{static get ID(){return d}constructor(a,b){return this.beforeState=a,this.loginState=b,this}}const f="ToastEvent_"+a.newGuid();class g{static get ID(){return f}constructor(a,b,c,d,e){return this.type=a,this.text=b,this.wait=c,this.ok_handler=d,this.ok_text=e,this}}class h{constructor(){this.login_hash="",this.login_passhash="",this.login_name=""}}class i{constructor(a,b,c,d,e){this.app_name="Tinychat",this.major=a,this.minor=b,this.patch=c,this.build=d,this.debug=e!=void 0&&e}toString(){return this.shortTitle()}userAgent(){return this.format("{0}-client-webrtc-{3}-{1}-{2}").toLowerCase()}shortTitle(){return this.format("v{1} ({2})")}title(){return this.format("{0} for WebRTC v{1} ({2})")}rootDir(){return this.format("/webrtc/{1}-{2}")}format(a){a=a==void 0?"{0} for WebRTC v{1} ({2}-{3})":a;let b=this.major+"."+this.minor+"."+this.patch+(this.debug?"~d":""),c=this.getBrowser()+"_"+navigator.platform,d=this.build;return a.format(this.app_name,b,d,c)}getBrowser(){try{var a,b=a.width}catch(a){var c=a.toString();return-1===c.search("not an object")?-1===c.search("Cannot read")?-1===c.search("e is undefined")?-1===c.search("Unable to get property 'width' of undefined or null reference")?-1===c.search("cannot convert e into object")?void 0:"opera":document.documentMode||!window.StyleMedia?"IE":"edge":"firefox":"chrome":"safari"}}}c.BLL=window.TinychatApp.BLL,c.DAL=window.TinychatApp.DAL,c.BLL.LoginStateChangedEvent=e,c.BLL.ToastEvent=g,window.TinychatApp=c})();</script>
        <script>(function(){"use strict";var a=window.TinychatApp||{};a.UI={},window.TinychatApp=a})();</script>
        <script>(function(){"use strict";var a=Math.Guid;const b="UISideMenuToggle_"+a.newGuid();class c{static get ID(){return b}constructor(){return this}}const d="UIChatlogWiderToggle_"+a.newGuid();class e{static get ID(){return d}constructor(){return this}}window.TinychatApp.UI.UISideMenuToggle=c,window.TinychatApp.UI.UIChatlogWiderToggle=e})();</script>
        <dom-module id="client-toast" assetpath="../../styles/"><template>
                <style>#toast{position:fixed;display:flex;flex-direction:row;justify-content:center;height:80px;min-height:80px;width:100%;top:-80px;left:0;padding:0 30px;box-sizing:border-box;font-size:0;background-color:rgba(0, 0, 0, .8);text-align:center;z-index:6;transition:top .2s;}#toast.show{top:0;}#toast.error{background-color:#e53951;}#toast.accept{background-color:#38cd57;}#toast.warning{background-color:#f29e1f;}#toast-text{display:inline-block;font-size:16px;font-weight:600;color:#fff;vertical-align:middle;}#toast-text:before,
            #toast-buttons:before{content:'';display:inline-block;height:100%;width:0;vertical-align:middle;}#toast-text > span{display:inline-block;max-height:66px;line-height:22px;white-space:normal;vertical-align:middle;overflow:hidden;cursor:default;}#toast-buttons{white-space:nowrap;}#toast-buttons > *{display:inline-block;vertical-align:middle;}#toast-buttons > *:focus{outline:none;}#button-close{margin-left:4px;padding:10px;border:none;background:none;cursor:pointer;}#button-close > svg > path{transition:.2s;}#button-close:hover > svg > path{opacity:.8;}#button-close:active > svg > path{opacity:1;}#button-custom{margin-left:26px;padding:0 24px;border:1px solid #fff;font-size:12px;font-weight:700;color:#fff;line-height:30px;background:transparent;cursor:pointer;transition:background-color .2s,
                color .2s;}#button-custom:hover{background-color:rgba(0, 0, 0, .8);}#toast.error #button-custom:hover{background-color:#fff;color:#e53951;}#toast.accept #button-custom:hover{background-color:#fff;color:#38cd57;}#toast.warning #button-custom:hover{background-color:#fff;color:#f29e1f;}</style>
            </template></dom-module>
        <dom-module id="tinychat-toast" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-toast"></style>
                <div id="toast">
                    <div id="toast-text"><span>[[text]]</span></div>
                    <div id="toast-buttons"><button id="button-close" on-click="close"><svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#fff" fill-rule="evenodd" opacity=".5"></path>
                            </svg></button>
                        <dom-if if="[[ok_shown]]"><template strip-whitespace=""><button id="button-custom" on-click="onOK">[[ok_text]]</button></template></dom-if>
                    </div>
                </div>
            </template>
            <script>class Toast extends Polymer.Element{static get is(){return"tinychat-toast"}static get properties(){return{type:String,text:String,wait:Number,ok_handler:Object,ok_text:{type:String,value:"RETRY"},ok_shown:{type:Boolean,computed:"ok_shown_func(ok_handler)"}}}static get TYPE(){return{INFO:"",ERR:"error",CON:"accept",WARN:"warning"}}constructor(){super()}get animationWait(){return 250}connectedCallback(){super.connectedCallback(),setTimeout(()=>{this.$.toast.classList.add("show")},0),this.type.isEmpty()||this.$.toast.classList.add(this.type),0<this.wait&&setTimeout(this.close.bind(this),this.wait)}disconnectedCallback(){super.disconnectedCallback()}destroy(){this.remove()}close(){this.$.toast.classList.remove("show"),setTimeout(this.destroy.bind(this),this.animationWait)}onOK(a){Object.isFunc(this.ok_handler)&&(this.ok_handler(),this.close(a))}ok_shown_func(a){return Object.isFunc(a)}}customElements.define(Toast.is,Toast);</script>
        </dom-module>
        <dom-module id="client-modal" assetpath="../../styles/"><template>
                <style>#modal-window{position:fixed;height:100%;min-height:100%;width:100%;top:0;left:-100%;font-size:0;text-align:center;background-color:rgba(0, 0, 0, .8);overflow-y:scroll;white-space:nowrap;opacity:0;z-index:10;transition:opacity .2s;}#modal-window.modal-show{left:0;opacity:1;}#modal-window:before{content:"";display:inline-block;height:100%;width:0;vertical-align:middle;}#modal-content{position:relative;display:inline-block;width:100%;margin:50px auto;font-size:0;white-space:normal;vertical-align:middle;}#modal-content > *{display:none;}#modal-content > *:last-child{display:block;}</style>
            </template></dom-module>
        <dom-module id="tinychat-modal" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal"></style>
                <div id="modal-window">
                    <div id="modal-content">
                        <slot></slot>
                    </div>
                </div>
            </template>
            <script>class Modal extends Polymer.Element{static get is(){return"tinychat-modal"}static get properties(){return{dialogs:{type:Object,value:{}},onkeydownHandler:Object,onclickHandler:Object}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.onkeydownHandler=this.onkeydown.bind(this),this.onclickHandler=this.onclick.bind(this),document.addEventListener("keydown",this.onkeydownHandler),document.addEventListener("click",this.onclickHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler),document.removeEventListener("click",this.onclickHandler)}onkeydown(a){a=a||window.event,27!=a.keyCode&&"Escape"!=a.key&&"Esc"!=a.key}onclick(){}isopen(a){let b=this.dialogs[a];return!0===b}open(a){let b=0>=Object.keys(this.dialogs).length;this.dialogs[a]=!0,b&&(document.body.classList.add("modal-show"),this.$["modal-window"].classList.add("modal-show"))}close(a,b){delete this.dialogs[a];let c=0>=Object.keys(this.dialogs).length;c&&(document.body.classList.remove("modal-show"),this.$["modal-window"].classList.remove("modal-show")),this.removeChild(b)}}customElements.define(Modal.is,Modal);</script>
        </dom-module>
        <dom-module id="client-modal-loader" assetpath="../../styles/"><template>
                <style>#modal-content-loading-eye{position:relative;height:160px;width:160px;margin:30px auto 0;font-size:0;white-space:nowrap;}#modal-content-loading-eye > svg{position:absolute;top:0;left:0;}#modal-content-loading-eye:before{content:"";display:inline-block;height:100%;width:0;vertical-align:middle;}#modal-content-loading-eyeball{position:relative;display:inline-block;height:114px;width:114px;margin-left:-10px;border-radius:100%;background-color:#fff;vertical-align:middle;transform-origin:67px 57px;animation:eye-rotation 1.2s linear 0s infinite;}@keyframes eye-rotation{0%{transform:rotate(0deg);}50%{transform:rotate(180deg);}100%{transform:rotate(360deg);}}#modal-content-loading-eyeball-pupil{position:absolute;height:58px;width:58px;top:27px;left:27px;margin-left:-14px;border-radius:100%;background-color:#000;animation:pupil-rotation 1.2s linear 0s infinite;}#modal-content-loading-eyeball-pupil:before{content:"";position:absolute;display:block;height:16px;width:16px;top:3px;left:3px;border-radius:100%;background-color:#fff;}@keyframes pupil-rotation{0%{transform:rotate(0deg);}50%{transform:rotate(-180deg);}100%{transform:rotate(-360deg);}}#modal-content-loading > span{display:block;padding-top:15px;font-size:20px;color:#fff;line-height:24px;text-align:center;}</style>
            </template></dom-module>
        <dom-module id="tinychat-loader" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-loader"></style>
                <div id="modal-content-loading">
                    <div id="modal-content-loading-eye"><svg width="162" height="162" viewBox="0 0 160 160" xmlns="http://www.w3.org/2000/svg">
                            <path d="M157.975 152.5c-3.58-1.548-7.125-3.724-10.262-7.042-3.436-3.633-5.717-8.774-7.172-13.197C152.656 118.243 160 99.985 160 80c0-44.183-35.818-80-80-80C35.816 0 0 35.817 0 80s35.817 80 80 80c13.394 0 26.007-3.308 37.1-9.127 10.444 8.146 29.617 9.903 40.28 7.795 3.184-.63 3.566-4.882.595-6.167" fill="#04caff" fill-rule="evenodd"></path>
                        </svg>
                        <div id="modal-content-loading-eyeball">
                            <div id="modal-content-loading-eyeball-pupil"></div>
                        </div>
                    </div><span>Connecting...</span>
                </div>
            </template>
            <script>class ModalLoader extends Polymer.Element{static get is(){return"tinychat-loader"}static get properties(){return{}}constructor(){super()}connectedCallback(){super.connectedCallback()}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalLoader.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalLoader.is,this)}}customElements.define(ModalLoader.is,ModalLoader);</script>
        </dom-module>
        <dom-module id="client-modal-profile" assetpath="../../styles/"><template>
                <style>.on-white-scroll,
            .on-gray-scroll{padding-left:16px;box-sizing:border-box;overflow-x:hidden;overflow-y:scroll;}.on-white-scroll::-webkit-scrollbar,
            .on-gray-scroll::-webkit-scrollbar{position:absolute;width:15px;cursor:pointer;}.on-white-scroll::-webkit-scrollbar-track{background-color:#fff;}.on-gray-scroll::-webkit-scrollbar-track{background-color:#2d373a;}.on-white-scroll::-webkit-scrollbar-thumb,
            .on-gray-scroll::-webkit-scrollbar-thumb{border-radius:6px/8px;}.on-white-scroll::-webkit-scrollbar-thumb{border:5px solid #fff;background-color:rgba(0, 0, 0, .2);}.on-gray-scroll::-webkit-scrollbar-thumb{border:5px solid #2d373a;background-color:#5a6366;}.on-white-scroll::-webkit-scrollbar-thumb:hover,
            .on-gray-scroll::-webkit-scrollbar-thumb:hover{background-color:rgba(0, 0, 0, .4);}.on-gray-scroll::-webkit-scrollbar-thumb:hover{background-color:#6f7b80;}#modal-content-profile{position:relative;width:100%;max-width:400px;height:610px;margin:0 auto;border-radius:4px;text-align:center;overflow:hidden;}#modal-content-profile:after{content:'';position:absolute;display:block;height:45px;bottom:0;left:20px;right:20px;border-radius:0 0 4px 4px;background:-moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);background:-webkit-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);background:linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=0 );pointer-events:none;}#modal-content-profile *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;}#close-button > path{fill:#fff;opacity:.6;transition:.2s;}#close-button:hover > path{fill:#fff;opacity:.8;}#close-button:active > path{fill:#fff;opacity:1;}#modal-content-profile-preview{height:225px;padding-top:40px;box-sizing:border-box;background-color:#969fa2;}#modal-content-profile.gold > #modal-content-profile-preview{background-color:#ffbe00;}#modal-content-profile.extreme > #modal-content-profile-preview{background-color:#ad6ed1;}#modal-content-profile.pro > #modal-content-profile-preview{background-color:#2ecb4e;}#profile-status{position:relative;display:inline-block;height:116px;width:116px;}#profile-status:before{content:'';position:absolute;display:block;height:100%;width:100%;border:4px solid rgba(0, 0, 0, .1);box-sizing:border-box;border-radius:100%;}#profile-status > svg{transform:rotate(180deg);}#profile-status > svg > circle{fill:transparent;stroke:#fff;stroke-width:4px;stroke-linecap:round;transition:stroke .5s,
                            stroke-dasharray 3s;}#profile-status > svg > circle[stroke-dasharray="0, 352"]{stroke:transparent;}#profile-status-avatar{position:absolute;height:100px;width:100px;top:8px;left:8px;border-radius:100%;overflow:hidden;}#profile-status-avatar > img{position:absolute;height:100%;left:-25px;opacity:0;visibility:hidden;}#profile-status-avatar > img.show{opacity:1;visibility:visible;}#profile-status-level{position:absolute;height:30px;width:30px;top:43px;left:-12px;padding:6px;border-radius:100%;box-sizing:border-box;background-color:#fff;opacity:0;visibility:hidden;transition:.2s;}#profile-status-level.show{opacity:1;visibility:visible;}#profile-status-level > img{height:18px;width:18px;}#profile-nickname{position:relative;display:flex;flex-direction:row;align-items:stretch;justify-content:center;margin:7px 0 29px;padding:0 30px;box-sizing:border-box;font-size:24px;font-weight:300;color:#fff;line-height:33px;white-space:nowrap;}#profile-nickname > span{position:relative;display:inline-block;max-width:100%;padding-right:15px;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;}#profile-nickname > button{position:relative;display:inline-block;height:20px;top:8px;padding:0 8px;border-radius:2px;border:none;font-size:12px;font-weight:800;color:#41b7ef;background-color:#fff;text-transform:uppercase;line-height:20px;cursor:pointer;}#profile-nickname > button > svg{display:none;}#profile-nickname > button.pencil > svg{display:inline-block;margin-left:8px;}#profile-nickname > button > svg > path{fill:#41b7ef;}#modal-content-profile.gold #profile-nickname > button{color:#ffbe00;}#modal-content-profile.gold #profile-nickname > button > svg > path{fill:#ffbe00;}#modal-content-profile.extreme #profile-nickname > button{color:#ad6ed1;}#modal-content-profile.extreme #profile-nickname > button > svg > path{fill:#ad6ed1;}#modal-content-profile.pro #profile-nickname > button{color:#2ecb4e;}#modal-content-profile.pro #profile-nickname > button > svg > path{fill:#2ecb4e;}#modal-content-profile-info{position:relative;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;height:385px;background-color:#fff;}#profile-info{padding:20px 60px 10px;box-sizing:border-box;font-size:0;color:#fff;background-color:#b5bcbe;}#modal-content-profile.gold #profile-info{background-color:#ffd24c;}#modal-content-profile.extreme #profile-info{background-color:#c699df;}#modal-content-profile.pro #profile-info{background-color:#6cdb83;}#profile-info > div{max-width:100%;margin-bottom:10px;font-size:12px;font-weight:600;line-height:17px;}#profile-info > div + div{display:inline-block;max-height:17px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}#profile-info > div + div[title=""]{display:none;}#profile-info ~ *{padding-right:30px;padding-left:30px;}#modal-content-profile-info > h2{margin:0;padding-top:30px;padding-bottom:10px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;}#profile-gifts-text{padding-bottom:10px;font-size:12px;font-weight:600;color:#a0a0a0;line-height:17px;}#profile-gifts-coins{height:30px;padding-bottom:10px;font-size:18px;font-weight:700;color:#61686b;line-height:30px;}#profile-gifts-coins > *{display:inline-block;vertical-align:middle;}#profile-gifts-coins > span{margin:0 15px 0 4px;}#profile-gifts-coins > button{height:100%;padding:0 15px;border:1px solid #3cafe1;border-radius:30px;box-sizing:border-box;font-size:12px;color:#3cafe1;background-color:#fff;cursor:pointer;transition:.2s;}#profile-gifts-coins > button:hover{background-color:#d6f2ff;}#profile-gifts-coins > button:active{background-color:#c7e8f8;}#profile-gifts{padding-top:10px;padding-right:15px;padding-bottom:15px;font-size:0;}#profile-gifts > div{display:inline-block;width:33.33%;padding-bottom:30px;vertical-align:top;}#profile-gifts > div > *{display:inline-block;height:80px;width:80px;cursor:pointer;}#profile-gifts > div:first-child > a{border:1px solid #41b7ef;border-radius:100%;box-sizing:border-box;background-color:#fff;line-height:78px;transition:.2s;}#profile-gifts > div:first-child > a:hover{background-color:#d6f2ff;}#profile-gifts > div:first-child > a:active{background-color:#c7e8f8;}#profile-gifts > div:first-child > a > svg{vertical-align:middle;}#profile-gifts > div:first-child > a > svg > path{fill:#41b7ef;}#profile-gifts > div:first-child:only-child > a{border-color:transparent;background-color:#41b7ef;}#profile-gifts > div:first-child:only-child > a:hover{background-color:#54ccf3;}#profile-gifts > div:first-child:only-child > a:active{background-color:#38a8de;}#profile-gifts > div:first-child:only-child > a > svg > path{fill:#fff;}#profile-gifts > div > a > img{height:100%;width:100%;opacity:0;visibility:hidden;transition:.2s;}#profile-gifts > div > a > img.show{opacity:1;visibility:visible;}.waiting{position:absolute;height:100%;width:100%;top:0;left:0;border-radius:inherit;background-color:#fff;opacity:0;visibility:hidden;transition:.2s;}.waiting > .waiting-content{position:absolute;height:0;width:80%;top:50%;left:10%;}#modal-content-profile.wait > .waiting{opacity:1;visibility:visible;}.waiting > .waiting-content > span{position:absolute;display:inline-block;height:0;width:0;top:-4px;left:0;border:4px solid #04caff;border-radius:100%;opacity:0;animation:waiting 1s ease-in-out 0s infinite paused;-webkit-animation:waiting 1s ease-in-out 0s infinite paused;}.waiting > .waiting-content > span:nth-child(2){animation-delay:.15s;-webkit-animation-delay:.15s;}.waiting > .waiting-content > span:nth-child(3){animation-delay:.3s;-webkit-animation-delay:.3s;}.waiting > .waiting-content > span:nth-child(4){animation-delay:.45s;-webkit-animation-delay:.45s;}#modal-content-profile.wait > .waiting > .waiting-content > span{animation-play-state:running;-webkit-animation-play-state:running;}@keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}@-webkit-keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}</style>
            </template></dom-module>
        <dom-module id="tinychat-profile" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-profile"></style>
                <div id="modal-content-profile" class$="[[convertSubType(userprofile, isLoading)]]"><svg id="close-button" on-click="close" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <div id="modal-content-profile-preview">
                        <div id="profile-status"><svg height="116px" width="116px">
                                <circle cx="58" cy="58" r="56" stroke-dasharray="0, 352"></circle>
                            </svg>
                            <div id="profile-status-avatar"><img src="[[userprofile.avatarUrl]]" class$="[[convertShow(userprofile)]]" title$="[[userprofile.percentToNextAchieve]]"></div>
                            <div id="profile-status-level"><img src="[[userprofile.achieveUrl]]" class$="[[convertShow(userprofile)]]"></div>
                        </div>
                        <div id="profile-nickname"><span title="[[userprofile.username]]">[[userprofile.username]]</span> <button class$="[[convertUpgrade(userprofile)]]" on-click="onUpgrade"><span>[[convertUpgradeText(userprofile)]]</span> <svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M0 7.915v2.083h2.083l6.144-6.143-2.083-2.083L0 7.915zm9.838-5.67c.216-.218.216-.568 0-.784l-1.3-1.3c-.217-.216-.567-.216-.784 0L6.738 1.178 8.82 3.26 9.84 2.244z" fill-rule="evenodd"></path>
                                </svg></button></div>
                    </div>
                    <div id="modal-content-profile-info">
                        <div id="profile-info">
                            <div>[[convertInfo(userprofile)]]</div>
                            <div title="[[userprofile.biography]]">[[userprofile.biography]]</div>
                        </div>
                        <h2>Virtual Gifts</h2>
                        <dom-if if="[[convertIsShownNoGifts(userprofile.gifts)]]"><template>
                                <div id="profile-gifts-text">[[userprofile.username]] has no Virtual Gifts.<br>Be the first!</div>
                            </template></dom-if>
                        <div id="profile-gifts-coins"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="10" cy="10" r="10" fill="#f9d046" fill-rule="evenodd"></circle>
                                <path d="M14.873 14.53c.186.082.162.347-.037.387-.666.13-1.865.022-2.517-.487-.695.363-1.483.57-2.32.57-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.25-.46 2.39-1.216 3.266.09.277.233.598.448.825.196.208.418.344.64.44zM13.57 10c0-1.972-1.598-3.57-3.57-3.57-1.972 0-3.57 1.598-3.57 3.57 0 1.972 1.598 3.57 3.57 3.57 1.972 0 3.57-1.598 3.57-3.57zM10 8.163c1.014 0 1.837.823 1.837 1.837s-.823 1.837-1.837 1.837S8.163 11.014 8.163 10c0-.335.09-.648.248-.918.08.18.26.306.468.306.28 0 .51-.23.51-.51 0-.21-.126-.388-.306-.467.27-.156.583-.247.918-.247z" fill="#f5b822" fill-rule="evenodd"></path>
                            </svg> <span>[[userprofile.giftpoints]]</span> <button on-click="earncoinsTap">Earn Coins</button></div>
                        <div id="profile-gifts" class="on-white-scroll">
                            <div><a href="#" on-click="giveagiftTap"><svg width="32" height="31" viewBox="0 0 32 31" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 5.167c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5h-4.167L19 9.333V5.167zm-3 .166v5.334h5.334c2.945 0 5.333-2.388 5.333-5.334C26.667 2.388 24.28 0 21.333 0 18.388 0 16 2.388 16 5.333zM13 5.167c0-1.38-1.12-2.5-2.5-2.5S8 3.787 8 5.167s1.12 2.5 2.5 2.5h4.167L13 9.333V5.167zm3 .166v5.334h-5.334c-2.945 0-5.333-2.388-5.333-5.334C5.333 2.388 7.72 0 10.667 0 13.612 0 16 2.388 16 5.333z" fill-rule="nonzero"></path>
                                        <path d="M0 11.006C0 9.898.89 9 2.002 9h27.996C31.104 9 32 9.887 32 11.006V16H0v-4.994zM2 18h28v10.997C30 30.103 29.1 31 28.01 31H3.99C2.893 31 2 30.106 2 28.997V18z" fill-rule="evenodd"></path>
                                    </svg></a></div>
                            <dom-repeat items="[[userprofile.gifts]]"><template strip-whitespace="">
                                    <div><a href="#" on-click="tapOnGift"><img src="[[item.giftUrl]]" class$="[[convertShow(userprofile)]]"></a></div>
                                </template></dom-repeat>
                        </div>
                    </div>
                    <div class="waiting">
                        <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                    </div>
                </div>
            </template>
            <script>class ModalProfile extends Polymer.Element{static get is(){return"tinychat-profile"}static get properties(){return{chatroom:{type:Object,observer:"chatroomAssigned"},username:String,userprofile:{type:Object,value:null},isLoading:{type:Boolean,value:!1},isError:{type:Boolean,value:!1},modaloptions:{type:Object,value:{closable:!0,escape:!0}},onkeydownHandler:Object}}constructor(a){super(),this.username=a}get app(){return this.chatroom.app}connectedCallback(){super.connectedCallback();this;this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}chatroomAssigned(){let a=this,b=this.app.EventBus;a.isError=!1,a.isLoading=!0;let c=this.$["profile-status-avatar"];this.app.GetProfile(this.username,b=>{a.userprofile=b,a.isLoading=!1,c&&c.setAttribute("stroke-dasharray",Math.ceil(352*b.percentToNextAchieve/100)+", 352")},()=>{a.isError=!0,a.isLoading=!1})}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalProfile.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalProfile.is,this)}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalProfile.is)&&this.parentNode.close(ModalProfile.is,this)}giveagiftTap(){this.app.GiveAGift(this.userprofile.username)}earncoinsTap(){this.app.EarnCoins()}tapOnGift(){}onUpgrade(){this.app.UpgradeSub()}convertIsShownNoGifts(a){return!(Array.isArray(a)&&0<a.length)}convertSubType(a,b){var c=TinychatApp.BLL.User.getCssClass(a);return b&&(c+=" wait"),c}convertShow(a){var b="";return a instanceof TinychatApp.DAL.UserProfileEntity&&(b="show"),b}convertGender(a){if("F"==a)return"Female";return"M"==a?"Male":""}convertLoc(a){return"string"==typeof a?a.toUpperCase():a}convertUpgrade(a){if(!(a instanceof TinychatApp.DAL.UserProfileEntity))return"";var b="";return a.handle!==this.chatroom.self_handle||TinychatApp.BLL.User.isSubHighest(a.stype)||(b="pencil"),b}convertUpgradeText(a){if(!(a instanceof TinychatApp.DAL.UserProfileEntity))return"    ";var b=TinychatApp.BLL.User.getCssClass(a);return""==b&&(b="upgrade"),b}convertInfo(a){if(!(a instanceof TinychatApp.DAL.UserProfileEntity))return"";let b=[],c=this.convertGender(a.gender),d=this.convertLoc(a.location);return 0<a.age&&b.push(a.age),c.isEmpty()||b.push(c),d.isEmpty()||b.push(d),b.join(" \u2022 ")}}customElements.define(ModalProfile.is,ModalProfile);</script>
        </dom-module>
        <dom-module id="client-modal-reconnect" assetpath="../../styles/"><template>
                <style>#modal-content-reconnect{width:100%;max-width:540px;margin:0 auto;padding:50px 70px 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;}#modal-content-reconnect > *:focus{outline:none;}#modal-content-reconnect > h1{margin:0;padding-bottom:9px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;}#modal-content-reconnect > span{display:block;padding-bottom:8px;font-size:12px;font-weight:400;color:#262626;line-height:16px;}#modal-content-reconnect > input[type="submit"]{height:40px;width:100%;margin-top:24px;border:none;font-family:inherit;font-size:12px;font-weight:700;color:#fff;letter-spacing:1px;background-color:#41b7ef;cursor:pointer;transition:.2s;}#modal-content-reconnect > input[type="submit"]:hover{background-color:#54ccf3;}#modal-content-reconnect > input[type="submit"]:active{background-color:#38a8dd;}</style>
            </template></dom-module>
        <dom-module id="tinychat-reconnect" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-reconnect"></style>
                <form id="modal-content-reconnect" on-submit="onOK">
                    <dom-if if="[[convertReasonShown()]]"><template strip-whitespace="">
                            <h1>[[lastReason]]</h1>
                        </template></dom-if>
                    <dom-if if="[[!convertReasonShown()]]"><template strip-whitespace="">
                            <h1>Connection lost</h1>
                        </template></dom-if><span id="reconnect-text">Connection to the room was interrupted. Retrying to connect in [[waits]]...</span> <input type="submit" value$="[[actionText]]">
                </form>
            </template>
            <script>class ModalReconnect extends Polymer.Element{static get is(){return"tinychat-reconnect"}static get properties(){return{chatroom:{type:Object,observer:"chatroomAssigned"},tries:Number,waitms:Number,timems:Number,timerid:Number,waits:{type:String,computed:"format(waitms, timems)"},lastReason:{type:String,computed:"convertReason(chatroom)"},actionText:{type:String,computed:"convertAction(chatroom)"}}}constructor(){super()}connectedCallback(){super.connectedCallback()}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalReconnect.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalReconnect.is,this),this.stop()}format(a,b){return void 0==b&&(b=0),new String(Math.floor((a-b)/1e3))}onOK(a){return a.preventDefault(),3===this.chatroom.closedLastReasonCode?this.chatroom.app.Login():this.retry(),!1}retry(){this.stop(),this.chatroom.Reconnect()}start(){let a=this,b=1e3;this.timems=0,this.timerid=setInterval(()=>{a.timems+=b,a.timems+b>=a.waitms&&a.stop()},b)}stop(){clearInterval(this.timerid),this.timerid=0}chatroomAssigned(a){let b=this,c=this.chatroom.app.EventBus;a.reconnect_timer?(this.$["reconnect-text"].style.display="",this.start()):this.$["reconnect-text"].style.display="none"}convertReasonShown(){return 0<this.chatroom.closedLastReasonCode}convertReason(a){return TinychatApp.BLL.RoomQuitEvent.ConvertReason(a.closedLastReasonCode)}convertAction(a){return TinychatApp.BLL.RoomQuitEvent.ConvertAction(a.closedLastReasonCode)}}customElements.define(ModalReconnect.is,ModalReconnect);</script>
        </dom-module>
        <dom-module id="client-modal-permissions" assetpath="../../styles/"><template>
                <style>#modal-content-permissions{position:relative;width:100%;max-width:540px;margin:0 auto;padding:50px 30px 44px;border-radius:4px;box-sizing:border-box;background-color:#fff;text-align:center;}#modal-content-permissions > h2{margin:0;padding-bottom:10px;font-size:24px;font-weight:300;color:#363636;line-height:32px;}#modal-content-permissions > span{display:block;padding-bottom:10px;font-size:12px;color:#262626;line-height:16px;}#modal-content-permissions > .waiting{position:relative;height:40px;margin-top:15px;}.waiting > .waiting-content{position:absolute;height:0;width:80%;top:50%;left:10%;}.waiting > .waiting-content > span{position:absolute;display:inline-block;height:0;width:0;top:-4px;left:0;border:4px solid #04caff;border-radius:100%;opacity:0;animation:waiting 1s ease-in-out 0s infinite;-webkit-animation:waiting 1s ease-in-out 0s infinite;}.waiting > .waiting-content > span:nth-child(2){animation-delay:.15s;-webkit-animation-delay:.15s;}.waiting > .waiting-content > span:nth-child(3){animation-delay:.3s;-webkit-animation-delay:.3s;}.waiting > .waiting-content > span:nth-child(4){animation-delay:.45s;-webkit-animation-delay:.45s;}@keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}@-webkit-keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}</style>
            </template></dom-module>
        <dom-module id="tinychat-permissions" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-permissions"></style>
                <div id="modal-content-permissions">
                    <h2>We need some permissions</h2><span>There are the dialog of the browser window. Please grant access.</span>
                    <div class="waiting">
                        <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                    </div>
                </div>
            </template>
            <script>class ModalPermissions extends Polymer.Element{static get is(){return"tinychat-permissions"}static get properties(){return{modaloptions:{type:Object,value:{}}}}constructor(){super()}get app(){return this.chatroom.app}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}chatroomAssigned(){let a=this,b=this.app.EventBus}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalPermissions.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalPermissions.is,this)}}customElements.define(ModalPermissions.is,ModalPermissions);</script>
        </dom-module>
        <dom-module id="client-modal-banlist" assetpath="../../styles/"><template>
                <style>*{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;}.on-white-scroll{padding-left:16px;box-sizing:border-box;overflow-x:hidden;overflow-y:scroll;}.on-white-scroll::-webkit-scrollbar{position:absolute;width:15px;cursor:pointer;}.on-white-scroll::-webkit-scrollbar-track{background-color:#fff;}.on-white-scroll::-webkit-scrollbar-thumb{border:5px solid #fff;border-radius:6px/8px;background-color:rgba(0, 0, 0, .2);}.on-white-scroll::-webkit-scrollbar-thumb:hover{background-color:rgba(0, 0, 0, .4);}#modal-content-banlist{position:relative;width:100%;max-width:400px;margin:0 auto;padding:50px 70px 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;}#modal-content-banlist *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}#modal-content-banlist > h1{margin:0;padding-bottom:40px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;cursor:default;}#banlist-wrapper{position:relative;min-height:40px;max-height:360px;transition:.2s;}#banlist-wrapper:after{content:'';position:absolute;display:block;height:40px;bottom:0;left:0;right:15px;background:-moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);background:-webkit-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);background:linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=0 );pointer-events:none;}#banlist-wrapper.wait{max-height:40px;}#banlist-wrapper > .waiting{position:absolute;width:auto;top:0;bottom:0;left:0;right:0;background-color:#fff;z-index:1;opacity:0;visibility:hidden;transition:.2s;}#banlist-wrapper.wait > .waiting{opacity:1;visibility:visible;}.waiting > .waiting-content{position:absolute;height:0;width:80%;top:50%;left:10%;}.waiting > .waiting-content > span{position:absolute;display:inline-block;height:0;width:0;top:-4px;left:0;border:4px solid #cacece;border-radius:100%;opacity:0;animation:waiting 1s ease-in-out 0s infinite paused;-webkit-animation:waiting 1s ease-in-out 0s infinite paused;}.waiting > .waiting-content > span:nth-child(2){animation-delay:.15s;-webkit-animation-delay:.15s;}.waiting > .waiting-content > span:nth-child(3){animation-delay:.3s;-webkit-animation-delay:.3s;}.waiting > .waiting-content > span:nth-child(4){animation-delay:.45s;-webkit-animation-delay:.45s;}#banlist-wrapper.wait > .waiting > .waiting-content > span{animation-play-state:running;-webkit-animation-play-state:running;}@keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}@-webkit-keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}#banlist-wrapper > ul > li:first-child{height:0;overflow:hidden;transition:.2s;}#banlist-wrapper > ul > li:only-of-type{height:40px;padding:0 0 0 15px;text-align:center;}#banlist-wrapper > ul{position:relative;max-height:inherit;width:100%;margin:0;padding:0 0 40px 0;box-sizing:border-box;text-align:left;}#banlist-wrapper > ul > li{position:relative;display:inline-block;height:40px;width:100%;padding:0 40px 0 20px;box-sizing:border-box;overflow:hidden;transition:background-color .2s,
                            height .5s;}#banlist-wrapper > ul > li.hidden{height:0;}#banlist-wrapper > ul > li + li:hover{background-color:#fde3e7;}#banlist-wrapper > ul > li > span{display:inline-block;height:40px;width:100%;font-size:14px;color:#414141;line-height:40px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;cursor:default;}#banlist-wrapper > ul > li > button{position:absolute;display:block;height:40px;width:40px;margin:0;padding:0;border:0;top:0;right:0;background-color:transparent;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCgk8cGF0aCBkPSJNNiA0LjVMMS41IDAgMCAxLjUgNC41IDYgMCAxMC41IDEuNSAxMiA2IDcuNWw0LjUgNC41IDEuNS0xLjVMNy41IDYgMTIgMS41IDEwLjUgMCIgZmlsbD0iI2U1Mzk1MSIgZmlsbC1ydWxlPSJldmVub2RkIi8+DQo8L3N2Zz4=);background-repeat:no-repeat;background-position:center center;cursor:pointer;opacity:0;visibility:hidden;transition:.2s;}#banlist-wrapper > ul > li:hover > button{opacity:1;visibility:visible;}</style>
            </template></dom-module>
        <dom-module id="tinychat-banlist" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-banlist"></style>
                <div id="modal-content-banlist"><svg id="close-button" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" on-click="close">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <h1>Banlist</h1>
                    <div id="banlist-wrapper">
                        <ul class="on-white-scroll">
                            <li><span>Ban List is empty</span></li>
                            <dom-repeat items="{{_items}}"><template strip-whitespace="">
                                    <li class$="[[convertLiClass(item)]]"><span>[[item.nickname]]</span> <button on-click="onDelete"></button></li>
                                </template></dom-repeat>
                        </ul>
                        <div class="waiting">
                            <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                        </div>
                    </div>
                </div>
            </template>
            <script>class ModalDialogBanlist extends Polymer.Element{static get is(){return"tinychat-banlist"}static get properties(){return{chatroom:{type:Object,observer:"chatroomAssigned"},_items:{type:Array,value:[]},onkeydownHandler:Object}}constructor(){super()}get app(){return this.chatroom.app}get settings(){return this.app.settings}connectedCallback(){super.connectedCallback(),this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}chatroomAssigned(){let a=this,b=this.chatroom.app.EventBus;a.$["banlist-wrapper"].classList.add("wait"),this.chatroom.Banlist(b=>{a.$["banlist-wrapper"].classList.remove("wait"),a.set("_items",Array.from(b))})}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogBanlist.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogBanlist.is,this)}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogBanlist.is)&&this.close(a)}onDelete(a){let b=this,c=this._items.indexOf(a.model.item),d=Object.assign({},a.model.item);d.isDeleting=!0,b._items[c]=d,b.notifyPath("_items."+c),this.chatroom.Unban(a.model.item),setTimeout(()=>{let c=this._items.indexOf(a.model.item);b.splice("_items",c,1)},500)}convertLiClass(a){var b="";return a.isDeleting&&(b+=" hidden"),b}}customElements.define(ModalDialogBanlist.is,ModalDialogBanlist);</script>
        </dom-module>
        <dom-module id="client-modal-changenickname" assetpath="../../styles/"><template>
                <style>#modal-content-changenickname{position:relative;width:100%;max-width:540px;margin:0 auto;padding:50px 70px 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;}#modal-content-changenickname > *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}#modal-content-changenickname.error > label{opacity:0;visibility:hidden;}#modal-content-changenickname.error > #error-text{opacity:1;visibility:visible;overflow:visible;}#modal-content-changenickname.error > input[type="text"]{border-color:#e53951;color:#e53951;}#modal-content-changenickname > h1{margin:0;padding-bottom:40px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;}#modal-content-changenickname > label{display:block;padding-bottom:4px;font-size:12px;font-weight:600;color:#414141;text-transform:uppercase;opacity:1;visibility:visible;transition:.2s;}#modal-content-changenickname > #error-text{position:relative;display:block;height:0;top:-21px;font-size:12px;font-weight:600;color:#e53951;opacity:0;visibility:hidden;overflow:hidden;transition:.2s;}#modal-content-changenickname > input[type="text"]{height:40px;width:100%;border:1px solid #c5d5dc;box-sizing:border-box;background-color:#fff;font-family:inherit;font-size:16px;font-weight:600;color:#414141;text-align:center;line-height:38px;letter-spacing:.5px;transition:.2s;}#modal-content-changenickname > input[type="submit"]{height:40px;width:100%;margin-top:24px;border:none;font-family:inherit;font-size:12px;font-weight:700;color:#fff;letter-spacing:1px;background-color:#41b7ef;text-transform:uppercase;cursor:pointer;transition:.2s;}#modal-content-changenickname > input[type="submit"]:hover{background-color:#54ccf3;}#modal-content-changenickname > input[type="submit"]:active{background-color:#38a8dd;}</style>
            </template></dom-module>
        <dom-module id="tinychat-changenickname" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-changenickname"></style>
                <form id="modal-content-changenickname" on-submit="onOK"><svg id="close-button" on-click="close" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <h1>[[title]]</h1><label>YOUR NICKNAME</label> <span id="error-text">[[error]]</span> <input id="nickname" type="text" on-click="onInput" placeholder="nickname" maxlength="32" value="{{nickname}}"> <input type="submit" value="[[positiveBtn]]">
                </form>
            </template>
            <script>class ModalDialogChangeNickname extends Polymer.Element{static get is(){return"tinychat-changenickname"}static get MODE_CHANGE(){return 0}static get MODE_INUSE(){return 1}static get MODE_SETTINGS(){return 2}static get MODE_GUEST(){return 3}static get properties(){return{chatroom:{type:Object,observer:"chatroomAssigned"},nickname:String,mode:{type:Number,observer:"modeAssigned"},positiveBtn:{type:String,value:"OK"},title:{type:String,value:"Please enter nickname"},error:{type:String,value:""},ok:Object,notvalid:Object,inuse:Object,onkeydownHandler:Object}}constructor(a){super(),this.mode=a}connectedCallback(){super.connectedCallback();this;this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler),this.$.nickname.focus()}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}chatroomAssigned(){let a=this,b=this.chatroom.app.EventBus}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogChangeNickname.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogChangeNickname.is,this)}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogChangeNickname.is)&&this.parentNode.close(ModalDialogChangeNickname.is,this)}onInput(){this.$["modal-content-changenickname"].classList.remove("error")}onOK(a){return(a.preventDefault(),Object.isFunc(this.notvalid)&&this.notvalid(this.$.nickname.value))?(this.error="Invalid nickname (use _, A-Z and 0-9)",this.$["modal-content-changenickname"].classList.add("error"),!1):Object.isFunc(this.inuse)&&this.inuse(this.$.nickname.value)?(this.error="Sorry, your nickname is already exist",this.$["modal-content-changenickname"].classList.add("error"),!1):(Object.isFunc(this.ok)&&this.ok(this.$.nickname.value),!1)}modeAssigned(a){let b="Change Nickname",c="Join Room";a===ModalDialogChangeNickname.MODE_CHANGE?(this.title=b,this.positiveBtn="Change"):a===ModalDialogChangeNickname.MODE_INUSE?(this.title="Enter Nickname",this.positiveBtn=c,this.error="Your current nickname in use",this.$["modal-content-changenickname"].classList.add("error")):a===ModalDialogChangeNickname.MODE_GUEST?(this.title="Enter Nickname",this.positiveBtn=c):a===ModalDialogChangeNickname.MODE_SETTINGS?(this.title=this.nickname.isEmpty()?"Enter Nickname":b,this.positiveBtn="Save"):console.error("unknown mode")}}customElements.define(ModalDialogChangeNickname.is,ModalDialogChangeNickname);</script>
        </dom-module>
        <dom-module id="client-modal-notification" assetpath="../../styles/"><template>
                <style>#modal-content-notification{position:relative;width:100%;max-width:540px;margin:0 auto;padding:50px 70px 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;}#modal-content-notification > h1{margin:0;padding-bottom:10px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;}#modal-content-notification > label{display:block;font-size:12px;line-height:1.33;text-align:center;color:#262626;transition:.2s;}#modal-content-notification > button{height:40px;width:100%;margin-top:32px;border:none;font-family:inherit;font-size:12px;font-weight:700;color:#fff;letter-spacing:1px;background-color:#41b7ef;cursor:pointer;transition:.2s;}#modal-content-notification > button:hover{background-color:#54ccf3;}#modal-content-notification > button:active{background-color:#38a8dd;}#modal-content-notification *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;z-index:1;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}</style>
            </template></dom-module>
        <dom-module id="tinychat-notification" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-notification"></style>
                <div id="modal-content-notification"><svg id="close-button" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" on-click="close">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <h1>[[title]]</h1><label>[[message]]</label> <button on-click="close">[[btnMessage]]</button>
                </div>
            </template>
            <script>class ModalDialogNotification extends Polymer.Element{static get is(){return"tinychat-notification"}static get properties(){return{title:{type:String,value:"Your video was rejected by moderator"},message:{type:String,value:"You can try to broadcast again in 1 minute"},btnMessage:{type:String,value:"OK"},onkeydownHandler:Object}}constructor(){super()}get app(){return this.chatroom.app}get settings(){return this.app.settings}connectedCallback(){super.connectedCallback(),this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogNotification.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogNotification.is,this)}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogNotification.is)&&this.cancel(a)}cancel(){this.close()}}customElements.define(ModalDialogNotification.is,ModalDialogNotification);</script>
        </dom-module>
        <dom-module id="client-modal-password" assetpath="../../styles/"><template>
                <style>#modal-content-password{width:100%;max-width:540px;margin:0 auto;padding:50px 70px 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;}#modal-content-password.error > label{opacity:0;visibility:hidden;}#modal-content-password.error > #error-text{opacity:1;visibility:visible;overflow:visible;}#modal-content-password.error > input[type="password"]{border-color:#e53951;color:#e53951;}#modal-content-password > *:focus{outline:none;}#modal-content-password > h1{margin:0;padding-bottom:40px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;}#modal-content-password > label{display:block;padding-bottom:4px;font-size:12px;font-weight:600;color:#414141;text-transform:uppercase;opacity:1;visibility:visible;transition:.2s;}#modal-content-password > #error-text{position:relative;display:block;height:0;top:-21px;font-size:12px;font-weight:600;color:#e53951;opacity:0;visibility:hidden;overflow:hidden;transition:.2s;}#modal-content-password > input[type="password"]{height:40px;width:100%;border:1px solid #c5d5dc;box-sizing:border-box;background-color:#fff;font-family:inherit;font-size:16px;font-weight:600;color:#414141;text-align:center;line-height:38px;letter-spacing:.5px;transition:.2s;}#modal-content-password > input[type="submit"]{height:40px;width:100%;margin-top:24px;border:none;font-family:inherit;font-size:12px;font-weight:700;color:#fff;letter-spacing:1px;background-color:#41b7ef;cursor:pointer;transition:.2s;}#modal-content-password > input[type="submit"]:hover{background-color:#54ccf3;}#modal-content-password > input[type="submit"]:active{background-color:#38a8dd;}</style>
            </template></dom-module>
        <dom-module id="tinychat-password" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-password"></style>
                <form id="modal-content-password" on-submit="onOK">
                    <h1>[[title]]</h1><label>[[label]]</label> <span id="error-text">[[error]]</span> <input id="password" type="password" placeholder="password" maxlength="255" on-click="onInput"> <input type="submit" value="[[submit]]">
                </form>
            </template>
            <script>class ModalDialogPassword extends Polymer.Element{static get is(){return"tinychat-password"}static get MODE_ROOM(){return 0}static get MODE_BROADCAST(){return 1}static get properties(){return{mode:{type:Number,observer:"modeAssigned"},title:{type:String,value:"The room is password protected"},label:{type:String,value:"CHATROOM PASSWORD"},submit:{type:String,value:"CONNECT"},error:{type:String,value:"Sorry, the password you entered was incorrect"},ok:Object,onkeydownHandler:Object}}constructor(a){super(),this.mode=a==void 0?ModalDialogPassword.MODE_ROOM:a}connectedCallback(){super.connectedCallback(),this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler),this.$.password.focus()}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}modeAssigned(a){switch(a){case ModalDialogPassword.MODE_ROOM:this.title="The room is password protected",this.label="CHATROOM PASSWORD",this.submit="CONNECT";break;case ModalDialogPassword.MODE_BROADCAST:this.title="The broadcast is password protected",this.label="BROADCAST PASSWORD",this.submit="BROADCAST";break;default:console.warn("unknown mode");}}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogPassword.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogPassword.is,this)}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogPassword.is)&&Object.isFunc(this.ok)&&this.ok("")}onInput(){this.$["modal-content-password"].classList.remove("error")}onOK(a){return a.preventDefault(),Object.isFunc(this.ok)&&this.ok(this.$.password.value),!1}}customElements.define(ModalDialogPassword.is,ModalDialogPassword);</script>
        </dom-module>
        <dom-module id="client-modal-media-filters" assetpath="../../styles/"><template>
                <style>*{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;}.on-white-scroll{padding-left:16px;box-sizing:border-box;overflow-x:hidden;overflow-y:scroll;}.on-white-scroll::-webkit-scrollbar{position:absolute;width:15px;cursor:pointer;}.on-white-scroll::-webkit-scrollbar-track{background-color:#fff;}.on-white-scroll::-webkit-scrollbar-thumb{border:5px solid #fff;border-radius:6px/8px;background-color:rgba(0, 0, 0, .2);}.on-white-scroll::-webkit-scrollbar-thumb:hover{background-color:rgba(0, 0, 0, .4);}#modal-content-filters{position:relative;width:100%;max-width:540px;margin:0 auto;padding:50px 0 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;}#modal-content-filters *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}#modal-content-filters > h1{margin:0;padding:0 70px 40px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;cursor:default;}#filters-preview{position:relative;padding:0 70px;border-bottom:1px solid rgba(0, 0, 0, .1);transition:.2s;}#filters-video{position:relative;width:100%;padding-bottom:40px;text-align:left;}#filters-video > div{width:100%;font-size:14px;color:#414141;line-height:40px;text-align:center;cursor:default;overflow:hidden;transition:.2s;}#filters-video > div > .video{position:relative;width:100%;font-size:0;overflow:hidden;}.video > div > video,
            .video > div > canvas{position:relative;width:100%;border-radius:4px;}#filters-wrapper{padding-top:30px;border-bottom:1px solid rgba(0, 0, 0, .1);}#filters-wrapper > div{height:230px;}#filters-content{width:420px;margin:0 auto;font-size:0;text-align:left;}#filters-content > .filter{display:inline-block;width:120px;margin:0 10px 20px;text-align:center;vertical-align:top;}#filters-content > .filter > span{display:inline-block;padding-top:6px;font-size:12px;color:#333;line-height:16px;cursor:default;}#filters-content > .filter > div{position:relative;cursor:pointer;}#filters-content > .filter > div img{border-radius:4px;width:100%;}#filters-content .filter > div > div:before,
            #filters-content .filter > div > div:after{border-radius:4px;}.filter > .active:before{content:'';position:absolute;height:100%;width:100%;top:0;left:0;border:4px solid #fff;border-radius:4px;box-sizing:border-box;z-index:2;}.filter > .active:after{content:'';position:absolute;height:100%;width:100%;top:0;left:0;border:2px solid #41b7ef;border-radius:4px;box-sizing:border-box;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CgkJPHBhdGggZD0iTTIgNi4wMDJBMy45OTggMy45OTggMCAwIDEgNi4wMDIgMkg1M0wyIDUzVjYuMDAyeiIgZmlsbD0iI2ZmZiIvPgoJCTxwYXRoIGQ9Ik0wIDMuOTk0QTMuOTk1IDMuOTk1IDAgMCAxIDMuOTk0IDBINTJMMCA1MlYzLjk5NHoiIGZpbGw9IiM0MWI3ZWYiLz4KCQk8cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iNCIgZD0iTTkgMTVsNiA1IDctOSIvPgoJPC9nPgo8L3N2Zz4=);background-repeat:no-repeat;background-position:-2px -2px;z-index:3;}#filter-button-wrapper{padding:40px 70px 0;}#filter-button-wrapper > button{display:block;height:40px;width:100%;border:1px solid transparent;box-sizing:border-box;font-family:'Open Sans', sans-serif;font-weight:700;font-size:12px;color:#fff;background-color:#41b7ef;line-height:38px;letter-spacing:1px;text-align:center;text-transform:uppercase;cursor:pointer;transition:.2s;}#filter-button-wrapper > button:hover{background-color:#54ccf3;}#filter-button-wrapper > button:active{background-color:#38a8de;}#modal-content-filters.wait > .waiting{opacity:1;visibility:visible;}.waiting > .waiting-content{position:absolute;height:0;width:80%;top:50%;left:10%;}.waiting > .waiting-content > span{position:absolute;display:inline-block;height:0;width:0;top:-4px;left:0;border:4px solid #cacece;border-radius:100%;opacity:0;animation:waiting 1s ease-in-out 0s infinite paused;-webkit-animation:waiting 1s ease-in-out 0s infinite paused;}.waiting > .waiting-content > span:nth-child(2){animation-delay:.15s;-webkit-animation-delay:.15s;}.waiting > .waiting-content > span:nth-child(3){animation-delay:.3s;-webkit-animation-delay:.3s;}.waiting > .waiting-content > span:nth-child(4){animation-delay:.45s;-webkit-animation-delay:.45s;}.waiting > .waiting-content > span:nth-child(5){animation-delay:.6s;-webkit-animation-delay:.6s;}#modal-content-filters.wait > .waiting > .waiting-content > span{animation-play-state:running;-webkit-animation-play-state:running;}@keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}@-webkit-keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}@media screen and (max-width: 470px){.on-white-scroll::-webkit-scrollbar{position:absolute;height:15px;width:auto;cursor:pointer;}.on-white-scroll::-webkit-scrollbar-thumb{border-radius:8px/6px;}#modal-content-filters{padding-bottom:20px;}#modal-content-filters > h1{padding-bottom:20px;}#filters-preview,
                #filter-button-wrapper{padding-left:20px;padding-right:20px;}#filters-video{padding-bottom:0;}#filters-wrapper{padding-top:20px;}#filters-wrapper > div{height:150px;padding-left:10px;overflow-x:scroll;overflow-y:hidden;}#filters-content{white-space:nowrap;}#filters-content:after{content:'';display:inline-block;height:100%;width:10px;}}.aden{position:relative;-webkit-filter:hue-rotate(-20deg) contrast(.9) saturate(.85) brightness(1.2);filter:hue-rotate(-20deg) contrast(.9) saturate(.85) brightness(1.2);}.aden:after,
            .aden:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.aden img{width:100%;z-index:1;}.aden:before{z-index:2;}.aden:after{z-index:3;}.aden:after{background:-webkit-linear-gradient(left, rgba(66, 10, 14, .2), transparent);background:linear-gradient(to right, rgba(66, 10, 14, .2), transparent);mix-blend-mode:darken;}.gingham:after,
            .perpetua:after,
            .reyes:after{mix-blend-mode:soft-light;}.inkwell{position:relative;-webkit-filter:sepia(.3) contrast(1.1) brightness(1.1) grayscale(1);filter:sepia(.3) contrast(1.1) brightness(1.1) grayscale(1);}.inkwell:after,
            .inkwell:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.inkwell img{width:100%;z-index:1;}.inkwell:before{z-index:2;}.inkwell:after{z-index:3;}.perpetua{position:relative;}.perpetua:after,
            .perpetua:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.perpetua img{width:100%;z-index:1;}.perpetua:before{z-index:2;}.perpetua:after{z-index:3;}.perpetua:after{background:-webkit-linear-gradient(top, #005b9a, #e6c13d);background:linear-gradient(to bottom, #005b9a, #e6c13d);opacity:.5;}.reyes{position:relative;-webkit-filter:sepia(.22) brightness(1.1) contrast(.85) saturate(.75);filter:sepia(.22) brightness(1.1) contrast(.85) saturate(.75);}.reyes:after,
            .reyes:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.reyes img{width:100%;z-index:1;}.reyes:before{z-index:2;}.reyes:after{z-index:3;}.reyes:after{background:#efcdad;opacity:.5;}.gingham{position:relative;-webkit-filter:brightness(1.05) hue-rotate(-10deg);filter:brightness(1.05) hue-rotate(-10deg);}.gingham:after,
            .gingham:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.gingham img{width:100%;z-index:1;}.gingham:before{z-index:2;}.gingham:after{z-index:3;}.gingham:after{background:rgb(230, 230, 250);}.toaster{position:relative;-webkit-filter:contrast(1.5) brightness(.9);filter:contrast(1.5) brightness(.9);}.toaster:after,
            .toaster:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.toaster img{width:100%;z-index:1;}.toaster:before{z-index:2;}.toaster:after{z-index:3;}.toaster:after{background:-webkit-radial-gradient(circle, #804e0f, #3b003b);background:radial-gradient(circle, #804e0f, #3b003b);mix-blend-mode:screen;}.walden{position:relative;-webkit-filter:brightness(1.1) hue-rotate(-10deg) sepia(.3) saturate(1.6);filter:brightness(1.1) hue-rotate(-10deg) sepia(.3) saturate(1.6);}.walden:after,
            .walden:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.walden img{width:100%;z-index:1;}.walden:before{z-index:2;}.walden:after{z-index:3;}.walden:after{background:#04c;mix-blend-mode:screen;opacity:.3;}.hudson{position:relative;-webkit-filter:brightness(1.2) contrast(.9) saturate(1.1);filter:brightness(1.2) contrast(.9) saturate(1.1);}.hudson:after,
            .hudson:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.hudson img{width:100%;z-index:1;}.hudson:before{z-index:2;}.hudson:after{z-index:3;}.hudson:after{background:-webkit-radial-gradient(circle, #a6b1ff 50%, #342134);background:radial-gradient(circle, rgb(166, 177, 255) 50%, rgb(52, 33, 52));mix-blend-mode:multiply;opacity:.5;}.earlybird{position:relative;-webkit-filter:contrast(.9) sepia(.2);filter:contrast(.9) sepia(.2);}.earlybird:after,
            .earlybird:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.earlybird img{width:100%;z-index:1;}.earlybird:before{z-index:2;}.earlybird:after{z-index:3;}.earlybird:after{background:-webkit-radial-gradient(circle, #d0ba8e 20%, #360309 85%, #1d0210 100%);background:radial-gradient(circle, rgb(208, 186, 142) 20%, rgb(54, 3, 9) 85%, #1d0210 100%);mix-blend-mode:overlay;}.mayfair{position:relative;-webkit-filter:contrast(1.1) saturate(1.1);filter:contrast(1.1) saturate(1.1);}.mayfair:after,
            .mayfair:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.mayfair img{width:100%;z-index:1;}.mayfair:before{z-index:2;}.mayfair:after{z-index:3;}.mayfair:after{background:-webkit-radial-gradient(40% 40%, circle, rgba(255, 255, 255, .8), rgba(255, 200, 200, .6), #111 60%);background:radial-gradient(circle at 40% 40%, rgba(255, 255, 255, .8), rgba(255, 200, 200, .6), #111 60%);mix-blend-mode:overlay;opacity:.4;}.lofi{position:relative;-webkit-filter:saturate(1.1) contrast(1.5);filter:saturate(1.1) contrast(1.5);}.lofi:after,
            .lofi:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.lofi img{width:100%;z-index:1;}.lofi:before{z-index:2;}.lofi:after{z-index:3;}.lofi:after{background:-webkit-radial-gradient(circle, transparent 70%, #222 150%);background:radial-gradient(circle, transparent 70%, #222 150%);mix-blend-mode:multiply;}._1977{position:relative;-webkit-filter:contrast(1.1) brightness(1.1) saturate(1.3);filter:contrast(1.1) brightness(1.1) saturate(1.3);}._1977:after,
            ._1977:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}._1977 img{width:100%;z-index:1;}._1977:before{z-index:2;}._1977:after{z-index:3;background:rgba(243, 106, 188, .3);mix-blend-mode:screen;}.brooklyn{position:relative;-webkit-filter:contrast(.9) brightness(1.1);filter:contrast(.9) brightness(1.1);}.brooklyn:after,
            .brooklyn:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.brooklyn img{width:100%;z-index:1;}.brooklyn:before{z-index:2;}.brooklyn:after{z-index:3;}.brooklyn:after{background:-webkit-radial-gradient(circle, rgba(168, 223, 193, .4) 70%, #c4b7c8);background:radial-gradient(circle, rgba(168, 223, 193, .4) 70%, #c4b7c8);mix-blend-mode:overlay;}.xpro2{position:relative;-webkit-filter:sepia(.3);filter:sepia(.3);}.xpro2:after,
            .xpro2:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.xpro2 img{width:100%;z-index:1;}.xpro2:before{z-index:2;}.xpro2:after{z-index:3;}.xpro2:after{background:-webkit-radial-gradient(circle, #e6e7e0 40%, rgba(43, 42, 161, .6) 110%);background:radial-gradient(circle, #e6e7e0 40%, rgba(43, 42, 161, .6) 110%);mix-blend-mode:color-burn;}.nashville{position:relative;-webkit-filter:sepia(.2) contrast(1.2) brightness(1.05) saturate(1.2);filter:sepia(.2) contrast(1.2) brightness(1.05) saturate(1.2);}.nashville:after,
            .nashville:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.nashville img{width:100%;z-index:1;}.nashville:before{z-index:2;}.nashville:after{z-index:3;}.nashville:after{background:rgba(0, 70, 150, .4);mix-blend-mode:lighten;}.nashville:before{background:rgba(247, 176, 153, .56);mix-blend-mode:darken;}.lark{position:relative;-webkit-filter:contrast(.9);filter:contrast(.9);}.lark:after,
            .lark:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.lark img{width:100%;z-index:1;}.lark:before{z-index:2;}.lark:after{z-index:3;}.lark:after{background:rgba(242, 242, 242, .8);mix-blend-mode:darken;}.lark:before{background:#22253f;mix-blend-mode:color-dodge;}.moon{position:relative;-webkit-filter:grayscale(1) contrast(1.1) brightness(1.1);filter:grayscale(1) contrast(1.1) brightness(1.1);}.moon:after,
            .moon:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.moon img{width:100%;z-index:1;}.moon:before{z-index:2;}.moon:after{z-index:3;}.moon:before{background:#a0a0a0;mix-blend-mode:soft-light;}.moon:after{background:#383838;mix-blend-mode:lighten;}.clarendon{position:relative;-webkit-filter:contrast(1.2) saturate(1.35);filter:contrast(1.2) saturate(1.35);}.clarendon:after,
            .clarendon:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.clarendon img{width:100%;z-index:1;}.clarendon:before{z-index:2;background:rgba(127, 187, 227, .2);mix-blend-mode:overlay;}.clarendon:after{z-index:3;}.willow{position:relative;-webkit-filter:grayscale(.5) contrast(.95) brightness(.9);filter:grayscale(.5) contrast(.95) brightness(.9);}.willow:after,
            .willow:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.willow img{width:100%;z-index:1;}.willow:before{z-index:2;}.willow:after{z-index:3;}.willow:before{background-color:radial-gradient(40%, circle, #d4a9af 55%, #000 150%);mix-blend-mode:overlay;}.willow:after{background-color:#d8cdcb;mix-blend-mode:color;}.rise{position:relative;-webkit-filter:brightness(1.05) sepia(.2) contrast(.9) saturate(.9);filter:brightness(1.05) sepia(.2) contrast(.9) saturate(.9);}.rise:after,
            .rise:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.rise img{width:100%;z-index:1;}.rise:before{z-index:2;}.rise:after{z-index:3;}.rise:after{background:-webkit-radial-gradient(circle, rgba(232, 197, 152, .8), transparent 90%);background:radial-gradient(circle, rgba(232, 197, 152, .8), transparent 90%);mix-blend-mode:overlay;opacity:.6;}.rise:before{background:-webkit-radial-gradient(circle, rgba(236, 205, 169, .15) 55%, rgba(50, 30, 7, .4));background:radial-gradient(circle, rgba(236, 205, 169, .15) 55%, rgba(50, 30, 7, .4));mix-blend-mode:multiply;}.slumber{position:relative;-webkit-filter:saturate(.66) brightness(1.05);filter:saturate(.66) brightness(1.05);}.slumber:after,
            .slumber:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.slumber img{width:100%;z-index:1;}.slumber:before{z-index:2;}.slumber:after{z-index:3;}.slumber:after{background:rgba(125, 105, 24, .5);mix-blend-mode:soft-light;}.slumber:before{background:rgba(69, 41, 12, .4);mix-blend-mode:lighten;}.brannan{position:relative;-webkit-filter:sepia(.5) contrast(1.4);filter:sepia(.5) contrast(1.4);}.brannan:after,
            .brannan:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.brannan img{width:100%;z-index:1;}.brannan:before{z-index:2;}.brannan:after{z-index:3;}.brannan:after{background-color:rgba(161, 44, 199, .31);mix-blend-mode:lighten;}.valencia{position:relative;-webkit-filter:contrast(1.08) brightness(1.08) sepia(.08);filter:contrast(1.08) brightness(1.08) sepia(.08);}.valencia:after,
            .valencia:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.valencia img{width:100%;z-index:1;}.valencia:before{z-index:2;}.valencia:after{z-index:3;}.valencia:after{background:#3a0339;mix-blend-mode:exclusion;opacity:.5;}.kelvin{position:relative;}.kelvin:after,
            .kelvin:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;}.kelvin img{width:100%;z-index:1;}.kelvin:before{z-index:2;}.kelvin:after{z-index:3;}.kelvin:after{background:#b77d21;mix-blend-mode:overlay;}.kelvin:before{background:#382c34;mix-blend-mode:color-dodge;}.maven{position:relative;-webkit-filter:sepia(.25) brightness(.95) contrast(.95) saturate(1.5);filter:sepia(.25) brightness(.95) contrast(.95) saturate(1.5);}.maven:after,
            .maven:before{position:absolute;content:'';height:100%;top:0;left:0;pointer-events:none;width:100%;display:block;}.maven img{width:100%;z-index:1;}.maven:before{z-index:2;}.maven:after{z-index:3;background:rgba(3, 230, 26, .2);mix-blend-mode:hue;}.stinson{position:relative;-webkit-filter:contrast(.75) saturate(.85) brightness(1.15);filter:contrast(.75) saturate(.85) brightness(1.15);}.stinson img{width:100%;z-index:1;}.stinson:before{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;z-index:2;}.stinson:after{content:'';display:block;height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;z-index:3;}.stinson:before{background:rgba(240, 149, 128, .2);mix-blend-mode:soft-light;}</style>
            </template></dom-module>
        <dom-module id="tinychat-media-filters" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-media-filters"></style>
                <div id="modal-content-filters"><svg id="close-button" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" on-click="close">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <h1>Filters gallery</h1>
                    <div id="filters-preview">
                        <div id="filters-video">
                            <div>
                                <div class="video">
                                    <div><canvas id="canvas"></canvas></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="filters-wrapper">
                        <div class="on-white-scroll">
                            <div id="filters-content">
                                <dom-repeat items="[[filters]]"><template strip-whitespace="">
                                        <div class="filter">
                                            <div class$="[[getActive(filter, item.name)]]">
                                                <div class$="[[item.css]]"><img on-click="onSelect" data-filter$="[[item.name]]" src="[[preview]]"></div>
                                            </div><span>[[item.name]]</span>
                                        </div>
                                    </template></dom-repeat>
                            </div>
                        </div>
                    </div>
                    <div id="filter-button-wrapper"><button on-click="onSave">APPLY FILTER</button></div>
                    <div class="waiting">
                        <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                    </div>
                </div>
            </template>
            <script>class ModalDialogMediaFilters extends Polymer.Element{static get is(){return"tinychat-media-filters"}static get properties(){return{chatroom:{type:Object,observer:"chatroomAssigned"},filter:{type:String,value:""},filters:Array,calcStyle:{type:String,computed:""},video:Object,canvas:Object,preview:String,onkeydownHandler:Object}}constructor(){super()}get app(){return this.chatroom.app}get settings(){return this.app.settings}connectedCallback(){super.connectedCallback(),this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}chatroomAssigned(a){this.canvas=this.$.canvas,this.filter=a.mediaStreamFilter,this.filters=window.TinychatApp.BLL.VideoFilters.getAll,this.prepareStream(a.mediaStreamOrigin)}prepareStream(a){function b(){d.clearRect(0,0,c.canvas.width,c.canvas.height);let a=c.video.videoHeight,b=c.video.videoWidth;c.canvas.width=b,c.canvas.height=a,c.preview===void 0&&(d.drawImage(c.video,0,0,b,a,0,0,c.canvas.width,c.canvas.height),c.preview=c.canvas.toDataURL("image/png")),window.TinychatApp.BLL.VideoFilters.getFilter(c.filter).apply(d,b,a),d.drawImage(c.video,0,0,b,a,0,0,c.canvas.width,c.canvas.height)}this.video=document.createElement("video"),this.video.autoplay=!0,this.video.muted=!0;let c=this,d=this.canvas.getContext("2d");this.video.srcObject=a,this.video.oncanplay=function(){e(b,15)};let e=function(a,b){let c=new Date().getTime();b=b||60;let d=1e3/b;return function b(){requestAnimationFrame(b);let e=new Date().getTime(),f=e-c;f>d&&(c=e-f%d,a())}(0)}}onSelect(a){this.filter=a.target.dataset.filter}onSave(){let a=this.chatroom.selfUser();a.canUseFilters?(this.chatroom.applyFilter(this.filter),this.close()):(this.close(),this.app.Upgrade("You need at least Extreme subscription to use Video Filters!"))}getActive(a,b){return a===b?"active":""}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogMediaFilters.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogMediaFilters.is,this),this.$.video!=void 0&&this.$.video.pause()}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogMediaFilters.is)&&this.close(a)}}customElements.define(ModalDialogMediaFilters.is,ModalDialogMediaFilters);</script>
        </dom-module>
        <dom-module id="client-modal-media-settings" assetpath="../../styles/"><template>
                <style>*{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;}.on-white-scroll{padding-left:16px;box-sizing:border-box;overflow-x:hidden;overflow-y:scroll;}.on-white-scroll::-webkit-scrollbar{position:absolute;width:15px;cursor:pointer;}.on-white-scroll::-webkit-scrollbar-track{background-color:#fff;}.on-white-scroll::-webkit-scrollbar-thumb{border:5px solid #fff;border-radius:6px/8px;background-color:rgba(0, 0, 0, .2);}.on-white-scroll::-webkit-scrollbar-thumb:hover{background-color:rgba(0, 0, 0, .4);}#modal-content-media{position:relative;width:100%;max-width:540px;margin:0 auto;padding:50px 70px 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;}#modal-content-media *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}#modal-content-media > h1{margin:0;padding-bottom:40px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;cursor:default;}#media-wrapper{position:relative;transition:.2s;}#media-videos{position:relative;width:calc(100% + 20px);left:-10px;padding-bottom:40px;text-align:left;}#media-videos > div:first-child{height:0;overflow:hidden;transition:.2s;}#media-videos > div:only-of-type{height:40px;width:100%;padding:0 10px;box-sizing:border-box;font-size:14px;color:#414141;line-height:40px;text-align:center;cursor:default;}#media-videos > div + div{position:relative;display:inline-block;width:50%;padding:0 10px 10px;box-sizing:border-box;vertical-align:top;}#media-videos > div > .video{position:relative;width:100%;font-size:0;overflow:hidden;cursor:pointer;}.video > div{position:relative;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA0OCA2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxwYXRoIGQ9Ik0xNCAxMy45OTR2MjAuMDEyQzE0IDM5LjUyMyAxOC40NzggNDQgMjQgNDRjNS41MTUgMCAxMC00LjQ4IDEwLTkuOTk0VjEzLjk5NEMzNCA4LjQ3NyAyOS41MjIgNCAyNCA0Yy01LjUxNSAwLTEwIDQuNDgtMTAgOS45OTR6TTI2IDU3LjkydjQuMDgyQTEuOTk0IDEuOTk0IDAgMCAxIDI0IDY0Yy0xLjEwNSAwLTItLjg4Ny0yLTEuOTk4VjU3LjkyQzkuNjk4IDU2LjkyOCAwIDQ2Ljg2IDAgMzQuNTg2YTIgMiAwIDAgMSA0IDBDNCA0NS4yODMgMTIuOTUgNTQgMjQgNTRjMTEuMDYgMCAyMC04LjcwMyAyMC0xOS40MTRhMiAyIDAgMCAxIDQgMGMwIDEyLjI4Ni05LjY5IDIyLjM0NC0yMiAyMy4zMzR6TTEwIDEzLjk5NEMxMCA2LjI3IDE2LjI3NyAwIDI0IDBjNy43MyAwIDE0IDYuMjY3IDE0IDEzLjk5NHYyMC4wMTJDMzggNDEuNzMgMzEuNzIzIDQ4IDI0IDQ4Yy03LjczIDAtMTQtNi4yNjctMTQtMTMuOTk0VjEzLjk5NHoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+);background-repeat:no-repeat;background-position:center;background-color:#c4d4dc;overflow:hidden;}.video > div:before{content:'';display:block;width:100%;padding-bottom:75%;}.video:after{content:'';position:absolute;display:block;top:-5px;bottom:-5px;left:-5px;right:-5px;border:5px solid #fff;border-radius:9px;box-sizing:border-box;pointer-events:none;}.video > div > video{position:absolute;height:100%;top:0;left:0;}.video > div.ratio-16-9 > video{left:-16.66%;}.video > div.ratio-8-5 > video{left:-10%;}.video > div.ratio-3-2 > video{left:-6.25%;}.video + span{display:inline-block;height:16px;width:100%;padding-top:6px;font-size:12px;color:#262626;line-height:16px;text-align:center;cursor:default;}.video.active:before{content:'';position:absolute;height:100%;width:100%;top:0;left:0;border:2px solid #41b7ef;border-radius:4px;box-sizing:border-box;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CgkJPHBhdGggZD0iTTIgNi4wMDJBMy45OTggMy45OTggMCAwIDEgNi4wMDIgMkg1M0wyIDUzVjYuMDAyeiIgZmlsbD0iI2ZmZiIvPgoJCTxwYXRoIGQ9Ik0wIDMuOTk0QTMuOTk1IDMuOTk1IDAgMCAxIDMuOTk0IDBINTJMMCA1MlYzLjk5NHoiIGZpbGw9IiM0MWI3ZWYiLz4KCQk8cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iNCIgZD0iTTkgMTVsNiA1IDctOSIvPgoJPC9nPgo8L3N2Zz4=);background-repeat:no-repeat;background-position:-2px -2px;z-index:1;}.video.active:after{border-width:9px;}#media-audios{position:relative;width:100%;max-width:400px;margin:0 auto;padding-right:40px;box-sizing:border-box;}#media-audios-combobox{position:relative;height:40px;width:100%;padding:8px 50px 8px 25px;border:1px solid #c5d5dc;box-sizing:border-box;cursor:pointer;transition:.2s;}#media-audios-combobox:after{content:'';position:absolute;display:block;height:0;width:0;top:50%;right:18px;margin-top:-3px;border-width:6px 5px 0;border-style:solid;border-color:#c4d4dc transparent;transition:.2s;}#media-audios-combobox-list{position:absolute;top:40px;left:0;right:40px;border-width:0 1px 1px;border-style:solid;border-color:#c5d5dc;box-sizing:border-box;font-size:14px;color:#414141;text-align:left;background-color:#fff;cursor:pointer;visibility:hidden;z-index:2;transition:.2s;}#media-audios-combobox:focus{border-color:#41b7ef;}#media-audios-combobox:focus:after{transform:rotate(180deg);-webkit-transform:rotate(180deg);}#media-audios-combobox:focus + #media-audios-combobox-list{visibility:visible;}#media-audios-combobox-list > div{position:relative;height:40px;width:100%;padding:8px 50px 8px 35px;box-sizing:border-box;white-space:nowrap;overflow:hidden;opacity:0;visibility:hidden;transition:.2s;}#media-audios-combobox:focus + #media-audios-combobox-list > div{opacity:1;visibility:visible;}#media-audios-combobox-list > div:first-child{display:none;}#media-audios-combobox-list > div:only-of-type{position:absolute;display:block;top:-40px;left:0;line-height:24px;}#media-audios-combobox-list > div.active{position:absolute;top:-40px;left:0;opacity:1;visibility:visible;pointer-events:none;}#media-audios-combobox-list > div:hover{background-color:#e0f5ff;}#media-audios-combobox-list > div > div{position:absolute;height:24px;width:3px;top:8px;left:25px;background-color:#333;}#media-audios-combobox-list > div > div:before{content:'';position:absolute;display:block;width:100%;bottom:0;left:0;background-color:#74d60c;transition:.1s;}#media-audios-combobox-list > div > div[data-mic-level=""]:before,
            #media-audios-combobox-list > div > div[data-mic-level="0"]:before{top:100%;}#media-audios-combobox-list > div > div[data-mic-level="1"]:before{top:90%;}#media-audios-combobox-list > div > div[data-mic-level="2"]:before{top:80%;}#media-audios-combobox-list > div > div[data-mic-level="3"]:before{top:70%;}#media-audios-combobox-list > div > div[data-mic-level="4"]:before{top:60%;}#media-audios-combobox-list > div > div[data-mic-level="5"]:before{top:50%;}#media-audios-combobox-list > div > div[data-mic-level="6"]:before{top:40%;}#media-audios-combobox-list > div > div[data-mic-level="7"]:before{top:30%;}#media-audios-combobox-list > div > div[data-mic-level="8"]:before{top:20%;}#media-audios-combobox-list > div > div[data-mic-level="9"]:before{top:10%;}#media-audios-combobox-list > div > div[data-mic-level="10"]:before{top:0;}#media-audios-combobox-list > div > span{display:inline-block;width:100%;line-height:24px;overflow:hidden;}#media-audios > button{position:absolute;height:40px;width:30px;top:0;right:0;padding:0;border:none;background-color:transparent;cursor:pointer;line-height:40px;text-align:center;}#media-audios > button > svg{position:relative;top:3px;}#media-audios > button > svg > rect{opacity:0;visibility:hidden;transition:.2s;}#media-audios > button.muted > svg > rect{opacity:1;visibility:visible;}#media-ptt{padding-top:25px;text-align:center;}#media-ptt > input{display:none;}#media-ptt > label{position:relative;display:inline-block;height:16px;cursor:pointer;}#media-ptt > label > span{position:relative;display:inline-block;top:-3px;font-size:12px;font-weight:600;color:#414141;}#media-ptt > label:before{content:'';position:absolute;display:block;height:10px;width:10px;top:3px;right:3px;border-radius:100%;background-color:#fff;z-index:1;transition:.2s;}#media-ptt > label:after{content:'';position:relative;display:inline-block;height:16px;width:30px;margin-left:24px;border-radius:8px;background-color:#c2c9cb;transition:.2s;}#media-ptt > input:checked + label:before{right:17px;}#media-ptt > input:checked + label:after{background-color:#41b7ef;}#media-wrapper > button{display:block;height:40px;width:100%;margin-top:40px;border:1px solid transparent;box-sizing:border-box;font-size:12px;font-weight:700;color:#fff;background-color:#41b7ef;line-height:38px;text-align:center;text-transform:uppercase;cursor:pointer;transition:.2s;}#media-wrapper > button:hover{background-color:#54ccf3;}#media-wrapper > button:active{background-color:#38a8de;}#media-wrapper > .waiting{position:absolute;width:auto;top:0;bottom:0;left:0;right:0;background-color:#fff;z-index:1;opacity:0;visibility:hidden;transition:.2s;}#media-wrapper.wait > .waiting{opacity:1;visibility:visible;}.waiting > .waiting-content{position:absolute;height:0;width:80%;top:50%;left:10%;}.waiting > .waiting-content > span{position:absolute;display:inline-block;height:0;width:0;top:-4px;left:0;border:4px solid #cacece;border-radius:100%;opacity:0;animation:waiting 1s ease-in-out 0s infinite paused;-webkit-animation:waiting 1s ease-in-out 0s infinite paused;}.waiting > .waiting-content > span:nth-child(2){animation-delay:.15s;-webkit-animation-delay:.15s;}.waiting > .waiting-content > span:nth-child(3){animation-delay:.3s;-webkit-animation-delay:.3s;}.waiting > .waiting-content > span:nth-child(4){animation-delay:.45s;-webkit-animation-delay:.45s;}.waiting > .waiting-content > span:nth-child(5){animation-delay:.6s;-webkit-animation-delay:.6s;}#media-wrapper.wait > .waiting > .waiting-content > span{animation-play-state:running;-webkit-animation-play-state:running;}@keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}@-webkit-keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}</style>
            </template></dom-module>
        <dom-module id="tinychat-media-settings" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-media-settings"></style>
                <div id="modal-content-media"><svg id="close-button" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" on-click="close">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <h1>Media Devices</h1>
                    <div id="media-wrapper">
                        <div id="media-videos">
                            <div>Video List is empty</div>
                            <dom-repeat items="[[video_items]]"><template strip-whitespace="">
                                    <div>
                                        <div on-click="onVideoSelect" class$="[[convertVideoClass(videoSelectedDeviceId, item)]]">
                                            <div class="ratio-4-3"><video autoplay="" loop="" src="[[item.mediasrc]]">Your browser does not support the video tag...</video></div>
                                        </div><span>[[item.label]]</span>
                                    </div>
                                </template></dom-repeat>
                        </div>
                        <div id="media-audios">
                            <div id="media-audios-combobox" tabindex="0"></div>
                            <div id="media-audios-combobox-list">
                                <div>Audio List is empty</div>
                                <dom-repeat items="[[audio_items]]"><template strip-whitespace="">
                                        <div on-click="onAudioSelect" class$="[[convertClassActive('', item.active)]]">
                                            <div data-mic-level="4"></div><span>[[item.label]]</span>
                                        </div>
                                    </template></dom-repeat>
                            </div><button id="btn-mute-mic" on-click="onMuteMic"><svg width="24" height="30" viewBox="0 0 24 30" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 6.997v8.006a5 5 0 0 0 10 0V6.997a5 5 0 0 0-10 0zm6 19.963v2.03a1 1 0 1 1-2 0v-2.03c-6.15-.496-11-5.53-11-11.667a1 1 0 1 1 2 0C2 20.643 6.475 25 12 25c5.53 0 10-4.352 10-9.707a1 1 0 1 1 2 0c0 6.143-4.845 11.172-11 11.667zM5 6.997a7 7 0 1 1 14 0v8.006a7 7 0 1 1-14 0V6.997z" fill="#41b7ef"></path>
                                    <rect transform="rotate(-45 11.9 13.9)" width="31" height="2" rx="1" fill="#fff" fill-rule="evenodd" x="-2" y="14.5"></rect>
                                    <rect transform="rotate(-45 11.9 13.9)" width="31" height="2" rx="1" fill="#41b7ef" fill-rule="evenodd" x="-3" y="13"></rect>
                                </svg></button>
                        </div>
                        <div id="media-ptt"><input id="input-ptt" type="checkbox" on-change="echoChange"> <label for="input-ptt"><span>ACOUSTIC ECHO CANCELLATION</span></label></div><button on-click="onSave">CLOSE</button>
                        <div class="waiting">
                            <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                        </div>
                    </div>
                </div>
            </template>
            <script>class ModalDialogMediaSettings extends Polymer.Element{static get is(){return"tinychat-media-settings"}static get properties(){return{chatroom:{type:Object,observer:"chatroomAssigned"},audio_items:{type:Array,value:[]},video_items:{type:Array,value:[]},audio_selected:{type:Object,value:null},video_selected:{type:Object,value:null},videoSelectedDeviceId:{type:String,value:""},enableAcousticEchoCancelation:{type:String,notify:!0},onkeydownHandler:Object,onClose:Object}}constructor(){super()}get app(){return this.chatroom.app}get settings(){return this.app.settings}connectedCallback(){super.connectedCallback();let a=this.settings.getSettings();this.setProperties({enableAcousticEchoCancelation:a.enableAcousticEchoCancelation}),this.$["input-ptt"].checked=this.enableAcousticEchoCancelation,this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}chatroomAssigned(){let a=this,b=this.chatroom.app.EventBus,c=a.$["media-wrapper"];c.classList.add("wait"),this.mediadevices((b,d)=>{b||a.app.showToastWarn(d.message),c.classList.remove("wait")});let d=this.settings.getSettings();null!==d.video&&(this.videoSelectedDeviceId=d.video.deviceId)}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogMediaSettings.is)}close(){for(var a in this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogMediaSettings.is,this),this.video_items){let b=this.video_items[a];if(b.mediasrc&&""!=b.mediasrc)try{URL.revokeObjectURL(b.mediasrc),b.mediasrc="",this.notifyPath("video_items."+a+".mediasrc"),null!=b.mediastream&&b.mediastream.stop()}catch(a){console.error(a)}}let b=this.settings.getSettings();null!==b.video&&Object.isFunc(this.onClose)&&this.onClose()}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogMediaSettings.is)&&this.close(a)}onMuteMic(){let a=this.$["btn-mute-mic"];a.classList.toggle("muted")}onSave(){this.close()}echoChange(a){this.settings.switchAcousticEchoCancelation(this._str2bool(a))}onVideoSelect(a){this.video_selected=a.model.item,this.video_selected.active=!0,this.videoSelectedDeviceId=this.video_selected.deviceId;let b=this.video_items.indexOf(this.video_selected);this.notifyPath("video_items."+b+".active");let c=this.settings.getSettings();c.video=a.model.item,this.settings.saveSettings(c)}onAudioSelect(a){for(var b in this.audio_items){let c=this.audio_items[b],d=c.active;c.active=!1,d&&this.notifyPath("audio_items."+b+".active")}this.audio_selected=a.model.item,this.audio_selected.active=!0;let c=this.audio_items.indexOf(this.audio_selected);this.notifyPath("audio_items."+c+".active");let d=this.settings.getSettings();d.audio=a.model.item,this.settings.saveSettings(d)}convertVideoClass(a,b){let c="video",d=this.settings.getSettings();return c+=a===b.deviceId?" active":"",c}convertClassActive(a,b){let c=a,d=this.settings.getSettings();return null!=d.video&&(c+=b?" active":""),c}mediadevices(a){let b=this;if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)a(!1,new Error("Browser does not support Media Devices"));else{let c=b.settings.getSettings(),d={deviceId:this.chatroom.id__miconly,groupId:"",label:"Microphone only",mediasrc:"",active:!1};b.video_items=[d],b.audio_items=[],b.video_selected=null!=c.video&&d.deviceId==c.video.deviceId?d:c.video,b.audio_selected=c.audio,navigator.mediaDevices.enumerateDevices().then(c=>{for(let a in c){let e=c[a];if(e.active=!1,"videoinput"===e.kind){e.mediasrc="https://tinychat.com/images/blank.png",(null==b.video_selected||b.video_selected.deviceId==e.deviceId||b.video_selected.deviceId==d.deviceId)&&(b.video_selected=null==b.video_selected?e:b.video_selected,b.video_selected.active=!0,b.video_selected.deviceId==e.deviceId&&(e.active=!0));let a=b.video_items.indexOf(d);b.video_items.splice(a,0,e);let c={video:{deviceId:{exact:e.deviceId},width:320,height:240,frameRate:{ideal:15,max:30}}};console.log(c),navigator.mediaDevices.getUserMedia(c).then(c=>{try{e.mediastream=c,e.mediasrc=URL.createObjectURL(c),b.notifyPath("video_items."+a+".mediasrc")}catch(a){console.warn("MediaStream URL Object failed.",a)}}).catch(a=>{console.error(a)})}"audioinput"===e.kind&&(b.audio_items.push(e),(null==b.audio_selected||b.audio_selected.deviceId==e.deviceId)&&(b.audio_selected=e,b.audio_selected.active=!0))}1>=b.audio_items.length&&1>=b.video_items.length?a(!1,new Error("No Media Devices has found")):(b.video_items=Array.from(b.video_items),b.audio_items=Array.from(b.audio_items),console.log(b.video_items),console.log(b.video_selected),console.log(b.audio_items),console.log(b.audio_selected)),a(!0)}).catch(a=>{console.log(a)})}}_str2bool(a){let b=a.path?a.path[0]:(a.composedPath&&a.composedPath())[0];return b.checked}}customElements.define(ModalDialogMediaSettings.is,ModalDialogMediaSettings);</script>
        </dom-module>
        <dom-module id="client-modal-mobile" assetpath="../../styles/"><template>
                <style>*{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;}#modal-content-mobile{position:relative;width:100%;max-width:400px;margin:0 auto;padding:150px 80px 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;background-repeat:no-repeat;background-position:center 62px;}#modal-content-mobile.ios{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAABNCAMAAADU1xmCAAAC+lBMVEUAAAAMc7R2LA+5pxBQqTcOtOLWHmIGo+XcI2eduxyObg7UHV+LbAwDqei+yBelkQ92QgnYIGPVHmCduRfZIGS8yBfSHVsEs+8EhMpkqC0Gnd+IoR8EnN6JshwFer5SpjS0oRByMAoGru0EltqBsB/UIGPZIGDFzhdxNwkEyv////+4F0rAGE8ICw/EGVG0F0nIGlS8F0x8ESZ6GB+nFEF4IBl7KhQDqOPLG1eiEz6rFUMSGiSuFUUDr+kDn90xpFrPHFoNEhp/NRBzJRUDoNOGJlA+p06xFkfm3xvV2BkdKDmbETiDDyrHtRKtmA+jiA0DnssEf8N7KlQDptsDnL8PbqwpOlGIvSjP1Ri/rRECAwUAAAACkc9mNF+sxRi/zhcCmNcIeboUaacro2TSHFxwL1mPIk1Urz5otTR1ESacwB7b2hrEzxc3pFJyFiDJ0hi4yhaBQwsDgrYdX5orU4oioXZLQHBdOGVMrEQiMEPs4hzg3RrWxBQCh8sClMgNnqN9uiyjwxtvHBuegA2QawuEUAoCktQKn7AbZKEWno8an4Y3ToIeoH4mom1ztzAXIS6zxxfPvROzoA+ojw6beQwCisYCkb8GlrU+SHxFpkFcsjqTwCPczRaR5/9s4P881v/8/PwhW5RUPGtFq0uqGkm3sxKWcQsLlKkToZglV5BFRXXUHV9krS+/uROkphCinw+KWwny8vIChr3HwBQGjrKZHEiTDzKvqRGdlA6MZQqx7/8GxfekHUucH0xzsCiNuB/QyBV3Nwgvg60PlaAVZJ4uT4TYH2LWHl+WIU3k1BeQegwOwesev8I0t6gTmZdRX3dehGCjGEYYIjCvshKViA/2/f/j+f/S9f+g6/9x4f9Y2//Mzc0DeLBPSlGvGUqgHEmmrRGBsyGCYQwOsMWdnZ42cpQ5OjqYpRDExso3i71NtYlgsGcmm8iusbZHc6E+kY11RXNhXlBvqUgoKSp6cimMoRwZncs0s3lnJivW2t/O0NS9vb05TWdwjkD3RA2eAAAAKXRSTlMA/v7+/v2VJiYmJurd25WVlfr16dHNyZubm1hY0dHJycnJioqKWFhYWC+PjMYAAAgISURBVFjDldgDtFRRFAbgm23bbrJt27Zt237Ztutl42W+7Jdtu7X69z668+5U05/WCl//PvvcmSnLlrixIoTIT8mZs2rVqsWKFatUqVK1atVGjhw5cODAlStHjxkzrnv38eObFixYsH379iVmIcETxYlneUioWAwxBo05YFIDBm0caU21Bix48LVr18YJExhL6rTs1cCNNhpjRtu3L7l7sQj5cwopMAYN4Wo86XjWBNYLGmP37iUIY8dgcMjSGGszZjiPjbUls3qhGjDS9kcLY7ACBZRVoGrVAgUKuGErxJz2YyMMc7ZsOZur7d+/v43m4hcwYUpgAwhDSDvLx+Y2aK9eEht0D1ibwTEElqxRI7vVqFgjYAOQ6dPJWrHi0KGzZx3VerHWqtWECcDmtBncoEFEnnPEiEYjGukAq1epHmN2Dac2RmqMLdHYoJqoNnhwg4kTadbY9UYgIGHi24h69WCBEtgWiUHT1UrYtUHQqBo0Kte/f38A4AiSFmubtiDAWAMmNuqsVnNOmzbAOnVqiMcJGgJRZtqAadOm2bAVIx9wRq4cB0xqjIlqBmuXyopduXLl/ipwOJuQLqRVCrE7jcmp0yubeqo2WGDtIloJK5swNI2kTV2QaiHSOLL79BfSdDVgrBHWMYYVpDFFg5sqw+JMz++0OKe/mBVAk1jDdh07drSCIAwy2rgxS7e6dMnpZIy3xFRjDBqwWqWt6tXBMQmU4VvIAPtxeZj3i8CkpjBoTaoDFGR1/g5Y1TT/ypnZYgVmzlqkNaFAtEdP+bdpqZpZAWNtrVFIkyb4ikg50PEvmD/v2q5r8+YvCMS5VyOsr9W1a1d4CLOHEbcxb+y6nFbl8q4bbpzUBCa0ReAA4kvXw10JK5bGZP4VZkyuzLefHTDW2lG1tm379rVWrVqEdMVXkS62Ea+mdeaqbeAXclDCSCtlreq2ClmkcthcjesLnRay8Lp50moO5kGN1o0DUsTMOc/hqMwzs9ruGrBS1tgjR7qZNLFjXnDvG3QS1wMYaTPHUmBCPXIkpx4z7d+ihz39ZKLaAbA+1kxEi6P0Ahb+VVu4QJe726ldu1paW70amiI/q9/kvk3fmz+e+rpvVp/cp7sNO0qtTx+rx+oeqznkqYXOt/d4+LguUufxQ3tfde92f3pykTRgrHGE6af+xiv2YgGwOB9u2q6xvnNP1l+UG8WkiymSVIPecJ/TVUfG9cr87A016pP1d9fpbj17QpPiKfk7dtks5HEdFwecabdL3WBoFzdrDYFI5mrV/rI+M1/qltel80Gf3WX1mz9BW7YZ1420+vXrQ+OMVddDF3gY4JvW953LVVjF9VD/2gJ1R55AW3cA3VhDIMJ85Njo47qux3nZysspXDjAsdUX60nbDA5ac0SKfoEfKl9cDJyZsHwu+NAPvoEfr+dSm0s7rQKNYtOuqT9wExpjbCEXLvjoPVxT2ob1rIGDVqVKcylKzaz0h9Z8fMqI+DzVSzXa9mXLNqPcCWgy0BzdngqNmgHqjZQp893ZDRq6QTthFUck+NpxbnWU5gNMxHlurFG3udBEWHPuVGoXCKtB8XfulM9tndBatGihQH/nfVPdtPbKed/QjbV+0I630F5z57PwATdEaLKah2eBNIzajzUKgSBDOJ7Tmy5ohTGp0H5+cz6nO6BtR7dJpO1FwHGeOV9DXrkwKncj7KmH15AdGzZsx6iTuNuePXs16O/h9e3mB2gXfEjz/+bp9W0HT1p+0iSh7bmz587erZTinl97A2jU3v6vPL72XtqxY8P2YLXLl6dy1tKlSwkU3rM/vS88/f6n9wV37fZS5d3ZuvXtf79n/QqkIUsp58+De/m/76cnSZvM2iRoGRGA0JDcb718rzfVoFWYDI7LWekQgCXzLV2a7Xzu3M/+73PIyZOXLk2pUCFYballzpyZuJIl8+XJkydbthan/ucz0kdoFStWqKC7pc9svHzg3v7H57dzw4adHFpxyhTSauPgJlkZ0iPCA4d6r73+bPnm/s5hJ6dWrCi18qRlgMdcOtTLky9btmdefe5FPrKGcuLgwFmZMmUg0JxetvMvvflMzt3uD1sutMmCg8Ye18Nu8+XJl+c82nmTU+gGTY0KzsqVS3LwUA9nh2Ffe8e92bnTlCPPKpQLgWe4PLTZU15x50w5cKQVggctEw0r29G98/NG232ONCrHXDArXDPp8S5Mu9z1X/6BePnZ/i+QjzwqcfCsmM3AycPjWZmDlrtcfb/dzjZ+AUWL+oewTzsVnGiX2Aq5ppny5GZxT0qiXe6y5bK0Xu1n/4Mh/AK+FkWCBn33JoTWqBy3qxDJSnns2BrF6XuXjzTmWrf+GuD/iOIf8HUIQhhSpEiRd+/OIR9xcjg6bof/2IvKGnOBNsEcpwMCicLdcuQognTuPHz4xo3Dli9fDo3qWZYV8ii3Y405c3KaA4YwRslh13BJZLtI0EJHYY7Kqb1m5L1KLguDrJFHGHPQFCeHDWtxuaPm6LgcOIzKGjgEWlZwWbNzYEGjQGOO6p1ENUp0wUFDOzMrL4I49rJmhWbnCEOggcMLXXi2MGu4o0fXqFnN85pNlNsGjpJVRGvgzLA7d4bHnJo7xpy6dKKb5oSnNcTMKoa9bzBw0XU5swetgdOevVzQoAcR8uwYryIKON4DNLeDUxxAWzuyJActslRMvZBR3UbNKEdlDRxiK1c0O+4whbTIKOZMipAxw8k98BqMxpyZFRrCXJLIqW3Cbxc+x4gzPh9bAAAAAElFTkSuQmCC);}#modal-content-mobile.android{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAABxLuKEAAAAAXNSR0IArs4c6QAAC4VJREFUeAHVXA1wVcUVPvvyn5A/YEQo0grVBFCoJLEzbaFEMegAFS3MNJQiHRhoS0eETqeKwAjDKM6UIpSO/BS0nWntQIq0UKtBJ8iP04EERZsQBCm/gpJAIP+/t993kxffS+57b/cmLwln5ubet/fsOWe/u/fs2bN7o6QHKbrQSpcWyYTKNEtJGs7DcaRYlvQTJYm2KZZUKiVVuK7AcVZZckoipFQsKWrIVKU2Tw/8UeHUMbDUSrxZKU+gUZMBRDbOg7ukT8kVAFUAEN9JTpQ3y9JVZZfkBakcFmBijlmPtFgyF2BMBxjxQfS7v6WkBiDt8Sh5vT5L7XcvyLmmx7nYvPQFy/JEH7NmRB21Pmy2JN8SmRU2UGgeAKcO6oo6Zh2nbtpgbrlzjW7pMbHHrYebm2QjDB3lrKZnStGYkohIebpunHqvqxq7BEz8cWtIY7Osg/P8UVcN6c76cN5/i1KytCZTXXEr1zUw6LqPt4i8hi6d6lZ5WOspuYH36qcNWeofbvQYv5MZhVYU3un1cK57+iwoRAIPjDbSVtpsCo5Rj+l/2kq6VWEDkm2qqFf5lRQkpcj06/eoW7p2aAOT8Ik1qKFO/g1/8oCu8L7EB7/zYXSsPFZ9v/pCxy4tYNpAOQxQvqkjNBjPYHTq7CSRcYhu0mJFRuBIjhBJxEGqbBa5ieOzOpFTOI7XiBTgOV9pbL3flb8A5wzA+Z4OOCGB4etTWSEHutJThkaL/HiASC6O0XHumlZcK/JGuchfcFxqcCeDtdhzElNkYqjXKigwdFonLHkHjizbjSkE4VlMAmb2F4kIqklfOgI62XVdZC0GYoLliuBzxiqZXJSpAvbDoObSo6OnPGOqfECkyEtDReYOtJ+QaXUtftglr5eJPHdJpLxJq4ofE3rOK41Zaolfoc+PgMDYcQqHZEN6AlHN5m+I9Ac4PUHXAcrPzom8ecNcG+ZZ0wPFOY7AxBdagxssKTaJU+g71w0TWTTI3MDuqPEHjDW/uiACv61PCAKjlYx2ipAdA7xGS35nAkocpOy5p/dAIRJ8ILSBtmgTgkC7rQ4VOvUYTgibmuRdB17HIhry9r0i32lNMzny9GThB8jQPPqpSC3mK7oUGSmTOk48/fDltJ2zZF2BfH12jug7oNBuPiDaRNt0iW3umLLw6zHMaWB+sUtX4Cu96FNC2Uif88yFUFxf3YcjnglHnOct8esxGAGXeW+EOnP06S1HG8o23qdttFGXOra9vccwHclsmI4gxikl9/fckKxjkxMPh/JRn+jHOQhCc7xp0vZogzlaJ+FOZQzeuhqnVFdXy759++TIkSNSXFws5eXl0tLSIgMGDJD09HSZMGGCTJkyRZKSMLFySbSRti44pyegDQM7f2z3GGbzKyrlKobokInr+xDmHx/tPqK9du2arF69Wnbs2CE1NZghBqG4uDiZM2eOLF++XIYORQtdECPkccUi/9WZPiDBnpIod3L1wfYxbUscIUGhXZz7IJx2TampqZKQkBASFCqora2VLVu22D1o+/btrnTS1t/oLtqgY9hYQFOr88W6j45WzpJnYELYFYpE0LB27VqZNGmSthi+dvPnz5fFixdLc7NRbGvr4CSWtmtRGxY2MPZimEYtpg66a5acm5urodGfZePGjbJ06VL/Qo1ftJm265AXC4+9bKq5Qsh8SndRSkqKK1EEx81rpW07sCAmnra15JBGDkHmzTTJVFZWFrDrFxQUhNQZiIGv1MWLFwPddiyn7WyDFmF9na8SF9dD0kQXo+aqVatk5cqVnWQfPnxYtm3b1qlct4A+Z82aNbrs7XwGbUhTSEbtxJA2s712gIt1d4k8fWeAmw7FVVVVMmjQIHv0ycnJEfqU5ORkYU/ZunWr1NfXO9TSL+JQfvXqVaM4Z+NVpCY0OhpGsl0M8EbomJOGrmhCDN68cUp+fr7w6E7iUE4ds2bN0hZr0IbhfJWSdSQPj9Hh+oqHEW246eDBg0YqDNqQ4sFrpJVJSYkwssEO881qmHOXlpYaVdJtAzFhj9ECxrvuo2sJ5z7hJlMdBm2wgQmL/ZwQ3s7EHlOp0wCuEJoQZ8nhJlMd2m3AHkAPhiYtYCoMgWHqINxkqkO3DdjCVs0ec1OnAWcNw47x48friO0Sj6kO7TYoKScwn+lYd0onn+EjaOrUqRIbixX7MBFlU4cJGbThrMfeR6shnbsOTIhR7uzZs02qGPFSNnWYkG4b4F7OsMec0hF+4JYOlz/PihUrJD5eK//lXzHEL8qkbFPidhIdQtLvlAcLMEU6zJexL6DE8HUaNmyYrF+/Xke8EQ9lUrYJ0fbPA+5t8JfkiZAPPA0Z6iSKMb0KTdyfYkoLFiyQRYsWmVYLyE9ZlGlKBrZ/Wf+AOs1XiTlcreQIN+0gk25MGzZs6BZwCAplmRJtpu1apOQg+WxguDdfp9LFBpE8bNoxpYiICNm0aZNs3rzZlc+hT2FdyqAsU6LNtF2HAMhu8tnAJPezf2h5EO5k4pKEG1q4cKGUlJTIvHnzJCYm9HSdPORlHdZ1Q7SVNmtSXVKi7CNv+0IIElZ/hZBcHQF/vFvkKeyW6gpVVFTI3r175dChQ3Ly5El7wY3yGOaPHDlSGLxNmzZN3OaGvbb9Cbuu5v/P+yvEWcnfm7LUDHK1AxNTaOU0t+i9UgOR3uISbSrTXH2YbjS1LtGW4axJE5seVO+Tt9XH4KI+U+UDpRM6AqjoF+d0OHuXhzbqgoIB6GMvKLS6HRj+UBHyIs86lIc9b5u/1OHsHR7aRht1CcC87MvrB8yycZIHBsY1WrTkgsh+rSmolrhuY8qHTbRNl/CmfFSfIW/48vsB84JSLShY7MsQ7LoJHn/GGZH/VAXj6tl7tGUmbKJtuoRI91mlMGv0IT9gWM79IUBwpw9P0MsaJOomY7bVF3oObaAttEmblOTVZ6hOcVwnYCgwMlqWYrziV6xaREN+cFpkSy/6HOqmDUagYE9RbLQ4zlccgan9lrrssWSeFiptTOy6vzyP7wXQjSswavUUURd1UrfJ60P7PB75edVY5fg4HYFhpYYH1W444t/z2oQ4EnB7158RWIWbqIO6TEYfr01o23p8xx1wIybcSWAaXWxFf1qDL2It+X5grsB3xmD18rkhIk+m4ukE1RRYRsc7nBDuBvgvfS7ysdYkpqMEO6o99N0seeiAUgH7dkhzUwut5KoWeR/2jO2sQq/k69i04/0sJ91wqderoRQgMHXAWfJ5zQmht26ns5K3EPpP6VTuUxASGPLy2wJsLeeHXMN96rq6vAsgZSdiX1xC64dcXDZNwdTCu8JVCUdOv8HENT/kKqoWOYB1DN3ZsaZRTVExcnftWHUpEL8WMKzcBs7bAGdMIGG3Uzkc72/hY34dyGZtYCig7bX6J16rCYEE3kbltdgOOBLfEJx3sjngqOTEfCNT3bw3QR5xM1o5yevlsrimZnnVsrDrzoEcCx34OhVFH7WebFGyA3uDkzvdvI0KMFq+iG8Inu9oslGP8a3MOCcqWu5DhJznW367XWP4X4aPS14O+vWJ20bFFFmTsblhAxxzmlsZfaDee5FKFtRlqbO0xXWP8W0IJ2HPZ8oodMtc+B/Eoj1L0HkSDfkJzt+Gb/jIpfaHMaUoxr952cDvzF37mEDK6cxiC+VRhCNPoQc9Dr7wLGArYZj3FjY3v1qXIfu9aYOJlhV5pEjmYpvuEoyeowLZGawcoBR3OzC+Cu3h3ZIfoiwHIGXjfIfvfeNrZe/MeBeZk3/Fx8qem2MUJgfOxAcUdUwmoBdNB8c06B/hzNm5FHXOhhUYX5U0NKZQRmNwzIDSNDi9NDSQxibjySbCiSdihIvAGfGu3MK9L8B7GbzIsNhP8OiyTClhMs1Xru51vxPWHY0Nkolvskah4cOg82uo2w/y+Z+LGqG7GtdXoPMM4pud/wfuqsJIQLSA9AAAAABJRU5ErkJggg==);}#modal-content-mobile *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}#modal-content-mobile > h1{margin:0;padding-bottom:40px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;cursor:default;}#modal-content-mobile > button{height:36px;width:108px;padding:0;border:none;border-radius:4px;font-size:0;background:none;background-size:cover;background-repeat:no-repeat;cursor:pointer;}#modal-content-mobile.ios > button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAAkCAMAAABbsy/+AAAA81BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8UFBTQ0NAEBAT9/f2RkZEYGBgRERGJiYlqamo0NDQNDQ1VVVUKCgr8/PzExMSfn59BQUEnJycHBwdvb29aWlowMDAaGhrr6+u/v7+Dg4MlJSUdHR339/fv7++wsLCtra2lpaWjo6OUlJRlZWVRUVFMTExHR0cgICDd3d3Dw8O1tbWZmZmMjIyGhoaAgIB3d3dEREQsLCzo6OjV1dXLy8u4uLg8PDw5OTn5+fnx8fHZ2dnS0tKpqamcnJxzc3Pk5OTg4OBeXl4+Pj7z8/OysrJ8fHyIiIjGxsbY2NjO0k3oAAAABnRSTlPjjQ8A1NMV7Ym9AAADlUlEQVRIx9WXaXMSQRCGCerbe8LusrCw3PcVjnAFCAQihCAx6v//NfYsGtkS1FgW6vNh6Jnt4qnumtmaDbwKXgRwBgIXwVeB4BucidfBwAXOxkUggLNxThfw92XpQcg37xzEBaVjQjAWOS0XR4n8smykRu3D+eLuFs9cZyJ5CKoTAFcSvqcJvP1VWYqo51sYPGlI7aBhWIvvZfnaGNXw+pZl9oe+KHxy39cx0PoKMC5r6OYd2x32Ez+V3VDZnzTL3GBR3zWgp2J4n2CZHpmhGimuWPaUvKx7OS0H2dB9W/wB8CANUpvrduVnMiU697tMWZMXmDXSmVxb9mT6VfsG1TTesux+YLQAdDGZ83yU8mQcJQ2tYVz+QJZ5qmttBeZwXtl82yIfIkgNcP0RBXm4l3VWwxUqTm3Esl0uL6oZOfPWV9k878nMXL51WvauREy2S97PAl8IKVAkuBaghySeceQFbhGQAKuggCmGxMyyAdgdjmwbNj85JWurdMgIfxa/bOVzafDxh2UTn+vOwgGS7uIk0mJiv1SW8sl8J01XKYkT2DWV6FF/oazpk/lOiKFuYziBRsP0bgN0cskXyCI+WRcH5GaamgGQkVCIiyKKIpAguJlCYEXoQ8cCFNNbDxVRSADubdw6KkuTj4PzKEWHY6+Pcs4hWnLU7a2JSk0wPTUC5h0x7zB+IDUaBrS7pNrAblpaluPHZCj7d0j8oMGmkr0CMFPniduumsaNWinEt9EEgMmUYi3ASlG4YBUf5YztkIGB+rAxpWzFtT5ulWOye/KhPtvmW36o6kCMeLikMORoSBTzBEbXHqmq4JaugZFoiLSUEaYmYFBc1zdkHpNN/LKpiz2haOnhoUwGy0oAOlSDnPXy+18SKtTcy2rUAbAtIywUDfJoHZNx6iFNeIgKGoaRVHMsiyqASQ3IdwDiXOKeBGs9WV84lLsuy9LgIV5k3KMyaXrgyj0v90TPcBWVEBNdcniQqQ2saQwgzX6DRSZposUNIMWDJ2vz0um3/uKRLcupKrb+8zG1lp43SU2urPx+Js67vCxXZKqCmWZjK1pZsMvRXBoV6tVLn6S9DHWS673aCRkSdefShWTUB6Fva+ExmEw4hVjJdKpJl2XZhVM1FDBjbV03bACmUytAaa6rGwtohTNgIvdrrfV7tyuWQSBk+HX+B9nIwZ5h/7tn/8cl9Xf41y77gfN+MgVf40y8CZ71M/czY4yqO2nIrfwAAAAASUVORK5CYII=);}#modal-content-mobile.android > button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAAkCAYAAABsbd/MAAAAAXNSR0IArs4c6QAADIhJREFUaAXtWwl0TtcW3v//RyJmMVOzmhoxV4mhXWKooSgWbbWlpfV45sh6r8qzTFXEuOhrlRY1xlRqjOLV7CUp9RBjkZraBAkpErHf/nbcm/v/f4onZP15zV7r5J577r7nnP+cs/f+9t43RKmUXy6hUmKk3JfC2cUj1gB7cUHKFCn5pJDtQWWPXP3RkE0euwJHZGaNHfJnvJSOHjvN7IkZK1BMKt6QMIhcaaM1++rRKxCDDYOexDWbPH8FGBsFgPHMycvLi6pWrUrJycl04sQJHa9UqVJUoEABc2y0V6lSxbxH5fTp03T37l1tK1iwIDkcDrLb7VSkSBGTLz4+nn755RfzHhXwVq5cmc6fP09XrlzRZ8WKFaOUlBSKjY3V+0qVKtG5c+fo3r17ep9V/jxzRPjCCy/w4cOHee7cubxy5Upes2aNjrlgwQLeunUrf/7551pkkfX6ww8/8KFDh7ReokQJc379+/fnUaNGcYcOHfRZYmIiz58/nz/88EOTRxad33nnHY6IiOCpU6fy7t27eeTIkfo8NDSUf/75Zy5UqJDeR0dHc/HixZ3exfseXp79BLEBbdq0MRcib968WseG9e3bl8uVK6fFZrNp+wcffMCTJk0y+Y0FNDbMuBep4jx58jjxYTNEojh//vzaLhLJR48e5Tp16jA2bO/evRweHs5oz4ob5iU//plT+fLlSSSGunbtSgMGDCCRGmratKmO+8Ybb1BgYKDWe/fubaq/J51UyZIl6dq1awQ1CYIKPHXqFGEOoHnz5ul4EydO1Pus9seeGRNevXo1ffTRR7R27Vpq37495ciRQ20Rxp45cya9/fbbWgxblZE5HT9+XF9/6623CHazWbNmVLduXRIpN7vt168fvfzyy+Ymmg+yQCVTNiwkJEQN/Y4dO2jjxo2E0w2QcPbsWRo6dCjt2rVLS+HChXXJfv31V4qJQdDFma5evUoXL140G3/88UeVILNBKgAQr776KrVt25bEbtLw4cP1kPz222904cIFwvXOnTvUuXNnOnjwoIIg6/ueXs80lOjpC5FV5ucmYd6OHOTlyBTTllXWyKPm6bYzPer3JnqlLsVFbKd125YSM8BWNnnKCiCWONo6mfoVGtKeOrWpRoXSVKtbOyp6JZFOXzxrZfm/qcPWvf/++4pYo6KiMoxQM2Nh3CTMZreRw8dOu9iPWiRcoyKz+9I/IjtQ+PR5tDf6UIbn5Ofnp4hQfC8Sv0sh/u3btxXFiVNNCQkJGR7jcTpAxASgY8WKFbRz586nPm6TJk00ogMA9TTJzYbZHbJhEhN2eNtpe67CVHLvHUoMLEpBa/5O00PHU/VSZZ94fMD39evX0759+2jIkCE0ePBg6tatGy1atEhhP/wla8jpiQd6jBfhn8XFxanKx4F52iTRF3r++eefdrfkLmGiJL1EwtR2Sagx3LsotdoVS3mDbGTvWpGGdZpAySsP05iJX9IlcVAfl+AXjR8/nmrXrq0LZX3v+++/pz59+lCuXLkUdlufZdedV8B9wx6oRASs+D5r3Co8RxEK2htH1V5JIe+8RL59atKiHqEUPX8fDR+7gH5/EJx17jrtDgHeWbNm0YgRI9w2y+CCj+ZKuXPnVn8JJzUpKUl9uMjISCc28HTp0oUQyAXPhg0bCPbISnCgGzRoQM8995zpsCMSsmnTJiub1hFYljAavfjii+qvQWUiAO1KnTp1onXr1un84JjDR1y8eLFeXXlx36JFCzOis2fPHpLwmJoE2FBEX1zBXa1atShnzpy0f/9+p+4eohJTbZmXqEZI3A7fwnT0gDcVEMc0b4775OvnRQ3/1piizs2gd+sF6OBOPVtu8OMQPZdAr6X14VUs8PLly+nAgQMkAV9CBEMCuSTxQPPFl156iZYtW6Yq1uDBYkyePNnkQURjzpw56iAjPIVFbdSokfZ7/z4yS2kkMU5CVOb69es0evRodcKPHDmi0ZI0rtTa9OnTSYLYml3YsmWLHhbMDwvtSkuWLNGw3LZt29ReIgRnbFKrVq2oZcuWrq+QBK7JdX4GE3C7WQa2H8pNNuzkJt/t5Mbrd3DgOinfbufAtdu5kZTB61ZxxI2v+KeUBRyd9BXfWjmWeU4IR43pyUEB5cx+rH1K+EkOEDOi8db2P6qLRLIYa5ZNc+IfM2aM9iN2T/uSqAXXr1/fiWfsWJmPkMQtWSInLJLENWrUMHmQLbh586YZHMZzkSJ9LlqAp02bZvL6+/uzSC1jXNe5IlMgUujULlLEYp+17ZtvvmGJkeo4X3/9tRMfAs8IUGM9JKbKYtednlerVs3sx3VcNwmz5aQHoCMVfEC6vHwcihwhbZEOP1pwoBD5XEuiMt+ep9wJNyX5xFS7ZhEKD+1Km6d2oSrl/GScNELsEISg7+MQgAjAh0TTndjlh+t9r169FKwglPUwnqCgIMqXL5/mz4yOwsLCSCL86QKC7t270+XLl6l58+Ya42zXrh2VKVNGJdx437gixAWUaSWoOckWkBFiwzOo3p49e5psPj4+GksFeoSpQIwTecEKFSqYPJKVUBNiNlgq7jYsp003SA6pyp1xJUlKw6YR2en368mUb8hW8mkknxkU9yXKJc0ovkyV/QtS8eK56cS5NEBiBGQh+seOHbMMn1pF5N5Ah0guGpPHj8cPNgixRywoIvIVK1bUZvCIxBgsdObMGbUj4Ll06ZK2I+CMuCLoxo0bdOvWLTe7BBcDahtqFnZw0KBBbnZFO3jEHyREixYt6sQFmzhs2DBVmwYiLVu2rMkze/ZsQkA6ODhYDxPsHVB0euQmYXbZMMB6SJZ51brcyzUgPpZGLQojvphI8RtP0P3kWyphcbbbNGTODqrabj79a3+M01irVq1SG4JJACRYCRNHG7LR8MPgnyFLDMJJdyX8YGSmH8Vz8uRJ07dD8Lljx44kKo4GDhxIb775pm6ctW8cTLwD/0mSnE+0WegPm2VktHGPA4CMxHvvvadB6ddff51QjPmDBzZOkrLk6+tLknxVO4vMfHrktmE2ERhsjG5WzlR1mKoW7dTg6hX6y5ebKCnBTsnsTXcTbRQfdpomhR2kim3n0vSvIuUUpbiNgwj7hAkTVL3A5/L29jZ5MHGgNUkyahtOP4AEclqSyHQCM1AhkJwZM2bQ0qVLFRy48kBKoHrBA0IODkUSmAQAAWAAXzA9ksy3qrPPPvvMadz0eDEXqDIrVa9eXYGK1VmuWbOmjmfdIKjM0qXTvnvCIQTYgesD1Ih5PIycDF7w8GB+7dgBfu3ofm4vpd0RKT/t4/HLl3FUi2A+3LQfH2/Wi880785b/tqWy5RIzR7LAE79uN4jmyxpFZb0Bws0ZwkLscBt8x1BTnLImSXtoW0wxgAV+KxAvsVgsSUsqJHBZ/QtuS7l+eKLL1hOtvIAQMhpNnkMXrwvp1Y/PZDF0udycFgWi8UWsUg4i63lhQsX6jwAHsSxZ1FlDDBh9GNcJf3DcrC4devWLBpCAYhAcBYEqrwG6BB3gyUgwIJWGeOKpOsYYhoYoMboTzQNi2ugz4y29K5u6ZWQUcF0+t1uAinRV+orzSLPUr25p8iRdJt87Lfp94BYGrRtK0VFX03l+R/+CgJSlYSTBxUANQQVgg9lJH2vUmDAWQAGw/DDz0EuDVcrPYqncePGqopg5+CrIcON8BfsJuA7fCgQ2hCBAUEtAvpDLcE/RN7NlRCVgYoFRK9Xr57OX74v0ew2eOHKyHclmtcTlKqqDnMFUIGWgQpEv1YfDz4mIiR472Fk7rIwcciEEO4aE8FdpHQ+/2/+58LlvLnpLN4WOJn39R7GbRpWcuLHO55apkyZot9vGN93YJ6A+AJGWNBihuYNqXmavxsSjg+GHtWnG0q0C9KDDRO9QC2/O0cF5ieRd9kkWnJjhTh7EU9sjGUimUpAmkBmQKZWpAk79vHHH6tkZOqE/mAw2Fwg3k8++YTGjRv3B1xpzW4bZlOUaKdWi8XH2pxCkaWX0JSVW9MFE2ndeG4NKhH+kZWQMUDIKSOEBX4aBBDVo0cPQuRk8+bNj+zSzYaNmBdCle80pdjI1TQmbDHF30z9iPORPXkgAz78QYgJqBP2Dwg0ICBAQz6ffvppltEW1qXFhjl9qu3vX5ri4+Ip5nLm5KWsk3kWdflQlBo2bKgRD8BtAAs4z1mU9FPtCzL5NKcgi/6SP8m0Y+A4Z0yZ/0lWykN+5gqoRPxn324pNTxkUtnTSH8F/iPNgQ75A1SxWAriRWWkSIpSIr3Z5AkrAL/sopQvpbwrJeG/tfq9c6N4GygAAAAASUVORK5CYII=);}</style>
            </template></dom-module>
        <dom-module id="tinychat-mobile" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-mobile"></style>
                <div id="modal-content-mobile" class$="[[mobileClass]]"><svg id="close-button" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" on-click="close">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <h1>Download our app</h1><button on-click="openStore"></button>
                </div>
            </template>
            <script>class ModalDialogMobile extends Polymer.Element{static get is(){return"tinychat-mobile"}static get properties(){return{app:{type:Object},mobileClass:{type:String},onkeydownHandler:Object,onClose:Object}}constructor(){super(),this.mobileClass=isMobile.apple.device?"ios":"android"}get settings(){return this.app.settings}connectedCallback(){super.connectedCallback(),this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogMobile.is)}close(){this.parentNode instanceof Modal&&(this.parentNode.close(ModalDialogMobile.is,this),Object.isFunc(this.onClose)&&this.onClose())}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogMobile.is)&&this.close(a)}openStore(){isMobile.apple.device?this.app.GoAppStore():this.app.GoGooglePlay()}}customElements.define(ModalDialogMobile.is,ModalDialogMobile);</script>
        </dom-module>
        <dom-module id="client-modal-settings" assetpath="../../styles/"><template>
                <style>*{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;}#modal-content-settings{position:relative;width:100%;max-width:400px;margin:0 auto;padding:50px 70px 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;}#modal-content-settings *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}#modal-content-settings > h1{margin:0;padding-bottom:40px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;cursor:default;}#modal-content-settings > div{position:relative;width:100%;padding:0 40px 25px 0;box-sizing:border-box;text-align:left;}#modal-content-settings > div > label{display:inline-block;max-width:100%;font-size:12px;font-weight:600;color:#414141;line-height:16px;white-space:nowrap;text-transform:uppercase;text-overflow:ellipsis;overflow:hidden;cursor:pointer;}#modal-content-settings > div > label:before{content:'';position:absolute;display:block;height:16px;width:30px;top:0;right:0;border-radius:8px;background-color:#c2c9cb;transition:.2s;}#modal-content-settings > div > input:checked + label:before{background-color:#41b7ef;}#modal-content-settings > div > label:after{content:'';position:absolute;display:block;height:10px;width:10px;top:3px;right:3px;border-radius:100%;background-color:#fff;transition:.2s;}#modal-content-settings > div > input:checked + label:after{right:17px;}#modal-content-settings > div > input{display:none;}#modal-content-settings > #buttons{display:flex;flex-direction:row;align-items:stretch;width:100%;white-space:nowrap;}#modal-content-settings > #buttons > *:first-child{margin-right:20px;}#buttons > button{display:block;height:40px;width:100%;border:1px solid #41b7ef;box-sizing:border-box;font-size:12px;font-weight:700;color:#41b7ef;background-color:#fff;line-height:38px;text-align:center;text-transform:uppercase;cursor:pointer;transition:.2s;}#buttons > button:hover{background-color:#d6f2ff;}#buttons > button:active{background-color:#c7e8f8;}#buttons > button + button{border-color:transparent;color:#fff;background-color:#41b7ef;}#buttons > button + button:hover{background-color:#54ccf3;}#buttons > button + button:active{background-color:#38a8de;}#modal-content-settings > .modal-content-settings-info{padding:40px 0 0;text-align:center;}#modal-content-settings > .modal-content-settings-info + .modal-content-settings-info{padding-top:24px;}.modal-content-settings-info > button{display:inline-block;margin:0;padding:0;border:0;font-size:12px;font-weight:600;color:#3cafe1;background:none;line-height:16px;cursor:pointer;}.modal-content-settings-info > button:hover{text-decoration:underline;}.modal-content-settings-info > span{font-size:12px;color:#262626;line-height:16px;cursor:default;}</style>
            </template></dom-module>
        <dom-module id="tinychat-settings" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-settings"></style>
                <form id="modal-content-settings" on-submit="onOK"><svg id="close-button" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" on-click="close">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <h1>Settings</h1>
                    <div><input id="input-checkbox-2" type="checkbox" name="play_youtube_videos" on-change="youtubeChange"> <label for="input-checkbox-2">PLAY YOUTUBE VIDEOS</label></div>
                    <div><input id="input-checkbox-3" type="checkbox" name="receive_private_message" on-change="privateChange"> <label for="input-checkbox-3">RECEIVE PRIVATE MESSAGE</label></div>
                    <div><input id="input-checkbox-sounds" type="checkbox" name="play_sounds" on-change="soundChange"> <label for="input-checkbox-sounds">NOTIFICATION SOUNDS</label></div><span id="buttons"><button id="button-cancel" on-click="cancel">CANCEL</button> <button id="button-save" on-click="save">SAVE</button></span>
                    <div class="modal-content-settings-info"><button on-click="onWebsettings">Chatroom Privacy Settings</button></div>
                    <div class="modal-content-settings-info"><button on-click="onDevnews">Development News</button></div>
                    <div class="modal-content-settings-info"><span>[[version]]</span></div>
                </form>
            </template>
            <script>class ModalDialogSettings extends Polymer.Element{static get is(){return"tinychat-settings"}static get properties(){return{chatroom:{type:Object,observer:"chatroomAssigned"},enablePMs:{type:String,notify:!0},enableYoutube:{type:String,notify:!0},enableSound:{type:String,notify:!0},onfirmBans:{type:Boolean,notify:!0},rememberVolume:{type:String,notify:!0},enableAcousticEchoCancelation:{type:String,notify:!0},version:{type:String,value:"v.1.0.0"},settings_before:Object,onkeydownHandler:Object}}constructor(){super()}get app(){return this.chatroom.app}get settings(){return this.app.settings}connectedCallback(){super.connectedCallback();let a=this.settings.getSettings();this.setProperties({settings_before:a,enablePMs:a.enablePMs,enableYoutube:a.enableYoutube,enableSound:a.enableSound,onfirmBans:a.onfirmBans,rememberVolume:a.rememberVolume,enableAcousticEchoCancelation:a.enableAcousticEchoCancelation}),this.$["input-checkbox-2"].checked=this.enableYoutube,this.$["input-checkbox-3"].checked=this.enablePMs,this.$["input-checkbox-sounds"].checked=this.enableSound,this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}chatroomAssigned(){let a=this,b=this.chatroom.app.EventBus;this.version=this.app.version.title()}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogSettings.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogSettings.is,this)}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogSettings.is)&&this.cancel(a)}onOK(a){return a.preventDefault(),!1}onDevnews(a){return a.preventDefault(),this.app.DevNews(),!1}onWebsettings(a){return a.preventDefault(),this.app.WebSettings(),!1}cancel(){this.settings.saveSettings(this.settings_before),this.close()}save(){this.close()}bansChange(a){this.settings.switchConfirmBan(this._str2bool(a))}youtubeChange(a){this.settings.switchYoutube(this._str2bool(a))}privateChange(a){this.settings.switchPrivatemessaging(this._str2bool(a))}soundChange(a){this.settings.switchSound(this._str2bool(a))}echoChange(a){this.settings.switchAcousticEchoCancelation(this._str2bool(a))}volumeChange(a){this.settings.switchRememberVolume(this._str2bool(a))}_str2bool(a){let b=a.path?a.path[0]:(a.composedPath&&a.composedPath())[0];return b.checked}}customElements.define(ModalDialogSettings.is,ModalDialogSettings);</script>
        </dom-module>
        <dom-module id="client-modal-upgrade" assetpath="../../styles/"><template>
                <style>*{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;}#modal-content-upgrade{position:relative;width:100%;max-width:540px;margin:0 auto;padding:0 0 60px;border-radius:10px 10px 4px 4px;box-sizing:border-box;background-color:#fff;text-align:center;}#modal-content-upgrade *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;z-index:1;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}#modal-content-upgrade > h1{position:relative;margin:0;padding:50px;border-radius:4px 4px 0 0;box-sizing:border-box;font-size:24px;font-weight:400;color:#fff;line-height:33px;background-color:#2f373a;cursor:default;overflow:hidden;}#modal-content-upgrade > h1 > span{position:relative;}#pro-1,
            #pro-2,
            #pro-3,
            #pro-4,
            #extreme-1,
            #extreme-2,
            #extreme-3,
            #gold-1,
            #gold-2,
            #gold-3,
            #button-pro-1,
            #button-pro-2,
            #button-extreme-1,
            #button-gold-1{position:absolute;display:block;border-radius:100%;}#pro-1,
            #pro-2,
            #pro-3,
            #pro-4,
            #button-pro-1,
            #button-pro-2{background-color:#2ecb4e;}#extreme-1,
            #extreme-2,
            #extreme-3,
            #button-extreme-1{background-color:#ad6bce;}#gold-1,
            #gold-2,
            #gold-3,
            #button-gold-1{background-color:#efa701;}#pro-1{height:180px;width:180px;top:-40%;left:-25%;}#pro-2{height:16px;width:16px;top:70%;left:28%;}#pro-3{height:200px;width:200px;top:70%;left:40%;}#pro-4{height:90px;width:90px;top:-7%;left:76%;}#extreme-1{height:90px;width:90px;top:77%;left:6%;}#extreme-2{height:65px;width:65px;top:10%;left:20%;}#extreme-3{height:40px;width:40px;top:-11%;left:97%;}#gold-1{height:35px;width:35px;top:-6%;left:12%;}#gold-2{height:20px;width:20px;top:10%;left:44%;}#gold-3{height:180px;width:180px;top:65%;left:83%;}#modal-content-upgrade-content{position:relative;width:100%;padding:40px 70px 0;box-sizing:border-box;}#modal-content-upgrade-content > div{max-width:300px;margin:0 auto 24px;font-size:12px;color:#262626;line-height:16px;}#modal-content-upgrade-content > button{position:relative;display:block;height:40px;width:100%;padding:0 30px;border:none;box-sizing:border-box;font-family:'Open Sans';font-size:12px;font-weight:600;letter-spacing:1px;color:#fff;background-color:#2f373a;cursor:pointer;overflow:hidden;}#modal-content-upgrade-content > button > span{position:relative;}#button-pro-1{height:60px;width:60px;top:54%;left:5%;}#button-pro-2{height:37px;width:37px;top:-35%;left:83%;}#button-extreme-1{height:16px;width:16px;top:24%;left:69%;}#button-gold-1{height:100px;width:100px;top:-200%;left:15%;}</style>
            </template></dom-module>
        <dom-module id="tinychat-upgrade" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-upgrade"></style>
                <div id="modal-content-upgrade"><svg id="close-button" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" on-click="close">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <h1>
                        <div id="pro-1"></div>
                        <div id="pro-2"></div>
                        <div id="pro-3"></div>
                        <div id="pro-4"></div>
                        <div id="extreme-1"></div>
                        <div id="extreme-2"></div>
                        <div id="extreme-3"></div>
                        <div id="gold-1"></div>
                        <div id="gold-2"></div>
                        <div id="gold-3"></div><span>Upgrade your Tinychat membership</span>
                    </h1>
                    <div id="modal-content-upgrade-content">
                        <div>[[msg]]</div><button on-click="upgrade">
                            <div id="button-pro-1"></div>
                            <div id="button-pro-2"></div>
                            <div id="button-extreme-1"></div>
                            <div id="button-gold-1"></div><span>UPGRADE NOW</span>
                        </button>
                    </div>
                </div>
            </template>
            <script>class ModalDialogUpgrade extends Polymer.Element{static get is(){return"tinychat-upgrade"}static get properties(){return{onkeydownHandler:Object,msg:{type:String,value:"Get high quality video, fullscreen, premium membership badges and more!"}}}constructor(){super()}get app(){return this.chatroom.app}get settings(){return this.app.settings}connectedCallback(){super.connectedCallback(),this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogUpgrade.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogUpgrade.is,this)}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogUpgrade.is)&&this.cancel(a)}cancel(){this.close()}upgrade(){this.app.UpgradeSub()}}customElements.define(ModalDialogUpgrade.is,ModalDialogUpgrade);</script>
        </dom-module>
        <dom-module id="client-modal-youtube" assetpath="../../styles/"><template>
                <style>#modal-content-youtube-lists{user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;}.on-white-scroll{padding-left:16px;box-sizing:border-box;overflow-x:hidden;overflow-y:scroll;}.on-white-scroll::-webkit-scrollbar{position:absolute;width:15px;cursor:pointer;}.on-white-scroll::-webkit-scrollbar-track{background-color:#fff;}.on-white-scroll::-webkit-scrollbar-thumb{border:5px solid #fff;border-radius:6px/8px;background-color:rgba(0, 0, 0, .2);}.on-white-scroll::-webkit-scrollbar-thumb:hover{background-color:rgba(0, 0, 0, .4);}#modal-content-youtube{position:relative;width:100%;max-width:800px;margin:0 auto;box-sizing:border-box;border-radius:4px;background-color:#fff;overflow:hidden;}*:focus{outline:none;}#input-playlist,
            #input-playlist-label-wrapper{display:none;}#modal-content-youtube-form{position:relative;padding:50px 70px 38px;border-bottom:1px solid rgba(0, 0, 0, .1);}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}#modal-content-youtube > form > h1{margin:0;padding-bottom:40px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;}#modal-content-youtube-search{position:relative;}#modal-content-youtube-search > svg{position:absolute;display:block;bottom:12px;left:12px;}#input-search{height:40px;width:100%;padding:0 40px;border:1px solid #c5d5dc;box-sizing:border-box;background-color:#fff;font-family:inherit;font-size:14px;font-weight:400;color:#414141;text-align:center;line-height:38px;letter-spacing:.5px;transition:.2s;}#input-search:hover,
            #input-search:active{border-color:#41b7ef;}#input-search[disabled]{border-color:#c5d5dc;color:#c5d5dc;background-color:#f6f6f6;}#modal-content-youtube-lists{position:relative;display:flex;flex-direction:row;height:420px;width:100%;}#modal-content-youtube-popular-wrapper{position:relative;height:100%;width:100%;}#modal-content-youtube-popular-wrapper:after{content:'';position:absolute;height:40px;bottom:0;left:10px;right:15px;background:-moz-linear-gradient(top,  rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);background:-webkit-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);background:linear-gradient(to bottom,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=0 );pointer-events:none;}#modal-content-youtube-popular{height:100%;width:100%;padding-bottom:30px;padding-left:60px;text-align:left;}#modal-content-youtube-popular-header{display:block;height:62px;padding-top:30px;padding-right:5px;box-sizing:border-box;font-size:16px;font-weight:700;text-align:center;cursor:default;}#modal-content-youtube-popular-empty{display:none;padding:20px 5px 20px 0;font-size:14px;text-align:center;cursor:default;}#modal-content-youtube-popular-empty:only-of-type{display:block;}.modal-content-youtube-popular-item{display:inline-block;width:120px;padding:10px;}.modal-content-youtube-popular-item-video{position:relative;height:68px;width:100%;}.modal-content-youtube-popular-item-video > img{height:100%;width:100%;border-radius:4px;}.modal-content-youtube-popular-item-video-play{position:absolute;height:100%;width:100%;top:0;left:0;border-radius:4px;background-color:rgba(0, 0, 0, .7);opacity:0;visibility:hidden;transition:.2s;}.modal-content-youtube-popular-item-video-play > svg{position:absolute;top:50%;left:50%;margin:-14px 0 0 -14px;cursor:pointer;opacity:.8;transition:.2s;}.modal-content-youtube-popular-item-video-play > svg:hover{opacity:1;}.modal-content-youtube-popular-item-video > svg{position:absolute;bottom:6px;right:6px;cursor:pointer;opacity:0;visibility:hidden;transition:.2s;}.modal-content-youtube-popular-item-video:hover > .modal-content-youtube-popular-item-video-play{opacity:1;visibility:visible;}.modal-content-youtube-popular-item-video:hover > svg{opacity:.8;visibility:visible;}.modal-content-youtube-popular-item-video:hover > svg:hover{opacity:1;}.modal-content-youtube-popular-item-text{position:relative;width:100%;height:32px;padding-top:6px;text-align:center;cursor:default;overflow:hidden;}.modal-content-youtube-popular-item-text:after{content:'';position:absolute;display:block;height:16px;width:30px;bottom:0;right:0;background:-moz-linear-gradient(left,  rgba(255,255,255,0) 0%, rgba(255,255,255,1) 50%, rgba(255,255,255,1) 100%);background:-webkit-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 50%,rgba(255,255,255,1) 100%);background:linear-gradient(to right,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 50%,rgba(255,255,255,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 );}.modal-content-youtube-popular-item-text > span{font-size:12px;color:#262626;line-height:16px;cursor:default;}#modal-content-youtube-playlist{position:relative;display:flex;flex-direction:column;height:100%;width:300px;min-width:300px;border-radius:0 0 4px 0;background-color:#f6f6f6;overflow:hidden;transition:top .8s;}#modal-content-youtube-playlist:after{content:'';position:absolute;height:40px;bottom:0;left:0;right:15px;background:-moz-linear-gradient(top,  rgba(246,246,246,0) 0%, rgba(246,246,246,1) 100%);background:-webkit-linear-gradient(top,  rgba(246,246,246,0) 0%,rgba(246,246,246,1) 100%);background:linear-gradient(to bottom,  rgba(246,246,246,0) 0%,rgba(246,246,246,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00f6f6f6', endColorstr='#f6f6f6',GradientType=0 );pointer-events:none;}#modal-content-youtube-playlist-header{height:62px;min-height:62px;width:100%;font-size:0;background-color:#f6f6f6;}#modal-content-youtube-playlist-header > button{position:absolute;height:30px;width:30px;top:16px;left:33.33%;margin-left:-15px;padding:0;border:none;background:none;line-height:30px;text-align:center;cursor:pointer;}#modal-content-youtube-playlist-header > button + button{left:66.66%;}#modal-content-youtube-playlist-header > button > svg{vertical-align:middle;}#modal-content-youtube-playlist-header > button > svg > path{transition:.2s;}#modal-content-youtube-playlist-header > button:hover > svg > path{fill:#cddde4;}#modal-content-youtube-playlist-header > button.active > svg > path{fill:#41b7ef;}#modal-content-youtube-playlist-items{position:relative;height:100%;padding-bottom:22px;}#modal-content-youtube-playlist-empty{display:none;padding:20px 0 20px 15px;font-size:14px;text-align:center;cursor:default;}#modal-content-youtube-playlist-empty:only-of-type{display:block;}#modal-content-youtube-playlist-items.on-white-scroll{padding-left:0;}#modal-content-youtube-playlist-items.on-white-scroll::-webkit-scrollbar-track{background-color:#f6f6f6;}#modal-content-youtube-playlist-items.on-white-scroll::-webkit-scrollbar-thumb{border-color:#f6f6f6;}.modal-content-youtube-playlist-item{position:relative;height:65px;width:100%;margin-bottom:2px;padding:8px 35px 9px 104px;box-sizing:border-box;line-height:48px;text-align:left;transition:.2s;}.modal-content-youtube-playlist-item:hover{background-color:#fff;}.modal-content-youtube-playlist-item-video{position:absolute;height:45px;width:80px;top:10px;left:16px;}.modal-content-youtube-playlist-item-video > img{height:100%;width:100%;border-radius:4px;}.modal-content-youtube-playlist-item-video-play{position:absolute;height:100%;width:100%;top:0;left:0;border-radius:4px;background-color:rgba(0, 0, 0, .7);opacity:0;visibility:hidden;transition:.2s;}.modal-content-youtube-playlist-item-video:hover > .modal-content-youtube-playlist-item-video-play{opacity:1;visibility:visible;}.modal-content-youtube-playlist-item-video-play > svg{position:absolute;top:50%;left:50%;margin:-8px 0 0 -8px;cursor:pointer;opacity:.8;transition:.2s;}.modal-content-youtube-playlist-item-video-play > svg:hover{opacity:1;}.modal-content-youtube-playlist-item-text{display:inline-block;max-height:100%;font-size:12px;color:#262626;line-height:16px;text-align:left;vertical-align:middle;overflow:hidden;cursor:default;}.modal-content-youtube-playlist-item-close{position:absolute;height:100%;width:120px;top:0;right:5px;background:-moz-linear-gradient(left,  rgba(255,255,255,0) 0%, rgba(255,255,255,1) 50%, rgba(255,255,255,1) 100%);background:-webkit-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 50%,rgba(255,255,255,1) 100%);background:linear-gradient(to right,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 50%,rgba(255,255,255,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 );font-size:0;opacity:0;visibility:hidden;transition:.2s;}.modal-content-youtube-playlist-item:hover > .modal-content-youtube-playlist-item-close{opacity:1;visibility:visible;}.modal-content-youtube-playlist-item-close > button{position:absolute;height:20px;width:20px;top:50%;right:23px;margin:-10px 0 0 0;padding:4px;border:none;box-sizing:border-box;background-color:transparent;line-height:20px;text-align:center;cursor:pointer;}.modal-content-youtube-playlist-item-close > button > svg{vertical-align:top;}#modal-content-youtube-popular-wrapper > .waiting,
            #modal-content-youtube-playlist > .waiting{position:absolute;width:auto;top:0;bottom:0;left:0;right:0;border-radius:0 0 0 4px;background-color:#fff;opacity:0;visibility:hidden;transition:.2s;}#modal-content-youtube-playlist > .waiting{border-radius:0 0 4px 0;background-color:#f6f6f6;}#modal-content-youtube-popular-wrapper.wait > .waiting,
            #modal-content-youtube-playlist.wait > .waiting{opacity:1;visibility:visible;}.waiting > .waiting-content{position:absolute;height:0;width:80%;top:50%;left:10%;}.waiting > .waiting-content > span{position:absolute;display:inline-block;height:0;width:0;top:-4px;left:0;border:4px solid #cacece;border-radius:100%;opacity:0;animation:waiting 1s ease-in-out 0s infinite paused;-webkit-animation:waiting 1s ease-in-out 0s infinite paused;}#modal-content-youtube-playlist > .waiting > .waiting-content > span{border-color:#cacece;}.waiting > .waiting-content > span:nth-child(2){animation-delay:.15s;-webkit-animation-delay:.15s;}.waiting > .waiting-content > span:nth-child(3){animation-delay:.3s;-webkit-animation-delay:.3s;}.waiting > .waiting-content > span:nth-child(4){animation-delay:.45s;-webkit-animation-delay:.45s;}#modal-content-youtube-popular-wrapper.wait > .waiting > .waiting-content > span,
            #modal-content-youtube-playlist.wait > .waiting > .waiting-content > span{animation-play-state:running;-webkit-animation-play-state:running;}@keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}@-webkit-keyframes waiting{0%{left:0;opacity:0;}50%{opacity:1;}100%{left:100%;opacity:0;}}@media screen and (max-width: 815px){#modal-content-youtube-popular-header,
                #modal-content-youtube-popular-empty{padding-right:0;}#modal-content-youtube-popular{padding-left:15px;text-align:center;}}@media screen and (max-width: 630px){#modal-content-youtube-form{padding-right:25px;padding-left:25px;}#modal-content-youtube-lists{display:block;padding-bottom:40px;box-sizing:border-box;}#input-playlist-label-wrapper{position:absolute;display:block;height:40px;width:100%;left:0;background-color:#fff;z-index:1;}#input-playlist-label-wrapper > label{position:absolute;height:20px;width:20px;top:10px;left:50%;margin-left:-10px;cursor:pointer;}#input-playlist-label-wrapper > label:before,
                #input-playlist-label-wrapper > label:after{content:'';position:absolute;display:block;height:3px;width:100%;top:2px;left:0;border-radius:3px;background-color:#04caff;transform-origin:50% 50%;transition:top .4s ease .4s,
                                transform .4s ease 0s;}#input-playlist-label-wrapper > label:after{top:16px;}#input-playlist:checked + #input-playlist-label-wrapper > label:before,
                #input-playlist:checked + #input-playlist-label-wrapper > label:after{top:9px;transform:rotate(45deg);-webkit-transform:rotate(45deg);transition:top .4s ease 0s,
                                transform .4s ease .4s;}#input-playlist:checked + #input-playlist-label-wrapper > label:after{transform:rotate(-45deg);-webkit-transform:rotate(-45deg);}#input-playlist-label-wrapper > label > span{position:absolute;display:block;height:3px;width:100%;top:9px;left:0;border-radius:3px;background-color:#04caff;transition:opacity 0s ease .4s;}#input-playlist:checked + #input-playlist-label-wrapper > label > span{opacity:0;}#modal-content-youtube-playlist{position:absolute;height:380px;width:100%;top:380px;}#input-playlist:checked ~ #modal-content-youtube-playlist{top:0;}}</style>
            </template></dom-module>
        <dom-module id="tinychat-youtube" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-youtube"></style>
                <div id="modal-content-youtube">
                    <form id="modal-content-youtube-form" on-submit="onSearch"><svg id="close-button" on-click="close" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                        </svg>
                        <h1>YouTube Video Selection</h1>
                        <div id="modal-content-youtube-search"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.108 10.75l3.61 3.61a.957.957 0 0 1 0 1.357.963.963 0 0 1-1.357.002l-3.61-3.61a6.723 6.723 0 1 1 1.358-1.36zm-5.385.776a4.802 4.802 0 1 0 0-9.605 4.802 4.802 0 0 0 0 9.606z" fill="#c4d4dc" fill-rule="evenodd"></path>
                            </svg> <input id="input-search" type="text" placeholder="Search for videos or enter a YouTube URL" maxlength="150" value="" on-click="onInput"></div>
                    </form>
                    <div id="modal-content-youtube-lists">
                        <div id="modal-content-youtube-popular-wrapper" class="">
                            <div id="modal-content-youtube-popular" class="on-white-scroll"><span id="modal-content-youtube-popular-header">[[title_results]]</span>
                                <div id="modal-content-youtube-popular-empty">List is empty</div>
                                <dom-repeat items="[[_queryresult]]"><template strip-whitespace="">
                                        <div class="modal-content-youtube-popular-item">
                                            <div class="modal-content-youtube-popular-item-video"><img src="[[item.imgurl]]" alt="img">
                                                <div class="modal-content-youtube-popular-item-video-play"><svg on-click="onPlayItem" width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M0 2.67C0 .398 1.608-.62 3.586.394l22.93 11.766c1.98 1.016 1.978 2.664 0 3.68L3.586 27.606c-1.98 1.015-3.586 0-3.586-2.28V2.67z" fill="#fff" fill-rule="evenodd"></path>
                                                    </svg></div><svg on-click="onAdd2Playlist" width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M10 8V5H8v3H5v2h3v3h2v-3h3V8h-3zM9 18A9 9 0 1 1 9 0a9 9 0 0 1 0 18z" fill="#fff" fill-rule="evenodd"></path>
                                                </svg>
                                            </div>
                                            <div class="modal-content-youtube-popular-item-text"><span title="[[item.title]]">[[item.title]]</span></div>
                                        </div>
                                    </template></dom-repeat>
                            </div>
                            <div class="waiting">
                                <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                            </div>
                        </div><input id="input-playlist" type="checkbox">
                        <div id="input-playlist-label-wrapper"><label for="input-playlist"><span></span></label></div>
                        <div id="modal-content-youtube-playlist" class="">
                            <div id="modal-content-youtube-playlist-header"><button id="btnRandom" on-click="onRandomToggle"><svg width="26" height="24" viewBox="0 0 26 24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M25.61 18.846c.233.203.39.49.39.823 0 .332-.154.618-.385.82l-3.188 3.193a1.078 1.078 0 0 1-1.53-.008 1.104 1.104 0 0 1 .008-1.55l1.384-1.388c-3.867-.273-7.564-4.037-11.146-7.692-3.402-3.477-6.923-7.07-10.05-7.07a1.09 1.09 0 0 1-1.08-1.097 1.09 1.09 0 0 1 1.08-1.096c4.03 0 7.87 3.924 11.588 7.72 3.223 3.29 6.548 6.682 9.546 7.036l-1.323-1.324a1.102 1.102 0 0 1-.01-1.55 1.07 1.07 0 0 1 1.53-.008l3.186 3.19zm-11.734-7.8c-.275 0-.55-.105-.76-.316a1.105 1.105 0 0 1-.01-1.55c3.328-3.406 6.186-5.702 9.197-5.906l-1.397-1.4a1.102 1.102 0 0 1-.01-1.548 1.072 1.072 0 0 1 1.53-.01l3.186 3.19c.23.203.387.49.387.824 0 .333-.155.62-.388.822l-3.186 3.193a1.075 1.075 0 0 1-1.53-.008 1.103 1.103 0 0 1 .006-1.55L22.2 5.49c-2.42.312-5.05 2.67-7.553 5.23-.21.22-.49.327-.77.327zM8.45 13.47a1.073 1.073 0 0 1 1.53.014 1.105 1.105 0 0 1-.014 1.55c-2.58 2.562-5.653 5.184-8.884 5.184A1.09 1.09 0 0 1 0 19.12a1.09 1.09 0 0 1 1.082-1.095c2.453 0 5.1-2.303 7.37-4.557z" fill="#c4d4dc"></path>
                                    </svg></button> <button id="btnCycle" on-click="onCycleToggle"><svg width="28" height="22" viewBox="0 0 28 22" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7.908.008c.385.044.714.313.854.696.14.383.066.816-.19 1.124L6.935 3.872h16.917C26.324 3.872 28 6.037 28 8.268v6.595c.005.397-.19.766-.514.965-.323.2-.723.2-1.046 0-.323-.2-.52-.568-.514-.965V8.268c0-1.142-.692-2.198-2.074-2.198H6.935l1.637 2.027c.242.3.314.715.19 1.087a1.06 1.06 0 0 1-.797.714 1.01 1.01 0 0 1-.98-.376L3.872 5.675a1.15 1.15 0 0 1 0-1.425L6.983.403A1.01 1.01 0 0 1 7.91.008zM1.15 6.053c.534.062.935.547.923 1.116v6.594c0 1.143.692 2.2 2.074 2.2h16.917l-1.637-2.045c-.284-.34-.34-.832-.143-1.235a1.025 1.025 0 0 1 1.034-.587c.273.03.523.17.697.395l3.11 3.847c.33.41.33 1.015 0 1.426l-3.11 3.847a1 1 0 0 1-1.464.126 1.15 1.15 0 0 1-.123-1.553l1.637-2.026H4.148C1.676 18.16 0 15.997 0 13.765V7.17c-.006-.316.116-.62.337-.834a1 1 0 0 1 .814-.282z" fill="#c4d4dc"></path>
                                    </svg></button></div>
                            <div id="modal-content-youtube-playlist-items" class="on-white-scroll">
                                <div id="modal-content-youtube-playlist-empty">List is empty</div>
                                <dom-repeat items="[[_playlist]]"><template strip-whitespace="">
                                        <div class="modal-content-youtube-playlist-item">
                                            <div class="modal-content-youtube-playlist-item-video"><img src="[[item.imgurl]]" alt="img">
                                                <div class="modal-content-youtube-playlist-item-video-play"><svg on-click="onPlayItem4Playlist" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M0 1.526c0-1.3.92-1.882 2.05-1.3l13.102 6.722c1.13.58 1.13 1.523 0 2.103L2.05 15.776c-1.133.58-2.05 0-2.05-1.302V1.526z" fill="#fff" fill-rule="evenodd"></path>
                                                    </svg></div>
                                            </div>
                                            <div class="modal-content-youtube-playlist-item-text" title="[[item.title]]">[[item.title]]</div>
                                            <div class="modal-content-youtube-playlist-item-close"><button on-click="onRemove4Playlist"><svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0z" fill="#e53951" fill-rule="evenodd"></path>
                                                    </svg></button></div>
                                        </div>
                                    </template></dom-repeat>
                            </div>
                            <div class="waiting">
                                <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
            <script>class ModalDialogYoutube extends Polymer.Element{static get is(){return"tinychat-youtube"}static get properties(){return{chatroom:{type:Object,observer:"chatroomAssigned"},_queryresult:{type:Array,value:[]},_playlist:{type:Array,value:[]},title_results:{type:Array,value:"Most Popular Today"},israndom:{type:Boolean,value:!1,observer:"israndomObserver"},iscycle:{type:Boolean,value:!1,observer:"iscycleObserver"},onkeydownHandler:Object}}constructor(){super()}get _yt_api_key(){return"AIzaSyCPQe4gGZuyVQ78zdqf9O5iEyfVLPaRwZg"}get _api(){return WebAPI.getInstance()}get app(){return this.chatroom.app}get settings(){return this.app.settings}connectedCallback(){super.connectedCallback(),this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}chatroomAssigned(a){let b=this,c=this.chatroom.app.EventBus,d=this.$["modal-content-youtube-playlist"];d.classList.add("wait"),a.YoutubePlaylistLoad(()=>{b._playlist=Array.from(b.chatroom.youtubelist),b.israndom=b.chatroom.youtubelist_random,b.iscycle=b.chatroom.youtubelist_repeat,d.classList.remove("wait")}),this.onSearch(new Event("most-popular"))}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogYoutube.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogYoutube.is,this)}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogYoutube.is)&&this.close(a)}onSearch(a){a.preventDefault();let b=this,c=TinychatApp.DAL.YoutubeItem,d=this.$["modal-content-youtube-popular-wrapper"],e=this.$["input-search"],f=e.value;d.classList.add("wait"),e.classList.remove("error");var g=document.createAttribute("disabled");e.setAttributeNode(g);let h={key:this._yt_api_key,maxResults:50};var i="";return f.isEmpty()?(i="https://www.googleapis.com/youtube/v3/videos",h.chart="mostPopular",h.part="snippet,contentDetails,status",h.fields="items(id,snippet(title,thumbnails(medium)),contentDetails(duration),status(embeddable))"):(i="https://www.googleapis.com/youtube/v3/search",h.q=f,h.type="video",h.part="snippet"),this._api.wsj({method:"GET",params:h,src:i}).then(a=>{let g=a.items,h=[];for(var j in g){let a=g[j],d=a.snippet,e=new c;e.id=a.id,"object"==typeof a.id&&(e.id=a.id.videoId),e.title=d.title,e.imgurl=d.thumbnails.medium.url;let f=a.contentDetails;void 0!=f&&(e.duration=b.YTDurationToSeconds(f.duration));let i=a.status;(void 0==i||!0===i.embeddable)&&h.push(e)}b._queryresult=h,d.classList.remove("wait"),e.removeAttribute("disabled"),b.title_results=f.isEmpty()?"Most Popular Today":"Results for '"+f+"'"}).catch(a=>{d.classList.remove("wait"),e.removeAttribute("disabled"),e.classList.add("error"),console.error(a)}),!1}onInput(){let a=this,b=this.$["input-search"];b.classList.remove("error")}onPlayItem(a){let b=this,c=TinychatApp.BLL.YoutubeEvent,d=new c(c.YT_PLAY);d.id=a.model.item.id,d.handle=this.chatroom.self_handle,d.title=a.model.item.title,d.duration==void 0?b._get_duration_item(d,a=>{this.chatroom.Youtube(a),setTimeout(()=>{b.close()},150)}):(this.chatroom.Youtube(d),setTimeout(()=>{b.close()},150))}onPlayItem4Playlist(a){let b=this,c=TinychatApp.BLL.YoutubeEvent,d=new c(c.YT_PLAY);d.id=a.model.item.id,d.handle=this.chatroom.self_handle,d.playlist=!0,d.title=a.model.item.title,d.duration==void 0?b._get_duration_item(d,a=>{this.chatroom.Youtube(a),setTimeout(()=>{b.close()},150)}):(this.chatroom.Youtube(d),setTimeout(()=>{b.close()},150))}onAdd2Playlist(a){let b=this,c=this.$["input-search"],d=this._find_playlist_item(a.model.item);if(-1==d){let c=a.model.item,d=a=>{b.chatroom.youtubelist.push(a),b._playlist=Array.from(b.chatroom.youtubelist)};c.duration==void 0?b._get_duration_item(c,a=>{d(a),b.chatroom.YoutubePlaylistAdd(a,()=>{})}):(d(c),b.chatroom.YoutubePlaylistAdd(c,()=>{}))}}onClearPlaylist(){let a=this,b=this.$["modal-content-youtube-playlist"];b.classList.add("wait"),this.chatroom.YoutubePlaylistClear(()=>{a.chatroom.youtubelist=[],a._playlist=Array.from(a.chatroom.youtubelist),b.classList.remove("wait")})}_find_playlist_item(a){for(var b in this._playlist)if(a.id==this._playlist[b].id){return this._playlist.indexOf(this._playlist[b])}return-1}_get_duration_item(a,b){let c=this.$["input-search"],d=this,e={id:a.id,key:this._yt_api_key,part:"snippet,contentDetails,status",fields:"items(id,snippet(title,thumbnails(medium)),contentDetails(duration),status(embeddable))"};this._api.wsj({method:"GET",params:e,src:"https://www.googleapis.com/youtube/v3/videos"}).then(c=>{let e=c.items,f=e[0],g=f.contentDetails;g!=void 0&&(a.duration=d.YTDurationToSeconds(g.duration)),b(a)}).catch(a=>{c.classList.add("error"),console.error(a)})}onRemove4Playlist(a){let b=this._find_playlist_item(a.model.item);if(0<=b){let a=this._playlist.splice(b,1);this._playlist=Array.from(this._playlist),this.chatroom.youtubelist=this._playlist,this.chatroom.YoutubePlaylistRemove(a[0],()=>{})}}onRandomToggle(){this.chatroom.youtubelist_random=!this.chatroom.youtubelist_random,this.israndom=this.chatroom.youtubelist_random,this.chatroom.YoutubePlaylistMode(this.israndom,this.iscycle,()=>{})}onCycleToggle(){this.chatroom.youtubelist_repeat=!this.chatroom.youtubelist_repeat,this.iscycle=this.chatroom.youtubelist_repeat,this.chatroom.YoutubePlaylistMode(this.israndom,this.iscycle,()=>{})}israndomObserver(a){a?this.$.btnRandom.classList.add("active"):this.$.btnRandom.classList.remove("active")}iscycleObserver(a){a?this.$.btnCycle.classList.add("active"):this.$.btnCycle.classList.remove("active")}YTDurationToSeconds(a){var b,c=/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/,d=0,e=0,f=0;if(c.test(a)){var g=c.exec(a);g[1]&&(d=+g[1]),g[2]&&(e=+g[2]),g[3]&&(f=+g[3]),b=3600*d+60*e+f}return b}convertLiClass(a){var b="";return a.isDeleting&&(b+=" hidden"),b}}customElements.define(ModalDialogYoutube.is,ModalDialogYoutube);</script>
        </dom-module>
        <dom-module id="client-modal-roomshare" assetpath="../../styles/"><template>
                <style>#modal-content-roomshare{position:relative;width:100%;max-width:540px;margin:0 auto;padding:50px 70px 60px;box-sizing:border-box;border-radius:4px;background-color:#fff;}#modal-content-roomshare > *:focus,
            #share > *:focus{outline:none;}#close-button{position:absolute;top:8px;right:8px;padding:10px;cursor:pointer;}#close-button > path{transition:.2s;}#close-button:hover > path{fill:#41b7ef;}#close-button:active > path{fill:#38a8dd;}#modal-content-roomshare > h1{margin:0;padding-bottom:40px;box-sizing:border-box;font-size:24px;font-weight:300;color:#363636;line-height:33px;text-align:center;}#modal-content-roomshare > #share > input[type="text"]{height:40px;width:100%;margin-right:10px;padding:0 13px;border:1px solid #c5d5dc;box-sizing:border-box;background-color:#fff;font-family:inherit;font-size:16px;font-weight:600;color:#414141;line-height:38px;letter-spacing:.5px;transition:.2s;}#modal-content-roomshare > #share{display:flex;flex-direction:row;align-items:stretch;width:100%;}#button-twitter,
            #button-facebook,
            #button-copy-link{display:block;height:40px;width:100%;border:1px solid transparent;box-sizing:border-box;font-size:12px;font-weight:700;color:#fff;letter-spacing:1px;line-height:38px;text-align:center;text-transform:uppercase;cursor:pointer;transition:.2s;}#button-copy-link{width:auto;padding:0 16px;border-color:#41b7ef;color:#41b7ef;background-color:#fff;white-space:nowrap;}#button-copy-link:hover{color:#fff;background-color:#41b7ef;}#button-twitter,
            #button-facebook{margin-top:24px;}#button-twitter{border-color:#00a2f4;background-color:#00a2f4;}#button-twitter:hover{background-color:#fff;color:#00a2f4;}#button-facebook{border-color:#3f69b4;background-color:#3f69b4;}#button-facebook:hover{background-color:#fff;color:#3f69b4;}@media screen and (max-width: 600px){#modal-content-roomshare{padding-right:30px;padding-left:30px;}#modal-content-roomshare > #share{display:block;}#modal-content-roomshare > #share > input[type="text"]{margin-right:0;}#button-copy-link{width:100%;margin-top:10px;}}</style>
            </template></dom-module>
        <dom-module id="tinychat-roomshare" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-roomshare"></style>
                <form id="modal-content-roomshare" on-submit="onOK"><svg id="close-button" on-click="close" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 4.5L1.5 0 0 1.5 4.5 6 0 10.5 1.5 12 6 7.5l4.5 4.5 1.5-1.5L7.5 6 12 1.5 10.5 0" fill="#c4d4dc" fill-rule="evenodd"></path>
                    </svg>
                    <h1>Invite your friends to this chatroom</h1>
                    <div id="share"><input id="input-link" type="text" autocomplete="off" readonly="" value="[[roomshare_url]]"> <button id="button-copy-link" on-click="copy">COPY LINK</button></div>
                </form>
            </template>
            <script>class ModalDialogRoomShare extends Polymer.Element{static get is(){return"tinychat-roomshare"}static get properties(){return{chatroom:{type:Object,observer:"chatroomAssigned"},roomshare_url:String,onkeydownHandler:Object}}constructor(){super()}get app(){return this.chatroom.app}connectedCallback(){super.connectedCallback();this;this.onkeydownHandler=this.onkeydown.bind(this),document.addEventListener("keydown",this.onkeydownHandler)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.onkeydownHandler)}chatroomAssigned(){let a=this,b=this.chatroom.app.EventBus;a.set("roomshare_url",this.chatroom.url);let c=a.$["input-link"];setTimeout(()=>{a._setTextCursor(c,c.value.length)},0)}_setTextCursor(a,b){var a="string"==typeof a||a instanceof String?document.getElementById(a):a;if(!a)return!1;if(a.setSelectionRange)return a.focus(),a.setSelectionRange(b,b),!0;if(a.createTextRange){a.focus();var c=a.createTextRange();return c.collapse(!0),c.moveStart("character",b),c.moveEnd("character",0),c.select(),!0}return!1}open(){this.parentNode instanceof Modal&&this.parentNode.open(ModalDialogRoomShare.is)}close(){this.parentNode instanceof Modal&&this.parentNode.close(ModalDialogRoomShare.is,this)}onkeydown(a){a=a||window.event,(27==a.keyCode||"Escape"==a.key||"Esc"==a.key)&&this.parentNode instanceof Modal&&this.parentNode.isopen(ModalDialogRoomShare.is)&&this.close()}onOK(a){return a.preventDefault(),!1}copy(){let a=this.$["input-link"];try{a.select();var b=document.execCommand("copy");b?this.app.showToast("Chatroom URL has been copied to clipboard."):this.app.showToastWarn("Oops, unable to copy")}catch(a){this.app.showToastWarn("Oops, unable to copy")}this.close()}facebook(){this.app.showToastWarn("share via facebook is not impl."),this.close()}twitter(){this.app.showToastWarn("share via twitter is not impl."),this.close()}}customElements.define(ModalDialogRoomShare.is,ModalDialogRoomShare);</script>
        </dom-module>
        <dom-module id="client-modal-fatalerror" assetpath="../../styles/"><template>
                <style>#modal-content-fatalerror{width:100%;max-width:540px;margin:0 auto;padding:50px 70px 60px;box-sizing:border-box;border-radius:4px;background-color:#e53951;}#modal-content-fatalerror > *:focus{outline:none;}#modal-content-fatalerror > h1{margin:0;padding-bottom:9px;box-sizing:border-box;font-size:24px;font-weight:300;color:#fff;line-height:33px;text-align:center;}#modal-content-fatalerror > h1:before{content:'';position:relative;display:inline-block;height:24px;width:24px;top:5px;margin-right:10px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxjaXJjbGUgZmlsbD0iI2ZmZiIgY3g9IjEyIiBjeT0iMTIiIHI9IjEyIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KICAgIDxwYXRoIGZpbGw9IiNlNTM5NTEiIGQ9Ik0xMiAxMC41ODZsLTIuODI4LTIuODMtMS40MTUgMS40MTZMMTAuNTg3IDEybC0yLjgzIDIuODI4IDEuNDE1IDEuNDE1TDEyIDEzLjQxM2wyLjgyOCAyLjgzIDEuNDE1LTEuNDE1TDEzLjQxMyAxMmwyLjgzLTIuODI4LTEuNDE1LTEuNDE1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KPC9zdmc+);background-repeat:no-repeat;vertical-align:top;}#modal-content-fatalerror > span{display:block;padding-bottom:8px;font-size:12px;font-weight:400;color:#fff;line-height:16px;}#modal-content-fatalerror > input[type="submit"]{height:40px;width:100%;margin-top:24px;border:1px solid #fff;box-sizing:border-box;font-family:inherit;font-size:12px;font-weight:700;color:#fff;letter-spacing:1px;background-color:#e53951;cursor:pointer;transition:.2s;}#modal-content-fatalerror > input[type="submit"]:hover,
            #modal-content-fatalerror > input[type="submit"]:active{color:#e53951;background-color:#fff;}</style>
            </template></dom-module>
        <dom-module id="tinychat-fatalerror" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-modal-fatalerror"></style>
                <form id="modal-content-fatalerror" on-submit="onOK">
                    <h1>Fatal error</h1><span>[[textError()]]</span> <input type="submit" value="RELOAD">
                </form>
            </template>
            <script>
                class ModalFatalError extends Polymer.Element {
                    static get is() {
                        return "tinychat-fatalerror"
                    }
                    static get properties() {
                        return {
                            error: Object
                        }
                    }
                    constructor() {
                        super()
                    }
                    connectedCallback() {
                        super.connectedCallback()
                    }
                    open() {
                        this.parentNode instanceof Modal && this.parentNode.open(ModalFatalError.is)
                    }
                    close() {
                        this.parentNode instanceof Modal && this.parentNode.close(ModalFatalError.is, this)
                    }
                    textError() {
                        return this.error instanceof Error, "Something went wrong, please reload the page."
                    }
                    onOK(a) {
                        return a.preventDefault(), location.reload(!0), !1
                    }
                }
                customElements.define(ModalFatalError.is, ModalFatalError);
            </script>
        </dom-module>
        <dom-module id="client-sidemenu" assetpath="../../styles/"><template>
                <style>
                    #sidemenu-content {
                        overflow-x: hidden;
                        overflow-y: scroll;
                    }

                    #sidemenu-content::-webkit-scrollbar {
                        position: absolute;
                        width: 15px;
                        cursor: pointer;
                    }

                    #sidemenu-content::-webkit-scrollbar-track {
                        background-color: #2d373a;
                    }

                    #sidemenu-content::-webkit-scrollbar-thumb {
                        border: 5px solid #2d373a;
                        border-radius: 6px/8px;
                        background-color: #5a6366;
                    }

                    #sidemenu-content::-webkit-scrollbar-thumb:hover {
                        background-color: #6f7b80;
                    }

                    #sidemenu * {
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                    }

                    #sidemenu *:focus {
                        outline: none;
                    }

                    #sidemenu {
                        position: fixed;
                        height: 100%;
                        min-width: 270px;
                        max-width: 270px;
                        top: 0;
                        left: 82px;
                        padding-bottom: 80px;
                        box-sizing: border-box;
                        font-family: 'Open Sans', sans-serif;
                        background-color: #2d373a;
                        z-index: 2;
                        transition: left .8s;
                    }

                    #sidemenu-wider {
                        position: absolute;
                        display: block;
                        height: 40px;
                        width: 16px;
                        top: 50%;
                        right: -8px;
                        margin-top: -20px;
                        border-radius: 16px;
                        font-size: 0;
                        background-color: #e9eaea;
                        cursor: pointer;
                        transition: .8s;
                    }

                    #sidemenu.wider>#sidemenu-wider {
                        right: -16px;
                        border-radius: 0 16px 16px 0;
                    }

                    #sidemenu-wider:before {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 0;
                        width: 0;
                        top: 50%;
                        left: 50%;
                        margin: -4px 0 0 -2px;
                        border-width: 4px 4px 4px 0;
                        border-style: solid;
                        border-color: transparent #bcc2c2;
                        transition: .8s;
                    }

                    #sidemenu.wider>#sidemenu-wider:before {
                        transform: rotate(180deg);
                        -webkit-transform: rotate(180deg);
                    }

                    #sidemenu.wider {
                        left: -188px;
                    }

                    #sidemenu-content {
                        height: 100%;
                        padding-top: 20px;
                        box-sizing: border-box;
                    }

                    #close-users {
                        display: none;
                        padding: 0 0 6px 21px;
                        box-sizing: border-box;
                        text-align: center;
                    }

                    #close-users>label {
                        display: inline-block;
                        height: 20px;
                        width: 20px;
                        padding: 5px;
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxwYXRoIGQ9Ik03LjgzNyAxMEwuNDUzIDE3LjM4NGMtLjYwNy42MDctLjYgMS41NjgtLjAwMyAyLjE2Ni42MDIuNiAxLjU2OC41OTYgMi4xNjYtLjAwM0wxMCAxMi4xNjNsNy4zODQgNy4zODRjLjYwNy42MDcgMS41NjguNiAyLjE2Ni4wMDMuNi0uNjAyLjU5Ni0xLjU2OC0uMDAzLTIuMTY2TDEyLjE2MyAxMGw3LjM4NC03LjM4NGMuNjA3LS42MDcuNi0xLjU2OC4wMDMtMi4xNjYtLjYwMi0uNi0xLjU2OC0uNTk2LTIuMTY2LjAwM0wxMCA3LjgzNyAyLjYxNi40NTNDMi4wMS0uMTU0IDEuMDQ4LS4xNDcuNDUuNDVjLS42LjYwMi0uNTk2IDEuNTY4LjAwMyAyLjE2Nkw3LjgzNyAxMHoiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPgo8L3N2Zz4=);
                        background-repeat: no-repeat;
                        background-position: center center;
                        cursor: pointer;
                    }

                    #top-buttons-wrapper {
                        width: 100%;
                        padding-left: 20px;
                        padding-right: 15px;
                        box-sizing: border-box;
                    }

                    #live-directory {
                        display: inline-block;
                        height: 40px;
                        width: 100%;
                        border-radius: 40px;
                        font-size: 16px;
                        font-weight: bold;
                        color: #fff;
                        background-color: #04caff;
                        line-height: 40px;
                        text-align: center;
                        text-decoration: none;
                        cursor: pointer;
                        transition: .2s;
                    }

                    #live-directory:before {
                        content: "";
                        position: relative;
                        display: inline-block;
                        height: 10px;
                        width: 10px;
                        top: -1px;
                        left: 0;
                        margin-right: 4px;
                        border-width: 0 0 2px 2px;
                        border-style: solid;
                        border-color: #fff;
                        box-sizing: border-box;
                        transform: rotate(45deg);
                        -webkit-transform: rotate(45deg);
                        transition: .2s;
                    }

                    #live-directory:hover {
                        background-color: #54ccf3;
                    }

                    #live-directory:active {
                        background-color: #38a8de;
                    }

                    #live-directory:hover:before {
                        left: -4px;
                    }

                    #upgrade {
                        display: inline-block;
                        height: 40px;
                        width: 100%;
                        margin-top: 10px;
                        border-radius: 40px;
                        font-size: 16px;
                        font-weight: bold;
                        color: #fff;
                        background-color: #efa701;
                        line-height: 40px;
                        text-align: center;
                        text-decoration: none;
                        cursor: pointer;
                        transition: .2s;
                    }

                    #upgrade:hover {
                        background-color: #ffb701;
                    }

                    #upgrade:active {
                        background-color: #cf8701;
                    }

                    #user-info {
                        position: absolute;
                        height: 80px;
                        width: 100%;
                        bottom: 0;
                        left: 0;
                        padding: 20px 30px 20px 20px;
                        border-top: 1px solid rgba(0, 0, 0, .1);
                        box-sizing: border-box;
                        background-color: #2d373a;
                    }

                    #user-info>div,
                    #user-info>a {
                        overflow: hidden;
                        white-space: nowrap;
                    }

                    #user-info>div {
                        line-height: 20px;
                    }

                    #user-info>div:before {
                        content: attr(title);
                        font-size: 14px;
                        font-weight: 700;
                        color: #fff;
                    }

                    #user-info>a {
                        display: inline-block;
                        margin-top: 6px;
                        text-decoration: none;
                    }

                    #user-info>a {
                        font-size: 14px;
                        font-weight: 600;
                        color: #3cafe1;
                    }

                    #user-info>a:hover {
                        color: #3cafe1;
                        text-decoration: underline;
                    }

                    #user-info>button,
                    #user-info>div:not([title]),
                    #user-info>div[title=""],
                    #user-info>div:not([title])+a,
                    #user-info>div[title=""]+a {
                        display: none;
                    }

                    #user-info>div:not([title])~button,
                    #user-info>div[title=""]~button {
                        display: block;
                    }

                    #user-info>button {
                        height: 40px;
                        width: 100%;
                        padding: 0;
                        border: none;
                        border-radius: 40px;
                        font-size: 16px;
                        font-weight: 700;
                        color: #fff;
                        background-color: #04caff;
                        text-align: center;
                        line-height: 40px;
                        cursor: pointer;
                        transition: .2s;
                    }

                    #user-info>button:hover {
                        background-color: #54ccf3;
                    }

                    #user-info>button:active {
                        background-color: #38a8de;
                    }

                    @media screen and (max-width: 1000px) {
                        #sidemenu {
                            left: -188px;
                        }

                        #sidemenu.show {
                            left: 0;
                        }

                        #sidemenu-wider {
                            opacity: 0;
                            visibility: hidden;
                        }

                        #close-users {
                            display: block;
                        }

                        #top-buttons-wrapper {
                            display: none;
                        }
                    }

                    @media screen and (max-width: 600px) {

                        #sidemenu,
                        #sidemenu.wider {
                            height: calc(100% - 44px);
                            width: 100%;
                            min-width: 100%;
                            max-width: 100%;
                            left: 0;
                            top: -100%;
                            margin-top: 44px;
                            padding-bottom: 20px;
                            z-index: 3;
                            transition: top .5s;
                        }

                        #sidemenu.show {
                            top: 0;
                        }
                    }

                    #sidemenu.full-screen {
                        left: -188px;
                    }

                    #sidemenu.full-screen.show {
                        left: 0;
                    }

                    #sidemenu.full-screen>#close-users {
                        display: block;
                    }

                    #sidemenu.full-screen>#top-buttons-wrapper {
                        display: none;
                    }
                </style>
            </template></dom-module>
        <dom-module id="tc-video-moderation-style" assetpath="../ui/tc-video-moderation/"><template>
                <style>
                    #moderatorlist * {
                        outline: none;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                    }

                    #moderatorlist {
                        position: relative;
                        max-height: 70px;
                        padding-left: 31px;
                        font-size: 0;
                        overflow: hidden;
                        transition: .2s;
                    }

                    #moderatorlist:after {
                        content: attr(data-videos-count);
                        position: absolute;
                        display: block;
                        height: 20px;
                        width: 20px;
                        top: 32px;
                        right: 0;
                        border-radius: 100%;
                        font-size: 10px;
                        font-weight: 800;
                        color: #2e373a;
                        line-height: 20px;
                        text-align: center;
                        background-color: #7b868a;
                    }

                    #moderatorlist.hidden #header,
                    #moderatorlist.hidden .list-item,
                    #moderatorlist>.list-item.hidden {
                        height: 0;
                        opacity: 0;
                        visibility: hidden;
                    }

                    #moderatorlist.show[data-videos-count=""],
                    #moderatorlist.show[data-videos-count="0"] {
                        max-height: 0px;
                    }

                    #moderatorlist.show[data-videos-count="1"],
                    #moderatorlist.show[data-videos-count="2"] {
                        max-height: 155px;
                    }

                    #moderatorlist.show[data-videos-count="3"],
                    #moderatorlist.show[data-videos-count="4"] {
                        max-height: 240px;
                    }

                    #moderatorlist.show[data-videos-count="5"],
                    #moderatorlist.show[data-videos-count="6"] {
                        max-height: 325px;
                    }

                    #moderatorlist.show[data-videos-count="7"],
                    #moderatorlist.show[data-videos-count="8"] {
                        max-height: 410px;
                    }

                    #moderatorlist.show[data-videos-count="9"],
                    #moderatorlist.show[data-videos-count="10"] {
                        max-height: 495px;
                    }

                    #moderatorlist.show[data-videos-count="11"],
                    #moderatorlist.show[data-videos-count="12"] {
                        max-height: 580px;
                    }

                    #moderatorlist>#header {
                        position: relative;
                        height: 70px;
                        padding-left: 5px;
                        top: 33px;
                        font-size: 14px;
                        font-weight: 600;
                        color: #7b868a;
                        text-transform: uppercase;
                        cursor: default;
                        animation: show-header .5s ease 0s 1;
                        -webkit-animation: show-header .5s ease 0s 1;
                    }

                    @keyframes show-header {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 70px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    @-webkit-keyframes show-header {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 70px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    #moderatorlist>#header>span>button {
                        position: relative;
                        height: 20px;
                        width: 20px;
                        top: -1px;
                        right: 0;
                        padding: 0;
                        border: none;
                        background-color: #2d373a;
                        line-height: 20px;
                        text-align: center;
                        cursor: pointer;
                    }

                    #moderatorlist>#header>span>button>svg {
                        display: inline-block;
                        transform: rotate(180deg);
                        transition: .2s;
                    }

                    #moderatorlist.show>#header>span>button>svg {
                        transform: rotate(0deg);
                    }

                    #moderatorlist>#header>span>button:hover>svg>path {
                        fill: #fff;
                        transition: .2s;
                    }

                    #moderatorlist[data-videos-count=""]>#moderatorlist-empty-item,
                    #moderatorlist[data-videos-count="0"]>#moderatorlist-empty-item {
                        height: 30px;
                        width: 100%;
                        padding-left: 5px;
                        font-size: 14px;
                        color: #7b868a;
                    }

                    .video {
                        position: relative;
                        display: inline-block;
                        width: 50%;
                        padding: 5px;
                        box-sizing: border-box;
                        font-size: 0;
                        overflow: hidden;
                    }

                    .video>div {
                        position: relative;
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA0OCA2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxwYXRoIGZpbGw9IiM1YTYzNjYiIGQ9Ik0xNCAxMy45OTR2MjAuMDEyQzE0IDM5LjUyMyAxOC40NzggNDQgMjQgNDRjNS41MTUgMCAxMC00LjQ4IDEwLTkuOTk0VjEzLjk5NEMzNCA4LjQ3NyAyOS41MjIgNCAyNCA0Yy01LjUxNSAwLTEwIDQuNDgtMTAgOS45OTR6TTI2IDU3LjkydjQuMDgyQTEuOTk0IDEuOTk0IDAgMCAxIDI0IDY0Yy0xLjEwNSAwLTItLjg4Ny0yLTEuOTk4VjU3LjkyQzkuNjk4IDU2LjkyOCAwIDQ2Ljg2IDAgMzQuNTg2YTIgMiAwIDAgMSA0IDBDNCA0NS4yODMgMTIuOTUgNTQgMjQgNTRjMTEuMDYgMCAyMC04LjcwMyAyMC0xOS40MTRhMiAyIDAgMCAxIDQgMGMwIDEyLjI4Ni05LjY5IDIyLjM0NC0yMiAyMy4zMzR6TTEwIDEzLjk5NEMxMCA2LjI3IDE2LjI3NyAwIDI0IDBjNy43MyAwIDE0IDYuMjY3IDE0IDEzLjk5NHYyMC4wMTJDMzggNDEuNzMgMzEuNzIzIDQ4IDI0IDQ4Yy03LjczIDAtMTQtNi4yNjctMTQtMTMuOTk0VjEzLjk5NHoiLz4KPC9zdmc+);
                        background-repeat: no-repeat;
                        background-position: center;
                        background-color: #2a2c2c;
                        overflow: hidden;
                    }

                    .video:after {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        border: 5px solid #2d373a;
                        border-radius: 10px;
                        box-sizing: border-box;
                        pointer-events: none;
                    }

                    .video>div>div {
                        position: relative;
                        width: 100%;
                    }

                    .video>div>tinychat-videoitem,
                    .video>div>video {
                        position: absolute;
                        height: 100%;
                        top: 0;
                        left: 0;
                    }

                    .video>div.ratio-16-9>tinychat-videoitem,
                    .video>div.ratio-16-9>video {
                        left: -16.66%;
                    }

                    .video>div.ratio-8-5>tinychat-videoitem,
                    .video>div.ratio-8-5>video {
                        left: -10%;
                    }

                    .video>div.ratio-3-2>tinychat-videoitem,
                    .video>div.ratio-3-2>video {
                        left: -6.25%;
                    }

                    .video>div>.overlay {
                        position: absolute;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        background-color: rgba(0, 0, 0, .7);
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video:hover>div>.overlay {
                        opacity: 1;
                        visibility: visible;
                    }

                    .overlay-content {
                        position: absolute;
                        height: 38px;
                        width: 68px;
                        top: 50%;
                        left: 50%;
                        margin: -19px 0 0 -34px;
                    }

                    .overlay-content>button {
                        padding: 0;
                        border: none;
                        border-radius: 100%;
                        background-color: transparent;
                        text-align: center;
                        cursor: pointer;
                        transition: .2s;
                    }

                    .overlay-content>.button-decline {
                        height: 22px;
                        width: 22px;
                        margin: 8px 8px 0 0;
                        border: 1px solid #04caff;
                        box-sizing: border-box;
                        line-height: 20px;
                    }

                    .overlay-content>.button-decline:hover {
                        border-color: #54ccf3;
                    }

                    .overlay-content>.button-decline:active {
                        border-color: #38a8de;
                    }

                    .button-decline>svg>path {
                        transition: .2s;
                    }

                    .button-decline:hover>svg>path {
                        fill: #54ccf3;
                    }

                    .button-decline:active>svg>path {
                        fill: #38a8de;
                    }

                    .overlay-content>.button-apply {
                        height: 38px;
                        width: 38px;
                        background-color: #04caff;
                        line-height: 40px;
                    }

                    .overlay-content>.button-apply:hover {
                        background-color: #54ccf3;
                    }

                    .overlay-content>.button-apply:active {
                        background-color: #38a8de;
                    }

                    .video:hover>div>.nickname {
                        visibility: hidden;
                    }

                    .video>div>.nickname {
                        position: absolute;
                        display: block;
                        height: 15px;
                        left: 5px;
                        right: 5px;
                        bottom: 0;
                        font-size: 10px;
                        font-weight: 600;
                        color: #fff;
                        text-align: center;
                        text-shadow: 0 0 6px rgba(0, 0, 0, .8);
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        overflow: hidden;
                        cursor: default;
                    }

                    .video>div>.nickname>img {
                        position: relative;
                        display: inline-block;
                        height: 10px;
                        width: 10px;
                        top: 1px;
                        opacity: 1;
                        visibility: visible;
                        transition: .2s;
                    }

                    .video>div>.nickname>img[src=""] {
                        width: 0;
                        margin-right: 0;
                        overflow: hidden;
                        opacity: 0;
                        visibility: hidden;
                    }

                    .video>div>.waiting {
                        position: absolute;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        background-color: #202628;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video>div.wait>.waiting {
                        opacity: 1;
                        visibility: visible;
                    }

                    .waiting>.waiting-content {
                        position: absolute;
                        height: 0;
                        width: 80%;
                        top: 50%;
                        left: 10%;
                    }

                    .waiting>.waiting-content>span {
                        position: absolute;
                        display: inline-block;
                        height: 0;
                        width: 0;
                        top: -4px;
                        left: 0;
                        border: 4px solid #04caff;
                        border-radius: 100%;
                        opacity: 0;
                        animation: waiting 1s ease-in-out 0s infinite paused;
                        -webkit-animation: waiting 1s ease-in-out 0s infinite paused;
                    }

                    .waiting>.waiting-content>span:nth-child(2) {
                        animation-delay: .15s;
                        -webkit-animation-delay: .15s;
                    }

                    .waiting>.waiting-content>span:nth-child(3) {
                        animation-delay: .3s;
                        -webkit-animation-delay: .3s;
                    }

                    .waiting>.waiting-content>span:nth-child(4) {
                        animation-delay: .45s;
                        -webkit-animation-delay: .45s;
                    }

                    .video>div.wait>.waiting>.waiting-content>span {
                        animation-play-state: running;
                        -webkit-animation-play-state: running;
                    }

                    @keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }

                    @-webkit-keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }
                </style>
            </template></dom-module>
        <dom-module id="tc-video-preview-style" assetpath="../ui/tc-video-preview/"><template>
                <style>
                    *:focus {
                        outline: none;
                    }

                    .on-white-scroll {
                        padding-left: 16px;
                        box-sizing: border-box;
                        overflow-x: hidden;
                        overflow-y: scroll;
                    }

                    .on-white-scroll::-webkit-scrollbar {
                        position: absolute;
                        width: 15px;
                        cursor: pointer;
                    }

                    .on-white-scroll::-webkit-scrollbar-track {
                        background-color: #fff;
                    }

                    .on-white-scroll::-webkit-scrollbar-thumb {
                        border: 5px solid #fff;
                        border-radius: 6px/8px;
                        background-color: rgba(0, 0, 0, .2);
                    }

                    .on-white-scroll::-webkit-scrollbar-thumb:hover {
                        background-color: rgba(0, 0, 0, .4);
                    }

                    .video {
                        position: relative;
                        width: 100%;
                        padding: 0;
                        box-sizing: border-box;
                        font-size: 0;
                        overflow: hidden;
                    }

                    .video>div {
                        position: relative;
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA0OCA2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxwYXRoIGZpbGw9IiM1YTYzNjYiIGQ9Ik0xNCAxMy45OTR2MjAuMDEyQzE0IDM5LjUyMyAxOC40NzggNDQgMjQgNDRjNS41MTUgMCAxMC00LjQ4IDEwLTkuOTk0VjEzLjk5NEMzNCA4LjQ3NyAyOS41MjIgNCAyNCA0Yy01LjUxNSAwLTEwIDQuNDgtMTAgOS45OTR6TTI2IDU3LjkydjQuMDgyQTEuOTk0IDEuOTk0IDAgMCAxIDI0IDY0Yy0xLjEwNSAwLTItLjg4Ny0yLTEuOTk4VjU3LjkyQzkuNjk4IDU2LjkyOCAwIDQ2Ljg2IDAgMzQuNTg2YTIgMiAwIDAgMSA0IDBDNCA0NS4yODMgMTIuOTUgNTQgMjQgNTRjMTEuMDYgMCAyMC04LjcwMyAyMC0xOS40MTRhMiAyIDAgMCAxIDQgMGMwIDEyLjI4Ni05LjY5IDIyLjM0NC0yMiAyMy4zMzR6TTEwIDEzLjk5NEMxMCA2LjI3IDE2LjI3NyAwIDI0IDBjNy43MyAwIDE0IDYuMjY3IDE0IDEzLjk5NHYyMC4wMTJDMzggNDEuNzMgMzEuNzIzIDQ4IDI0IDQ4Yy03LjczIDAtMTQtNi4yNjctMTQtMTMuOTk0VjEzLjk5NHoiLz4KPC9zdmc+);
                        background-repeat: no-repeat;
                        background-position: center;
                        background-color: #2a2c2c;
                        background-size: 30%;
                        overflow: hidden;
                    }

                    video {
                        width: 100%;
                    }

                    .video>div:before {
                        content: '';
                        display: block;
                        width: 100%;
                        padding-bottom: 75%;
                    }

                    .video:hover>div>svg {
                        top: -24px;
                        left: -24px;
                        transition: .2s ease .2s;
                    }

                    .video:after {}

                    .video:hover>div.pro:after,
                    .video:hover>div.extreme:after,
                    .video:hover>div.gold:after {
                        top: -24px;
                        right: -24px;
                        transition: .2s ease .2s;
                    }

                    .video>div>div {
                        position: relative;
                        width: 100%;
                    }

                    .video>div>video,
                    .video>div>iframe {
                        position: absolute;
                        height: 100%;
                        top: 0;
                        left: 0;
                    }

                    .video>div>iframe {
                        width: 100%;
                    }

                    .video>div.ratio-16-9>video,
                    .video>div.ratio-16-9>iframe {
                        left: -16.66%;
                    }

                    .video>div.ratio-8-5>video,
                    .video>div.ratio-8-5>iframe {
                        left: -10%;
                    }

                    .video>div.ratio-3-2>video,
                    .video>div.ratio-3-2>iframe {
                        left: -6.25%;
                    }

                    .video>div>.overlay {
                        position: absolute;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        box-shadow: inset 0 0 0 0 rgba(0, 0, 0, .5);
                        transition: .2s;
                    }

                    .video:hover>div>.overlay {
                        box-shadow: inset 0 0 100px 0 rgba(0, 0, 0, .5);
                    }

                    .icon-visibility,
                    .icon-resize,
                    .icon-report,
                    .icon-close {
                        position: absolute;
                        height: 22px;
                        width: 22px;
                        top: -22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                        opacity: .9;
                        transition: .2s;
                    }

                    .icon-visibility {
                        left: -22px;
                    }

                    .icon-resize {
                        left: 50%;
                        margin-left: -11px;
                    }

                    .icon-report,
                    .icon-close {
                        right: -22px;
                    }

                    .icon-visibility:hover,
                    .icon-resize:hover,
                    .icon-report:hover,
                    .icon-close:hover {
                        opacity: 1;
                    }

                    .video:hover>div>.overlay>.icon-visibility,
                    .video:hover>div>.overlay>.icon-resize,
                    .video:hover>div>.overlay>.icon-report,
                    .video:hover>div>.overlay>.icon-close {
                        top: 12px;
                        transition: top .2s ease .2s,
                            left .2s ease .2s,
                            right .2s ease .2s,
                            opacity .2s;
                    }

                    .video:hover>div>.overlay>.icon-visibility {
                        left: 14px;
                    }

                    .video:hover>div>.overlay>.icon-report,
                    .video:hover>div>.overlay>.icon-close {
                        right: 14px;
                    }

                    .icon-visibility>svg,
                    .icon-resize>svg,
                    .icon-report>svg,
                    .icon-close>svg {
                        position: absolute;
                    }

                    .video.not-visible>div>.overlay>.icon-visibility>svg,
                    .icon-visibility>svg {
                        top: 4px;
                        left: 1px;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video.not-visible>div>.overlay>.icon-visibility>svg:first-child,
                    .icon-visibility>svg+svg {
                        opacity: 1;
                        visibility: visible;
                    }

                    .video.not-visible>div>iframe {
                        visibility: hidden;
                    }

                    .icon-resize>svg {
                        top: 3px;
                        left: 3px;
                    }

                    .icon-resize>svg>path {
                        transition: .2s;
                    }

                    .video.large>div>.overlay>.icon-resize>svg>path+path {
                        opacity: 0;
                        visibility: hidden;
                    }

                    .icon-report>svg {
                        top: 3px;
                        left: 3px;
                    }

                    .icon-close>svg {
                        top: 4px;
                        left: 4px;
                    }

                    .icon-context {
                        position: absolute;
                        height: 22px;
                        width: 22px;
                        bottom: -22px;
                        right: -22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                        opacity: .9;
                        transition: .2s;
                    }

                    .icon-context:hover {
                        opacity: 1;
                    }

                    .video:hover>div>.overlay>.icon-context {
                        bottom: 7px;
                        right: 16px;
                        transition: bottom .2s ease .2s,
                            right .2s ease .2s,
                            opacity .2s;
                    }

                    .icon-context>svg {
                        position: absolute;
                        top: 9px;
                        left: 1px;
                    }

                    .video-context {
                        position: absolute;
                        display: flex;
                        flex-direction: column;
                        align-content: center;
                        top: 0;
                        bottom: 0;
                        left: 0;
                        right: 0;
                        padding-top: 10px;
                        padding-bottom: 10px;
                        border-radius: 4px;
                        border: 1px solid rgba(0, 0, 0, .06);
                        box-sizing: border-box;
                        font-size: 0;
                        color: #535353;
                        text-align: left;
                        line-height: 1;
                        background-color: rgba(0, 0, 0, .7);
                        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, .09);
                        z-index: 1;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video-context::-webkit-scrollbar-track {
                        background-color: transparent;
                    }

                    .video-context::-webkit-scrollbar-thumb {
                        border: 5px solid transparent;
                        border-radius: 6px/8px;
                        background-color: rgba(255, 255, 255, .1);
                        background-clip: content-box;
                    }

                    .video-context::-webkit-scrollbar-thumb:hover {
                        background-color: rgba(255, 255, 255, .2);
                    }

                    .video:hover>div>.overlay>.icon-context:focus+.video-context {
                        opacity: 1;
                        visibility: visible;
                    }

                    .video-context-content {
                        margin: 0 auto;
                    }

                    .video-context-content>div {
                        text-align: center;
                    }

                    .video-context-content>div+div {
                        padding-top: 5px;
                    }

                    .video-context-content>div>button {
                        display: block;
                        width: 100%;
                        padding: 0 20px;
                        border: none;
                        border-radius: 4px;
                        box-sizing: border-box;
                        font-size: 13px;
                        font-weight: 600;
                        color: #fff;
                        background-color: transparent;
                        line-height: 26px;
                        cursor: pointer;
                        transition: .2s;
                    }

                    .video-context-content>div>button:hover {
                        color: #fff;
                        background-color: #04caff;
                    }

                    .icon-volume {
                        position: absolute;
                        height: 22px;
                        left: -22px;
                        bottom: -22px;
                        opacity: .9;
                        transition: .2s;
                    }

                    .icon-volume:hover {
                        opacity: 1;
                    }

                    .video:hover>div>.overlay>.icon-volume {
                        left: 16px;
                        bottom: 16px;
                        transition: bottom .2s ease .2s,
                            left .2s ease .2s,
                            opacity .2s;
                    }

                    #icon-state>button {
                        position: relative;
                        height: 22px;
                        width: 22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                    }

                    #icon-state>button>svg {
                        position: absolute;
                        display: block;
                        top: 2px;
                        left: 2px;
                    }

                    #icon-state>button>svg+svg {
                        top: 1px;
                        left: 2px;
                        transition: .2s;
                    }

                    #icon-state>button>svg {
                        opacity: 1;
                        visibility: visible;
                    }

                    #icon-state>button>svg+svg {
                        opacity: 0;
                        visibility: hidden;
                    }

                    .video>div>.waiting {
                        position: absolute;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        background-color: #202628;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video>div.wait>.waiting {
                        opacity: 1;
                        visibility: visible;
                    }

                    .waiting>.waiting-content {
                        position: absolute;
                        height: 0;
                        width: 80%;
                        top: 50%;
                        left: 10%;
                    }

                    .waiting>.waiting-content>span {
                        position: absolute;
                        display: inline-block;
                        height: 0;
                        width: 0;
                        top: -4px;
                        left: 0;
                        border: 4px solid #04caff;
                        border-radius: 100%;
                        opacity: 0;
                        animation: waiting 1s ease-in-out 0s infinite paused;
                        -webkit-animation: waiting 1s ease-in-out 0s infinite paused;
                    }

                    .waiting>.waiting-content>span:nth-child(2) {
                        animation-delay: .15s;
                        -webkit-animation-delay: .15s;
                    }

                    .waiting>.waiting-content>span:nth-child(3) {
                        animation-delay: .3s;
                        -webkit-animation-delay: .3s;
                    }

                    .waiting>.waiting-content>span:nth-child(4) {
                        animation-delay: .45s;
                        -webkit-animation-delay: .45s;
                    }

                    .video>div.wait>.waiting>.waiting-content>span {
                        animation-play-state: running;
                        -webkit-animation-play-state: running;
                    }

                    .video>div>svg {
                        position: absolute;
                        top: 5px;
                        left: 5px;
                        filter: drop-shadow(0 0 4px #04caff);
                        -webkit-filter: drop-shadow(0 0 4px #04caff);
                        opacity: 0;
                        transition: .2s;
                    }

                    #videos-content>#videos>.video:hover>div>svg {
                        top: -24px;
                        left: -24px;
                        transition: .2s ease .2s;
                    }

                    .video>div>svg>circle {
                        fill: #fff;
                        fill-rule: evenodd;
                        stroke: #fff;
                        stroke-width: 0;
                        transition: .2s;
                    }

                    .video>div>svg[data-mic-level="1"] {
                        opacity: .5;
                    }

                    .video>div>svg[data-mic-level="2"] {
                        opacity: .8;
                    }

                    .video>div>svg[data-mic-level="3"],
                    .video>div>svg[data-mic-level="4"],
                    .video>div>svg[data-mic-level="5"],
                    .video>div>svg[data-mic-level="6"],
                    .video>div>svg[data-mic-level="7"],
                    .video>div>svg[data-mic-level="8"],
                    .video>div>svg[data-mic-level="9"],
                    .video>div>svg[data-mic-level="10"] {
                        opacity: 1;
                    }

                    .video>div>svg[data-mic-level="4"]>circle {
                        stroke-width: 1;
                    }

                    .video>div>svg[data-mic-level="5"]>circle {
                        stroke-width: 2;
                    }

                    .video>div>svg[data-mic-level="6"]>circle {
                        stroke-width: 3;
                    }

                    .video>div>svg[data-mic-level="7"]>circle {
                        stroke-width: 4;
                    }

                    .video>div>svg[data-mic-level="8"]>circle {
                        stroke-width: 5;
                    }

                    .video>div>svg[data-mic-level="9"]>circle {
                        stroke-width: 6;
                    }

                    .video>div>svg[data-mic-level="10"]>circle {
                        stroke-width: 7;
                    }

                    .video>div>.nickname {
                        position: absolute;
                        display: block;
                        height: 15px;
                        left: 10px;
                        right: 10px;
                        bottom: 12px;
                        margin-bottom: -7px;
                        font-size: 12px;
                        font-weight: 600;
                        color: #fff;
                        text-align: center;
                        text-shadow: 0 0 6px rgba(0, 0, 0, .8);
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        overflow: hidden;
                        cursor: default;
                        transition: .2s;
                    }

                    .video>div>.nickname>img {
                        position: relative;
                        display: inline-block;
                        height: 10px;
                        width: 10px;
                        top: 2px;
                        margin-right: 6px;
                        opacity: 1;
                        visibility: visible;
                        transition: .2s;
                    }

                    .video>div>.nickname>img[src=""] {
                        width: 0;
                        margin-right: 0;
                        overflow: hidden;
                        opacity: 0;
                        visibility: hidden;
                    }

                    .video:hover>div>.nickname {
                        bottom: 50%;
                        transition: .2s ease .2s;
                    }

                    .video>div.gold:after,
                    .video>div.extreme:after,
                    .video>div.pro:after {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 24px;
                        width: 24px;
                        top: 10px;
                        right: 10px;
                        background-repeat: no-repeat;
                        transition: .2s;
                    }

                    .video>div.gold:after {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+Cgk8Y2lyY2xlIGZpbGw9IiNmZmM2MmMiIGN4PSIxMiIgY3k9IjEyIiByPSIxMiIvPgoJPHBhdGggaWQ9ImJhZGdlLWdvbGQiIGQ9Ik0xNiAxMi41NzZ2LTEuMDE4aC0zLjU5NnYxLjUxaDEuMjZsLS4wMTIuMTA4Yy0uMDcuNjIyLS42MyAxLjAzNC0xLjQyIDEuMDM0LTEuMDY1IDAtMS43NTgtLjg0LTEuNzU4LTIuMjUgMC0xLjM3Ny42MDctMi4xNyAxLjYzOC0yLjE3LjY5OCAwIDEuMjQyLjM3IDEuNDAzLjkzN2gyLjM4OEMxNS43MiA5LjE0IDE0LjE3MyA4IDEyLjEgOCA5LjU1MiA4IDggOS40NTcgOCAxMS45OTIgOCAxNC41NiA5LjU1MiAxNiAxMi4xNzUgMTZjMi40IDAgMy44MjUtMS4zMDcgMy44MjUtMy40MjR6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI2JhZGdlLWdvbGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMSkiIGZpbGwtb3BhY2l0eT0iLjIiLz4KCTx1c2UgZmlsbD0iI2ZmZiIgeGxpbms6aHJlZj0iI2JhZGdlLWdvbGQiLz4KPC9zdmc+);
                    }

                    .video>div.extreme:after {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPGNpcmNsZSBmaWxsPSIjYWQ2YmNlIiBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiLz4NCgk8cGF0aCBpZD0iYmFkZ2UtZXh0cmVtZSIgZD0iTTE0IDE2SDlWOGg1djEuNzM1aC0yLjcyNXYxLjI1OGgyLjUyM3YxLjczNWgtMi41MjN2MS41MUgxNHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPg0KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI2JhZGdlLWV4dHJlbWUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMSkiIGZpbGwtb3BhY2l0eT0iLjIiLz4NCgk8dXNlIGZpbGw9IiNmZmYiIHhsaW5rOmhyZWY9IiNiYWRnZS1leHRyZW1lIi8+DQo8L3N2Zz4=);
                    }

                    .video>div.pro:after {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPGNpcmNsZSBmaWxsPSIjMzhjZDU3IiBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiLz4NCgk8cGF0aCBpZD0iYmFkZ2UtcHJvIiBkPSJNMTUgMTAuNTQ0YzAgLjg5NC0uMjcyIDEuNTg1LS44MTcgMi4wNzItLjU0NS40ODctMS4zMi43My0yLjMyMi43M2gtLjYyNlYxNkg5VjhoMi44NmMxLjA0NiAwIDEuODMuMjIgMi4zNTQuNjYyLjUyNC40NDIuNzg2IDEuMDcuNzg2IDEuODgyem0tMy43NjYgMS4wNGguNDA3Yy4zMzYgMCAuNjAzLS4wOS44LS4yNzMuMi0uMTgyLjI5OC0uNDM0LjI5OC0uNzU1IDAtLjU0LS4zMS0uODEtLjkyNy0uODFoLS41NzZ2MS44NHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPg0KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI2JhZGdlLXBybyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbC1vcGFjaXR5PSIuMiIvPg0KCTx1c2UgZmlsbD0iI2ZmZiIgeGxpbms6aHJlZj0iI2JhZGdlLXBybyIvPg0KPC9zdmc+);
                    }

                    @keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }

                    @-webkit-keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }

                    @media screen and (max-width: 600px) {
                        #videos {
                            top: 12px;
                            right: 13px;
                            bottom: 12px;
                            left: 13px;
                        }

                        .video {
                            padding: 2px;
                        }

                        .video:after {
                            border-width: 2px;
                            border-radius: 4px;
                        }
                    }

                    .video.full-screen:after {
                        border-color: #101314;
                    }
                </style>
            </template></dom-module>
        <dom-module id="tc-video-preview" assetpath="../ui/tc-video-preview/"><template strip-whitespace="">
                <style include="tc-video-preview-style"></style>
                <div class$="[[videoItemStyle]]">
                    <div class$="[[convertVideoClass(item, item.progress)]]"><video id="video" autoplay="" volume="[[volume]]" data-video-id$="[[item.handle]]" on-playing="onPlaying">Your browser does not support the video tag...</video>
                        <div class="waiting">
                            <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                        </div>
                    </div>
                </div>
            </template>
            <script>
                class ChatroomVideoPreview extends Polymer.Element {
                    static get is() {
                        return "tc-video-preview"
                    }
                    static get properties() {
                        return {
                            item: {
                                type: Object,
                                observer: "itemAssigned"
                            },
                            volume: {
                                type: Number,
                                value: 0
                            },
                            videoItemStyle: {
                                type: String,
                                computed: "_videoItemStyleCompute(item.large, item.muted, item.hidden, isFullScreen)"
                            }
                        }
                    }
                    constructor() {
                        super()
                    }
                    connectedCallback() {
                        super.connectedCallback()
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback()
                    }
                    itemAssigned(a) {
                        if (null !== a) {
                            let b = this.$.video;
                            b.srcObject = a.mediastream, b.muted = !0, this.internalVolume = a.volume
                        }
                    }
                    _videoItemStyleCompute(a, b, c, d) {
                        var e = "video";
                        return e += a ? " large" : "", e += b ? " muted" : "", e += c ? " not-visible" : "", e += d ? " full-screen" : "", e
                    }
                    convertVideoClass(a, b) {
                        var c = "ratio-4-3";
                        return c += b ? " wait" : "", c
                    }
                    onPlaying(a) {
                        this.dispatchEvent(new CustomEvent("video-playing", a))
                    }
                }
                customElements.define(ChatroomVideoPreview.is, ChatroomVideoPreview);
            </script>
        </dom-module>
        <dom-module id="tc-video-moderation" assetpath="../ui/tc-video-moderation/"><template strip-whitespace="">
                <style include="tc-video-moderation-style"></style>
                <div id="moderatorlist" class$="[[_computeClass(isExpanded)]]" data-videos-count$="[[itemsCount]]">
                    <div id="header"><span>BROADCAST QUEUE <button on-click="onModeratorsShow"><svg width="14" height="8" viewBox="0 0 14 8" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12.205 7.694c.41.408 1.076.408 1.487 0a1.04 1.04 0 0 0 0-1.478L7.744.306a1.056 1.056 0 0 0-1.488 0L.308 6.216a1.04 1.04 0 0 0 0 1.478c.41.408 1.076.408 1.487 0L7 2.522l5.205 5.172z" fill="#7b868a"></path>
                                </svg></button></span></div>
                    <div id="moderatorlist-empty-item"><span>No videos yet</span></div>
                    <dom-repeat items="[[_items]]"><template strip-whitespace="">
                            <div class="video">
                                <div class="ratio-16-9">
                                    <tc-video-preview item="[[item]]" on-video-playing="videoPlaying"></tc-video-preview>
                                    <div class="overlay">
                                        <div class="overlay-content"><button class="button-decline" on-click="onClose"><svg width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M4 2.543L1.758.3A1.03 1.03 0 0 0 .302 1.757l2.242 2.24L.302 6.24a1.03 1.03 0 1 0 1.456 1.455L4 5.455l2.242 2.24A1.03 1.03 0 0 0 7.698 6.24L5.456 3.998l2.242-2.24A1.03 1.03 0 1 0 6.242.3L4 2.543z" fill="#04caff"></path>
                                                </svg></button> <button class="button-apply" on-click="onAllow"><svg width="12" height="10" viewBox="0 0 12 10" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M1.78 3.375a1 1 0 1 0-1.56 1.25l4 5A1 1 0 0 0 5.8 9.6l6-8A1 1 0 1 0 10.2.4L4.975 7.367 1.78 3.375z" fill="#fff"></path>
                                                </svg></button></div>
                                    </div>
                                    <div class="waiting">
                                        <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                                    </div><span class="nickname" title="[[item.nickname]]">[[item.nickname]]</span>
                                </div>
                            </div>
                        </template></dom-repeat>
                </div>
            </template>
            <script>
                class VideoModeration extends Polymer.Element {
                    static get is() {
                        return "tc-video-moderation"
                    }
                    static get properties() {
                        return {
                            videolist: {
                                type: Object,
                                observer: "videolistAssigned"
                            },
                            _items: {
                                type: Array,
                                value: [],
                                notify: !0
                            },
                            itemsCount: {
                                type: Number,
                                value: 0
                            },
                            isExpanded: {
                                type: Boolean,
                                value: !0
                            }
                        }
                    }
                    constructor() {
                        super()
                    }
                    connectedCallback() {
                        super.connectedCallback()
                    }
                    onModeratorsShow() {
                        this.isExpanded = !this.isExpanded
                    }
                    _computeClass(a) {
                        let b = "";
                        return a && (b += " show"), b
                    }
                    videolistAssigned() {
                        let a = this.videolist.chatroom,
                            b = this,
                            c = a.app.EventBus;
                        c.subscribe(TinychatApp.BLL.VideolistEvent.ID, a => {
                            a.action === TinychatApp.BLL.VideolistAction.AddModeration ? (a.videolistitem.progress = !0, b.splice("_items", a.index, 0, a.videolistitem), this.itemsCount++, this.notifyPath("_items")) : a.action === TinychatApp.BLL.VideolistAction.RemoveModeration ? (b.splice("_items", a.index, 1), this.itemsCount--, this.notifyPath("_items")) : a.action === TinychatApp.BLL.VideolistAction.UpdateModeration
                        })
                    }
                    videoPlaying(a) {
                        try {
                            let b = a.model.item,
                                c = this._items.indexOf(b);
                            b.progress = !1, this.notifyPath("_items." + c + ".progress")
                        } catch (a) {
                            console.error(a)
                        }
                    }
                    onClose(a) {
                        let b = a.model.item.userentity;
                        this.videolist.chatroom.VideoForceClose(b)
                    }
                    onAllow(a) {
                        let b = a.model.item.userentity;
                        this.videolist.chatroom.VideoAllow(b)
                    }
                }
                customElements.define(VideoModeration.is, VideoModeration);
            </script>
        </dom-module>
        <dom-module id="tinychat-sidemenu" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-sidemenu"></style>
                <div id="sidemenu">
                    <dom-if if="[[showCollapseAllow]]"><template strip-whitespace="">
                            <div id="sidemenu-wider" on-click="onCollapse"></div>
                        </template></dom-if>
                    <div id="sidemenu-content">
                        <div id="close-users" on-click="onClose"><label for="input-users" class="switcher"></label></div>
                        <div id="top-buttons-wrapper"><a id="live-directory" href="#live-directory" on-click="livedirectoryTap">Live Directory</a> <a id="upgrade" href="#subscription" on-click="upgrade">Upgrade</a></div>
                        <tc-video-moderation videolist="[[chatroom.videolist]]"></tc-video-moderation>
                        <tinychat-chatlist chatlog="[[chatlog]]"></tinychat-chatlist>
                        <tinychat-userlist userlist="[[userlist]]"></tinychat-userlist>
                    </div>
                    <div id="user-info">
                        <div title="[[roomname]]"></div><a href="[[roomnamehref]]" target="_blank">tinychat.com/room/[[roomname]]</a> <button on-click="login">Sign In</button>
                    </div>
                </div>
            </template>
            <script>
                const UI = window.TinychatApp.UI;
                class ChatroomSideMenu extends Polymer.Element {
                    static get is() {
                        return "tinychat-sidemenu"
                    }
                    static get properties() {
                        return {
                            userlist: {
                                type: Object,
                                observer: "userlistAssigned"
                            },
                            chatlog: {
                                type: Object,
                                observer: "chatlogAssigned"
                            },
                            chatroom: {
                                type: Object,
                                observer: "chatroomAssigned"
                            },
                            roomname: {
                                type: String
                            },
                            roomnamehref: {
                                type: String,
                                computed: "_roomnamehrefCompute(roomname)"
                            },
                            showCollapseAllow: {
                                type: Boolean,
                                value: !1
                            },
                            onFullscreenHandler: Object,
                            onWindowClickHandler: Object
                        }
                    }
                    constructor() {
                        super()
                    }
                    connectedCallback() {
                        super.connectedCallback(), this.onFullscreenHandler = this.onFullscreen.bind(this), window.fullscreenManager.addEventListener(this.onFullscreenHandler, !1), this.onWindowClickHandler = this.onWindowClick.bind(this), window.addEventListener("click", this.onWindowClickHandler, !1);
                        let a = this;
                        document.addEventListener("side-menu-change", function(b) {
                            b.detail.slideout ? a.slideout() : a.slidein()
                        })
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), window.fullscreenManager.removeEventListener(this.onFullscreenHandler, !1), window.removeEventListener("click", this.onWindowClickHandler)
                    }
                    _roomnamecompute(a) {
                        let b = "",
                            c = a.selfUser();
                        return null !== c && (b = c.username), b
                    }
                    _roomnamehrefCompute(a) {
                        return `${window.TinychatApp.url}/room/${a}`
                    }
                    chatlogAssigned() {}
                    userlistAssigned() {}
                    chatroomAssigned(a) {
                        let b = a.app.EventBus;
                        b.subscribe(TinychatApp.BLL.RoomConnected.ID, () => {
                            this.roomname = this._roomnamecompute(this.chatroom), this.showCollapseAllow = this.chatroom.selfUser().hasSubscriptions
                        })
                    }
                    get app() {
                        return this.userlist.chatroom.app
                    }
                    slideout() {
                        this.$.sidemenu.classList.add("show")
                    }
                    slidein() {
                        this.$.sidemenu.classList.remove("show")
                    }
                    login() {
                        this.app.Login()
                    }
                    onClose() {
                        this.slidein(), document.dispatchEvent(new CustomEvent("side-menu-changed", {
                            bubbles: !0,
                            detail: {
                                slideout: !1
                            }
                        }))
                    }
                    onCollapse(a) {
                        a.target.parentNode.classList.toggle("wider");
                        let b = new UI.UISideMenuToggle;
                        this.chatroom.app.EventBus.broadcast(UI.UISideMenuToggle.ID, b)
                    }
                    onWindowClick() {}
                    onFullscreen() {
                        let a = window.fullscreenManager.status();
                        a ? (this.$.sidemenu.classList.add("full-screen"), this.showCollapseAllow = !1) : (this.$.sidemenu.classList.remove("full-screen"), this.showCollapseAllow = this.chatroom.selfUser().hasSubscriptions)
                    }
                    livedirectoryTap() {
                        this.userlist.chatroom.gotoLiveDirectory()
                    }
                    upgrade() {
                        this.app.UpgradeSub()
                    }
                }
                customElements.define(ChatroomSideMenu.is, ChatroomSideMenu);
            </script>
        </dom-module>
        <dom-module id="client-title" assetpath="../../styles/"><template>
                <style>
                    #room-header * {
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                    }

                    #room-header {
                        display: flex;
                        flex-direction: row;
                        align-items: stretch;
                        min-height: 140px;
                        max-height: 140px;
                        border-bottom: 1px solid rgba(0, 0, 0, .1);
                        box-sizing: border-box;
                        background-color: #f6f6f6;
                        text-align: left;
                    }

                    #room-header-mobile-button {
                        display: none;
                    }

                    #room-header-avatar {
                        position: relative;
                        height: 100px;
                        min-width: 100px;
                        max-width: 100px;
                        margin: 20px 0 0 30px;
                        border-radius: 100%;
                        overflow: hidden;
                    }

                    #room-header-avatar>img {
                        position: absolute;
                        height: 100%;
                        top: 0;
                        left: -25px;
                    }

                    #room-header-info {
                        width: 100%;
                        padding: 24px 0 0 20px;
                        box-sizing: border-box;
                    }

                    #room-header-info>h1 {
                        position: relative;
                        display: inline-block;
                        width: 100%;
                        max-width: 180px;
                        margin: 0 5px 0 0;
                        padding: 0 20px 0 0;
                        font-size: 16px;
                        font-weight: 700;
                        color: #363636;
                        white-space: nowrap;
                        line-height: normal;
                        overflow: hidden;
                        cursor: default;
                    }

                    #room-header-info>h1:after {
                        content: "";
                        position: absolute;
                        display: block;
                        height: 100%;
                        width: 20px;
                        top: 0;
                        right: 0;
                        background: -moz-linear-gradient(left, rgba(246, 246, 246, 0) 0%, rgba(246, 246, 246, 1) 100%);
                        background: -webkit-linear-gradient(left, rgba(246, 246, 246, 0) 0%, rgba(246, 246, 246, 1) 100%);
                        background: linear-gradient(to right, rgba(246, 246, 246, 0) 0%, rgba(246, 246, 246, 1) 100%);
                        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00f6f6f6', endColorstr='#f6f6f6', GradientType=1);
                    }

                    #room-header-info>span {
                        display: inline-block;
                        margin-left: 10px;
                        box-sizing: border-box;
                        font-size: 0;
                        text-align: center;
                        cursor: pointer;
                    }

                    #room-header-info-text {
                        position: relative;
                        height: 32px;
                        padding-top: 6px;
                        font-size: 11px;
                        line-height: 16px;
                        overflow: hidden;
                        cursor: default;
                    }

                    #room-header-info-text:after {
                        content: "";
                        position: absolute;
                        display: block;
                        height: 16px;
                        width: 60px;
                        bottom: 0;
                        right: 0;
                        background: -moz-linear-gradient(left, rgba(246, 246, 246, 0) 0%, rgba(246, 246, 246, 1) 100%);
                        background: -webkit-linear-gradient(left, rgba(246, 246, 246, 0) 0%, rgba(246, 246, 246, 1) 100%);
                        background: linear-gradient(to right, rgba(246, 246, 246, 0) 0%, rgba(246, 246, 246, 1) 100%);
                        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00f6f6f6', endColorstr='#f6f6f6', GradientType=1);
                    }

                    #room-header-info-details {
                        padding-top: 3px;
                        font-size: 16px;
                        white-space: nowrap;
                        cursor: default;
                    }

                    #room-header-info-details>span:after {
                        content: "";
                        position: relative;
                        display: inline-block;
                        height: 23px;
                        width: 1px;
                        top: 7px;
                        margin: 0 14px;
                        background-color: #e9e9e9;
                    }

                    #room-header-info-details>a {
                        color: #3cafe1;
                        cursor: pointer;
                    }

                    #room-header-info-details>a:hover {
                        text-decoration: underline;
                    }

                    #room-header-gifts {
                        display: flex;
                        flex-direction: row;
                        align-items: stretch;
                        padding: 30px 20px;
                        box-sizing: border-box;
                    }

                    #room-header-gifts-items {
                        padding: 0 11px;
                        border-radius: 12px;
                        background-color: #fff;
                        font-size: 0;
                        text-align: center;
                        white-space: nowrap;
                    }

                    #room-header-gifts-items>a {
                        display: inline-block;
                        height: 60px;
                        width: 60px;
                        margin: 10px 5px;
                    }

                    #room-header-gifts-items>a>img {
                        height: 100%;
                        width: 100%;
                    }

                    #room-header-gifts-buttons {
                        display: inline-block;
                        padding-left: 10px;
                        box-sizing: border-box;
                        font-size: 0;
                        white-space: nowrap;
                    }

                    #room-header-gifts-buttons>a {
                        display: none;
                        height: 35px;
                        width: 120px;
                        border-radius: 35px;
                        border: 1px solid transparent;
                        box-sizing: border-box;
                        font-size: 12px;
                        font-weight: 700;
                        color: #fff;
                        background-color: #41b7ef;
                        line-height: 35px;
                        text-align: center;
                        text-decoration: none;
                        cursor: pointer;
                        transition: .2s;
                    }

                    #room-header-gifts-buttons>#give-gift {
                        display: block;
                    }

                    #room-header-gifts-buttons>#give-gift:hover {
                        background-color: #54ccf3;
                    }

                    #room-header-gifts-buttons>#give-gift:active {
                        background-color: #38a8de;
                    }

                    #room-header-gifts-buttons>#upgrade {
                        display: none;
                        margin-right: 6px;
                        background-color: #efa701;
                    }

                    #room-header-gifts-buttons>#upgrade:hover {
                        background-color: #ffb701;
                    }

                    #room-header-gifts-buttons>#upgrade:active {
                        background-color: #cf8701;
                    }

                    #room-header-gifts-buttons>#get-coins {
                        display: inline-block;
                        width: 100%;
                        margin-top: 10px;
                        border-color: #41b7ef;
                        color: #41b7ef;
                        background-color: #fff;
                        transition: .2s;
                    }

                    #room-header-gifts-buttons>#get-coins:hover {
                        background-color: #d6f2ff;
                    }

                    #room-header-gifts-buttons>#get-coins:active {
                        background-color: #c7e8f8;
                    }

                    @media screen and (max-width: 1180px) {
                        #room-header {
                            min-height: 100px;
                            max-height: 100px;
                        }

                        #room-header-avatar {
                            height: 60px;
                            min-width: 60px;
                            max-width: 60px;
                            margin: 20px 0 0 16px;
                        }

                        #room-header-avatar>img {
                            left: -15px;
                        }

                        #room-header-info {
                            position: relative;
                            padding: 22px 60px 0 14px;
                        }

                        #room-header-info>span {
                            position: absolute;
                            top: 10px;
                            right: 25px;
                            margin: 0;
                        }

                        #room-header-info>span+span {
                            top: 40px;
                            right: 24px;
                        }

                        #room-header-info>span+span+span {
                            top: 70px;
                            right: 23px;
                        }

                        #room-header-info-text {
                            padding-top: 4px;
                        }

                        #room-header-info-details {
                            display: none;
                        }

                        #room-header-gifts {
                            padding: 14px 20px;
                            border-left: 1px solid rgba(0, 0, 0, .1);
                        }

                        #room-header-gifts-items {
                            padding: 0;
                            border-radius: 0;
                            background-color: transparent;
                        }

                        #room-header-gifts-items>a {
                            height: 72px;
                            width: 72px;
                            margin: 0 -11px 0 0;
                            padding: 11px;
                            border-radius: 100%;
                            box-sizing: border-box;
                            background-color: #fff;
                            box-shadow: 0 0 6px 0 rgba(0, 0, 0, .1);
                        }

                        #room-header-gifts-buttons {
                            padding-left: 21px;
                        }

                        #room-header-gifts-buttons>a {
                            height: 30px;
                            line-height: 30px;
                        }

                        #room-header-gifts-buttons>a+a,
                        #room-header-gifts-buttons>a+a:hover {
                            height: 30px;
                            margin-top: 12px;
                            line-height: 30px;
                        }
                    }

                    @media screen and (max-width: 1000px) {
                        #room-header-gifts-buttons>#give-gift {
                            width: 210px;
                        }

                        #room-header-gifts-buttons>#upgrade,
                        #room-header-gifts-buttons>#get-coins {
                            display: inline-block;
                            width: 102px;
                        }
                    }

                    @media screen and (max-width: 800px) {
                        #room-header-info {
                            padding-right: 15px;
                        }

                        #room-header-info>h1 {
                            display: block;
                        }

                        #room-header-info>span {
                            position: static;
                            margin-top: 12px;
                            vertical-align: middle;
                        }

                        #room-header-info>span+span {
                            margin-left: 20px;
                        }

                        #room-header-info-text,
                        #room-header-info-details {
                            display: none;
                        }

                        #room-header-gifts {
                            padding: 16px 15px;
                            background-color: #fff;
                        }

                        #room-header-gifts-items>a {
                            height: 60px;
                            width: 60px;
                            margin: 5px;
                            padding: 0;
                            box-shadow: none;
                        }

                        #room-header-gifts-items>a+a {
                            display: none;
                        }

                        #room-header-gifts-buttons {
                            padding-top: 1px;
                            padding-left: 15px;
                        }

                        #room-header-gifts-buttons>#give-gift {
                            width: 190px;
                        }

                        #room-header-gifts-buttons>#upgrade,
                        #room-header-gifts-buttons>#get-coins {
                            display: inline-block;
                            width: 92px;
                        }
                    }

                    @media screen and (max-width: 740px) {
                        #room-header-info {
                            padding-right: 40px;
                        }

                        #room-header-info>span {
                            margin-right: -10px;
                        }
                    }

                    @media screen and (max-width: 600px) {
                        #room-header {
                            position: absolute;
                            display: block;
                            height: 54px;
                            min-height: inherit;
                            max-height: inherit;
                            width: 100%;
                            max-width: 100%;
                            min-width: 100%;
                            overflow: hidden;
                            z-index: 1;
                            transition: height .2s;
                        }

                        #room-header.show {
                            height: 146px;
                        }

                        #room-header-mobile-button {
                            position: absolute;
                            display: block;
                            height: 26px;
                            width: 26px;
                            top: 15px;
                            right: 15px;
                            cursor: pointer;
                        }

                        #room-header-mobile-button>span,
                        #room-header-mobile-button:before,
                        #room-header-mobile-button:after {
                            content: '';
                            position: absolute;
                            display: block;
                            height: 6px;
                            width: 6px;
                            top: 10px;
                            left: 0;
                            border-radius: 100%;
                            background-color: #41b7ef;
                            pointer-events: none;
                            transform: rotate(45deg);
                            transition: background-color .2s,
                                height .3s,
                                width .3s,
                                top .3s,
                                left .3s,
                                opacity .3s,
                                border-radius .3s;
                        }

                        #room-header-mobile-button>span {
                            left: 10px;
                        }

                        #room-header-mobile-button:after {
                            left: 20px;
                            transform: rotate(-45deg);
                        }

                        #room-header-mobile-button:hover>span,
                        #room-header-mobile-button:hover:before,
                        #room-header-mobile-button:hover:after {
                            background-color: #54ccf3;
                        }

                        #room-header-mobile-button:hover>span,
                        #room-header-mobile-button:hover:before,
                        #room-header-mobile-button:hover:after {
                            background-color: #38a8de;
                        }

                        #room-header.show #room-header-mobile-button:before,
                        #room-header.show #room-header-mobile-button:after {
                            height: 2px;
                            width: 16px;
                            top: 12px;
                            left: 5px;
                            border-radius: 1px;
                        }

                        #room-header.show #room-header-mobile-button>span {
                            opacity: 0;
                        }

                        #room-header-avatar {
                            display: inline-block;
                            height: 24px;
                            min-width: 24px;
                            max-width: 24px;
                            margin: 15px 0 0 15px;
                        }

                        #room-header-avatar>img {
                            left: -6px;
                        }

                        #room-header-info {
                            position: absolute;
                            height: 100%;
                            width: auto;
                            top: 0;
                            left: 39px;
                            right: 150px;
                            padding-top: 54px;
                        }

                        #room-header-info>h1 {
                            position: absolute;
                            height: 16px;
                            width: calc(100% + 70px);
                            max-width: inherit;
                            top: 20px;
                            left: 14px;
                            right: 20px;
                            margin: 0;
                            padding: 0;
                        }

                        #room-header-info>span {
                            top: 65px;
                        }

                        #room-header-info>span+span {
                            top: 103px;
                        }

                        #room-header-info-text,
                        #room-header-info-details {
                            position: relative;
                            width: calc(100% + 38px);
                            left: -38px;
                        }

                        #room-header-info-text {
                            padding-top: 8px;
                        }

                        #room-header-info-details {
                            display: block;
                            font-size: 13px;
                            overflow: hidden;
                        }

                        #room-header-gifts {
                            position: absolute;
                            width: 150px;
                            top: 54px;
                            right: 0;
                            padding-top: 6px;
                            background-color: transparent;
                        }

                        #room-header-gifts-items {
                            display: none;
                        }

                        #room-header-gifts-buttons {
                            padding-left: 0;
                        }

                        #room-header-gifts-buttons>#give-gift,
                        #room-header-gifts-buttons>#get-coins {
                            width: 120px;
                        }

                        #room-header-gifts-buttons>#upgrade {
                            display: none;
                        }
                    }
                </style>
            </template></dom-module>
        <dom-module id="tinychat-title" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-title"></style>
                <div id="room-header">
                    <div id="room-header-mobile-button" on-click="onHeaderMobile"><span></span></div>
                    <div id="room-header-avatar"><img src="[[avatar]]"></div>
                    <div id="room-header-info">
                        <h1>[[title]]</h1><span on-click="shareTap" title="Share room"><svg width="16" height="22" viewBox="0 0 16 22" xmlns="http://www.w3.org/2000/svg">
                                <path fill="#53b6ef" fill-rule="evenodd" d="M9 2.57v10.475H7V2.57L4.682 4.733 3.318 3.268 5.986.782c1.12-1.043 2.91-1.042 4.028 0l2.668 2.486-1.364 1.464L9 2.572zM2 20h12V7.994C14 8 11 8 11 8V6h2.995C15.102 6 16 6.895 16 7.994v12.012c0 1.1-.895 1.994-1.994 1.994H1.994C.894 22 0 21.105 0 20.006V7.994C0 6.894.894 6 2.005 6H5v2H2.005C2.002 8 2 20 2 20z"></path>
                            </svg> </span><span on-click="settingsTap" title="Settings"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                <path fill="#53b6ef" fill-rule="evenodd" d="M12.028 1.632l.002.017-.002-.018zm7.15 4.97l-.012.01.013-.01zM12.03 18.347c0-.006 0-.01.002-.017l-.002.017zm-2.04.02v-.016.018zM2.96 12.84c.007.007.013.016.018.025l-.017-.026zm1.203-.337c.342-.227.51-.64.425-1.04l-.05-.232c-.082-.39-.125-.81-.125-1.23 0-.42.043-.84.126-1.23l.048-.233c.085-.4-.083-.813-.425-1.04l-1.328-.882c.162.11.223.35.102.546l1.246-2.02 1.212.533c.368.162.797.088 1.09-.188l.17-.162c.625-.53 1.39-.95 2.238-1.21l.228-.07c.385-.122.658-.46.697-.86l.146-1.513c-.024.197-.186.33-.355.33h2.778c-.16 0-.332-.147-.356-.35l.147 1.534c.04.4.313.737.696.858l.22.07c.856.26 1.62.68 2.283 1.244l.134.13c.293.275.722.35 1.09.187l1.21-.534 1.247 2.02c-.11-.178-.054-.435.11-.55l-1.336.887c-.34.227-.51.64-.424 1.04l.05.232c.082.39.125.81.125 1.23 0 .42-.042.84-.125 1.23l-.05.233c-.084.4.085.813.426 1.04l1.33.882c-.163-.11-.224-.35-.103-.546l-1.246 2.02-1.21-.533c-.368-.162-.797-.088-1.09.188l-.172.162c-.624.53-1.39.95-2.237 1.21l-.227.07c-.383.122-.657.46-.696.86l-.145 1.513c.023-.197.185-.33.354-.33H9.633c.16 0 .332.147.356.35l-.15-1.534c-.037-.4-.31-.737-.694-.858l-.22-.07c-.856-.26-1.62-.68-2.283-1.244l-.134-.13c-.294-.275-.723-.35-1.09-.187l-1.212.534-1.23-1.995c.077.148.013.416-.156.53l1.34-.892zm-2.87 1.437l1.367 2.22c.437.708 1.316.984 2.087.65l.904-.4c.7.54 1.453.954 2.263 1.25l.085.88c.063.84.78 1.46 1.635 1.46h2.753c.834 0 1.57-.623 1.636-1.48l.083-.86c.82-.298 1.58-.718 2.266-1.248l.898.395c.775.337 1.654.06 2.09-.645l1.402-2.274c.458-.742.22-1.68-.482-2.16l-.786-.523c.06-.394.09-.8.09-1.205 0-.406-.03-.81-.09-1.205l.773-.513c.734-.462.958-1.42.494-2.17l-1.4-2.273c-.438-.708-1.317-.984-2.088-.65l-.904.4c-.698-.54-1.452-.954-2.263-1.25l-.084-.88C13.958.62 13.24 0 12.387 0H9.608c-.833 0-1.57.623-1.636 1.48l-.083.86c-.82.298-1.582.718-2.266 1.248l-.898-.395c-.775-.337-1.654-.06-2.09.645L1.234 6.112c-.458.742-.22 1.68.482 2.16l.787.523c-.06.394-.09.8-.09 1.205 0 .406.03.81.09 1.205l-.766.508c-.765.49-.97 1.48-.444 2.227z"></path>
                                <circle fill="#53b6ef" fill-rule="evenodd" cx="11" cy="10" r="2"></circle>
                            </svg> </span><span on-click="followTap" title="Follow"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                <circle fill="none" fill-rule="evenodd" stroke="#53b6ef" stroke-width="2" cx="10" cy="10" r="9"></circle>
                                <path fill="#53b6ef" fill-rule="evenodd" d="M9 9V7a1 1 0 1 1 2 0v2h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H7a1 1 0 0 1 0-2h2z"></path>
                            </svg></span>
                        <div id="room-header-info-text">[[biography]]</div>
                        <div id="room-header-info-details"><span>[[location]]</span><a href="[[website]]" target="_blank">[[website]]</a></div>
                    </div>
                    <div id="room-header-gifts">
                        <dom-if if="[[recent_gifts_show]]"><template strip-whitespace="">
                                <div id="room-header-gifts-items">
                                    <dom-repeat items="[[recent_gifts]]"><template strip-whitespace=""><a href="#"><img src="[[item.giftUrl]]"></a></template></dom-repeat>
                                </div>
                            </template></dom-if>
                        <div id="room-header-gifts-buttons"><a id="give-gift" href="#giveagift" on-click="giveagiftTap">Give a Gift</a> <a id="upgrade" href="#subscription" on-click="upgrade">Upgrade</a> <a id="get-coins" href="#getcoins" on-click="getcoinsTap">Get Coins</a></div>
                    </div>
                </div>
            </template>
            <script>
                class ChatroomTitle extends Polymer.Element {
                    static get is() {
                        return "tinychat-title"
                    }
                    static get properties() {
                        return {
                            chatroom: {
                                type: Object,
                                observer: "chatroomAssigned"
                            },
                            title: String,
                            biography: String,
                            location: String,
                            website: String,
                            avatar: String,
                            recent_gifts: Object,
                            recent_gifts_show: {
                                type: Boolean,
                                computed: "convertGiftShown(recent_gifts)"
                            },
                            onFullscreenHandler: Object
                        }
                    }
                    constructor() {
                        super()
                    }
                    get app() {
                        return this.chatroom.app
                    }
                    connectedCallback() {
                        super.connectedCallback(), this.onFullscreenHandler = this.onFullscreen.bind(this), window.fullscreenManager.addEventListener(this.onFullscreenHandler, !1)
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), window.fullscreenManager.removeEventListener(this.onFullscreenHandler, !1)
                    }
                    chatroomAssigned() {
                        let a = this,
                            b = this.chatroom.app.EventBus;
                        b.subscribe(TinychatApp.BLL.RoomSettingsEvent.ID, function(b) {
                            let c = b.roomSettings;
                            a.setProperties({
                                title: c.name,
                                biography: c.biography,
                                location: c.location,
                                website: c.website,
                                avatar: c.avatar,
                                recent_gifts: c.recent_gifts
                            })
                        })
                    }
                    convertGiftShown(a) {
                        return !!Array.isArray(a) && 0 < a.length
                    }
                    onHeaderMobile() {
                        this.$["room-header"].classList.toggle("show")
                    }
                    onFullscreen() {
                        let a = window.fullscreenManager.status();
                        this.setAttribute("style", a ? "display:none;" : "")
                    }
                    shareTap() {
                        this.app.Share()
                    }
                    settingsTap() {
                        this.app.Settings()
                    }
                    followTap() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.chatroom.userlist.follow({
                            isInsta: 0 > this.chatroom.roomSettings.type.indexOf("default"),
                            username: this.chatroom.roomname,
                            nickname: this.chatroom.roomname
                        })
                    }
                    giveagiftTap() {
                        this.app.GiveAGift(this.chatroom.selfUser().username)
                    }
                    getcoinsTap() {
                        this.app.EarnCoins()
                    }
                    upgrade() {
                        this.app.UpgradeSub()
                    }
                }
                customElements.define(ChatroomTitle.is, ChatroomTitle);
            </script>
        </dom-module>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<dom-module id="client-chatlog" assetpath="../../styles/"><template>
                <style>
                    .on-white-scroll {
                        padding-left: 16px;
                        box-sizing: border-box;
                        overflow-x: hidden;
                        overflow-y: scroll;
                    }

                    .on-white-scroll::-webkit-scrollbar {
                        position: absolute;
                        width: 15px;
                        cursor: pointer;
                    }

                    .on-white-scroll::-webkit-scrollbar-track {
                        background-color: #fff;
                    }

                    .on-white-scroll::-webkit-scrollbar-thumb {
                        border: 5px solid #fff;
                        border-radius: 6px/8px;
                        background-color: rgba(0, 0, 0, .2);
                    }

                    .on-white-scroll::-webkit-scrollbar-thumb:hover {
                        background-color: rgba(0, 0, 0, .4);
                    }

                    :host,
                    #chat-wrapper {
                        position: relative;
                        height: 100%;
                    }

                    #chat-wider {
                        position: absolute;
                        display: block;
                        height: 40px;
                        width: 16px;
                        top: 50%;
                        left: -8px;
                        margin-top: -20px;
                        border-radius: 16px;
                        font-size: 0;
                        background-color: #e9eaea;
                        cursor: pointer;
                        z-index: 1;
                    }

                    #chat-wider:before {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 0;
                        width: 0;
                        top: 50%;
                        left: 50%;
                        margin: -4px 0 0 -2px;
                        border-width: 4px 4px 4px 0;
                        border-style: solid;
                        border-color: transparent #bcc2c2;
                        transition: .8s;
                    }

                    #chat-wider.active:before {
                        transform: rotate(180deg);
                        -webkit-transform: rotate(180deg);
                    }

                    #chat-wrapper {
                        min-width: 350px;
                        border-left: 1px solid rgba(0, 0, 0, .1);
                        box-sizing: border-box;
                        background-color: #fff;
                        transition: .8s;
                    }

                    #chat-wider.active+#chat-wrapper {
                        min-width: 500px;
                    }

                    #chatlog-button {
                        display: none;
                    }

                    #chat-position {
                        position: absolute;
                        display: flex;
                        flex-direction: column;
                        align-items: stretch;
                        top: 20px;
                        left: 20px;
                        right: 20px;
                        bottom: 19px;
                    }

                    #chat-instant {
                        position: relative;
                        height: 0;
                        min-height: 0;
                        width: 100%;
                        padding-left: 106px;
                        box-sizing: border-box;
                        background-color: #fff;
                        overflow: hidden;
                    }

                    #chat-instant.show {
                        height: 50px;
                        min-height: 50px;
                    }

                    #chat-instant>.nickname {
                        white-space: nowrap;
                        font-size: 16px;
                        font-weight: 700;
                        color: #000;
                        line-height: 44px;
                        overflow: hidden;
                        text-overflow: ellipsis;
                        cursor: default;
                    }

                    #chat-instant-button {
                        position: absolute;
                        display: block;
                        height: 40px;
                        width: 40px;
                        top: 2px;
                        left: 0;
                        border-radius: 4px;
                        background-color: transparent;
                        cursor: pointer;
                        transition: .2s;
                    }

                    #chat-instant-button:before {
                        content: "";
                        position: relative;
                        display: inline-block;
                        height: 14px;
                        width: 14px;
                        top: 13px;
                        left: 18px;
                        margin-right: 4px;
                        border-width: 0 0 2px 2px;
                        border-style: solid;
                        border-color: #53b6ef;
                        box-sizing: border-box;
                        transform: rotate(45deg);
                        -webkit-transform: rotate(45deg);
                        transition: .2s;
                    }

                    #chat-instant-button:hover:before {
                        border-color: #54ccf3;
                    }

                    #chat-instant-button:active:before {
                        border-color: #38a8dd;
                    }

                    #chat-position>#chat-instant>a {
                        position: absolute;
                        height: 40px;
                        width: 40px;
                        top: 2px;
                        left: 60px;
                    }

                    #chat-instant:after {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 10px;
                        left: 0;
                        right: 15px;
                        bottom: -10px;
                        background: -moz-linear-gradient(top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
                        background: -webkit-linear-gradient(top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
                        background: linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
                        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#00ffffff', GradientType=0);
                        z-index: 1;
                    }

                    #chat {
                        position: relative;
                        height: 100%;
                        min-height: 120px;
                        padding-left: 0;
                    }

                    #chat-content {
                        display: flex;
                        flex-direction: column;
                        justify-content: flex-end;
                        min-height: 100%;
                    }

                    #chat-content>.message {
                        position: relative;
                        left: 0;
                        margin-bottom: 10px;
                        animation: show-message .2s ease 0s 1;
                        -webkit-animation: show-message .2s ease 0s 1;
                    }

                    @keyframes show-message {
                        0% {
                            left: 100%;
                        }

                        100% {
                            left: 0;
                        }
                    }

                    @-webkit-keyframes show-message {
                        0% {
                            left: 100%;
                        }

                        100% {
                            left: 0;
                        }
                    }

                    #chat-content>.message.common {
                        min-height: 50px;
                        padding: 10px 10px 0 50px;
                        box-sizing: border-box;
                        font-size: 0;
                        text-align: left;
                    }

                    #chat-content>.message.system {
                        padding: 8px 10px;
                        border-radius: 4px;
                        box-sizing: border-box;
                        background-color: #f6f6f6;
                        cursor: default;
                    }

                    #chat-content>.message.gift {
                        min-height: 50px;
                        padding: 10px 10px 0 50px;
                        box-sizing: border-box;
                        font-size: 0;
                        text-align: left;
                    }

                    #chat-instant>a:first-child,
                    #chat-content>.message>a:first-child {
                        position: absolute;
                        height: 40px;
                        width: 40px;
                        top: 10px;
                        left: 0;
                    }

                    #chat-instant>a>.avatar,
                    #chat-content>.message>a>.avatar {
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        border-radius: 100%;
                        overflow: hidden;
                    }

                    #chat-instant>a>.avatar>img,
                    #chat-content>.message>a>.avatar>img {
                        position: relative;
                        height: 100%;
                        left: -7px;
                    }

                    #chat-instant>a>.status-icon,
                    #chat-content>.message>a>.status-icon {
                        position: absolute;
                        height: 10px;
                        width: 10px;
                        top: 26px;
                        left: -2px;
                        padding: 3px;
                        border-radius: 100%;
                        background-color: #fff;
                    }

                    #chat-instant>a>.status-icon[src=""],
                    #chat-instant>a>.avatar>img[src=""],
                    #chat-content>.message>a>.status-icon[src=""],
                    #chat-content>.message>a>.avatar>img[src=""] {
                        opacity: 0;
                        visibility: hidden;
                    }

                    #chat-content>.message>.nickname {
                        display: inline-block;
                        font-size: 14px;
                        font-weight: 600;
                        color: #000;
                        line-height: 20px;
                        text-decoration: none;
                        white-space: nowrap;
                        overflow: hidden;
                        text-overflow: ellipsis;
                        transition: .2s;
                    }

                    #chat-content>.message>.nickname:hover {
                        opacity: .5;
                    }

                    #chat-instant>.nickname[data-status="gold"],
                    #chat-wrapper.full-screen #chat-instant>.nickname[data-status="gold"],
                    #chat-content>.message>.nickname[data-status="gold"],
                    #chat-wrapper.full-screen #chat-content>.message>.nickname[data-status="gold"] {
                        color: #ffbe00;
                    }

                    #chat-instant>.nickname[data-status="extreme"],
                    #chat-wrapper.full-screen #chat-instant>.nickname[data-status="extreme"],
                    #chat-content>.message>.nickname[data-status="extreme"],
                    #chat-wrapper.full-screen #chat-content>.message>.nickname[data-status="extreme"] {
                        color: #ad6ed1;
                    }

                    #chat-instant>.nickname[data-status="pro"],
                    #chat-wrapper.full-screen #chat-instant>.nickname[data-status="pro"],
                    #chat-content>.message>.nickname[data-status="pro"],
                    #chat-wrapper.full-screen #chat-content>.message>.nickname[data-status="pro"] {
                        color: #31ea5d;
                    }

                    #chat-content>.message>.content {
                        font-size: 14px;
                        color: #2e373a;
                        white-space: pre-line;
                        word-wrap: break-word;
                    }

                    #chat-content>.message.system>.content {
                        font-size: 12px;
                        font-weight: 600;
                        color: #8f999c;
                    }

                    #chat-content>.message.gift>.content {
                        padding-bottom: 12px;
                        font-size: 12px;
                        font-weight: 600;
                        color: #8f999c;
                        cursor: default;
                    }

                    #chat-content>.message.gift>.gift-image {
                        display: block;
                        height: 100px;
                        width: 100px;
                    }

                    #chat-content>.message.gift>.gift-image>img {
                        height: 100%;
                        width: 100%;
                    }

                    #input {
                        position: relative;
                        display: block;
                        padding-top: 10px;
                    }

                    #input:before {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 10px;
                        left: 0;
                        right: 15px;
                        top: -10px;
                        background: -moz-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%);
                        background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%);
                        background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%);
                        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00ffffff', endColorstr='#ffffff', GradientType=0);
                    }

                    #input:after {
                        content: "";
                        position: absolute;
                        display: block;
                        top: 10px;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        border: 2px solid #cbcfcf;
                        border-radius: 12px;
                        box-sizing: border-box;
                        pointer-events: none;
                    }

                    #input-unread {
                        position: absolute;
                        display: inline-block;
                        height: 24px;
                        top: -30px;
                        right: -200px;
                        padding: 0 15px;
                        border-radius: 12px;
                        background-color: #41b7ef;
                        font-size: 12px;
                        color: #fff;
                        line-height: 24px;
                        white-space: nowrap;
                        opacity: .8;
                        cursor: pointer;
                        transition: .2s;
                    }

                    #input-unread:before {
                        content: attr(data-messages);
                        display: inline-block;
                    }

                    #input-unread:after {
                        content: "";
                        position: absolute;
                        display: inline-block;
                        height: 0;
                        width: 0;
                        left: 19px;
                        bottom: -5px;
                        border-width: 5px 5px 0 5px;
                        border-style: solid;
                        border-color: #41b7ef transparent transparent;
                    }

                    #input #input-unread.show {
                        right: 0;
                        opacity: 1;
                    }

                    #input>textarea {
                        position: relative;
                        display: block;
                        min-height: 50px;
                        height: 50px;
                        max-height: 140px;
                        width: 100%;
                        padding: 12px 20px;
                        border: none;
                        border-radius: 12px;
                        box-sizing: border-box;
                        font-family: "Open Sans", sans-serif;
                        font-size: 16px;
                        line-height: 22px;
                        vertical-align: top;
                        white-space: pre-line;
                        outline: none;
                        resize: none;
                    }

                    #input>.waiting {
                        position: absolute;
                        width: auto;
                        top: 10px;
                        bottom: 0;
                        left: 0;
                        right: 0;
                        border-radius: 12px;
                        background-color: #e9eaea;
                        z-index: 1;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    #input.wait>.waiting {
                        opacity: 1;
                        visibility: visible;
                    }

                    .waiting>.waiting-content {
                        position: absolute;
                        height: 0;
                        width: 80%;
                        top: 50%;
                        left: 10%;
                    }

                    .waiting>.waiting-content>span {
                        position: absolute;
                        display: inline-block;
                        height: 0;
                        width: 0;
                        top: -4px;
                        left: 0;
                        border: 4px solid #cacece;
                        border-radius: 100%;
                        opacity: 0;
                        animation: waiting 1s ease-in-out 0s infinite paused;
                        -webkit-animation: waiting 1s ease-in-out 0s infinite paused;
                    }

                    .waiting>.waiting-content>span:nth-child(2) {
                        animation-delay: .15s;
                        -webkit-animation-delay: .15s;
                    }

                    .waiting>.waiting-content>span:nth-child(3) {
                        animation-delay: .3s;
                        -webkit-animation-delay: .3s;
                    }

                    .waiting>.waiting-content>span:nth-child(4) {
                        animation-delay: .45s;
                        -webkit-animation-delay: .45s;
                    }

                    #input.wait>.waiting>.waiting-content>span {
                        animation-play-state: running;
                        -webkit-animation-play-state: running;
                    }

                    @keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }

                    @-webkit-keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }

                    @media screen and (max-width: 1200px) {
                        #chat-wider {
                            opacity: 0;
                            visibility: hidden;
                        }

                        :host,
                        #chat-wrapper {
                            position: relative;
                            height: auto;
                        }

                        #chat-wrapper {
                            min-height: 270px;
                            max-height: 350px;
                            border-top: 1px solid rgba(0, 0, 0, .1);
                        }

                        #chat-position {
                            top: 20px;
                            left: 30px;
                            right: 30px;
                        }

                        #input>textarea {
                            max-height: 50px;
                        }
                    }

                    @media screen and (max-width: 600px) {

                        :host,
                        #chat-wrapper,
                        #chat-wider+#chat-wrapper,
                        #chat-wider.active+#chat-wrapper {
                            position: relative;
                            min-width: 320px;
                        }

                        #chat-wrapper {
                            border-top: 1px solid #e6e6e6;
                        }

                        #chat-position {
                            left: 15px;
                            right: 15px;
                            bottom: 15px;
                        }

                        #chat-content>.message {
                            margin-bottom: 10px;
                        }

                        #chat-content>.message.common {
                            min-height: 30px;
                            padding: 0 10px 0 32px;
                        }

                        #chat-content>.message.system {
                            padding: 5px 10px;
                        }

                        #chat-content>.message.gift {
                            min-height: 50px;
                            padding: 0 10px 0 32px;
                        }

                        #chat-content>.message>a:first-child {
                            height: 24px;
                            width: 24px;
                            top: 0;
                        }

                        #chat-content>.message>a>.status-icon {
                            top: 14px;
                            left: -4px;
                        }

                        #chat-content>.message>a>.avatar>img {
                            left: -4px;
                        }

                        #chat-content>.message>.nickname,
                        #chat-content>.message>.content {
                            font-size: 12px;
                        }
                    }

                    #chat-wrapper.full-screen {
                        background-color: #202628;
                        border-color: #202628;
                        color: #fff;
                    }

                    #chat-wrapper.full-screen #chat-instant,
                    #chat-wrapper.full-screen #chat-instant>a>.status-icon,
                    #chat-wrapper.full-screen #chat-content>.message>a>.status-icon {
                        background-color: #202628;
                    }

                    #chat-wrapper.full-screen #input:before {
                        background: -moz-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(32, 38, 40, 1) 100%);
                        background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(32, 38, 40, 1) 100%);
                        background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(32, 38, 40, 1) 100%);
                        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00ffffff', endColorstr='#202628', GradientType=0);
                    }

                    #chat-wrapper.full-screen .on-white-scroll::-webkit-scrollbar-track {
                        background-color: #202628;
                    }

                    #chat-wrapper.full-screen .on-white-scroll::-webkit-scrollbar-thumb {
                        border-color: #202628;
                        background-color: #5a6366;
                    }

                    #chat-wrapper.full-screen .on-white-scroll::-webkit-scrollbar-thumb:hover {
                        background-color: #70797c;
                    }

                    #chat-wrapper.full-screen #chat-content>.message>.nickname {
                        color: #7b868a;
                    }

                    #chat-wrapper.full-screen #chat-content>.message>.content {
                        color: #fff;
                    }

                    #chat-wrapper.full-screen #input>textarea {
                        background-color: #202628;
                        color: #fff;
                    }

                    #chat-wrapper.full-screen #input>.waiting {
                        top: 12px;
                        bottom: 2px;
                        left: 2px;
                        right: 2px;
                        background-color: #202628;
                    }

                    #chat-wrapper.full-screen .waiting>.waiting-content>span,
                    #chat-wrapper.full-screen #input:after {
                        border-color: #5a6366;
                    }

                    #chat-wrapper.full-screen #chat-content>.message.system {
                        background-color: #5a6366;
                    }

                    #chat-wrapper.full-screen #chatlog-button {
                        position: absolute;
                        display: block;
                        height: 54px;
                        width: 54px;
                        top: 8px;
                        right: 10px;
                        border-radius: 100%;
                        background-color: #101314;
                        line-height: 54px;
                        text-align: center;
                        z-index: 1;
                        cursor: pointer;
                    }

                    #chat-wrapper.full-screen #chat-instant.show+#chatlog-button {
                        top: 58px;
                    }

                    #chat-wrapper.full-screen #chatlog-button>svg {
                        vertical-align: middle;
                    }

                    #chat-wrapper.full-screen #chatlog-button>svg+svg {
                        display: none;
                    }

                    #chat-wrapper.full-screen.show,
                    #chat-wider.active+#chat-wrapper.full-screen.show {
                        height: 100%;
                        width: 0;
                        min-width: 0;
                    }

                    #chat-wrapper.full-screen.show #chatlog-button {
                        height: 54px;
                        width: 64px;
                        right: auto;
                        left: -65px;
                        border-radius: 27px 0 0 27px;
                        background-color: #202628;
                    }

                    #chat-wrapper.full-screen.show #chatlog-button>svg {
                        display: none;
                    }

                    #chat-wrapper.full-screen.show #chatlog-button>svg+svg {
                        display: inline-block;
                    }

                    #chat-wrapper.full-screen.show #chat-instant {
                        padding: 0;
                    }

                    #chat-wrapper.full-screen.show>#chat-position {
                        left: 0;
                    }

                    #chat-wrapper.full-screen #chat-instant>.nickname {
                        color: #fff;
                    }

                    #chat-wrapper.full-screen.show #chat-instant,
                    #chat-wrapper.full-screen.show #chat,
                    #chat-wrapper.full-screen.show #input {
                        display: none;
                    }

                    @media screen and (max-width: 1200px) {
                        #chat-wrapper.full-screen.show {
                            height: 0;
                            min-height: 0;
                            width: 100%;
                        }

                        #input-switch-chatlog:checked+#chat-wrapper.full-screen>#chat-position {
                            top: 0;
                        }

                        #input-switch-chatlog:checked+#chat-wrapper.full-screen #chatlog-button {
                            height: 54px;
                            width: 54px;
                            top: -54px;
                            left: -1px;
                            border-radius: 100% 100% 0 0;
                        }
                    }

                    @media screen and (max-width: 600px) {
                        #chat-wrapper.full-screen {
                            display: none;
                        }
                    }
                </style>
            </template></dom-module>
        <dom-module id="tc-message-html-style" assetpath="../ui/tc-utils/"><template>
                <style>
                    .message {
                        font-size: 14px;
                        color: #2e373a;
                        white-space: pre-line;
                        word-wrap: break-word;
                    }

                    .message.system {
                        font-size: 12px;
                        font-weight: 600;
                        color: #8f999c;
                    }

                    .message.gift {
                        padding-bottom: 12px;
                        font-size: 12px;
                        font-weight: 600;
                        color: #8f999c;
                        cursor: default;
                    }

                    .full-screen.message {
                        color: #fff;
                    }

                    a {
                        color: #4682b4;
                    }

                    @media screen and (max-width: 600px) {
                        .message {
                            font-size: 12px;
                        }
                    }
                </style>
            </template></dom-module>
        <dom-module id="tc-message-html" assetpath="../ui/tc-utils/"><template strip-whitespace="">
                <style include="tc-message-html-style"></style><span id="html" class$="[[classType]]">{{html}}</span>
            </template>
            <script>
                class TcMessageHtml extends Polymer.Element {
                    static get is() {
                        return "tc-message-html"
                    }
                    static get properties() {
                        return {
                            classType: {
                                type: String,
                                value: ""
                            },
                            html: {
                                type: String,
                                value: "html"
                            },
                            onFullscreenHandler: Object
                        }
                    }
                    constructor() {
                        super()
                    }
                    ready() {
                        super.ready(), Polymer.RenderStatus.afterNextRender(this, function() {
                            this.$.html.innerHTML = Autolinker.link(this.html.replace(/<\/?[^>]+(>|$)/g, ""))
                        })
                    }
                    connectedCallback() {
                        super.connectedCallback(), this.onFullscreenHandler = this.onFullscreen.bind(this), window.fullscreenManager.addEventListener(this.onFullscreenHandler, !1)
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), window.fullscreenManager.removeEventListener(this.onFullscreenHandler, !1)
                    }
                    onFullscreen() {
                        let a = window.fullscreenManager.status();
                        a ? this.$.html.classList.add("full-screen") : this.$.html.classList.remove("full-screen")
                    }
                }
                customElements.define(TcMessageHtml.is, TcMessageHtml);
            </script>
        </dom-module>
        <dom-module id="tinychat-chatlog" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-chatlog"></style>
                <div id="chat-wider" on-click="onWider"></div>
                <div id="chat-wrapper">
                    <div id="chat-position">
                        <div id="chat-instant" class$="[[_getClass(_selected)]]"><span id="chat-instant-button" on-click="back2Public"></span> <a href="#">
                                <div class="avatar">
                                    <dom-if if="[[showAvatarImg(_selected)]]"><template strip-whitespace=""><img src="[[_selected.avatarUrl]]"></template></dom-if>
                                </div>
                                <dom-if if="[[showAchiveImg(_selected)]]"><template strip-whitespace=""><img class="status-icon" src="[[_selected.achivementUrl]]"></template></dom-if>
                            </a>
                            <div class="nickname" data-status$="[[convertSubType(_selected)]]" title="[[_selected.nickname]]">[[_selected.nickname]]<dom-if if="[[_selected.isOffline]]"><template strip-whitespace=""><span style="font-weight:bold;">(offline)</span></template></dom-if>
                            </div>
                        </div>
                        <div id="chatlog-button" on-click="onChatlogShow"><svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 7.464L1.85.314A1.09 1.09 0 0 0 .322.322a1.08 1.08 0 0 0-.006 1.53L7.466 9l-7.15 7.15a1.09 1.09 0 0 0 .005 1.53 1.08 1.08 0 0 0 1.53.005L9 10.535l7.15 7.15a1.09 1.09 0 0 0 1.53-.006 1.08 1.08 0 0 0 .005-1.53L10.535 9l7.15-7.15A1.09 1.09 0 0 0 17.68.322a1.08 1.08 0 0 0-1.53-.006L9 7.466z" fill="#53b6ef" fill-rule="evenodd"></path>
                            </svg> <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.767 0C1.92 0 1.1.4.58 1.07a2.71 2.71 0 0 0-.496 2.343l1.678 7.49c.086.403.264.772.51 1.086a2.74 2.74 0 0 0-.514 1.103L.075 20.62a2.713 2.713 0 0 0 .505 2.31A2.795 2.795 0 0 0 2.767 24c.427 0 .855-.102 1.24-.294l18.47-9.204a2.78 2.78 0 0 0 .03-4.943L4.007.294A2.787 2.787 0 0 0 2.768 0m0 2c.114 0 .23.026.345.083l18.472 9.25a.78.78 0 0 1 0 1.38L3.112 21.916a.767.767 0 0 1-.345.083c-.464 0-.87-.428-.744-.928l1.69-7.56a.782.782 0 0 1 .666-.6l9.446-.734c.13-.01.197-.113.2-.22a.238.238 0 0 0-.2-.247l-9.447-.666a.732.732 0 0 1-.667-.578l-1.69-7.538c-.125-.5.28-.928.744-.928" fill="#53b6ef" fill-rule="evenodd"></path>
                            </svg></div>
                        <div id="chat" class="on-white-scroll" on-scroll="onScroll">
                            <div id="chat-content">
                                <dom-repeat items="[[_items]]"><template strip-whitespace="">
                                        <div class$="[[_getClassType(item.type)]]">
                                            <dom-if if="[[showNick(item)]]"><template strip-whitespace=""><a href="#">
                                                        <div class="avatar"><img src="[[item.user.avatarUrl]]"></div>
                                                        <dom-if if="[[showAchiveImg(item.user)]]"><template strip-whitespace=""><img class="status-icon" src="[[item.user.achivementUrl]]"></template></dom-if>
                                                    </a><a href="#" class="nickname" data-status$="[[convertSubType(item.user)]]">[[item.user.nickname]]</a></template></dom-if>
                                            <div class="content">
                                                <tc-message-html class-type="[[_getClassType(item.type, isFullScreen)]]" html="[[item.message_text]]"></tc-message-html>
                                            </div>
                                            <dom-if if="[[showGift(item.type)]]"><template strip-whitespace=""><a class="gift-image" href="#"><img src="[[item.giftUrl]]"></a></template></dom-if>
                                        </div>
                                    </template></dom-repeat>
                            </div>
                        </div>
                        <form id="input" on-submit="onOK" class$="[[sendProgressClass]]"><span id="input-unread" class$="[[_getClassUnreaded(_unreaded,_selected)]]" data-messages$="[[_getCountUnreaded(_unreaded,_selected)]]" on-click="unreadedClick">Unread messages</span> <textarea id="textarea" class="on-white-scroll" form="input" wrap="off" placeholder="Type a message" maxlength$="[[textareaMaxLen]]" on-click="onInput" on-keyup="onInputKeyup" on-keydown="onInputKeydown"></textarea>
                            <div class="waiting">
                                <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                            </div>
                        </form>
                    </div>
                </div>
            </template>
            <script>
                class ChatroomChatlog extends Polymer.Element {
                    static get is() {
                        return "tinychat-chatlog"
                    }
                    static get properties() {
                        return {
                            chatlog: {
                                type: Object,
                                observer: "chatlogAssigned"
                            },
                            _items: Array,
                            _selected: {
                                type: Object,
                                notify: !0
                            },
                            textareaHeight: Number,
                            textareaMaxLen: Number,
                            scrolled: Boolean,
                            _unreaded: {
                                type: Object,
                                value: {}
                            },
                            _scrollPos: {
                                type: Object,
                                value: {}
                            },
                            sendProgress: {
                                type: Boolean,
                                value: !1
                            },
                            sendProgressClass: {
                                type: String,
                                computed: "convertSendClass(sendProgress)"
                            },
                            onFullscreenHandler: Object,
                            isFullScreen: Boolean
                        }
                    }
                    constructor() {
                        super()
                    }
                    connectedCallback() {
                        super.connectedCallback(), this.onFullscreenHandler = this.onFullscreen.bind(this), window.fullscreenManager.addEventListener(this.onFullscreenHandler, !1)
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), window.fullscreenManager.removeEventListener(this.onFullscreenHandler, !1)
                    }
                    get app() {
                        return this.chatlog.chatroom.app
                    }
                    get chatroom() {
                        return this.chatlog.chatroom
                    }
                    get userlist() {
                        return this.chatlog.chatroom.userlist
                    }
                    chatlogAssigned(a) {
                        let b = this,
                            c = this.chatlog.chatroom.app.EventBus,
                            d = TinychatApp.DAL.UserEntity,
                            f = TinychatApp.DAL.ChatLogItemEntity,
                            e = TinychatApp.BLL.Chatlog;
                        b.textareaHeight = this.$.textarea.clientHeight, b.setProperties({
                            _selected: e.PUBLIC,
                            _items: Array.from(this.chatlog.getitems(e.PUBLIC)),
                            textareaMaxLen: e.MAX_INPUT_LEN
                        }), c.subscribe(TinychatApp.BLL.RoomConnected.ID, () => {
                            b.sendProgress = !1
                        }), c.subscribe(TinychatApp.BLL.RoomReconnected.ID, () => {
                            let a = TinychatApp.BLL.Chatlog.PUBLIC;
                            b.chatlog.system_add(a, "You were reconnected the room"), b.sendProgress = !1
                        }), c.subscribe(TinychatApp.BLL.ChatlogItemAddedEvent.ID, c => {
                            a.isequal(b._selected, c.chatentity.chatname) && (b.scrollChatCheck(b.$.chat, b.$["chat-content"]), setTimeout(() => {
                                b.splice("_items", c.index, 0, Object.assign(new f, c.chatentity)), setTimeout(() => {
                                    b.scrollChatToBottom(b.$.chat, b.$["chat-content"])
                                }, 1)
                            }, 1))
                        }), c.subscribe(TinychatApp.BLL.ChatlogItemRemovedEvent.ID, c => {
                            a.isequal(b._selected, c.chatentity.chatname) && b.splice("_items", c.index, 1)
                        }), c.subscribe(TinychatApp.BLL.ChatlogItemSentEvent.ID, () => {
                            b.sendProgress = !1
                        }), c.subscribe(TinychatApp.BLL.ChatlistSelectedEvent.ID, function(a) {
                            b.setProperties({
                                _selected: a.userentity,
                                _items: Array.from(a.chatitems)
                            }), setTimeout(() => {
                                b.scrollChatToBottom(b.$.chat, b.$["chat-content"], !0)
                            }, 1), b.cleanTextarea(b.$.textarea), a.userentity instanceof d && setTimeout(() => {
                                b.$.textarea.focus()
                            }, 1)
                        }), c.subscribe(TinychatApp.BLL.ChatlistUpdateEvent.ID, function(a) {
                            if (b._selected instanceof d && a.toUserEntity.handle === b._selected.handle) {
                                let c = Object.assign(new d, a.toUserEntity);
                                b.set("_selected", c), b.notifyPath("_items")
                            }
                        }), c.subscribe(TinychatApp.BLL.ChatlistRemoveEvent.ID, function() {})
                    }
                    onFullscreen() {
                        if (this.isFullScreen = window.fullscreenManager.status(), this.isFullScreen) this.$["chat-wrapper"].classList.add("full-screen");
                        else {
                            this.$["chat-wrapper"].classList.remove("full-screen");
                            let a = this._selected instanceof TinychatApp.DAL.UserEntity ? this._selected.handle : this._selected,
                                b = this._unreaded[a];
                            b = void 0 == b ? 0 : b, b || this.scrollChatToBottom(this.$.chat, this.$["chat-content"], !0)
                        }
                    }
                    onWider(a) {
                        a.target.classList.toggle("active");
                        let b = new UI.UIChatlogWiderToggle;
                        this.chatroom.app.EventBus.broadcast(UI.UIChatlogWiderToggle.ID, b)
                    }
                    onChatlogShow() {
                        this.$["chat-wrapper"].classList.toggle("show");
                        let a = new TinychatApp.BLL.ChatlistUIUpdateEvent;
                        this.chatlog.chatroom.app.EventBus.broadcast(TinychatApp.BLL.ChatlistUIUpdateEvent.ID, a)
                    }
                    onInput() {}
                    onInputKeyup(a) {
                        let b = a.path ? a.path[0] : (a.composedPath && a.composedPath())[0],
                            c = b.form;
                        setTimeout(() => {
                            b.scrollHeight > b.clientHeight && (b.style.height = b.scrollHeight + "px")
                        }, 0);
                        let d = 13 == a.which || 13 == a.keyCode;
                        return d && (a.shiftKey || a.altKey || a.ctrlKey) ? void(a.altKey && (b.value += "\n", a.preventDefault())) : void(!d || this.sendProgress || c.dispatchEvent(new Event("submit", {
                            view: c,
                            bubbles: !1,
                            cancelable: !0
                        })))
                    }
                    onInputKeydown(a) {
                        let b = 13 == a.which || 13 == a.keyCode;
                        b && !(a.shiftKey || a.altKey || a.ctrlKey) && a.preventDefault()
                    }
                    onOK(a) {
                        a.preventDefault();
                        let b = a.target,
                            c = b.textarea,
                            d = c.value.trim();
                        return "" == d ? c.value = d : (this.cleanTextarea(c), this.sendmessage(d)), !1
                    }
                    cleanTextarea(a) {
                        a.value = "", a.style.height = ""
                    }
                    sendmessage(a) {
                        return this.chatroom.isLurker() ? (this.chatlog.system_add(this._selected, "You're in view-only mode, please reconnect and solve captcha."), void this.app.showToastLurker()) : void(!this.sendProgress && (this.sendProgress = this.chatlog.SendMessage(this._selected, a)))
                    }
                    back2Public() {
                        this.chatlog.selectPublic(), this.sendProgress = !1
                    }
                    _getClass(a) {
                        var b = "";
                        return a instanceof TinychatApp.DAL.UserEntity && (b = "show"), b
                    }
                    _getClassUnreaded(a, b) {
                        let c = b instanceof TinychatApp.DAL.UserEntity ? b.handle : b;
                        var d = a[c];
                        return d = void 0 == d ? 0 : d, 0 < d ? "show" : ""
                    }
                    _getCountUnreaded(a, b) {
                        let c = this._selected instanceof TinychatApp.DAL.UserEntity ? b.handle : b;
                        var d = a[c];
                        return void 0 == d ? 0 : (setTimeout(() => {
                            a[c] && this.chatlog.chatroom.sendPushForUnreadPrivateMessage()
                        }, 3e4), d)
                    }
                    _clearUnreadCurrent() {
                        let a = this._selected instanceof TinychatApp.DAL.UserEntity ? this._selected.handle : this._selected;
                        var b = this._unreaded[a];
                        void 0 == b || (delete this._unreaded[a], this.set("_unreaded", Object.assign({}, this._unreaded)))
                    }
                    _incUnreadCurrent() {
                        let a = this._selected instanceof TinychatApp.DAL.UserEntity ? this._selected.handle : this._selected;
                        var b = this._unreaded[a];
                        b == void 0 && (b = 0), ++b, this._unreaded[a] = b, this.set("_unreaded", Object.assign({}, this._unreaded))
                    }
                    _getClassType(a, b) {
                        let c = TinychatApp.DAL.ChatLogItemEntity;
                        var d = "message";
                        return a === c.PUBLIC ? d += " common" : a === c.PRIVATE ? d += " common" : a === c.SYSTEM ? d += " system" : a === c.GIFT ? d += " gift" : void 0, b && (d += " full-screen"), d
                    }
                    showNick(a) {
                        let b = a.type,
                            c = TinychatApp.DAL.ChatLogItemEntity;
                        var d = !1;
                        return b === c.PUBLIC ? d = !0 : b === c.PRIVATE ? d = !0 : b === c.GIFT ? d = null != a.user : void 0, d
                    }
                    showAvatarImg(a) {
                        return !!(a instanceof TinychatApp.DAL.UserEntity) && "" !== a.avatarUrl
                    }
                    showAchiveImg(a) {
                        return !!(a instanceof TinychatApp.DAL.UserEntity) && 0 < a.giftpoints && "" !== a.achivementUrl
                    }
                    showGift(a) {
                        let b = TinychatApp.DAL.ChatLogItemEntity;
                        var c = !1;
                        return a === b.GIFT ? c = !0 : void 0, c
                    }
                    convertSendClass(a) {
                        return a ? "wait" : ""
                    }
                    convertSubType(a) {
                        let b = TinychatApp.BLL.User;
                        return a instanceof TinychatApp.DAL.UserEntity ? b.getCssClass(a) : ""
                    }
                    unreadedClick(a) {
                        a.stopPropagation();
                        let b = this;
                        this._clearUnreadCurrent(), b.scrollChatToBottom(b.$.chat, b.$["chat-content"], !0)
                    }
                    onScroll(a) {
                        let b = a.path ? a.path[0] : (a.composedPath && a.composedPath())[0],
                            c = b.childNodes[0],
                            d = b.scrollTop + b.clientHeight + 1 > c.clientHeight;
                        d && this._clearUnreadCurrent()
                    }
                    scrollChatCheck(a, b) {
                        let c = a.scrollTop + a.clientHeight + 1 > b.clientHeight;
                        this.scrolled = !c
                    }
                    scrollChatToBottom(a, b, c) {
                        let d = this,
                            e = b.clientHeight - a.clientHeight,
                            f = 0 < e && (!0 === c || !d.scrolled);
                        f ? this.smoothScrollTo(a, e, void 0, () => {
                            d._clearUnreadCurrent()
                        }) : 0 != e && d._incUnreadCurrent()
                    }
                    smoothScrollTo(a, b, c) {
                        if (("string" == typeof b || "number" == typeof b) && (b *= 1, b === +b && 0 === b % 1)) {
                            var d = a.scrollTop,
                                e = b - d,
                                f = 0,
                                g = function() {
                                    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(a) {
                                        window.setTimeout(a, 1e3 / 60)
                                    }
                                }(),
                                h = function() {
                                    e != b - d && (d = a.scrollTop, e = b - d, f = 0), f += 20, a.scrollTop = Math.inOutQuintic(f, d, e, 200), 200 > f ? g(h) : c && Object.isFunc(c) && c()
                                };
                            h()
                        }
                    }
                }
                customElements.define(ChatroomChatlog.is, ChatroomChatlog);
            </script>
        </dom-module>
        <dom-module id="client-chatlist" assetpath="../../styles/"><template>
                <style>
                    #chatlist * {
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                    }

                    #chatlist {
                        font-size: 0;
                    }

                    #chatlist.hidden #header,
                    #chatlist.hidden .list-item,
                    #chatlist>.list-item.hidden {
                        height: 0;
                        opacity: 0;
                        visibility: hidden;
                    }

                    #chatlist>div {
                        display: block;
                        height: 33px;
                        overflow: hidden;
                        opacity: 1;
                        visibility: visible;
                        transition: .5s;
                        animation: show-item .5s ease 0s 1;
                        -webkit-animation: show-item .5s ease 0s 1;
                    }

                    @keyframes show-item {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 33px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    @-webkit-keyframes show-item {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 33px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    #chatlist>#header+.list-item {
                        height: 0;
                    }

                    #chatlist>#header~.list-item:not(.hidden):nth-child(2):last-of-type {
                        height: 33px;
                        cursor: default;
                    }

                    #chatlist>div>span {
                        position: relative;
                        display: inline-block;
                        height: 30px;
                        width: 100%;
                        padding-left: 36px;
                        border-radius: 0 30px 30px 0;
                        box-sizing: border-box;
                        font-size: 14px;
                        color: #7b868a;
                        line-height: 30px;
                        text-align: left;
                        white-space: nowrap;
                        overflow: hidden;
                        transition: .2s;
                    }

                    #chatlist>#header {
                        position: relative;
                        height: 70px;
                        top: 33px;
                        font-weight: 600;
                        text-transform: uppercase;
                        cursor: default;
                        animation: show-header .5s ease 0s 1;
                        -webkit-animation: show-header .5s ease 0s 1;
                    }

                    @keyframes show-header {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 70px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    @-webkit-keyframes show-header {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 70px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    #chatlist>#header~.list-item>span.active {
                        background-color: #202628;
                        cursor: default;
                    }

                    .list-item~span:not(.active)[data-status=""]:hover {
                        color: #fff;
                    }

                    .list-item>span[data-status="gold"] {
                        color: #ffbe00;
                    }

                    .list-item>span[data-status="extreme"] {
                        color: #ad6ed1;
                    }

                    .list-item>span[data-status="pro"] {
                        color: #31ea5d;
                    }

                    .list-item>span[data-status="gold"]:before,
                    .list-item>span[data-status="extreme"]:before,
                    .list-item>span[data-status="pro"]:before {
                        content: '';
                        position: absolute;
                        display: inline-block;
                        height: 12px;
                        width: 12px;
                        top: 9px;
                        left: 0;
                        background-repeat: no-repeat;
                    }

                    .list-item>span[data-status="gold"]:before {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPHBhdGggZD0iTTAgMGg4LjAwNEMxMC4yMSAwIDEyIDEuNzk3IDEyIDMuOTk2djQuMDA4QzEyIDEwLjIxIDEwLjIwMyAxMiA4LjAwNCAxMkgwVjB6IiBmaWxsPSIjZWZhNzAxIi8+DQoJPHBhdGggaWQ9InN0YXR1cy1nb2xkIiBkPSJNNS45NSA1LjY1NmgyLjQ2NHYzLjA3OGMtLjY3LjIzLTEuNDA1LjM0NC0yLjIwNy4zNDQtLjg4IDAtMS41Ni0uMjU1LTIuMDQtLjc2NXMtLjcyMi0xLjI0LS43MjItMi4xODRjMC0uOTIzLjI2My0xLjY0Ljc5LTIuMTUzLjUyNS0uNTEzIDEuMjYyLS43NyAyLjIxLS43Ny4zNiAwIC43LjAzNCAxLjAxOC4xMDIuMzIuMDY2LjU5Ny4xNTIuODM0LjI1NmwtLjQ4OCAxLjIxYy0uNDEzLS4yMDItLjg2NS0uMzAzLTEuMzU3LS4zMDMtLjQ1IDAtLjguMTQ2LTEuMDQ1LjQ0LS4yNDYuMjkyLS4zNy43MS0uMzcgMS4yNTUgMCAuNTM0LjExMi45NC4zMzUgMS4yMi4yMjMuMjguNTQ0LjQyLjk2My40Mi4yMyAwIC40NC0uMDIyLjYzMy0uMDY2di0uODk0SDUuOTVWNS42NTZ6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4NCgk8dXNlIGZpbGw9IiMwMDAiIHhsaW5rOmhyZWY9IiNzdGF0dXMtZ29sZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbC1vcGFjaXR5PSIuMiIvPg0KCTx1c2UgZmlsbD0iI2ZmZiIgeGxpbms6aHJlZj0iI3N0YXR1cy1nb2xkIi8+DQo8L3N2Zz4=);
                    }

                    .list-item>span[data-status="extreme"]:before {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPHBhdGggZD0iTTAgMGg4LjAwNEMxMC4yMSAwIDEyIDEuNzk3IDEyIDMuOTk2djQuMDA4QzEyIDEwLjIxIDEwLjIwMyAxMiA4LjAwNCAxMkgwVjB6IiBmaWxsPSIjYWQ2YmNlIi8+DQoJPHBhdGggaWQ9InN0YXR1cy1leHRyZW1lIiBkPSJNNy44MTMgOWgtMy4zOVYzLjI5aDMuMzl2MS4yMzdINS45NjV2LjloMS43MXYxLjIzN2gtMS43MXYxLjA3OGgxLjg0OHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPg0KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI3N0YXR1cy1leHRyZW1lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIiBmaWxsLW9wYWNpdHk9Ii4yIi8+DQoJPHVzZSBmaWxsPSIjZmZmIiB4bGluazpocmVmPSIjc3RhdHVzLWV4dHJlbWUiLz4NCjwvc3ZnPg==);
                    }

                    .list-item>span[data-status="pro"]:before {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPHBhdGggZD0iTTAgMGg4LjAwNEMxMC4yMSAwIDEyIDEuNzk3IDEyIDMuOTk2djQuMDA4QzEyIDEwLjIxIDEwLjIwMyAxMiA4LjAwNCAxMkgwVjB6IiBmaWxsPSIjMzhjZDU3Ii8+DQoJPHBhdGggaWQ9InN0YXR1cy1wcm8iIGQ9Ik04LjIzNCA1LjEwNWMwIC42MzgtLjE4OCAxLjEzLS41NjQgMS40OC0uMzc2LjM0Ny0uOTEuNTItMS42MDQuNTJoLS40MzNWOUg0LjA5VjMuMjloMS45NzZjLjcyMiAwIDEuMjYzLjE1NyAxLjYyNS40NzIuMzYzLjMxNS41NDQuNzYzLjU0NCAxLjM0M3ptLTIuNi43NDNoLjI4Yy4yMzIgMCAuNDE2LS4wNjUuNTUzLS4xOTYuMTM3LS4xMy4yMDUtLjMxLjIwNS0uNTQgMC0uMzg0LS4yMTQtLjU3Ny0uNjQtLjU3N2gtLjR2MS4zMTN6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4NCgk8dXNlIGZpbGw9IiMwMDAiIHhsaW5rOmhyZWY9IiNzdGF0dXMtcHJvIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIiBmaWxsLW9wYWNpdHk9Ii4yIi8+DQoJPHVzZSBmaWxsPSIjZmZmIiB4bGluazpocmVmPSIjc3RhdHVzLXBybyIvPg0KPC9zdmc+);
                    }

                    .list-item>span>img {
                        position: absolute;
                        display: inline-block;
                        height: 10px;
                        width: 10px;
                        top: 10px;
                        left: 20px;
                        opacity: 1;
                        visibility: visible;
                        transition: .2s;
                    }

                    .list-item>span>img[src=""] {
                        opacity: 0;
                        visibility: hidden;
                    }

                    .list-item+.list-item>span:hover {
                        background-color: #272f31;
                        cursor: pointer;
                    }

                    .list-item>span>span {
                        position: absolute;
                        display: inline-block;
                        height: 100%;
                        top: 0;
                        right: 0;
                        padding: 0 5px 0 10px;
                        background-color: #2d373a;
                        font-size: 0;
                        box-shadow: 0 0 3px 3px #2d373a;
                        transition: .2s;
                    }

                    .list-item>span:hover>span {
                        background-color: #272f31;
                        box-shadow: 0 0 3px 3px #272f31;
                    }

                    .list-item>span.active>span {
                        background-color: #202628;
                        box-shadow: 0 0 3px 3px #202628;
                    }

                    .list-item>span>span[data-messages]:before {
                        content: attr(data-messages);
                        position: relative;
                        display: inline-block;
                        height: 20px;
                        min-width: 20px;
                        top: 3px;
                        padding: 0 5px;
                        border-radius: 10px;
                        box-sizing: border-box;
                        font-size: 10px;
                        font-weight: 800;
                        color: #fff;
                        background-color: #38cd57;
                        line-height: 20px;
                        text-align: center;
                    }

                    .list-item>span>span[data-messages=""]:before,
                    .list-item>span>span[data-messages="0"]:before {
                        display: none;
                    }

                    .list-item>span>span>.send-gift {
                        content: '';
                        position: relative;
                        display: inline-block;
                        height: 14px;
                        width: 0;
                        top: 6px;
                        padding: 0;
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOC4zMTMgMi4yNmMwLS42MDQuNDktMS4wOTMgMS4wOTMtMS4wOTMuNjA0IDAgMS4wOTQuNDkgMS4wOTQgMS4wOTMgMCAuNjA0LS40OSAxLjA5NC0xLjA5NCAxLjA5NEg3LjU4M2wuNzMuNzNWMi4yNnpNNyAyLjMzM3YyLjMzNGgyLjMzM2MxLjI5IDAgMi4zMzQtMS4wNDUgMi4zMzQtMi4zMzRDMTEuNjY3IDEuMDQ1IDEwLjYyMiAwIDkuMzMzIDAgOC4wNDUgMCA3IDEuMDQ1IDcgMi4zMzN6TTUuNjg4IDIuMjZjMC0uNjA0LS40OS0xLjA5My0xLjA5NC0xLjA5My0uNjA0IDAtMS4wOTQuNDktMS4wOTQgMS4wOTMgMCAuNjA0LjQ5IDEuMDk0IDEuMDk0IDEuMDk0aDEuODIzbC0uNzMuNzNWMi4yNnpNNyAyLjMzM3YyLjMzNEg0LjY2N2MtMS4yOSAwLTIuMzM0LTEuMDQ1LTIuMzM0LTIuMzM0QzIuMzMzIDEuMDQ1IDMuMzc4IDAgNC42NjcgMCA1Ljk1NSAwIDcgMS4wNDUgNyAyLjMzM3oiIGZpbGw9IiMwNGNhZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGQ9Ik0wIDQuMmgxNFY3SDB6TS45MzMgOC40aDEyLjEzM1YxNEguOTMzeiIgZmlsbD0iIzA0Y2FmZiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+);
                        background-repeat: no-repeat;
                        opacity: 0;
                        visibility: hidden;
                        cursor: pointer;
                        transition: .2s;
                    }

                    .list-item>span:hover>span[data-gift="1"]>.send-gift {
                        width: 14px;
                        margin: 0 3px 0 5px;
                        opacity: 1;
                        visibility: visible;
                    }

                    .list-item>span>span>.close-instant {
                        content: '';
                        position: relative;
                        display: inline-block;
                        height: 12px;
                        width: 0;
                        top: 7px;
                        padding: 2px 0;
                        opacity: 0;
                        visibility: hidden;
                        cursor: pointer;
                        transition: .2s;
                    }

                    .list-item>span>span>.close-instant>path {
                        transition: .2s;
                    }

                    .list-item>span>span>.close-instant:hover>path {
                        fill: #768488;
                    }

                    .list-item>span>span>.close-instant:active>path {
                        fill: #454d50;
                    }

                    .list-item>span:hover>span>.close-instant {
                        width: 12px;
                        padding: 2px 2px 2px 6px;
                        opacity: 1;
                        visibility: visible;
                    }

                    .list-item>span:hover>span[data-gift="1"]>.close-instant {
                        padding: 2px;
                    }
                </style>
            </template></dom-module>
        <dom-module id="tinychat-chatlist" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-chatlist"></style>
                <div id="chatlist">
                    <div id="header"><span>Direct messages</span></div>
                    <div class="list-item"><span>No chats yet</span></div>
                    <dom-repeat items="[[_items]]"><template strip-whitespace="">
                            <div class$="[[convertClass(item)]]" on-click="selectChat"><span class$="[[convertActive(item, _selected)]]" data-chat-id$="[[item.handle]]" data-status$="[[convertSubType(item)]]"><img src$="[[item.achivementUrl]]"> [[item.nickname]]<dom-if if="[[item.isOffline]]"><template strip-whitespace="">(offline)</template></dom-if><span data-messages$="[[convertMessages(item, _unreaded)]]" data-cam$="[[convertBool(item.isBroadcasting)]]" data-moderator$="[[convertBool(item.isOperator)]]" data-gift$="[[convertBool(item.isUsername)]]"><span class="send-gift" on-click="sendgiftTap"></span> <svg class="close-instant" on-click="closeChat" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M6 4L2 0 0 2l4 4-4 4 2 2 4-4 4 4 2-2-4-4 4-4-2-2" fill="#5a6366" fill-rule="evenodd"></path>
                                        </svg></span></span></div>
                        </template></dom-repeat>
                </div>
            </template>
            <script>
                class ChatroomChatlist extends Polymer.Element {
                    static get is() {
                        return "tinychat-chatlist"
                    }
                    static get properties() {
                        return {
                            chatlog: {
                                type: Object,
                                observer: "chatlogAssigned"
                            },
                            _items: {
                                type: Array,
                                value: [],
                                notify: !0
                            },
                            _selected: {
                                type: Object,
                                value: null
                            },
                            _unreaded: {
                                type: Object,
                                value: {}
                            }
                        }
                    }
                    constructor() {
                        super()
                    }
                    connectedCallback() {
                        super.connectedCallback()
                    }
                    chatlogAssigned() {
                        let a = this,
                            b = this.chatlog.chatroom.app.EventBus,
                            c = TinychatApp.DAL.UserEntity;
                        b.subscribe(TinychatApp.BLL.ChatlistAddEvent.ID, function(b) {
                            let d = a._items.length;
                            a.splice("_items", b.index, 0, Object.assign(new c, b.userentity)), d != a._items.length && (0 == d || 0 == a._items.length) && a.notifyPath("_items");
                            let e = b.userentity.handle;
                            a._unreaded[e] = 0, a._updateUnreaded(e), a.notifyPath("_unreaded." + e)
                        }), b.subscribe(TinychatApp.BLL.ChatlistRemoveEvent.ID, function(b) {
                            var d = a._items.find(a => a.handle === b.userentity.handle);
                            d.isDeleting = !0, a._items[b.index] = Object.assign(new c, d), a.notifyPath("_items." + b.index), setTimeout(() => {
                                let c = a._items.length;
                                a.splice("_items", b.index, 1), c != a._items.length && (0 == c || 0 == a._items.length) && a.notifyPath("_items")
                            }, 500)
                        }), b.subscribe(TinychatApp.BLL.ChatlistUpdateEvent.ID, function(b) {
                            let c = TinychatApp.DAL.UserEntity;
                            b.fromIndex == b.toIndex ? a.splice("_items", b.fromIndex, 1, Object.assign(new c, b.toUserEntity)) : (b.fromUserEntity.isDeleting = !0, a.notifyPath("_items." + b.fromIndex, b.fromUserEntity), setTimeout(() => {
                                a.splice("_items", b.fromIndex, 1), a.splice("_items", b.toIndex, 0, Object.assign(new c, b.toUserEntity))
                            }, 500))
                        }), b.subscribe(TinychatApp.BLL.ChatlistSelectedEvent.ID, function(b) {
                            a.set("_selected", b.userentity), b.userentity instanceof c ? Object.keys(a._items).forEach(c => {
                                let d = a._items[c];
                                if (d.handle == b.userentity.handle) return a.notifyPath("_items"), !0
                            }) : a._selected === TinychatApp.BLL.Chatlog.PUBLIC && a.notifyPath("_items");
                            let d = b.userentity.handle;
                            a._unreaded[d] = 0, a._updateUnreaded(d)
                        }), b.subscribe(TinychatApp.BLL.ChatlogItemAddedEvent.ID, function(b) {
                            if (!a.chatlog.isequal(a._selected, b.chatname)) {
                                var c = a._unreaded[b.chatname];
                                c == void 0 && (c = 0), ++c, a._unreaded[b.chatname] = c, a._updateUnreaded(b.chatname)
                            }
                        })
                    }
                    _updateUnreaded(a) {
                        let b = TinychatApp.DAL.UserEntity,
                            c = this;
                        for (var d in c._items) {
                            let e = c._items[d];
                            if (e.handle == a) {
                                let a = c._items.indexOf(e);
                                c._items[a] = Object.assign(new b, e), c.notifyPath("_items." + a);
                                break
                            }
                        }
                    }
                    isShown() {
                        let a = Array.isArray(this._items) && 0 < this._items.length;
                        return a
                    }
                    convertClass(a) {
                        var b = "list-item";
                        return a.isDeleting && (b += " hidden"), b
                    }
                    convertActive(a, b) {
                        let c = TinychatApp.DAL.UserEntity;
                        return b instanceof c && a instanceof c && b.handle === a.handle ? "active" : ""
                    }
                    convertSubType(a) {
                        return TinychatApp.BLL.User.getCssClass(a)
                    }
                    convertMessages(a, b) {
                        let c = a.handle,
                            d = b[c];
                        return setTimeout(() => {
                            d && this.chatlog.chatroom.sendPushForUnreadPrivateMessage()
                        }, 3e4), d
                    }
                    convertBool(a) {
                        return a ? "1" : "0"
                    }
                    selectChat(a) {
                        let b = a.path ? a.path[0] : (a.composedPath && a.composedPath())[0],
                            c = 0 < parseInt(b.getAttribute("data-chat-id"));
                        c && this.chatlog.selectChat(a.model.item)
                    }
                    closeChat(a) {
                        this.chatlog.closeChat(a.model.item), a.stopPropagation()
                    }
                    sendgiftTap(a) {
                        a.preventDefault(), this.chatlog.chatroom.gotoGift(a.model.item)
                    }
                }
                customElements.define(ChatroomChatlist.is, ChatroomChatlist);
            </script>
        </dom-module>
        <dom-module id="client-userlist" assetpath="../../styles/"><template>
                <style>
                    #userlist * {
                        outline: none;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                    }

                    #userlist {
                        padding-bottom: 20px;
                        font-size: 0;
                    }

                    #userlist.hidden #header,
                    #userlist.hidden .list-item,
                    .list-item.hidden {
                        height: 0;
                        opacity: 0;
                        visibility: hidden;
                    }

                    #userlist>div {
                        height: 33px;
                        overflow: hidden;
                        opacity: 1;
                        visibility: visible;
                        transition: .5s;
                        animation: show-item .5s ease 0s 1;
                        -webkit-animation: show-item .5s ease 0s 1;
                    }

                    @keyframes show-item {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 33px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    @-webkit-keyframes show-item {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 33px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    #userlist>div>span {
                        position: relative;
                        display: inline-block;
                        height: 30px;
                        width: 100%;
                        padding-left: 36px;
                        border-radius: 0 30px 30px 0;
                        box-sizing: border-box;
                        font-size: 14px;
                        color: #7b868a;
                        line-height: 30px;
                        text-align: left;
                        white-space: nowrap;
                        overflow: hidden;
                        transition: .2s;
                    }

                    #userlist>#header {
                        position: relative;
                        height: 70px;
                        top: 33px;
                        font-weight: 600;
                        text-transform: uppercase;
                        cursor: default;
                        animation: show-header .5s ease 0s 1;
                        -webkit-animation: show-header .5s ease 0s 1;
                    }

                    @keyframes show-header {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 70px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    @-webkit-keyframes show-header {
                        0% {
                            height: 0;
                            opacity: 0;
                            visibility: visible;
                        }

                        100% {
                            height: 70px;
                            opacity: 1;
                            visibility: visible;
                        }
                    }

                    #button-banlist {
                        position: absolute;
                        display: block;
                        height: 24px;
                        top: 3px;
                        right: 0;
                        padding: 0 15px;
                        border: none;
                        border-radius: 24px;
                        font-size: 12px;
                        font-weight: 700;
                        color: #04caff;
                        background-color: #202628;
                        text-transform: none;
                        cursor: pointer;
                        opacity: 1;
                        visibility: visible;
                        transition: .2s;
                    }

                    #button-banlist:hover {
                        color: #fff;
                        background-color: #04caff;
                    }

                    #button-banlist:active {
                        color: #fff;
                        background-color: #38a8de;
                    }

                    #button-banlist.hidden {
                        opacity: 0;
                        visibility: hidden;
                    }

                    .list-item>span[data-status=""]:hover {
                        color: #fff;
                    }

                    .list-item>span[data-status="gold"] {
                        color: #ffbe00;
                    }

                    .list-item>span[data-status="extreme"] {
                        color: #ad6ed1;
                    }

                    .list-item>span[data-status="pro"] {
                        color: #31ea5d;
                    }

                    .list-item>span[data-status="gold"]:before,
                    .list-item>span[data-status="extreme"]:before,
                    .list-item>span[data-status="pro"]:before {
                        content: "";
                        position: absolute;
                        display: inline-block;
                        height: 12px;
                        width: 12px;
                        top: 9px;
                        left: 0;
                        background-repeat: no-repeat;
                    }

                    .list-item>span[data-status="gold"]:before {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPHBhdGggZD0iTTAgMGg4LjAwNEMxMC4yMSAwIDEyIDEuNzk3IDEyIDMuOTk2djQuMDA4QzEyIDEwLjIxIDEwLjIwMyAxMiA4LjAwNCAxMkgwVjB6IiBmaWxsPSIjZWZhNzAxIi8+DQoJPHBhdGggaWQ9InN0YXR1cy1nb2xkIiBkPSJNNS45NSA1LjY1NmgyLjQ2NHYzLjA3OGMtLjY3LjIzLTEuNDA1LjM0NC0yLjIwNy4zNDQtLjg4IDAtMS41Ni0uMjU1LTIuMDQtLjc2NXMtLjcyMi0xLjI0LS43MjItMi4xODRjMC0uOTIzLjI2My0xLjY0Ljc5LTIuMTUzLjUyNS0uNTEzIDEuMjYyLS43NyAyLjIxLS43Ny4zNiAwIC43LjAzNCAxLjAxOC4xMDIuMzIuMDY2LjU5Ny4xNTIuODM0LjI1NmwtLjQ4OCAxLjIxYy0uNDEzLS4yMDItLjg2NS0uMzAzLTEuMzU3LS4zMDMtLjQ1IDAtLjguMTQ2LTEuMDQ1LjQ0LS4yNDYuMjkyLS4zNy43MS0uMzcgMS4yNTUgMCAuNTM0LjExMi45NC4zMzUgMS4yMi4yMjMuMjguNTQ0LjQyLjk2My40Mi4yMyAwIC40NC0uMDIyLjYzMy0uMDY2di0uODk0SDUuOTVWNS42NTZ6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4NCgk8dXNlIGZpbGw9IiMwMDAiIHhsaW5rOmhyZWY9IiNzdGF0dXMtZ29sZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbC1vcGFjaXR5PSIuMiIvPg0KCTx1c2UgZmlsbD0iI2ZmZiIgeGxpbms6aHJlZj0iI3N0YXR1cy1nb2xkIi8+DQo8L3N2Zz4=);
                    }

                    .list-item>span[data-status="extreme"]:before {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPHBhdGggZD0iTTAgMGg4LjAwNEMxMC4yMSAwIDEyIDEuNzk3IDEyIDMuOTk2djQuMDA4QzEyIDEwLjIxIDEwLjIwMyAxMiA4LjAwNCAxMkgwVjB6IiBmaWxsPSIjYWQ2YmNlIi8+DQoJPHBhdGggaWQ9InN0YXR1cy1leHRyZW1lIiBkPSJNNy44MTMgOWgtMy4zOVYzLjI5aDMuMzl2MS4yMzdINS45NjV2LjloMS43MXYxLjIzN2gtMS43MXYxLjA3OGgxLjg0OHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPg0KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI3N0YXR1cy1leHRyZW1lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIiBmaWxsLW9wYWNpdHk9Ii4yIi8+DQoJPHVzZSBmaWxsPSIjZmZmIiB4bGluazpocmVmPSIjc3RhdHVzLWV4dHJlbWUiLz4NCjwvc3ZnPg==);
                    }

                    .list-item>span[data-status="pro"]:before {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPHBhdGggZD0iTTAgMGg4LjAwNEMxMC4yMSAwIDEyIDEuNzk3IDEyIDMuOTk2djQuMDA4QzEyIDEwLjIxIDEwLjIwMyAxMiA4LjAwNCAxMkgwVjB6IiBmaWxsPSIjMzhjZDU3Ii8+DQoJPHBhdGggaWQ9InN0YXR1cy1wcm8iIGQ9Ik04LjIzNCA1LjEwNWMwIC42MzgtLjE4OCAxLjEzLS41NjQgMS40OC0uMzc2LjM0Ny0uOTEuNTItMS42MDQuNTJoLS40MzNWOUg0LjA5VjMuMjloMS45NzZjLjcyMiAwIDEuMjYzLjE1NyAxLjYyNS40NzIuMzYzLjMxNS41NDQuNzYzLjU0NCAxLjM0M3ptLTIuNi43NDNoLjI4Yy4yMzIgMCAuNDE2LS4wNjUuNTUzLS4xOTYuMTM3LS4xMy4yMDUtLjMxLjIwNS0uNTQgMC0uMzg0LS4yMTQtLjU3Ny0uNjQtLjU3N2gtLjR2MS4zMTN6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4NCgk8dXNlIGZpbGw9IiMwMDAiIHhsaW5rOmhyZWY9IiNzdGF0dXMtcHJvIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIiBmaWxsLW9wYWNpdHk9Ii4yIi8+DQoJPHVzZSBmaWxsPSIjZmZmIiB4bGluazpocmVmPSIjc3RhdHVzLXBybyIvPg0KPC9zdmc+);
                    }

                    .list-item>span:hover {
                        background-color: #272f31;
                        cursor: pointer;
                    }

                    .list-item>span>img {
                        position: absolute;
                        display: inline-block;
                        height: 10px;
                        width: 10px;
                        top: 10px;
                        left: 20px;
                        opacity: 1;
                        visibility: visible;
                        transition: .2s;
                    }

                    .list-item>span>img[src=""] {
                        opacity: 0;
                        visibility: hidden;
                    }

                    .list-item>span>.nickname {
                        position: relative;
                        display: inline-block;
                        pointer-events: none;
                    }

                    .list-item>span[data-ignore="ignore"]>.nickname:before {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 2px;
                        left: -1px;
                        right: -1px;
                        top: 50%;
                        border-top: 1px solid #7b868a;
                        background-color: #2e373a;
                        transition: .2s;
                    }

                    .list-item>span[data-ignore="ignore"]:hover>.nickname:before {
                        background-color: #272f31;
                    }

                    .list-item>span>span {
                        position: absolute;
                        display: inline-block;
                        height: 100%;
                        min-width: 0;
                        top: 0;
                        right: 0;
                        padding: 0 10px;
                        background-color: #2d373a;
                        box-shadow: 0 0 3px 3px #2d373a;
                        transition: .2s;
                    }

                    .list-item>span:hover>span {
                        background-color: #272f31;
                        box-shadow: 0 0 3px 3px #272f31;
                    }

                    .list-item>span:hover>span[data-gift="1"] {
                        min-width: 16px;
                    }

                    .list-item>span:hover>span[data-cam="1"][data-gift="1"] {
                        padding-right: 30px;
                    }

                    .list-item>span>span[data-moderator="1"],
                    .list-item>span:hover>span[data-moderator="1"] {
                        min-width: 33px;
                    }

                    .list-item>span>span[data-moderator="1"]:before {
                        content: "";
                        position: relative;
                        display: inline-block;
                        height: 10px;
                        width: 11px;
                        margin-right: 8px;
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEiIGhlaWdodD0iMTAiIHZpZXdCb3g9IjAgMCAxMSAxMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMCA5LjhoMi42NlY0LjJsMi40OTIgMy44MDhoLjA1NmwyLjUwNi0zLjgzNlY5LjhoMi43MDJWMGgtMi44N0w1LjIwOCAzLjc5NCAyLjg3IDBIMCIgZmlsbD0iIzVhNjM2NiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+);
                        background-repeat: no-repeat;
                        vertical-align: middle;
                    }

                    .list-item>span>span[data-cam="1"]:after {
                        content: "";
                        position: relative;
                        display: inline-block;
                        height: 11px;
                        width: 14px;
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTEiIHZpZXdCb3g9IjAgMCAxNCAxMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQgMi43Nzd2NC41YzAgLjgxLS42MjggMS0xIC43NSAwIDAtMS42NjctMS44MzYtMi0yLjI1LS4zMzMtLjQxNC0uNjI3LS44NDcgMC0xLjVzMi0yLjI1IDItMi4yNWMuMzctLjI1IDEtLjA2IDEgLjc1ek0zIC4wMjdsNCAxYzEuMDktLjE3NSAyIDEuMDMgMiAydjNjMCAxLjgtLjkwOCAzLjAyOC0yIDNsLTQgMWMtMS42MDUuMjc0LTMtMS4wOTYtMy0zdi00YzAtMS44MzcgMS40LTMuMjQgMy0zeiIgZmlsbD0iIzVhNjM2NiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+);
                        background-repeat: no-repeat;
                        vertical-align: middle;
                    }

                    .list-item>span>span>.send-gift {
                        position: absolute;
                        display: inline-block;
                        height: 14px;
                        width: 0;
                        top: 8px;
                        right: 0;
                        padding: 0;
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOC4zMTMgMi4yNmMwLS42MDQuNDktMS4wOTMgMS4wOTMtMS4wOTMuNjA0IDAgMS4wOTQuNDkgMS4wOTQgMS4wOTMgMCAuNjA0LS40OSAxLjA5NC0xLjA5NCAxLjA5NEg3LjU4M2wuNzMuNzNWMi4yNnpNNyAyLjMzM3YyLjMzNGgyLjMzM2MxLjI5IDAgMi4zMzQtMS4wNDUgMi4zMzQtMi4zMzRDMTEuNjY3IDEuMDQ1IDEwLjYyMiAwIDkuMzMzIDAgOC4wNDUgMCA3IDEuMDQ1IDcgMi4zMzN6TTUuNjg4IDIuMjZjMC0uNjA0LS40OS0xLjA5My0xLjA5NC0xLjA5My0uNjA0IDAtMS4wOTQuNDktMS4wOTQgMS4wOTMgMCAuNjA0LjQ5IDEuMDk0IDEuMDk0IDEuMDk0aDEuODIzbC0uNzMuNzNWMi4yNnpNNyAyLjMzM3YyLjMzNEg0LjY2N2MtMS4yOSAwLTIuMzM0LTEuMDQ1LTIuMzM0LTIuMzM0QzIuMzMzIDEuMDQ1IDMuMzc4IDAgNC42NjcgMCA1Ljk1NSAwIDcgMS4wNDUgNyAyLjMzM3oiIGZpbGw9IiMwNGNhZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGQ9Ik0wIDQuMmgxNFY3SDB6TS45MzMgOC40aDEyLjEzM1YxNEguOTMzeiIgZmlsbD0iIzA0Y2FmZiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+);
                        background-repeat: no-repeat;
                        opacity: 0;
                        visibility: hidden;
                        cursor: pointer;
                        transition: .2s;
                    }

                    .list-item>span:hover>span[data-gift="1"]>.send-gift {
                        width: 14px;
                        margin: 0 8px 0 5px;
                        opacity: 1;
                        visibility: visible;
                    }

                    #contextmenu {
                        position: absolute;
                        top: 0;
                        left: 36px;
                    }
                </style>
            </template></dom-module>
        <dom-module id="tinychat-userlist" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-userlist"></style>
                <div id="userlist">
                    <div id="header"><span>Room users <button id="button-banlist" class="hidden" on-click="onBanlist">Ban list</button></span></div>
                    <dom-repeat items="[[_items]]"><template strip-whitespace="">
                            <div class$="[[convertClass(item)]]"><span class="js-user-list-item" data-user-id$="[[item.handle]]" data-status$="[[convertSubType(item)]]" data-ignore$="[[convertIsIgnored(item)]]"><img src$="[[item.achivementUrl]]">
                                    <div class="nickname">[[item.nickname]]</div><span data-cam$="[[convertBool(item.isBroadcasting)]]" data-moderator$="[[convertBool(item.isOperator)]]" data-gift$="[[convertBool(item.isUsername)]]"><span class="send-gift" on-click="sendgiftTap"></span></span>
                                </span></div>
                        </template></dom-repeat>
                    <tinychat-user-contextmenu id="contextmenu" userlist="[[userlist]]"></tinychat-user-contextmenu>
                </div>
            </template>
            <script>
                class ChatroomUserlist extends Polymer.Element {
                    static get is() {
                        return "tinychat-userlist"
                    }
                    static get properties() {
                        return {
                            userlist: {
                                type: Object,
                                observer: "userlistAssigned"
                            },
                            _items: Array,
                            showContextMenuOnContextHandler: Object,
                            showContextMenuOnClickHandler: Object
                        }
                    }
                    constructor() {
                        super()
                    }
                    connectedCallback() {
                        super.connectedCallback(), this.showContextMenuOnContextHandler = this.showContextMenuOnContext.bind(this), this.showContextMenuOnClickHandler = this.showContextMenuOnClick.bind(this), document.body.addEventListener("contextmenu", this.showContextMenuOnContextHandler), window.addEventListener("click", this.showContextMenuOnClickHandler)
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), document.body.removeEventListener("contextmenu", this.showContextMenuOnContextHandler), window.removeEventListener("click", this.showContextMenuOnClickHandler)
                    }
                    get chatroom() {
                        return this.userlist.chatroom
                    }
                    get app() {
                        return this.userlist.chatroom.app
                    }
                    userlistAssigned() {
                        let a = this,
                            b = this.app.EventBus,
                            c = TinychatApp.DAL.UserEntity;
                        b.subscribe(TinychatApp.BLL.RoomConnected.ID, function() {
                            a.chatroom.isOperator() && a.$["button-banlist"].classList.remove("hidden")
                        }), b.subscribe(TinychatApp.BLL.UserlistUpdateallEvent.ID, function(b) {
                            a.set("_items", Array.from(b.users))
                        }), b.subscribe(TinychatApp.BLL.UserlistAddUserEvent.ID, function(b) {
                            let d = a._shiftIndex(a._items, b.index);
                            a.splice("_items", d, 0, Object.assign(new c, b.userentity))
                        }), b.subscribe(TinychatApp.BLL.UserlistRemoveUserEvent.ID, function(b) {
                            let d = a._shiftIndex(a._items, b.index),
                                e = Object.assign(new c, b.userentity);
                            e.isDeleting = !0, a.notifyPath("_items." + d, e), setTimeout(() => {
                                let c = a._shiftIndex(a._items, b.index);
                                a.splice("_items", c, 1)
                            }, 500)
                        }), b.subscribe(TinychatApp.BLL.UserlistUpdateUserEvent.ID, function(b) {
                            if (b.fromIndex == b.toIndex) {
                                let d = a._shiftIndex(a._items, b.fromIndex);
                                a.splice("_items", d, 1, Object.assign(new c, b.toUserEntity))
                            } else {
                                let d = a._shiftIndex(a._items, b.fromIndex),
                                    e = Object.assign(new c, b.fromUserEntity);
                                e.isDeleting = !0, a.notifyPath("_items." + d, e), setTimeout(() => {
                                    let d = a._shiftIndex(a._items, b.fromIndex),
                                        e = Object.assign(new c, b.toUserEntity),
                                        f = a._shiftIndex(a._items, b.toIndex);
                                    a.splice("_items", d, 1), a.splice("_items", f, 0, e)
                                }, 500)
                            }
                        }), b.subscribe(TinychatApp.BLL.IgnorelistUpdateUserEvent.ID, function(b) {
                            let d = -1;
                            if (Object.keys(a._items).forEach(c => {
                                    let e = a._items[c];
                                    if (e.handle === b.userentity.handle) return d = c, !0
                                }), -1 < d) {
                                let e = Object.assign(new c, b.userentity);
                                a.notifyPath("_items." + d, e)
                            }
                        })
                    }
                    _shiftIndex(a, b) {
                        for (var c = b, d = 0; d < b; d++) a[d].isDeleting && (c += 1);
                        return c
                    }
                    convertClass(a) {
                        var b = "list-item";
                        return a.isDeleting && (b += " hidden"), b
                    }
                    convertSubType(a) {
                        return TinychatApp.BLL.User.getCssClass(a)
                    }
                    convertIsIgnored(a) {
                        return this.userlist.isIgnored(a) ? "ignore" : ""
                    }
                    convertBool(a) {
                        return a ? "1" : "0"
                    }
                    onBanlist() {
                        this.app.Banlist()
                    }
                    sendgiftTap(a) {
                        this.userlist.chatroom.gotoGift(a.model.item)
                    }
                    showContextMenuOnContext(a) {
                        this.showContextMenu(a) && a.preventDefault()
                    }
                    showContextMenuOnClick(a) {
                        this.showContextMenu(a, !0) && a.preventDefault()
                    }
                    showContextMenu(a, b) {
                        if (void 0 != this.userlist) {
                            this.$.contextmenu.hide();
                            var c = !1;
                            let e = a.path ? a.path[0] : (a.composedPath && a.composedPath())[0];
                            var d = parseInt(e.getAttribute("data-user-id"));
                            let f = parseInt(e.getAttribute("data-chat-id"));
                            !0 !== b && f && (d = f);
                            let g = this.userlist.get(d);
                            if (null != g && (this.$.contextmenu.chatlist = d == f, this.$.contextmenu.user = g, c = !0), c) {
                                let b = this;
                                setTimeout(() => {
                                    b.$.contextmenu.show(a)
                                }, 0)
                            }
                            return c
                        }
                    }
                }
                customElements.define(ChatroomUserlist.is, ChatroomUserlist);
            </script>
        </dom-module>
        <dom-module id="tc-volume-control-style" assetpath="../ui/tc-volume-control/"><template>
                <style>
                    *:focus {
                        outline: none;
                    }

                    .icon-volume>button {
                        position: relative;
                        height: 22px;
                        width: 22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                    }

                    .icon-volume>button>svg {
                        position: absolute;
                        display: block;
                        top: 2px;
                        left: 4px;
                        transition: .2s;
                    }

                    .icon-volume>button>svg+svg {
                        left: 3px;
                    }

                    .icon-volume.muted>button>svg+svg,
                    .icon-volume>button>svg {
                        opacity: 1;
                        visibility: visible;
                    }

                    .icon-volume.muted>button>svg:first-child,
                    .icon-volume>button>svg+svg {
                        opacity: 0;
                        visibility: hidden;
                    }

                    .icon-volume>.seek-wrapper {
                        position: absolute;
                        width: 58px;
                        top: 6px;
                        left: 22px;
                    }

                    #seek-duration {
                        position: absolute;
                        height: 22px;
                        left: 90px;
                        bottom: 0;
                        font-size: 12px;
                        font-weight: 600;
                        color: #fff;
                        line-height: 22px;
                        white-space: nowrap;
                        cursor: default;
                    }

                    .seek-wrapper {
                        height: 10px;
                        width: 100%;
                        padding: 3px 5px;
                        box-sizing: border-box;
                        cursor: pointer;
                    }

                    .seek {
                        position: relative;
                        height: 100%;
                        width: 100%;
                        border-radius: 4px;
                        background-color: #fff;
                    }

                    .seek-text {
                        position: absolute;
                        height: 20px;
                        width: 70px;
                        top: -24px;
                        margin-left: -35px;
                        line-height: 20px;
                        text-align: center;
                        opacity: 0;
                        transition: opacity .2s;
                    }

                    .seek-wrapper:hover>.seek>.seek-text {
                        opacity: 1;
                    }

                    .seek-text>span {
                        display: inline-block;
                        height: 100%;
                        padding: 0 10px;
                        border-radius: 11px;
                        font-size: 12px;
                        font-weight: 600;
                        color: #fff;
                        background-color: rgba(0, 0, 0, .5);
                        line-height: 20px;
                    }

                    .seek-level {
                        position: absolute;
                        height: 100%;
                        top: 0;
                        left: 0;
                        border-radius: 4px;
                        background-color: #41b7ef;
                    }

                    .seek-level>div {
                        position: absolute;
                        display: block;
                        height: 4px;
                        width: 4px;
                        top: 0;
                        right: -2px;
                        border-radius: 100%;
                        background-color: #41b7ef;
                        box-shadow: 0 0 0 2px #41b7ef;
                        transition: .2s;
                    }

                    .seek-wrapper:hover>.seek>.seek-level>div {
                        box-shadow: 0 0 0 3px #41b7ef;
                    }
                </style>
            </template></dom-module>
        <dom-module id="tc-volume-control" assetpath="../ui/tc-volume-control/"><template strip-whitespace="">
                <style include="tc-volume-control-style"></style>
                <div class$="[[iconClass]]"><button on-click="onMute"><svg width="14" height="18" viewBox="0 0 14 18" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11.148 15.86c.47.298.852.08.852-.455V2.6c0-.55-.376-.758-.852-.458L5.684 5.588H3.007C2.45 5.588 2 6.036 2 6.595v4.813c0 .556.452 1.007 1.007 1.007h2.677l5.464 3.446zm-8.14-1.44A3.01 3.01 0 0 1 0 11.41V6.595a3.008 3.008 0 0 1 3.007-3.013h2.1L10.085.444C11.88-.688 14 .458 14 2.6v12.806c0 2.123-2.123 3.285-3.916 2.154l-4.976-3.138h-2.1z" fill="#fff"></path>
                        </svg> <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1.72 13.365A3.005 3.005 0 0 1 1 11.408V6.595a3.008 3.008 0 0 1 3.007-3.013h2.1L11.085.444C12.88-.688 15 .458 15 2.6v2.47l1.464-.915a1.003 1.003 0 1 1 1.063 1.702l-15.99 9.99a1.003 1.003 0 1 1-1.064-1.702l1.248-.78zM13 6.318v-3.72c0-.548-.376-.756-.852-.456L6.684 5.588H4.007C3.45 5.588 3 6.036 3 6.595v4.813c0 .363.192.68.48.858L13 6.318zM15 9.5v5.905c0 2.123-2.123 3.285-3.916 2.154l-4.47-2.82L8.5 13.56l3.648 2.3c.47.298.852.08.852-.455V10.75l2-1.25z" fill="#fff"></path>
                        </svg></button>
                    <div id="videos-header-volume" class="seek-wrapper">
                        <div class="seek" on-mouseleave="volTickTouchEnd" on-mousemove="volTickMouseMove" on-touchmove="volTickTouchMove" on-click="volTickClick" on-wheel="volWheel">
                            <div id="videos-header-volume-level" class="seek-level" style$="width: [[vol]]%">
                                <div on-mousedown="volTickMouseDown" on-touchstart="volTickTouchStart" on-touchend="volTickTouchEnd"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
            <script>
                class VolumeControl extends Polymer.Element {
                    static get is() {
                        return "tc-volume-control"
                    }
                    static get properties() {
                        return {
                            volTickCaptured: {
                                type: Boolean,
                                value: !1
                            },
                            volume: {
                                type: Number,
                                value: 100,
                                observer: "_volTickSetVolumeObserver"
                            },
                            muted: {
                                type: Boolean,
                                value: !1
                            },
                            iconClass: {
                                type: String,
                                computed: "_computeIconClass(volume)"
                            },
                            volumeBefore: {
                                type: Number,
                                value: 100
                            },
                            vol: {
                                type: Number,
                                value: 100,
                                notify: !0
                            }
                        }
                    }
                    constructor() {
                        super()
                    }
                    connectedCallback() {
                        super.connectedCallback()
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback()
                    }
                    _computeIconClass(a) {
                        let b = "icon-volume";
                        return 0 === a && (b += " muted"), b
                    }
                    onMute() {
                        this._volMuteToggle()
                    }
                    volTickTouchStart(a) {
                        this.volTickCaptured || (a.preventDefault(), this.volTickCaptured = !0)
                    }
                    volTickTouchEnd(a) {
                        this.volTickCaptured && (a.preventDefault(), this.volTickCaptured = !1)
                    }
                    volTickMouseDown(a) {
                        this.volTickCaptured || (a.preventDefault(), this.volTickCaptured = !0)
                    }
                    volTickMouseMove(a) {
                        if (this.volTickCaptured) {
                            a.preventDefault !== void 0 && a.preventDefault();
                            let b = a.target,
                                c = b.getBoundingClientRect(),
                                d = Math.round(100 * (a.clientX - c.left) / c.width);
                            100 < d && (d = 100), 0 > d && (d = 0), this.volume = d
                        }
                    }
                    volTickTouchMove(a) {
                        if (1 === a.touches.length) {
                            a.preventDefault();
                            let b = a.touches[0];
                            this.volTickMouseMove(b)
                        }
                    }
                    volTickClick(a) {
                        a.preventDefault();
                        let b = a.target,
                            c = b.getBoundingClientRect(),
                            d = Math.round(100 * (a.clientX - c.left) / c.width);
                        this.volume = d
                    }
                    volWheel(a) {
                        a.preventDefault();
                        let b = -1 < navigator.userAgent.toLowerCase().indexOf("firefox") ? -100 : -10,
                            c = a.target,
                            d = c.getBoundingClientRect();
                        var e = this.volume + Math.round(a.deltaY * b / d.width);
                        100 < e && (e = 100), 0 > e && (e = 0), this.volume = e
                    }
                    _volTickSetVolumeObserver(a, b) {
                        var c = Math.round;
                        let d = c(a);
                        100 < d && (d = 100), 0 > d && (d = 0);
                        let e = c(b);
                        100 < e && (e = 100), 0 > e && (e = 0), this.vol = d;
                        let f = null;
                        0 >= e && 0 < d ? f = !1 : 0 < e && 0 >= d && (f = !0), null !== f && f !== this.mute && this._volMuteToggle(f, !1)
                    }
                    _volMuteToggle(a, b) {
                        let c = this.muted;
                        a !== c && (this.muted = !this.muted, void 0 !== b || (this.muted ? (this.volumeBefore = this.volume, this.volume = 0) : this.volume = this.volumeBefore))
                    }
                }
                customElements.define(VolumeControl.is, VolumeControl);
            </script>
        </dom-module>
        <dom-module id="tc-video-item-style" assetpath="../ui/tc-video-item/"><template>
                <style>
                    *:focus {
                        outline: none;
                    }

                    .on-white-scroll {
                        padding-left: 16px;
                        box-sizing: border-box;
                        overflow-x: hidden;
                        overflow-y: scroll;
                    }

                    .on-white-scroll::-webkit-scrollbar {
                        position: absolute;
                        width: 15px;
                        cursor: pointer;
                    }

                    .on-white-scroll::-webkit-scrollbar-track {
                        background-color: #fff;
                    }

                    .on-white-scroll::-webkit-scrollbar-thumb {
                        border: 5px solid #fff;
                        border-radius: 6px/8px;
                        background-color: rgba(0, 0, 0, .2);
                    }

                    .on-white-scroll::-webkit-scrollbar-thumb:hover {
                        background-color: rgba(0, 0, 0, .4);
                    }

                    .video {
                        position: relative;
                        width: 100%;
                        padding: 5px;
                        box-sizing: border-box;
                        font-size: 0;
                        overflow: hidden;
                    }

                    .video>div {
                        position: relative;
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA0OCA2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxwYXRoIGZpbGw9IiM1YTYzNjYiIGQ9Ik0xNCAxMy45OTR2MjAuMDEyQzE0IDM5LjUyMyAxOC40NzggNDQgMjQgNDRjNS41MTUgMCAxMC00LjQ4IDEwLTkuOTk0VjEzLjk5NEMzNCA4LjQ3NyAyOS41MjIgNCAyNCA0Yy01LjUxNSAwLTEwIDQuNDgtMTAgOS45OTR6TTI2IDU3LjkydjQuMDgyQTEuOTk0IDEuOTk0IDAgMCAxIDI0IDY0Yy0xLjEwNSAwLTItLjg4Ny0yLTEuOTk4VjU3LjkyQzkuNjk4IDU2LjkyOCAwIDQ2Ljg2IDAgMzQuNTg2YTIgMiAwIDAgMSA0IDBDNCA0NS4yODMgMTIuOTUgNTQgMjQgNTRjMTEuMDYgMCAyMC04LjcwMyAyMC0xOS40MTRhMiAyIDAgMCAxIDQgMGMwIDEyLjI4Ni05LjY5IDIyLjM0NC0yMiAyMy4zMzR6TTEwIDEzLjk5NEMxMCA2LjI3IDE2LjI3NyAwIDI0IDBjNy43MyAwIDE0IDYuMjY3IDE0IDEzLjk5NHYyMC4wMTJDMzggNDEuNzMgMzEuNzIzIDQ4IDI0IDQ4Yy03LjczIDAtMTQtNi4yNjctMTQtMTMuOTk0VjEzLjk5NHoiLz4KPC9zdmc+);
                        background-repeat: no-repeat;
                        background-position: center;
                        background-color: #2a2c2c;
                        overflow: hidden;
                    }

                    video {
                        width: 100%;
                    }

                    .video>div:before {
                        content: '';
                        display: block;
                        width: 100%;
                        padding-bottom: 75%;
                    }

                    .video:after {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        border: 5px solid #fff;
                        border-radius: 10px;
                        box-sizing: border-box;
                        pointer-events: none;
                    }

                    .video:hover>div>svg {
                        top: -24px;
                        left: -24px;
                        transition: .2s ease .2s;
                    }

                    .video:after {}

                    .video:hover>div.pro:after,
                    .video:hover>div.extreme:after,
                    .video:hover>div.gold:after {
                        top: -24px;
                        right: -24px;
                        transition: .2s ease .2s;
                    }

                    .video>div>div {
                        position: relative;
                        width: 100%;
                    }

                    .video>div>video,
                    .video>div>iframe {
                        position: absolute;
                        height: 100%;
                        top: 0;
                        left: 0;
                    }

                    .video>div>iframe {
                        width: 100%;
                    }

                    .video>div.ratio-16-9>video,
                    .video>div.ratio-16-9>iframe {
                        left: -16.66%;
                    }

                    .video>div.ratio-8-5>video,
                    .video>div.ratio-8-5>iframe {
                        left: -10%;
                    }

                    .video>div.ratio-3-2>video,
                    .video>div.ratio-3-2>iframe {
                        left: -6.25%;
                    }

                    .video>div>.overlay {
                        position: absolute;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        box-shadow: inset 0 0 0 0 rgba(0, 0, 0, .5);
                        transition: .2s;
                    }

                    .video:hover>div>.overlay {
                        box-shadow: inset 0 0 100px 0 rgba(0, 0, 0, .5);
                    }

                    .icon-visibility,
                    .icon-resize,
                    .icon-report,
                    .icon-filter,
                    .icon-close {
                        position: absolute;
                        height: 22px;
                        width: 22px;
                        top: -22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                        opacity: .9;
                        transition: .2s;
                    }

                    .icon-visibility {
                        left: -22px;
                    }

                    .icon-resize {
                        left: 50%;
                        margin-left: -11px;
                    }

                    .icon-report,
                    .icon-close {
                        right: -22px;
                    }

                    .icon-filter {
                        width: 26px;
                        right: -26px;
                    }

                    .icon-visibility:hover,
                    .icon-resize:hover,
                    .icon-report:hover,
                    .icon-filter:hover,
                    .icon-close:hover {
                        opacity: 1;
                    }

                    .video:hover>div>.overlay>.icon-visibility,
                    .video:hover>div>.overlay>.icon-resize,
                    .video:hover>div>.overlay>.icon-report,
                    .video:hover>div>.overlay>.icon-filter,
                    .video:hover>div>.overlay>.icon-close {
                        top: 12px;
                        transition: top .2s ease .2s,
                            left .2s ease .2s,
                            right .2s ease .2s,
                            opacity .2s;
                    }

                    .video:hover>div>.overlay>.icon-visibility {
                        left: 14px;
                    }

                    .video:hover>div>.overlay>.icon-report,
                    .video:hover>div>.overlay>.icon-close {
                        right: 14px;
                    }

                    .video:hover>div>.overlay>.icon-filter {
                        right: 12px;
                    }

                    .icon-visibility>svg,
                    .icon-resize>svg,
                    .icon-report>svg,
                    .icon-filter>svg,
                    .icon-close>svg {
                        position: absolute;
                    }

                    .video.not-visible>div>.overlay>.icon-visibility>svg,
                    .icon-visibility>svg {
                        top: 4px;
                        left: 1px;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video.not-visible>div>.overlay>.icon-visibility>svg:first-child,
                    .icon-visibility>svg+svg {
                        opacity: 1;
                        visibility: visible;
                    }

                    .video.not-visible>div>iframe {
                        visibility: hidden;
                    }

                    .icon-resize>svg {
                        top: 3px;
                        left: 3px;
                    }

                    .icon-resize>svg>path {
                        transition: .2s;
                    }

                    .video.large>div>.overlay>.icon-resize>svg>path+path {
                        opacity: 0;
                        visibility: hidden;
                    }

                    .icon-report>svg {
                        top: 3px;
                        left: 3px;
                    }

                    .icon-filter>svg {
                        top: 1px;
                        left: 0;
                    }

                    .icon-close>svg {
                        top: 4px;
                        left: 4px;
                    }

                    .icon-context {
                        position: absolute;
                        height: 22px;
                        width: 22px;
                        bottom: -22px;
                        right: -22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                        opacity: .9;
                        transition: .2s;
                    }

                    .icon-context:hover {
                        opacity: 1;
                    }

                    .video:hover>div>.overlay>.icon-context {
                        bottom: 7px;
                        right: 16px;
                        transition: bottom .2s ease .2s,
                            right .2s ease .2s,
                            opacity .2s;
                    }

                    .icon-context>svg {
                        position: absolute;
                        top: 9px;
                        left: 1px;
                    }

                    .video-context {
                        position: absolute;
                        display: flex;
                        flex-direction: column;
                        align-content: center;
                        top: 0;
                        bottom: 0;
                        left: 0;
                        right: 0;
                        padding-top: 10px;
                        padding-bottom: 10px;
                        border-radius: 4px;
                        border: 1px solid rgba(0, 0, 0, .06);
                        box-sizing: border-box;
                        font-size: 0;
                        color: #535353;
                        text-align: left;
                        line-height: 1;
                        background-color: rgba(0, 0, 0, .7);
                        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, .09);
                        z-index: 1;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video-context::-webkit-scrollbar-track {
                        background-color: transparent;
                    }

                    .video-context::-webkit-scrollbar-thumb {
                        border: 5px solid transparent;
                        border-radius: 6px/8px;
                        background-color: rgba(255, 255, 255, .1);
                        background-clip: content-box;
                    }

                    .video-context::-webkit-scrollbar-thumb:hover {
                        background-color: rgba(255, 255, 255, .2);
                    }

                    .video:hover>div>.overlay>.icon-context:focus+.video-context {
                        opacity: 1;
                        visibility: visible;
                    }

                    .video-context-content {
                        margin: 0 auto;
                    }

                    .video-context-content>div {
                        text-align: center;
                    }

                    .video-context-content>div+div {
                        padding-top: 5px;
                    }

                    .video-context-content>div>button {
                        display: block;
                        width: 100%;
                        padding: 0 20px;
                        border: none;
                        border-radius: 4px;
                        box-sizing: border-box;
                        font-size: 13px;
                        font-weight: 600;
                        color: #fff;
                        background-color: transparent;
                        line-height: 26px;
                        cursor: pointer;
                        transition: .2s;
                    }

                    .video-context-content>div>button:hover {
                        color: #fff;
                        background-color: #04caff;
                    }

                    .icon-volume {
                        position: absolute;
                        height: 22px;
                        left: -22px;
                        bottom: -22px;
                        opacity: .9;
                        transition: .2s;
                    }

                    .icon-volume:hover {
                        opacity: 1;
                    }

                    .video:hover>div>.overlay>.icon-volume {
                        left: 16px;
                        bottom: 16px;
                        transition: bottom .2s ease .2s,
                            left .2s ease .2s,
                            opacity .2s;
                    }

                    #icon-state>button {
                        position: relative;
                        height: 22px;
                        width: 22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                    }

                    #icon-state>button>svg {
                        position: absolute;
                        display: block;
                        top: 2px;
                        left: 2px;
                    }

                    #icon-state>button>svg+svg {
                        top: 1px;
                        left: 2px;
                        transition: .2s;
                    }

                    #icon-state>button>svg {
                        opacity: 1;
                        visibility: visible;
                    }

                    #icon-state>button>svg+svg {
                        opacity: 0;
                        visibility: hidden;
                    }

                    .video>div>.waiting {
                        position: absolute;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        background-color: #202628;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video>div.wait>.waiting {
                        opacity: 1;
                        visibility: visible;
                    }

                    .waiting>.waiting-content {
                        position: absolute;
                        height: 0;
                        width: 80%;
                        top: 50%;
                        left: 10%;
                    }

                    .waiting>.waiting-content>span {
                        position: absolute;
                        display: inline-block;
                        height: 0;
                        width: 0;
                        top: -4px;
                        left: 0;
                        border: 4px solid #04caff;
                        border-radius: 100%;
                        opacity: 0;
                        animation: waiting 1s ease-in-out 0s infinite paused;
                        -webkit-animation: waiting 1s ease-in-out 0s infinite paused;
                    }

                    .waiting>.waiting-content>span:nth-child(2) {
                        animation-delay: .15s;
                        -webkit-animation-delay: .15s;
                    }

                    .waiting>.waiting-content>span:nth-child(3) {
                        animation-delay: .3s;
                        -webkit-animation-delay: .3s;
                    }

                    .waiting>.waiting-content>span:nth-child(4) {
                        animation-delay: .45s;
                        -webkit-animation-delay: .45s;
                    }

                    .video>div.wait>.waiting>.waiting-content>span {
                        animation-play-state: running;
                        -webkit-animation-play-state: running;
                    }

                    .video>div>svg {
                        position: absolute;
                        top: 5px;
                        left: 5px;
                        filter: drop-shadow(0 0 4px #04caff);
                        -webkit-filter: drop-shadow(0 0 4px #04caff);
                        opacity: 0;
                        transition: .2s;
                    }

                    #videos-content>#videos>.video:hover>div>svg {
                        top: -24px;
                        left: -24px;
                        transition: .2s ease .2s;
                    }

                    .video>div>svg>circle {
                        fill: #fff;
                        fill-rule: evenodd;
                        stroke: #fff;
                        stroke-width: 0;
                        transition: .2s;
                    }

                    .video>div>svg[data-mic-level="1"] {
                        opacity: .5;
                    }

                    .video>div>svg[data-mic-level="2"] {
                        opacity: .8;
                    }

                    .video>div>svg[data-mic-level="3"],
                    .video>div>svg[data-mic-level="4"],
                    .video>div>svg[data-mic-level="5"],
                    .video>div>svg[data-mic-level="6"],
                    .video>div>svg[data-mic-level="7"],
                    .video>div>svg[data-mic-level="8"],
                    .video>div>svg[data-mic-level="9"],
                    .video>div>svg[data-mic-level="10"] {
                        opacity: 1;
                    }

                    .video>div>svg[data-mic-level="4"]>circle {
                        stroke-width: 1;
                    }

                    .video>div>svg[data-mic-level="5"]>circle {
                        stroke-width: 2;
                    }

                    .video>div>svg[data-mic-level="6"]>circle {
                        stroke-width: 3;
                    }

                    .video>div>svg[data-mic-level="7"]>circle {
                        stroke-width: 4;
                    }

                    .video>div>svg[data-mic-level="8"]>circle {
                        stroke-width: 5;
                    }

                    .video>div>svg[data-mic-level="9"]>circle {
                        stroke-width: 6;
                    }

                    .video>div>svg[data-mic-level="10"]>circle {
                        stroke-width: 7;
                    }

                    .video>div>.nickname {
                        position: absolute;
                        display: block;
                        height: 15px;
                        left: 10px;
                        right: 10px;
                        bottom: 12px;
                        margin-bottom: -7px;
                        font-size: 12px;
                        font-weight: 600;
                        color: #fff;
                        text-align: center;
                        text-shadow: 0 0 6px rgba(0, 0, 0, .8);
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        overflow: hidden;
                        cursor: default;
                        transition: .2s;
                    }

                    .video>div>.nickname>img {
                        position: relative;
                        display: inline-block;
                        height: 10px;
                        width: 10px;
                        top: 2px;
                        margin-right: 6px;
                        opacity: 1;
                        visibility: visible;
                        transition: .2s;
                    }

                    .video>div>.nickname>img[src=""] {
                        width: 0;
                        margin-right: 0;
                        overflow: hidden;
                        opacity: 0;
                        visibility: hidden;
                    }

                    .video:hover>div>.nickname {
                        bottom: 50%;
                        transition: .2s ease .2s;
                    }

                    .video>div.gold:after,
                    .video>div.extreme:after,
                    .video>div.pro:after {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 24px;
                        width: 24px;
                        top: 10px;
                        right: 10px;
                        background-repeat: no-repeat;
                        transition: .2s;
                    }

                    .video>div.gold:after {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+Cgk8Y2lyY2xlIGZpbGw9IiNmZmM2MmMiIGN4PSIxMiIgY3k9IjEyIiByPSIxMiIvPgoJPHBhdGggaWQ9ImJhZGdlLWdvbGQiIGQ9Ik0xNiAxMi41NzZ2LTEuMDE4aC0zLjU5NnYxLjUxaDEuMjZsLS4wMTIuMTA4Yy0uMDcuNjIyLS42MyAxLjAzNC0xLjQyIDEuMDM0LTEuMDY1IDAtMS43NTgtLjg0LTEuNzU4LTIuMjUgMC0xLjM3Ny42MDctMi4xNyAxLjYzOC0yLjE3LjY5OCAwIDEuMjQyLjM3IDEuNDAzLjkzN2gyLjM4OEMxNS43MiA5LjE0IDE0LjE3MyA4IDEyLjEgOCA5LjU1MiA4IDggOS40NTcgOCAxMS45OTIgOCAxNC41NiA5LjU1MiAxNiAxMi4xNzUgMTZjMi40IDAgMy44MjUtMS4zMDcgMy44MjUtMy40MjR6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI2JhZGdlLWdvbGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMSkiIGZpbGwtb3BhY2l0eT0iLjIiLz4KCTx1c2UgZmlsbD0iI2ZmZiIgeGxpbms6aHJlZj0iI2JhZGdlLWdvbGQiLz4KPC9zdmc+);
                    }

                    .video>div.extreme:after {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPGNpcmNsZSBmaWxsPSIjYWQ2YmNlIiBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiLz4NCgk8cGF0aCBpZD0iYmFkZ2UtZXh0cmVtZSIgZD0iTTE0IDE2SDlWOGg1djEuNzM1aC0yLjcyNXYxLjI1OGgyLjUyM3YxLjczNWgtMi41MjN2MS41MUgxNHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPg0KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI2JhZGdlLWV4dHJlbWUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMSkiIGZpbGwtb3BhY2l0eT0iLjIiLz4NCgk8dXNlIGZpbGw9IiNmZmYiIHhsaW5rOmhyZWY9IiNiYWRnZS1leHRyZW1lIi8+DQo8L3N2Zz4=);
                    }

                    .video>div.pro:after {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPGNpcmNsZSBmaWxsPSIjMzhjZDU3IiBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiLz4NCgk8cGF0aCBpZD0iYmFkZ2UtcHJvIiBkPSJNMTUgMTAuNTQ0YzAgLjg5NC0uMjcyIDEuNTg1LS44MTcgMi4wNzItLjU0NS40ODctMS4zMi43My0yLjMyMi43M2gtLjYyNlYxNkg5VjhoMi44NmMxLjA0NiAwIDEuODMuMjIgMi4zNTQuNjYyLjUyNC40NDIuNzg2IDEuMDcuNzg2IDEuODgyem0tMy43NjYgMS4wNGguNDA3Yy4zMzYgMCAuNjAzLS4wOS44LS4yNzMuMi0uMTgyLjI5OC0uNDM0LjI5OC0uNzU1IDAtLjU0LS4zMS0uODEtLjkyNy0uODFoLS41NzZ2MS44NHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPg0KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI2JhZGdlLXBybyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbC1vcGFjaXR5PSIuMiIvPg0KCTx1c2UgZmlsbD0iI2ZmZiIgeGxpbms6aHJlZj0iI2JhZGdlLXBybyIvPg0KPC9zdmc+);
                    }

                    @keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }

                    @-webkit-keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }

                    @media screen and (max-width: 600px) {
                        #videos {
                            top: 12px;
                            right: 13px;
                            bottom: 12px;
                            left: 13px;
                        }

                        .video {
                            padding: 2px;
                        }

                        .video:after {
                            border-width: 2px;
                            border-radius: 4px;
                        }
                    }

                    .video.full-screen:after {
                        border-color: #101314;
                    }
                </style>
            </template></dom-module>
        <dom-module id="tc-video-item" assetpath="../ui/tc-video-item/"><template strip-whitespace="">
                <style include="tc-video-item-style"></style>
                <div class$="[[videoItemStyle]]" on-click="onVideoTap" on-change="recalcVideosPosition">
                    <div class$="[[convertVideoClass(item, item.progress)]]"><video id="video" autoplay="" volume="[[volume]]" data-video-id$="[[item.handle]]" on-playing="onPlaying">Your browser does not support the video tag...</video>
                        <div class="overlay"><button on-click="onHide" class="icon-visibility"><svg width="20" height="14" viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M10 14C3.285 14 .52 8.65.52 8.65c-.657-.9-.68-2.417-.128-3.362C.392 5.288 2.452 0 10 0c7.545 0 9.594 5.27 9.594 5.27.6.94.51 2.465-.108 3.37 0 0-2.774 5.36-9.487 5.36zm0-2c2.423 0 4.374-.814 5.942-2.185a9.2 9.2 0 0 0 1.386-1.51c.212-.293.338-.5.38-.583l.057-.108.07-.1c.19-.282.217-.94.07-1.17L17.8 6.18l-.072-.184a3.74 3.74 0 0 0-.268-.485 6.67 6.67 0 0 0-1.178-1.393C14.827 2.8 12.798 2 10 2s-4.83.803-6.29 2.125c-.495.45-.887.928-1.182 1.4-.163.26-.25.436-.27.49L2.2 6.16l-.08.137c-.17.29-.15.946.018 1.176l.09.123.07.136c.042.08.168.29.378.58A9.167 9.167 0 0 0 4.06 9.82C5.624 11.187 7.573 12 9.997 12zm0-3a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill="#fff" fill-rule="evenodd"></path>
                                </svg> <svg width="20" height="14" viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3.63 12.024C1.474 10.5.52 8.65.52 8.65c-.657-.9-.68-2.417-.128-3.362C.392 5.288 2.452 0 10 0c1.94 0 3.52.35 4.79.867l.594-.592a.945.945 0 0 1 1.34.006.953.953 0 0 1 .004 1.34L4.616 13.724a.945.945 0 0 1-1.34-.006.953.953 0 0 1-.004-1.34l.357-.356zm9.598-9.594c-.942-.28-2.013-.43-3.23-.43-2.797 0-4.83.803-6.288 2.125-.496.45-.888.928-1.183 1.4-.163.26-.25.436-.27.49L2.2 6.16l-.08.137c-.17.29-.15.946.017 1.176l.09.123.07.136c.042.08.168.29.378.58A9.167 9.167 0 0 0 4.058 9.82c.32.28.656.535 1.01.766l8.16-8.156zm-6.08 11.222l1.713-1.714c.368.04.747.062 1.14.062 2.423 0 4.374-.814 5.942-2.185a9.2 9.2 0 0 0 1.386-1.51c.212-.293.338-.5.38-.583l.057-.108.07-.1c.19-.282.217-.94.07-1.17L17.8 6.18l-.072-.184a3.74 3.74 0 0 0-.268-.485 6.577 6.577 0 0 0-.972-1.2l1.415-1.414c1.244 1.225 1.69 2.374 1.69 2.374.6.94.512 2.465-.107 3.37 0 0-2.774 5.36-9.487 5.36-1.046 0-1.995-.13-2.853-.348z" fill="#fff" fill-rule="evenodd"></path>
                                </svg></button> <button on-click="onVideoResize" class="icon-resize"><svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M14.37 12.95l3.335 3.336a1.003 1.003 0 1 1-1.42 1.42L12.95 14.37a8.028 8.028 0 1 1 1.42-1.42zm-6.342 1.1a6.02 6.02 0 1 0 0-12.042 6.02 6.02 0 0 0 0 12.042zM6.012 9.032a.996.996 0 0 1-.994-1.004c0-.554.452-1.003.994-1.003h4.033c.55 0 .994.445.994 1.003 0 .555-.454 1.004-.995 1.004H6.012z" fill="#fff" fill-rule="evenodd"></path>
                                    <path d="M0 .99C0 .445.444 0 1 0a1 1 0 0 1 1 .99v4.02C2 5.555 1.556 6 1 6a1 1 0 0 1-1-.99V.99z" transform="translate(7 5)" fill="#fff" fill-rule="evenodd"></path>
                                </svg></button>
                            <dom-if if="[[item.abuseAllow]]"><template strip-whitespace=""><button on-click="onAbuse" class="icon-report"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M.025.776A.997.997 0 0 1 1.038 0H14.52c1.142 0 1.753.835 1.36 1.877l-.658 1.746c-.39 1.036-.393 2.712 0 3.754l.658 1.746C16.27 10.16 15.66 11 14.52 11H2v4c0 .552-.444 1-1 1-.552 0-1-.445-1-1V.995C0 .92.01.845.025.775zM2.075 9h11.553l-.354-.94c-.56-1.48-.558-3.64 0-5.12l.354-.94H2.074v7z" fill="#fff" fill-rule="evenodd"></path>
                                        </svg></button></template></dom-if>
                            <dom-if if="[[item.filtersAllow]]"><template strip-whitespace=""><button on-click="onFilters" class="icon-filter"><svg width="26" height="20" viewBox="0 0 26 20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M11.6 10.4L18 12l-6.4 1.6L10 20l-1.6-6.4L2 12l6.4-1.6L10 4l1.6 6.4zM22 5l4 1-4 1-1 4-1-4-4-1 4-1 1-4 1 4zM3.6 2.4L6 3l-2.4.6L3 6l-.6-2.4L0 3l2.4-.6L3 0l.6 2.4z" fill="#fff" fill-rule="evenodd"></path>
                                        </svg></button></template></dom-if><button class="icon-context"><svg width="20" height="4" viewBox="0 0 20 4" xmlns="http://www.w3.org/2000/svg">
                                    <circle r="2" cx="2" cy="2" fill="#fff" fill-rule="evenodd"></circle>
                                    <circle r="2" cx="10" cy="2" fill="#fff" fill-rule="evenodd"></circle>
                                    <circle r="2" cx="18" cy="2" fill="#fff" fill-rule="evenodd"></circle>
                                </svg></button>
                            <div class="video-context on-white-scroll" onmouseleave="this.previousElementSibling.blur();">
                                <div class="video-context-content">
                                    <dom-if if="[[item.videoForceCloseAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onVideoForceClose">Close Video</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.ignoreAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onIgnore">Ignore</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.unignoreAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onUnignore">Unignore</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.followAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onFollow">Follow</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.openprivateAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onPrivateMessage">Private Message</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.profileAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onProfile">Profile</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.banAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onBan">Ban</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.kickAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onKick">Kick</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.abuseAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onAbuse">Report (Abuse)</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.giveagiftAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onSendGift">Send Gift</button></div>
                                        </template></dom-if>
                                    <dom-if if="[[item.upgradeAllow]]"><template strip-whitespace="">
                                            <div><button on-click="onUpgrade">Upgrade</button></div>
                                        </template></dom-if>
                                </div>
                            </div>
                            <dom-if if="[[item.volumeControlAllow]]"><template strip-whitespace="">
                                    <div class="icon-volume">
                                        <tc-volume-control vol="{{internalVolume}}"></tc-volume-control>
                                    </div>
                                </template></dom-if>
                        </div>
                        <div class="waiting">
                            <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                        </div><svg width="20" height="20" viewBox="0 0 24 24" data-mic-level$="[[item.audiolevel]]" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="3"></circle>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg> <span class="nickname" title="[[item.nickname]]"><img src$="[[item.achivementUrl]]"> [[item.nickname]]</span>
                    </div>
                </div>
            </template>
            <script>
                class ChatroomVideoItem extends Polymer.Element {
                    static get is() {
                        return "tc-video-item"
                    }
                    static get properties() {
                        return {
                            item: {
                                type: Object,
                                observer: "itemAssigned"
                            },
                            chatroom: {
                                type: Object
                            },
                            app: {
                                type: Object
                            },
                            videolist: {
                                type: Object
                            },
                            externalVolume: {
                                type: Number,
                                value: 100
                            },
                            internalVolume: {
                                type: Number,
                                value: 100
                            },
                            volume: {
                                type: Number,
                                computed: "_volumeCompute(internalVolume, externalVolume)"
                            },
                            isFullScreen: {
                                type: Boolean,
                                value: !1
                            },
                            onFullscreenHandler: Object,
                            videoItemStyle: {
                                type: String,
                                computed: "_videoItemStyleCompute(item.large, item.muted, item.hidden, isFullScreen)"
                            }
                        }
                    }
                    constructor() {
                        super()
                    }
                    connectedCallback() {
                        super.connectedCallback(), this.onFullscreenHandler = this.onFullscreen.bind(this), window.fullscreenManager.addEventListener(this.onFullscreenHandler, !1)
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), window.fullscreenManager.removeEventListener(this.onFullscreenHandler, !1)
                    }
                    itemAssigned(a) {
                        let b = this.$.video;
                        b.srcObject = a.mediastream, b.muted = a.muted, this.internalVolume = a.volume
                    }
                    _volumeCompute(a, b) {
                        let c = 100;
                        return void 0 === a && void 0 !== b ? c = b : void 0 !== a && void 0 === b ? c = a : void 0 !== a && void 0 !== b && (c = b < a ? b : a), this.item.volume !== c && (this.item.volume = c, this.notifyPath("item.volume")), c / 100
                    }
                    _videoItemStyleCompute(a, b, c, d) {
                        let e = "video";
                        return e += a ? " large" : "", e += b ? " muted" : "", e += c ? " not-visible" : "", e += d ? " full-screen" : "", e
                    }
                    convertVideoClass(a, b) {
                        var c = "ratio-4-3";
                        let d = TinychatApp.BLL.User.getCssClass(a.userentity);
                        return c += "" === d ? "" : ` ${d}`, c += b ? " wait" : "", c
                    }
                    onPlaying(a) {
                        this.dispatchEvent(new CustomEvent("video-playing", a))
                    }
                    onMute() {
                        this.videolist.toggleMuteVW(this.item)
                    }
                    onVideoTap() {}
                    onHide() {
                        this.videolist.toggleHiddenVW(this.item)
                    }
                    onVideoResize() {
                        if (!this.chatroom.selfUser().hasSubscriptions) this.app.Upgrade();
                        else {
                            if (null != this.ytplayer) return void this.app.showToast("Larger video windows are disabled due Youtube is playing");
                            this.videolist.toggleSizeVW(this.item), this.notifyPath("item.large")
                        }
                    }
                    onBan() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.chatroom.userlist.ban(this.item.userentity)
                    }
                    onKick() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.chatroom.userlist.kick(this.item.userentity)
                    }
                    onAbuse() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.chatroom.Abuse(this.item.userentity)
                    }
                    onFilters() {
                        this.app.MediaFilters()
                    }
                    onFullscreen() {
                        this.isFullScreen = window.fullscreenManager.status()
                    }
                    onVideoForceClose() {
                        this.chatroom.userlist.videoForceClose(this.item.userentity)
                    }
                    onIgnore() {
                        this.chatroom.userlist.ignore(this.item.userentity)
                    }
                    onUnignore() {
                        this.chatroom.userlist.unignore(this.item.userentity)
                    }
                    onFollow() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.chatroom.userlist.follow(this.item.userentity)
                    }
                    onUnfollow() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.chatroom.userlist.unfollow(this.item.userentity)
                    }
                    onPrivateMessage() {
                        this.chatroom.chatlog.openprivate(this.item.userentity)
                    }
                    onProfile() {
                        let a = this.item.userentity;
                        a.isUsername ? this.app.UserProfile(a.username) : this.app.showToast("[" + a.nickname + "] is anonymous, therefore has no profile")
                    }
                    onSendGift() {
                        let a = this.item.userentity;
                        a.isUsername ? this.app.GiveAGift(a.username) : this.app.showToast("[" + a.nickname + "] is anonymous, virtual gifts for registered users only.")
                    }
                    onUpgrade() {
                        this.app.UpgradeSub()
                    }
                    onFeatured() {
                        this.videolist.toggleFeatured(this.item)
                    }
                }
                customElements.define(ChatroomVideoItem.is, ChatroomVideoItem);
            </script>
        </dom-module>
        <dom-module id="client-videolist" assetpath="../../styles/"><template>
                <style>
                    #videolist * {
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                    }

                    *:focus {
                        outline: none;
                    }

                    .on-white-scroll {
                        padding-left: 16px;
                        box-sizing: border-box;
                        overflow-x: hidden;
                        overflow-y: scroll;
                    }

                    .on-white-scroll::-webkit-scrollbar {
                        position: absolute;
                        width: 15px;
                        cursor: pointer;
                    }

                    .on-white-scroll::-webkit-scrollbar-track {
                        background-color: #fff;
                    }

                    .on-white-scroll::-webkit-scrollbar-thumb {
                        border: 5px solid #fff;
                        border-radius: 6px/8px;
                        background-color: rgba(0, 0, 0, .2);
                    }

                    .on-white-scroll::-webkit-scrollbar-thumb:hover {
                        background-color: rgba(0, 0, 0, .4);
                    }

                    #ytplayer {
                        pointer-events: none;
                    }

                    :host,
                    #videolist {
                        position: relative;
                        display: flex;
                        flex-direction: column;
                        align-items: stretch;
                        height: 100%;
                        min-height: 250px;
                        width: 100%;
                        background-color: #fff;
                    }

                    #lurker {
                        height: 0;
                        min-height: 0;
                        padding: 0 20px;
                        box-sizing: border-box;
                        font-size: 14px;
                        font-weight: 600;
                        color: #fff;
                        line-height: 40px;
                        background-color: #f29e20;
                        text-align: center;
                        white-space: nowrap;
                        overflow: hidden;
                        cursor: default;
                        transition: .2s;
                    }

                    #lurker>* {
                        vertical-align: middle;
                    }

                    #lurker>span {
                        display: inline-block;
                        margin: 0 14px 0 10px;
                        line-height: 24px;
                    }

                    #lurker>button {
                        display: inline-block;
                        height: 24px;
                        padding: 0 18px;
                        border: 1px solid #fff;
                        font-size: 12px;
                        font-weight: 700;
                        color: #fff;
                        line-height: 24px;
                        background-color: transparent;
                        text-transform: uppercase;
                        cursor: pointer;
                        transition: .2s;
                    }

                    #lurker>button:hover {
                        color: #f29e20;
                        background-color: #fff;
                    }

                    #videolist.lurker>#lurker {
                        height: 40px;
                        min-height: 40px;
                    }

                    #videos-header {
                        height: 50px;
                        min-height: 50px;
                        width: 100%;
                        top: 0;
                        left: 0;
                        font-size: 0;
                        background-color: #fff;
                        z-index: 1;
                        transition: .2s;
                    }

                    #videolist.hide-header>#videos-header {
                        height: 0;
                        min-height: 0;
                    }

                    #videos-header {
                        display: flex;
                        flex-direction: row;
                        align-items: stretch;
                    }

                    #videos-header>span.hidden {
                        display: none;
                    }

                    #videos-header>span {
                        display: inline-block;
                        height: 100%;
                        width: 100%;
                        background-color: inherit;
                        text-align: center;
                        line-height: 50px;
                    }

                    #videos-header>span>svg {
                        display: inline-block;
                        vertical-align: middle;
                        cursor: pointer;
                    }

                    #videos-header>span>svg * {
                        pointer-events: none;
                    }

                    #videos-header-sound {
                        position: relative;
                    }

                    #videos-header-sound>svg>path~path {
                        display: none;
                    }

                    #videos-header-sound>svg {
                        position: relative;
                        padding: 7px 10px;
                        z-index: 1;
                    }

                    #videos-header-sound>svg.muted>path~path {
                        display: block;
                    }

                    #videos-header-mic>svg {
                        position: relative;
                        padding: 5px 10px;
                        z-index: 1;
                    }

                    #videos-header-mic>svg>rect {
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    #videos-header-mic.muted>svg>rect {
                        opacity: 1;
                        visibility: visible;
                    }

                    .videos-header-volume {
                        position: absolute;
                        height: 128px;
                        width: 4px;
                        top: 2px;
                        left: 50%;
                        margin-left: -24px;
                        border-width: 50px 22px 22px;
                        border-style: solid;
                        border-color: #fff;
                        border-radius: 24px;
                        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, .09);
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    #videos-header>span>svg:hover+.videos-header-volume,
                    #videos-header>span>.videos-header-volume:hover {
                        opacity: 1;
                        visibility: visible;
                    }

                    .videos-header-volume:before {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        border-radius: 2px;
                        background-color: #e9eaea;
                    }

                    .videos-header-volume-level {
                        position: absolute;
                        display: block;
                        width: 100%;
                        bottom: 0;
                        left: 0;
                        border-radius: 2px;
                        background-color: #41b7ef;
                    }

                    .videos-header-volume-level>div {
                        position: absolute;
                        display: block;
                        height: 12px;
                        width: 12px;
                        top: -6px;
                        left: -4px;
                        border-radius: 100%;
                        background-color: #41b7ef;
                        cursor: pointer;
                        box-shadow: 0 0 0 0 #41b7ef;
                        transition: .2s;
                    }

                    .videos-header-volume-level>div:hover {
                        box-shadow: 0 0 0 3px #41b7ef;
                    }

                    #videos-header-snapshot>svg {
                        padding: 8px 7px 9px;
                    }

                    #videos-header-fullscreen>svg {
                        padding: 10px 8px;
                    }

                    #videos-header-fullscreen>svg+svg {
                        display: none;
                    }

                    @media screen and (max-width: 600px) {
                        .videos-header-volume {
                            top: auto;
                            bottom: 1px;
                            margin-left: -23px;
                            border-width: 21px 21px 40px;
                            box-shadow: 0 0 4px 0 rgba(0, 0, 0, .09);
                        }

                        #videos-header-mic>.videos-header-volume {
                            bottom: 11px;
                            margin-left: -17px;
                        }

                        #videolist.full-screen>#videos-header>span {
                            background-color: #202628;
                        }
                    }

                    #videos-content {
                        position: relative;
                        height: 100%;
                        width: 100%;
                    }

                    #videos {
                        position: absolute;
                        display: flex;
                        flex-direction: row;
                        flex-wrap: wrap;
                        align-content: center;
                        justify-content: center;
                        align-items: center;
                        top: 20px;
                        right: 25px;
                        bottom: 20px;
                        left: 25px;
                        box-sizing: border-box;
                        font-size: 0;
                    }

                    .videos-items {
                        display: flex;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        flex-direction: row;
                        flex-wrap: wrap;
                        align-content: center;
                        justify-content: center;
                        align-items: center;
                        box-sizing: border-box;
                    }

                    .videos-items.hidden {
                        display: none;
                    }

                    #videos.row>.videos-items {
                        width: 50%;
                    }

                    #videos.row>.videos-items+.videos-items {
                        left: 50%;
                    }

                    #videos.column {
                        flex-direction: column;
                    }

                    #videos.column>.videos-items {
                        height: 50%;
                    }

                    #videos.row.featured-2>.videos-items {
                        width: 65%;
                    }

                    #videos.row.featured-2>.videos-items+.videos-items {
                        width: 35%;
                    }

                    #videos.column.featured-2>.videos-items {
                        height: 70%;
                    }

                    #videos.column.featured-2>.videos-items+.videos-items {
                        height: 30%;
                    }

                    #videos.row.featured-3>.videos-items {
                        width: 70%;
                    }

                    #videos.row.featured-3>.videos-items+.videos-items {
                        width: 30%;
                    }

                    #videos.column.featured-3>.videos-items {
                        height: 70%;
                    }

                    #videos.column.featured-3>.videos-items+.videos-items {
                        height: 30%;
                    }

                    #youtube.video.hidden {
                        display: none;
                    }

                    .video {
                        position: relative;
                        width: 100%;
                        padding: 5px;
                        box-sizing: border-box;
                        font-size: 0;
                        overflow: hidden;
                    }

                    .video>div {
                        position: relative;
                        overflow: hidden;
                    }

                    #youtube.video>div:before {
                        content: '';
                        display: block;
                        width: 100%;
                        padding-bottom: 75%;
                    }

                    .video:after {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        border: 5px solid #fff;
                        border-radius: 10px;
                        box-sizing: border-box;
                        pointer-events: none;
                    }

                    .video>div>div {
                        position: relative;
                        width: 100%;
                    }

                    .video>div>video,
                    .video>div>tinychat-videoitem,
                    .video>div>iframe {
                        position: absolute;
                        height: 100%;
                        top: 0;
                        left: 0;
                    }

                    .video>div>iframe {
                        width: 100%;
                    }

                    .video>div.ratio-16-9>video,
                    .video>div.ratio-16-9>tinychat-videoitem,
                    .video>div.ratio-16-9>iframe {
                        left: -16.66%;
                    }

                    .video>div.ratio-8-5>video,
                    .video>div.ratio-8-5>tinychat-videoitem,
                    .video>div.ratio-8-5>iframe {
                        left: -10%;
                    }

                    .video>div.ratio-3-2>video,
                    .video>div.ratio-3-2>tinychat-videoitem,
                    .video>div.ratio-3-2>iframe {
                        left: -6.25%;
                    }

                    #youtube.video>div>.overlay,
                    .video>div>.overlay {
                        position: absolute;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        box-shadow: inset 0 0 0 0 rgba(0, 0, 0, .5);
                        transition: .2s;
                    }

                    .video:hover>div>.overlay {
                        box-shadow: inset 0 0 100px 0 rgba(0, 0, 0, .5);
                    }

                    #youtube-overlay {
                        position: absolute;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        opacity: .5;
                    }

                    #youtube.video>div>.overlay>#youtube-overlay:before,
                    #youtube.video>div>.overlay>#youtube-overlay:after {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 0;
                        width: 100%;
                        top: 0;
                        left: 0;
                        background: -moz-linear-gradient(top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%);
                        background: -webkit-linear-gradient(top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%);
                        background: linear-gradient(to bottom, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%);
                        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#000000', endColorstr='#00000000', GradientType=0);
                        transition: .2s;
                    }

                    #youtube.video>div>.overlay>#youtube-overlay:after {
                        top: auto;
                        bottom: 0;
                        background: -moz-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%);
                        background: -webkit-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%);
                        background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%);
                        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#000000', GradientType=0);
                    }

                    #youtube.video:hover>div>.overlay>#youtube-overlay:before,
                    #youtube.video:hover>div>.overlay>#youtube-overlay:after {
                        height: 100px;
                    }

                    .icon-visibility,
                    .icon-resize,
                    .icon-report,
                    .icon-close {
                        position: absolute;
                        height: 22px;
                        width: 22px;
                        top: -22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                        opacity: .9;
                        transition: .2s;
                    }

                    .icon-visibility {
                        left: -22px;
                    }

                    .icon-resize {
                        left: 50%;
                        margin-left: -11px;
                    }

                    .icon-report,
                    .icon-close {
                        right: -22px;
                    }

                    .icon-visibility:hover,
                    .icon-resize:hover,
                    .icon-report:hover,
                    .icon-close:hover {
                        opacity: 1;
                    }

                    .video:hover>div>.overlay>.icon-visibility,
                    .video:hover>div>.overlay>.icon-resize,
                    .video:hover>div>.overlay>.icon-report,
                    .video:hover>div>.overlay>.icon-close {
                        top: 12px;
                        transition: top .2s ease .2s,
                            left .2s ease .2s,
                            right .2s ease .2s,
                            opacity .2s;
                    }

                    .video:hover>div>.overlay>.icon-visibility {
                        left: 14px;
                    }

                    .video:hover>div>.overlay>.icon-report,
                    .video:hover>div>.overlay>.icon-close {
                        right: 14px;
                    }

                    .icon-visibility>svg,
                    .icon-resize>svg,
                    .icon-report>svg,
                    .icon-close>svg {
                        position: absolute;
                    }

                    .video.not-visible>div>.overlay>.icon-visibility>svg,
                    .icon-visibility>svg {
                        top: 4px;
                        left: 1px;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video.not-visible>div>.overlay>.icon-visibility>svg:first-child,
                    .icon-visibility>svg+svg {
                        opacity: 1;
                        visibility: visible;
                    }

                    .video.not-visible>div>iframe {
                        visibility: hidden;
                    }

                    .icon-resize>svg {
                        top: 3px;
                        left: 3px;
                    }

                    .icon-resize>svg>path {
                        transition: .2s;
                    }

                    .icon-report>svg {
                        top: 3px;
                        left: 3px;
                    }

                    .icon-close>svg {
                        top: 4px;
                        left: 4px;
                    }

                    .icon-context {
                        position: absolute;
                        height: 22px;
                        width: 22px;
                        bottom: -22px;
                        right: -22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                        opacity: .9;
                        transition: .2s;
                    }

                    .icon-context:hover {
                        opacity: 1;
                    }

                    .video:hover>div>.overlay>.icon-context {
                        bottom: 7px;
                        right: 16px;
                        transition: bottom .2s ease .2s,
                            right .2s ease .2s,
                            opacity .2s;
                    }

                    .icon-context>svg {
                        position: absolute;
                        top: 9px;
                        left: 1px;
                    }

                    .video-context {
                        position: absolute;
                        display: flex;
                        flex-direction: column;
                        align-content: center;
                        justify-content: center;
                        top: 0;
                        bottom: 0;
                        left: 0;
                        right: 0;
                        padding-top: 10px;
                        padding-bottom: 10px;
                        border-radius: 4px;
                        border: 1px solid rgba(0, 0, 0, .06);
                        box-sizing: border-box;
                        font-size: 0;
                        color: #535353;
                        text-align: left;
                        line-height: 1;
                        background-color: rgba(0, 0, 0, .7);
                        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, .09);
                        z-index: 1;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video-context::-webkit-scrollbar-track {
                        background-color: transparent;
                    }

                    .video-context::-webkit-scrollbar-thumb {
                        border: 5px solid transparent;
                        border-radius: 6px/8px;
                        background-color: rgba(255, 255, 255, .1);
                        background-clip: content-box;
                    }

                    .video-context::-webkit-scrollbar-thumb:hover {
                        background-color: rgba(255, 255, 255, .2);
                    }

                    .video:hover>div>.overlay>.icon-context:focus+.video-context {
                        opacity: 1;
                        visibility: visible;
                    }

                    .video-context-content {
                        margin: 0 auto;
                    }

                    .video-context-content>div {
                        text-align: center;
                    }

                    .video-context-content>div+div {
                        padding-top: 5px;
                    }

                    .video-context-content>div>button {
                        display: block;
                        width: 100%;
                        padding: 0 20px;
                        border: none;
                        border-radius: 4px;
                        box-sizing: border-box;
                        font-size: 13px;
                        font-weight: 600;
                        color: #fff;
                        background-color: transparent;
                        line-height: 26px;
                        cursor: pointer;
                        transition: .2s;
                    }

                    .video-context-content>div>button:hover {
                        color: #fff;
                        background-color: #04caff;
                    }

                    #icon-state {
                        position: absolute;
                        height: 22px;
                        left: -22px;
                        bottom: -22px;
                        opacity: .9;
                        transition: .2s;
                    }

                    .video:hover>div>.overlay>#icon-state {
                        left: 16px;
                        bottom: 16px;
                        transition: bottom .2s ease .2s,
                            left .2s ease .2s,
                            opacity .2s;
                    }

                    .icon-volume {
                        position: absolute;
                        height: 22px;
                        left: -22px;
                        bottom: -22px;
                        opacity: .9;
                        transition: .2s;
                    }

                    #youtube .icon-volume {
                        left: 48px;
                    }

                    .icon-volume:hover {
                        opacity: 1;
                    }

                    .video:hover>div>.overlay>.icon-volume {
                        left: 16px;
                        bottom: 16px;
                        transition: bottom .2s ease .2s,
                            left .2s ease .2s,
                            opacity .2s;
                    }

                    #youtube.video:hover>div>.overlay>.icon-volume {
                        left: 48px;
                    }

                    .icon-volume>button {
                        position: relative;
                        height: 22px;
                        width: 22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                    }

                    .icon-volume>button>svg {
                        position: absolute;
                        display: block;
                        top: 2px;
                        left: 4px;
                        transition: .2s;
                    }

                    .icon-volume>button>svg+svg {
                        left: 3px;
                    }

                    .video.muted>div>.overlay>.icon-volume>button>svg+svg,
                    .icon-volume>button>svg {
                        opacity: 1;
                        visibility: visible;
                    }

                    .video.muted>div>.overlay>.icon-volume>button>svg:first-child,
                    .icon-volume>button>svg+svg {
                        opacity: 0;
                        visibility: hidden;
                    }

                    .icon-volume>.seek-wrapper {
                        position: absolute;
                        width: 58px;
                        top: 6px;
                        left: 22px;
                    }

                    #icon-seek {
                        position: absolute;
                        height: 22px;
                        left: 12px;
                        right: 12px;
                        bottom: -22px;
                        opacity: .9;
                        transition: .2s;
                    }

                    .video:hover>div>.overlay>#icon-seek {
                        bottom: 38px;
                        transition: bottom .2s ease .2s;
                    }

                    #icon-seek:hover {
                        opacity: 1;
                    }

                    #icon-state>button {
                        position: relative;
                        height: 22px;
                        width: 22px;
                        padding: 0;
                        border: none;
                        background-color: transparent;
                        cursor: pointer;
                    }

                    #icon-state>button>svg {
                        position: absolute;
                        display: block;
                        top: 2px;
                        left: 2px;
                    }

                    #icon-state>button>svg+svg {
                        top: 1px;
                        left: 2px;
                        transition: .2s;
                    }

                    #youtube.pause #icon-state>button>svg+svg,
                    #icon-state>button>svg {
                        opacity: 1;
                        visibility: visible;
                    }

                    #youtube.pause #icon-state>button>svg:first-child,
                    #icon-state>button>svg+svg {
                        opacity: 0;
                        visibility: hidden;
                    }

                    #icon-seek>.seek-wrapper {
                        position: absolute;
                        width: auto;
                        top: 6px;
                        left: 0;
                        right: 0;
                    }

                    #seek-duration {
                        position: absolute;
                        height: 22px;
                        left: 90px;
                        bottom: 0;
                        font-size: 12px;
                        font-weight: 600;
                        color: #fff;
                        line-height: 22px;
                        white-space: nowrap;
                        cursor: default;
                    }

                    .seek-wrapper {
                        height: 10px;
                        width: 100%;
                        padding: 3px 5px;
                        box-sizing: border-box;
                        cursor: pointer;
                    }

                    .seek {
                        position: relative;
                        height: 100%;
                        width: 100%;
                        border-radius: 4px;
                        background-color: #fff;
                    }

                    .seek-text {
                        position: absolute;
                        height: 20px;
                        width: 70px;
                        top: -24px;
                        margin-left: -35px;
                        line-height: 20px;
                        text-align: center;
                        opacity: 0;
                        transition: opacity .2s;
                    }

                    .seek-wrapper:hover>.seek>.seek-text {
                        opacity: 1;
                    }

                    .seek-text>span {
                        display: inline-block;
                        height: 100%;
                        padding: 0 10px;
                        border-radius: 11px;
                        font-size: 12px;
                        font-weight: 600;
                        color: #fff;
                        background-color: rgba(0, 0, 0, .5);
                        line-height: 20px;
                    }

                    .seek-level {
                        position: absolute;
                        height: 100%;
                        top: 0;
                        left: 0;
                        border-radius: 4px;
                        background-color: #41b7ef;
                    }

                    .seek-level>div {
                        position: absolute;
                        display: block;
                        height: 4px;
                        width: 4px;
                        top: 0;
                        right: -2px;
                        border-radius: 100%;
                        background-color: #41b7ef;
                        box-shadow: 0 0 0 2px #41b7ef;
                        transition: .2s;
                    }

                    .seek-wrapper:hover>.seek>.seek-level>div {
                        box-shadow: 0 0 0 3px #41b7ef;
                    }

                    .video>div>.waiting {
                        position: absolute;
                        height: 100%;
                        width: 100%;
                        top: 0;
                        left: 0;
                        background-color: #202628;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    .video>div.wait>.waiting {
                        opacity: 1;
                        visibility: visible;
                    }

                    .waiting>.waiting-content {
                        position: absolute;
                        height: 0;
                        width: 80%;
                        top: 50%;
                        left: 10%;
                    }

                    .waiting>.waiting-content>span {
                        position: absolute;
                        display: inline-block;
                        height: 0;
                        width: 0;
                        top: -4px;
                        left: 0;
                        border: 4px solid #04caff;
                        border-radius: 100%;
                        opacity: 0;
                        animation: waiting 1s ease-in-out 0s infinite paused;
                        -webkit-animation: waiting 1s ease-in-out 0s infinite paused;
                    }

                    .waiting>.waiting-content>span:nth-child(2) {
                        animation-delay: .15s;
                        -webkit-animation-delay: .15s;
                    }

                    .waiting>.waiting-content>span:nth-child(3) {
                        animation-delay: .3s;
                        -webkit-animation-delay: .3s;
                    }

                    .waiting>.waiting-content>span:nth-child(4) {
                        animation-delay: .45s;
                        -webkit-animation-delay: .45s;
                    }

                    .video>div.wait>.waiting>.waiting-content>span {
                        animation-play-state: running;
                        -webkit-animation-play-state: running;
                    }

                    .video>div>svg {
                        position: absolute;
                        top: 5px;
                        left: 5px;
                        filter: drop-shadow(0 0 4px #04caff);
                        -webkit-filter: drop-shadow(0 0 4px #04caff);
                        opacity: 0;
                        transition: .2s;
                    }

                    #videos-content>#videos>.video:hover>div>svg {
                        top: -24px;
                        left: -24px;
                        transition: .2s ease .2s;
                    }

                    .video>div>svg>circle {
                        fill: #fff;
                        fill-rule: evenodd;
                        stroke: #fff;
                        stroke-width: 0;
                        transition: .2s;
                    }

                    .video>div>svg[data-mic-level="1"] {
                        opacity: .5;
                    }

                    .video>div>svg[data-mic-level="2"] {
                        opacity: .8;
                    }

                    .video>div>svg[data-mic-level="3"],
                    .video>div>svg[data-mic-level="4"],
                    .video>div>svg[data-mic-level="5"],
                    .video>div>svg[data-mic-level="6"],
                    .video>div>svg[data-mic-level="7"],
                    .video>div>svg[data-mic-level="8"],
                    .video>div>svg[data-mic-level="9"],
                    .video>div>svg[data-mic-level="10"] {
                        opacity: 1;
                    }

                    .video>div>svg[data-mic-level="4"]>circle {
                        stroke-width: 1;
                    }

                    .video>div>svg[data-mic-level="5"]>circle {
                        stroke-width: 2;
                    }

                    .video>div>svg[data-mic-level="6"]>circle {
                        stroke-width: 3;
                    }

                    .video>div>svg[data-mic-level="7"]>circle {
                        stroke-width: 4;
                    }

                    .video>div>svg[data-mic-level="8"]>circle {
                        stroke-width: 5;
                    }

                    .video>div>svg[data-mic-level="9"]>circle {
                        stroke-width: 6;
                    }

                    .video>div>svg[data-mic-level="10"]>circle {
                        stroke-width: 7;
                    }

                    .video>div>.nickname {
                        position: absolute;
                        display: block;
                        height: 15px;
                        left: 10px;
                        right: 10px;
                        bottom: 12px;
                        margin-bottom: -7px;
                        font-size: 12px;
                        font-weight: 600;
                        color: #fff;
                        text-align: center;
                        text-shadow: 0 0 6px rgba(0, 0, 0, .8);
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        overflow: hidden;
                        cursor: default;
                        transition: .2s;
                    }

                    .video>div>.nickname>img {
                        position: relative;
                        display: inline-block;
                        height: 10px;
                        width: 10px;
                        top: 2px;
                        margin-right: 6px;
                        opacity: 1;
                        visibility: visible;
                        transition: .2s;
                    }

                    .video>div>.nickname>img[src=""] {
                        width: 0;
                        margin-right: 0;
                        overflow: hidden;
                        opacity: 0;
                        visibility: hidden;
                    }

                    .video:hover>div>.nickname {
                        bottom: 50%;
                        transition: .2s ease .2s;
                    }

                    .video>div.gold:after,
                    .video>div.extreme:after,
                    .video>div.pro:after {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 24px;
                        width: 24px;
                        top: 10px;
                        right: 10px;
                        background-repeat: no-repeat;
                        transition: .2s;
                    }

                    .video>div.gold:after {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+Cgk8Y2lyY2xlIGZpbGw9IiNmZmM2MmMiIGN4PSIxMiIgY3k9IjEyIiByPSIxMiIvPgoJPHBhdGggaWQ9ImJhZGdlLWdvbGQiIGQ9Ik0xNiAxMi41NzZ2LTEuMDE4aC0zLjU5NnYxLjUxaDEuMjZsLS4wMTIuMTA4Yy0uMDcuNjIyLS42MyAxLjAzNC0xLjQyIDEuMDM0LTEuMDY1IDAtMS43NTgtLjg0LTEuNzU4LTIuMjUgMC0xLjM3Ny42MDctMi4xNyAxLjYzOC0yLjE3LjY5OCAwIDEuMjQyLjM3IDEuNDAzLjkzN2gyLjM4OEMxNS43MiA5LjE0IDE0LjE3MyA4IDEyLjEgOCA5LjU1MiA4IDggOS40NTcgOCAxMS45OTIgOCAxNC41NiA5LjU1MiAxNiAxMi4xNzUgMTZjMi40IDAgMy44MjUtMS4zMDcgMy44MjUtMy40MjR6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI2JhZGdlLWdvbGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMSkiIGZpbGwtb3BhY2l0eT0iLjIiLz4KCTx1c2UgZmlsbD0iI2ZmZiIgeGxpbms6aHJlZj0iI2JhZGdlLWdvbGQiLz4KPC9zdmc+);
                    }

                    .video>div.extreme:after {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPGNpcmNsZSBmaWxsPSIjYWQ2YmNlIiBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiLz4NCgk8cGF0aCBpZD0iYmFkZ2UtZXh0cmVtZSIgZD0iTTE0IDE2SDlWOGg1djEuNzM1aC0yLjcyNXYxLjI1OGgyLjUyM3YxLjczNWgtMi41MjN2MS41MUgxNHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPg0KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI2JhZGdlLWV4dHJlbWUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMSkiIGZpbGwtb3BhY2l0eT0iLjIiLz4NCgk8dXNlIGZpbGw9IiNmZmYiIHhsaW5rOmhyZWY9IiNiYWRnZS1leHRyZW1lIi8+DQo8L3N2Zz4=);
                    }

                    .video>div.pro:after {
                        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQoJPGNpcmNsZSBmaWxsPSIjMzhjZDU3IiBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiLz4NCgk8cGF0aCBpZD0iYmFkZ2UtcHJvIiBkPSJNMTUgMTAuNTQ0YzAgLjg5NC0uMjcyIDEuNTg1LS44MTcgMi4wNzItLjU0NS40ODctMS4zMi43My0yLjMyMi43M2gtLjYyNlYxNkg5VjhoMi44NmMxLjA0NiAwIDEuODMuMjIgMi4zNTQuNjYyLjUyNC40NDIuNzg2IDEuMDcuNzg2IDEuODgyem0tMy43NjYgMS4wNGguNDA3Yy4zMzYgMCAuNjAzLS4wOS44LS4yNzMuMi0uMTgyLjI5OC0uNDM0LjI5OC0uNzU1IDAtLjU0LS4zMS0uODEtLjkyNy0uODFoLS41NzZ2MS44NHoiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPg0KCTx1c2UgZmlsbD0iIzAwMCIgeGxpbms6aHJlZj0iI2JhZGdlLXBybyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbC1vcGFjaXR5PSIuMiIvPg0KCTx1c2UgZmlsbD0iI2ZmZiIgeGxpbms6aHJlZj0iI2JhZGdlLXBybyIvPg0KPC9zdmc+);
                    }

                    #videos-content>#videos>.video:hover>div:after {
                        top: -24px;
                        right: -24px;
                        transition: .2s ease .2s;
                    }

                    #videos-footer {
                        display: flex;
                        flex-direction: row;
                        align-items: stretch;
                        height: 70px;
                        min-height: 70px;
                        width: 100%;
                        bottom: 0;
                        left: 0;
                        padding: 0 30px 20px;
                        box-sizing: border-box;
                        font-size: 0;
                    }

                    #videos-footer-youtube,
                    #videos-footer-soundcloud {
                        height: 100%;
                        width: 72px;
                        min-width: 72px;
                        margin-right: 10px;
                        border-radius: 11px;
                        text-align: center;
                        line-height: 50px;
                        cursor: pointer;
                        overflow: hidden;
                        transition: .2s;
                    }

                    #videos-footer-youtube.hidden,
                    #videos-footer-soundcloud.hidden {
                        width: 0;
                        min-width: 0;
                        margin-right: 0;
                    }

                    #videos-footer-youtube {
                        background-color: #e62d27;
                    }

                    #videos-footer-youtube:hover {
                        background-color: #fd4039;
                    }

                    #videos-footer-youtube:active {
                        background-color: #cf2721;
                    }

                    #videos-footer-soundcloud {
                        background-color: #ff5500;
                    }

                    #videos-footer-soundcloud:hover {
                        background-color: #ff6b20;
                    }

                    #videos-footer-soundcloud:active {
                        background-color: #e04a00;
                    }

                    #videos-footer-youtube>svg,
                    #videos-footer-soundcloud>svg {
                        vertical-align: middle;
                    }

                    #videos-footer-broadcast-wrapper {
                        position: relative;
                        display: flex;
                        flex-direction: row;
                        align-items: stretch;
                        width: 100%;
                    }

                    #videos-footer-broadcast {
                        position: relative;
                        display: block;
                        height: 50px;
                        width: 100%;
                        padding-left: 64px;
                        border-radius: 11px 0 0 11px;
                        box-sizing: border-box;
                        background-color: #38cd57;
                        font-size: 16px;
                        font-weight: 700;
                        color: #fff;
                        text-align: center;
                        line-height: 50px;
                        cursor: pointer;
                        transition: .2s;
                    }

                    #videos-footer-broadcast:hover {
                        background-color: #13a832;
                    }

                    #videos-footer-broadcast-wrapper.hide-submenu>#videos-footer-broadcast {
                        padding: 0;
                        border-radius: 11px;
                    }

                    #videos-footer-broadcast-wrapper.hide-submenu>#videos-footer-submenu-button,
                    #videos-footer-broadcast-wrapper.hide-submenu>#videos-footer-submenu {
                        display: none;
                    }

                    #videos-footer-broadcast-wrapper>.video {
                        position: absolute;
                        display: none;
                        width: 63px;
                        top: 0;
                        left: 0;
                    }

                    #videos-footer-broadcast-wrapper.moderation>.video {
                        display: block;
                    }

                    #videos-footer-broadcast-wrapper.moderation>#videos-footer-broadcast {
                        padding-left: 64px;
                    }

                    #videos-footer-broadcast-wrapper>.video:after {
                        border-color: #2d373a;
                    }

                    #videos-footer-broadcast-wrapper>.waiting {
                        position: absolute;
                        top: 0;
                        bottom: 0;
                        left: 0;
                        right: 0;
                        border-radius: 11px;
                        background-color: #38cd57;
                        opacity: 0;
                        visibility: hidden;
                        transition: .2s;
                    }

                    #videos-footer-broadcast-wrapper.show-ptt>.waiting {
                        right: 138px;
                    }

                    #videos-footer-broadcast-wrapper.active>.waiting {
                        background-color: #2d373a;
                    }

                    #videos-footer-broadcast-wrapper.wait>.waiting {
                        opacity: 1;
                        visibility: visible;
                    }

                    #videos-footer-broadcast-wrapper>.waiting>.waiting-content>span {
                        border-color: #fff;
                    }

                    #videos-footer-broadcast-wrapper.wait>.waiting>.waiting-content>span {
                        animation-play-state: running;
                        -webkit-animation-play-state: running;
                    }

                    #videos-footer-broadcast-wrapper>#videos-footer-submenu-button {
                        position: relative;
                        display: block;
                        height: 100%;
                        width: 64px;
                        min-width: 64px;
                        border-radius: 0 11px 11px 0;
                        box-sizing: border-box;
                        background-color: #38cd57;
                        cursor: pointer;
                        transition: .2s;
                    }

                    #videos-footer-broadcast-wrapper>#videos-footer-submenu-button:before {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 0;
                        width: 0;
                        top: 22px;
                        right: 27px;
                        border-width: 0 5px 6px;
                        border-style: solid;
                        border-color: #fff transparent;
                        opacity: 1;
                        visibility: visible;
                        transition: .2s;
                    }

                    #videos-footer-broadcast-wrapper>#videos-footer-submenu-button:hover,
                    #videos-footer-broadcast-wrapper>#videos-footer-submenu-button:focus {
                        background-color: #13a832;
                    }

                    #videos-footer-broadcast-wrapper>#videos-footer-submenu-button:focus:before {
                        opacity: 0;
                        visibility: hidden;
                    }

                    #videos-footer-broadcast-wrapper.active>#videos-footer-broadcast,
                    #videos-footer-broadcast-wrapper.active>#videos-footer-submenu-button,
                    #videos-footer-broadcast-wrapper.active>#videos-footer-submenu-button:focus {
                        background-color: #2d373a;
                    }

                    #videos-footer-push-to-talk {
                        height: 100%;
                        width: 0;
                        min-width: 0;
                        margin-left: 0;
                        border-radius: 11px;
                        line-height: 50px;
                        text-align: center;
                        background-color: #38cd57;
                        cursor: pointer;
                        opacity: 0;
                        overflow: hidden;
                        transition: .2s;
                    }

                    #videos-footer-push-to-talk:hover {
                        background-color: #13a832;
                    }

                    #videos-footer-broadcast-wrapper.show-ptt>#videos-footer-push-to-talk {
                        width: 128px;
                        min-width: 128px;
                        margin-left: 10px;
                        opacity: 1;
                        overflow: visible;
                    }

                    #videos-footer-broadcast-wrapper.active-ptt>#videos-footer-push-to-talk {
                        background-color: #2d373a;
                    }

                    #videos-footer-push-to-talk>svg {
                        vertical-align: middle;
                        pointer-events: none;
                    }

                    #videos-footer-submenu {
                        position: absolute;
                        width: 250px;
                        bottom: 29px;
                        right: 16px;
                        padding: 7px;
                        border-radius: 4px;
                        background-color: #fff;
                        font-size: 14px;
                        color: #000;
                        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, .09);
                        opacity: 0;
                        visibility: hidden;
                        z-index: 2;
                        transition: .2s;
                    }

                    #videos-footer-submenu:before,
                    #videos-footer-submenu:after {
                        content: '';
                        position: absolute;
                        display: block;
                        height: 0;
                        width: 0;
                        right: 9px;
                        bottom: -8px;
                        border-width: 7px 7px 0 7px;
                        border-style: solid;
                        border-color: rgba(0, 0, 0, .06) transparent;
                    }

                    #videos-footer-submenu:after {
                        bottom: -7px;
                        border-color: #fff transparent;
                    }

                    #videos-footer-submenu-button:focus+#videos-footer-submenu {
                        opacity: 1;
                        visibility: visible;
                    }

                    #videos-footer-broadcast-wrapper.show-ptt>#videos-footer-submenu {
                        right: 154px;
                    }

                    #videos-footer-submenu>* {
                        position: relative;
                        display: block;
                        height: 40px;
                        padding: 0 15px;
                        border-radius: 4px;
                        box-sizing: border-box;
                        font-size: 13px;
                        color: #000;
                        line-height: 40px;
                        cursor: pointer;
                        text-align: center;
                        transition: .2s;
                    }

                    #videos-footer-submenu>div {
                        padding: 0;
                        height: auto;
                    }

                    #videos-footer-submenu>span:hover {
                        background-color: #04caff;
                        color: #fff;
                    }

                    #videos-footer-submenu>span+span {
                        margin-top: 5px;
                    }

                    #submenu-icons {
                        display: none;
                        flex-direction: row;
                        align-items: stretch;
                    }

                    #submenu-icons>div {
                        width: 100%;
                        margin-top: 5px;
                        border-radius: 4px;
                        transition: .2s;
                    }

                    #submenu-icons>div:not(.hidden)+div {
                        margin-left: 10px;
                    }

                    #submenu-icons>div.submenu-icon>svg {
                        line-height: 40px;
                        vertical-align: middle;
                    }

                    #submenu-icons>div.submenu-icon>svg>path {
                        transition: .2s;
                    }

                    #submenu-icons>div.submenu-icon:hover>svg>path {
                        fill: #fff;
                    }

                    #submenu-icons>div.submenu-icon.soundcloud:hover {
                        background-color: #f50;
                    }

                    #submenu-icons>div.submenu-icon.youtube:hover {
                        background-color: #cc181e;
                    }

                    #submenu-icons>div.submenu-icon.soundcloud.hidden,
                    #submenu-icons>div.submenu-icon.youtube.hidden {
                        display: none;
                    }

                    @keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }

                    @-webkit-keyframes waiting {
                        0% {
                            left: 0;
                            opacity: 0;
                        }

                        50% {
                            opacity: 1;
                        }

                        100% {
                            left: 100%;
                            opacity: 0;
                        }
                    }

                    @media screen and (max-width: 600px) {

                        :host,
                        #videolist {
                            min-height: 285px;
                        }

                        #videos-header {
                            position: absolute;
                            height: 50px;
                            width: 50%;
                            top: auto;
                            bottom: 0;
                            padding: 0 2px 10px 15px;
                            box-sizing: border-box;
                        }

                        #videos-header>span {
                            background-color: #f6f6f6;
                            line-height: 40px;
                        }

                        #videos-footer-broadcast,
                        #videos-header>span:first-child {
                            border-radius: 8px 0 0 8px;
                        }

                        #videos-footer-submenu-button,
                        #videos-header>span:last-child {
                            border-radius: 0 8px 8px 0;
                        }

                        #videos-footer {
                            position: relative;
                            height: 50px;
                            min-height: 50px;
                            width: 50%;
                            left: 50%;
                            padding: 0 15px 10px 2px;
                        }

                        #videolist.hide-header>#videos-footer {
                            width: 100%;
                            left: 0;
                            padding: 0 15px 10px;
                        }

                        #videos-footer-broadcast-wrapper.hide-submenu>#videos-footer-broadcast,
                        #videos-footer-broadcast-wrapper>.waiting,
                        #videos-footer-push-to-talk,
                        #videos-footer-broadcast-wrapper.hide-submenu>#videos-footer-broadcast {
                            border-radius: 8px;
                        }

                        #videos-footer-broadcast-wrapper.moderation>#videos-footer-broadcast {
                            padding-left: 65px;
                        }

                        #videos-footer-broadcast-wrapper>.video {
                            width: 50px;
                            padding: 3px;
                        }

                        #videos-footer-broadcast-wrapper>.video:after {
                            border-width: 3px;
                            border-radius: 8px;
                        }

                        #videos-footer-broadcast,
                        #videos-footer-broadcast-wrapper.hide-submenu>#videos-footer-broadcast {
                            height: 40px;
                            padding-left: 14px;
                            line-height: 40px;
                            text-align: left;
                            text-overflow: ellipsis;
                            white-space: nowrap;
                            overflow: hidden;
                        }

                        #videos-footer-broadcast-wrapper.hide-submenu>#videos-footer-broadcast {
                            padding-right: 14px;
                        }

                        #videos-footer-youtube,
                        #videos-footer-soundcloud {
                            display: none;
                        }

                        #submenu-icons {
                            display: flex;
                        }

                        #videos {
                            top: 12px;
                            right: 13px;
                            bottom: 12px;
                            left: 13px;
                        }

                        .video {
                            padding: 2px;
                        }

                        .video:after {
                            border-width: 2px;
                            border-radius: 4px;
                        }

                        #videos-footer-broadcast-wrapper>#videos-footer-submenu-button {
                            width: 48px;
                            min-width: 48px;
                        }

                        #videos-footer-broadcast-wrapper>#videos-footer-submenu-button:before {
                            top: 17px;
                            right: 18px;
                        }

                        #videos-footer-broadcast-wrapper.show-ptt>.waiting {
                            right: 58px;
                        }

                        #videos-footer-submenu {
                            right: 8px;
                        }

                        #videos-footer-broadcast-wrapper.show-ptt>#videos-footer-submenu {
                            right: 66px;
                        }

                        #videos-footer-push-to-talk {
                            line-height: 40px;
                        }

                        #videos-footer-broadcast-wrapper.show-ptt>#videos-footer-push-to-talk {
                            width: 48px;
                            min-width: 48px;
                        }

                        #videos-footer-push-to-talk>svg {
                            height: 30px;
                        }
                    }

                    #videolist.full-screen,
                    #videolist.full-screen>#videos-header,
                    #videolist.full-screen .videos-header-volume:before {
                        background-color: #101314;
                    }

                    #videolist.full-screen #videos-header-sound>svg.muted>path:nth-child(2) {
                        fill: #101314;
                    }

                    #videolist.full-screen #videos-header-fullscreen>svg {
                        display: none;
                    }

                    #videolist.full-screen #videos-header-fullscreen>svg+svg {
                        display: inline-block;
                    }

                    #videolist.full-screen .video:after {
                        border-color: #101314;
                    }

                    #videolist.full-screen .videos-header-volume {
                        border-color: #202628;
                    }

                    #videolist.full-screen #videos-footer-submenu {
                        background-color: #202628;
                    }

                    #videolist.full-screen #videos-footer-submenu:after {
                        border-color: #202628 transparent;
                    }

                    #videolist.full-screen #videos-footer-submenu>span {
                        color: #fff;
                    }
                </style>
            </template></dom-module>
        <dom-module id="tinychat-videolist" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-videolist"></style>
                <div id="videolist">
                    <div id="lurker"><svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="9" cy="9" r="9" fill="#fff" fill-rule="evenodd"></circle>
                            <path d="M8 4h2v7H8zM8 12h2v2H8z" fill="#f29e20" fill-rule="evenodd"></path>
                        </svg> <span>View-only mode</span> <button id="button-custom" on-click="onSolveCaptcha">Solve Captcha</button></div>
                    <div id="videos-header"><span id="videos-header-sound"><svg id="videos-header-sound-mute" on-click="muteSwitchTap" width="20" height="26" viewBox="0 0 20 26" xmlns="http://www.w3.org/2000/svg">
                                <path d="M533.31 159.634c.933.582 1.69.166 1.69-.94v-19.388c0-1.1-.76-1.52-1.69-.94l-6.724 4.187c-.934.58-2.587 1.053-3.687 1.053h-1.904c-1.102 0-1.996.9-1.996 2.004v6.78c0 1.107.895 2.004 1.996 2.004h1.903c1.1 0 2.754.473 3.686 1.054l6.723 4.186z" transform="translate(-517 -136)" stroke="#41b7ef" stroke-width="2" fill="none" fill-rule="evenodd"></path>
                                <path d="M24.212 5.14c.57-.287 1.296-.12 1.628.384.33.5.134 1.138-.434 1.425L1.788 19.86c-.57.287-1.296.12-1.628-.384-.33-.5-.134-1.138.434-1.425L24.212 5.14z" fill="#fff" fill-rule="evenodd"></path>
                                <path d="M24.212 5.14c.57-.287 1.296-.12 1.628.384.33.5.134 1.138-.434 1.425L1.788 19.86c-.57.287-1.296.12-1.628-.384-.33-.5-.134-1.138.434-1.425L24.212 5.14z" transform="translate(-1, -1)" fill="#41b7ef" fill-rule="evenodd"></path>
                            </svg>
                            <div id="videos-header-volume" class="videos-header-volume" on-mousemove="volTickMouseMove" on-touchmove="volTickTouchMove" on-click="volTickClick" on-wheel="volWheel">
                                <div id="videos-header-volume-level" class="videos-header-volume-level" style="top:0%;">
                                    <div on-mousedown="volTickMouseDown" on-touchstart="volTickTouchStart" on-touchend="volTickTouchEnd"></div>
                                </div>
                            </div>
                        </span><span id="videos-header-mic" class="hidden"><svg width="24" height="30" viewBox="0 0 24 30" xmlns="http://www.w3.org/2000/svg" on-click="micmuteTap">
                                <path d="M7 6.997v8.006a5 5 0 0 0 10 0V6.997a5 5 0 0 0-10 0zm6 19.963v2.03a1 1 0 1 1-2 0v-2.03c-6.15-.496-11-5.53-11-11.667a1 1 0 1 1 2 0C2 20.643 6.475 25 12 25c5.53 0 10-4.352 10-9.707a1 1 0 1 1 2 0c0 6.143-4.845 11.172-11 11.667zM5 6.997a7 7 0 1 1 14 0v8.006a7 7 0 1 1-14 0V6.997z" fill="#41b7ef" fill-rule="evenodd"></path>
                                <rect transform="rotate(-45 11.9 13.9)" x="-3.657" y="12.899" width="31.113" height="2" rx="1" fill="#fff" fill-rule="evenodd"></rect>
                                <rect transform="rotate(-45 11.9 13.9)" x="-3.657" y="12.899" width="31.113" height="2" rx="1" fill="#41b7ef" fill-rule="evenodd"></rect>
                            </svg> </span><span id="videos-header-snapshot" class="hidden"><svg on-click="snapshotTap" width="26" height="23" viewBox="0 0 26 23" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 7.153V19.26C1 20.775 2.198 22 3.676 22h18.648C23.802 22 25 20.78 25 19.26V7.154c0-1.512-1.196-2.738-2.676-2.738h-2.457c-.887 0-1.89-.675-2.24-1.508l-.167-.4C17.11 1.676 16.106 1 15.222 1h-4.444c-.886 0-1.888.675-2.238 1.508l-.167.4c-.35.832-1.35 1.507-2.24 1.507H3.676C2.198 4.415 1 5.635 1 7.153zM13 17c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z" stroke="#41b7ef" stroke-width="2" fill="none" fill-rule="evenodd"></path>
                            </svg> </span><span id="videos-header-fullscreen"><svg on-click="fullscreenTap" width="24" height="20" viewBox="0 0 24 20" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15 2h6.002c.55 0 .998.45.998.998V7h2V2.998C24 1.345 22.657 0 21.002 0H15v2zm0 16h6.002c.55 0 .998-.45.998-.998V13h2v4.002C24 18.655 22.657 20 21.002 20H15v-2zM9 2H2.998C2.448 2 2 2.45 2 2.998V7H0V2.998C0 1.345 1.343 0 2.998 0H9v2zm0 16H2.998c-.55 0-.998-.45-.998-.998V13H0v4.002C0 18.655 1.343 20 2.998 20H9v-2z" fill="#41b7ef" fill-rule="evenodd"></path>
                            </svg> <svg on-click="fullscreenTap" width="24" height="20" viewBox="0 0 24 20" xmlns="http://www.w3.org/2000/svg">
                                <path d="M24 5v2h-6.002A3 3 0 0 1 15 4.002V0h2v4.002a1 1 0 0 0 .998.998H24zm0 10h-6.002a1 1 0 0 0-.998.998V20h-2v-4.002A3 3 0 0 1 17.998 13H24v2zM0 5h6.002A1 1 0 0 0 7 4.002V0h2v4.002A3 3 0 0 1 6.002 7H0V5zm0 10v-2h6.002A3 3 0 0 1 9 15.998V20H7v-4.002A1 1 0 0 0 6.002 15H0z" fill="#53b6ef"></path>
                            </svg></span></div>
                    <div id="videos-content" data-video-count$="[[_items.length]]">
                        <div id="videos" on-dom-change="recalcVideosPosition">
                            <div class="videos-items">
                                <div id="youtube" class$="[[convertYTClass(ytplayer, ytplayer_pause, ytplayer_hide, ytplayer_mute)]]">
                                    <div class="">
                                        <div id="ytplayer"></div>
                                        <div class="overlay">
                                            <div id="youtube-overlay"></div><button class="icon-visibility" on-click="onHideYT"><svg width="20" height="14" viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M10 14C3.285 14 .52 8.65.52 8.65c-.657-.9-.68-2.417-.128-3.362C.392 5.288 2.452 0 10 0c7.545 0 9.594 5.27 9.594 5.27.6.94.51 2.465-.108 3.37 0 0-2.774 5.36-9.487 5.36zm0-2c2.423 0 4.374-.814 5.942-2.185a9.2 9.2 0 0 0 1.386-1.51c.212-.293.338-.5.38-.583l.057-.108.07-.1c.19-.282.217-.94.07-1.17L17.8 6.18l-.072-.184a3.74 3.74 0 0 0-.268-.485 6.67 6.67 0 0 0-1.178-1.393C14.827 2.8 12.798 2 10 2s-4.83.803-6.29 2.125c-.495.45-.887.928-1.182 1.4-.163.26-.25.436-.27.49L2.2 6.16l-.08.137c-.17.29-.15.946.018 1.176l.09.123.07.136c.042.08.168.29.378.58A9.167 9.167 0 0 0 4.06 9.82C5.624 11.187 7.573 12 9.997 12zm0-3a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill="#fff" fill-rule="evenodd"></path>
                                                </svg> <svg width="20" height="14" viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M3.63 12.024C1.474 10.5.52 8.65.52 8.65c-.657-.9-.68-2.417-.128-3.362C.392 5.288 2.452 0 10 0c1.94 0 3.52.35 4.79.867l.594-.592a.945.945 0 0 1 1.34.006.953.953 0 0 1 .004 1.34L4.616 13.724a.945.945 0 0 1-1.34-.006.953.953 0 0 1-.004-1.34l.357-.356zm9.598-9.594c-.942-.28-2.013-.43-3.23-.43-2.797 0-4.83.803-6.288 2.125-.496.45-.888.928-1.183 1.4-.163.26-.25.436-.27.49L2.2 6.16l-.08.137c-.17.29-.15.946.017 1.176l.09.123.07.136c.042.08.168.29.378.58A9.167 9.167 0 0 0 4.058 9.82c.32.28.656.535 1.01.766l8.16-8.156zm-6.08 11.222l1.713-1.714c.368.04.747.062 1.14.062 2.423 0 4.374-.814 5.942-2.185a9.2 9.2 0 0 0 1.386-1.51c.212-.293.338-.5.38-.583l.057-.108.07-.1c.19-.282.217-.94.07-1.17L17.8 6.18l-.072-.184a3.74 3.74 0 0 0-.268-.485 6.577 6.577 0 0 0-.972-1.2l1.415-1.414c1.244 1.225 1.69 2.374 1.69 2.374.6.94.512 2.465-.107 3.37 0 0-2.774 5.36-9.487 5.36-1.046 0-1.995-.13-2.853-.348z" fill="#fff" fill-rule="evenodd"></path>
                                                </svg></button>
                                            <dom-if if$="[[ytplayer_close_allow]]"><template strip-whitespace=""><button class="icon-close" on-click="onCloseYT"><svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M7 5.574L1.723.297a1.007 1.007 0 0 0-1.427 0 1.006 1.006 0 0 0 0 1.426L5.576 7l-5.28 5.277a1.007 1.007 0 0 0 0 1.427 1.006 1.006 0 0 0 1.427 0L7 8.424l5.277 5.278a1.007 1.007 0 0 0 1.427 0 1.006 1.006 0 0 0 0-1.426L8.424 7l5.278-5.277a1.007 1.007 0 0 0 0-1.427 1.006 1.006 0 0 0-1.426 0L7 5.576z" fill="#fff"></path>
                                                        </svg></button></template></dom-if>
                                            <div id="icon-seek">
                                                <div class="seek-wrapper" on-click="ytplayer_onseek">
                                                    <div class="seek">
                                                        <div class="seek-text" style$="[[_poslevel_style('left', ytplayer_position, ytplayer_duration)]]"><span>[[ytplayer_postitle_computed(ytplayer_position, ytplayer_duration)]]</span></div>
                                                        <div class="seek-level" style$="[[_poslevel_style('width', ytplayer_position, ytplayer_duration)]]">
                                                            <div></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="icon-state"><button id="yt-play-pause" on-click="onPlayPauseYT"><svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M0 2.994A2.997 2.997 0 0 1 3.005 0h.99A3 3 0 0 1 7 2.994v12.012A2.997 2.997 0 0 1 3.995 18h-.99A3 3 0 0 1 0 15.006V2.994zm2 0v12.012A1 1 0 0 0 3.005 16h.99A.997.997 0 0 0 5 15.006V2.994A1 1 0 0 0 3.995 2h-.99A.997.997 0 0 0 2 2.994zm9 0A2.997 2.997 0 0 1 14.005 0h.99A3 3 0 0 1 18 2.994v12.012A2.997 2.997 0 0 1 14.995 18h-.99A3 3 0 0 1 11 15.006V2.994zm2 0v12.012a1 1 0 0 0 1.005.994h.99A.997.997 0 0 0 16 15.006V2.994A1 1 0 0 0 14.995 2h-.99A.997.997 0 0 0 13 2.994z" fill="#fff"></path>
                                                    </svg> <svg width="18" height="20" viewBox="0 0 18 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M1.897 3.163v13.673c0 1.076.74 1.52 1.653.99l11.87-6.87c.91-.527.912-1.385 0-1.913L3.55 2.173c-.91-.527-1.653-.085-1.653.99zM0 3.163C0 .593 2.306-.787 4.48.473l11.87 6.87c2.2 1.273 2.2 4.04 0 5.315l-11.87 6.87C2.304 20.786 0 19.406 0 16.835V3.163z" fill="#fff"></path>
                                                    </svg></button></div>
                                            <div class="icon-volume">
                                                <tc-volume-control vol="{{ytplayer_internal_volume}}"></tc-volume-control>
                                                <div id="seek-duration">[[ytplayer_durtitle_computed(ytplayer_position, ytplayer_duration)]]</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <dom-repeat items="[[_itemsFeatured]]"><template strip-whitespace="">
                                        <div class$="[[convertVideoSizeClass(item.large)]]" on-change="recalcVideosPosition">
                                            <tc-video-item item="[[item]]" chatroom="[[videolist.chatroom]]" app="[[videolist.chatroom.app]]" videolist="[[videolist]]" external-volume="[[volume]]" on-video-playing="videoFeaturedPlaying"></tc-video-item>
                                        </div>
                                    </template></dom-repeat>
                            </div>
                            <div class="videos-items">
                                <dom-repeat items="[[_itemsplain]]"><template strip-whitespace="">
                                        <div class$="[[convertVideoSizeClass(item.large)]]" on-change="recalcVideosPosition">
                                            <tc-video-item item="[[item]]" chatroom="[[videolist.chatroom]]" app="[[videolist.chatroom.app]]" videolist="[[videolist]]" external-volume="[[volume]]" on-video-playing="videoPlaying"></tc-video-item>
                                        </div>
                                    </template></dom-repeat>
                            </div>
                        </div>
                    </div>
                    <div id="videos-footer">
                        <div id="videos-footer-youtube" class="hidden" on-click="youtubeTap"><svg width="34" height="24" viewBox="0 0 34 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M32.31 1.79c1.02 1.036 1.35 3.388 1.35 3.388S34 7.938 34 10.7v2.59c0 2.76-.34 5.522-.34 5.522s-.332 2.35-1.35 3.387c-1.294 1.358-2.743 1.364-3.408 1.444C24.144 23.99 17 24 17 24s-8.84-.08-11.56-.343c-.757-.142-2.455-.1-3.75-1.458C.67 21.162.34 18.81.34 18.81S0 16.05 0 13.29V10.7c0-2.76.34-5.522.34-5.522S.672 2.826 1.69 1.79C2.986.43 4.434.425 5.1.345 9.856 0 16.993 0 17.008 0c0 0 7.136 0 11.894.345.665.08 2.114.086 3.407 1.446zM14.64 17.08l6.352-3.454c1.46-.793 1.457-2.08 0-2.88L14.64 7.27C13.18 6.47 12 7.172 12 8.832v6.675c0 1.673 1.183 2.365 2.64 1.572z" fill="#fff" fill-rule="evenodd"></path>
                            </svg></div>
                        <div id="videos-footer-soundcloud" class="hidden" on-click="soundcloudTap"><svg width="38" height="20" viewBox="0 0 38 20" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.37 1.35c0-.552.44-1.08.98-1.17 0 0 .796-.18 1.736-.18 4.394 0 8.147 2.665 9.633 6.418a7.32 7.32 0 0 1 1.223-.102C34.84 6.316 38 9.38 38 13.158 38 16.938 34.84 20 30.943 20H18.37a1 1 0 0 1-1-1V1.35zM4.344 18.907c0 .604.482 1.094 1.086 1.094.6 0 1.084-.48 1.084-1.087V5.087c0-.6-.378-.78-.845-.403l-.48.388c-.468.377-.847 1.174-.847 1.778v12.056zm8.686.008c0 .6.48 1.086 1.084 1.086.6 0 1.086-.493 1.086-1.085V2.645c0-.6-.398-.813-.896-.473l-.38.26c-.494.34-.895 1.103-.895 1.7v14.782zm-4.344 0c0 .6.482 1.086 1.085 1.086.6 0 1.087-.49 1.087-1.09V4.09c0-.602-.482-1.03-1.086-.956-.6.074-1.084.617-1.084 1.22v14.56zM0 15.998c0-1.696 1.387-2.715 1.387-2.715.433-.416.784-.276.784.33v4.77c0 .597-.357.76-.783.33 0 0-1.387-1.02-1.387-2.715z" fill="#fff" fill-rule="evenodd"></path>
                            </svg></div>
                        <div id="videos-footer-broadcast-wrapper" class$="[[broadcastProgressClass]]">
                            <div id="videos-footer-broadcast" on-click="broadcastTap">[[broadcastTitle]]</div>
                            <div id="videos-footer-submenu-button" tabindex="-1"></div>
                            <div id="videos-footer-submenu"><span on-click="cameraSettingsTap">Media Settings</span>
                                <div id="submenu-icons">
                                    <div on-click="soundcloudTap" class="submenu-icon soundcloud hidden"><svg width="46" height="26" viewBox="0 0 46 26" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M2.19 10.396c-.097 0-.176.077-.19.183l-.445 4.07L2 18.632c.014.106.093.183.19.183.095 0 .173-.074.187-.183l.508-3.982-.507-4.07c-.015-.11-.093-.184-.19-.184M.513 11.955c-.094 0-.17.073-.18.177L0 14.65l.332 2.475c.01.105.087.177.18.177s.168-.072.183-.176l.393-2.476-.393-2.518c-.015-.104-.09-.177-.182-.177M3.97 9.598c-.12 0-.215.093-.227.222l-.422 4.83.423 4.655c.012.13.107.223.228.223.118 0 .214-.094.227-.222l.48-4.656-.48-4.83c-.013-.13-.11-.222-.226-.222M5.766 9.427c-.14 0-.254.112-.266.262l-.4 4.962.4 4.802c.012.148.126.26.266.26s.253-.112.266-.26l.454-4.802-.454-4.965c-.013-.148-.127-.26-.266-.26M7.88 19.493zM7.88 10.046c-.01-.17-.142-.298-.304-.298-.164 0-.294.128-.304.3l-.377 4.604.377 4.842c.01.17.14.3.304.3.162 0 .293-.13.305-.3l.43-4.842-.43-4.606zM9.4 6.823c-.182 0-.333.15-.342.34l-.355 7.49.355 4.842c.01.188.16.338.343.338.183 0 .334-.15.344-.34v.003l.4-4.842-.4-7.49c-.01-.192-.16-.34-.343-.34M11.212 5.098c-.205 0-.373.166-.382.378l-.33 9.204.33 4.81c.01.212.177.377.382.377.204 0 .372-.165.383-.377l-.002.002.375-4.812-.373-9.204c-.01-.212-.18-.378-.383-.378M13.094 4.266c-.227 0-.412.184-.42.418l-.308 9.972.307 4.762c.01.23.194.415.42.415.228 0 .413-.183.423-.418l-.002.003.35-4.762-.348-9.972c-.01-.235-.195-.418-.422-.418M15.422 4.348c-.008-.256-.21-.456-.46-.456s-.45.2-.46.456l-.284 10.31.285 4.73c.008.253.21.454.46.454s.45-.2.46-.455l.32-4.73-.32-10.31zM15.422 19.386v.002-.002zM16.846 4.117c-.272 0-.49.218-.497.495l-.264 10.046.263 4.686c.005.275.224.493.496.493.273 0 .49-.218.498-.495v.003l.296-4.687-.296-10.046c-.007-.278-.225-.495-.498-.495M18.744 4.445c-.295 0-.53.235-.536.534l-.24 9.678.24 4.657c.005.297.24.53.536.53.295 0 .53-.233.537-.534v.006l.27-4.658-.27-9.68c-.006-.298-.24-.533-.536-.533M20.974 2.666c-.092-.062-.2-.098-.318-.098-.113 0-.22.035-.31.094-.156.102-.262.28-.264.48l-.003.108-.215 11.406.217 4.63v.02c.007.128.056.247.134.34.106.128.265.21.44.21.157 0 .3-.065.403-.17.103-.102.17-.245.172-.403l.024-.458.22-4.166L21.23 3.14c-.003-.2-.105-.373-.258-.476M21.232 19.286v-.003.002zM22.873 1.574c-.092-.055-.198-.088-.312-.088-.146 0-.28.053-.386.14-.137.112-.226.283-.228.473v.06l-.25 12.5.126 2.31.124 2.25c.005.332.28.607.615.607.334 0 .61-.275.614-.612v.004l.274-4.56L23.174 2.1c-.002-.222-.124-.417-.3-.524M39.76 8.714c-.764 0-1.493.155-2.157.433C37.16 4.122 32.945.18 27.805.18c-1.26 0-2.484.247-3.568.666-.42.163-.532.33-.537.656V19.2c.005.34.27.606.603.64H39.76c3.08 0 5.575-2.47 5.575-5.55 0-3.08-2.495-5.576-5.575-5.576M40.597 24.915h-.406v-2.52h.438c.87 0 1.23.417 1.23 1.26 0 .754-.394 1.26-1.26 1.26zm.06-3.323h-1.29v4.124h1.23c1.062 0 2.11-.613 2.11-2.062 0-1.507-.872-2.062-2.05-2.062zm-3.146 2.316c0 .66-.322 1.066-.847 1.066-.524 0-.842-.42-.842-1.078v-2.304h-.823v2.316c0 1.202.67 1.873 1.666 1.873 1.05 0 1.674-.69 1.674-1.884v-2.304h-.826v2.316zm-5.116 1.054c-.667 0-.944-.57-.944-1.308 0-.736.277-1.307.944-1.307.664 0 .94.57.94 1.307s-.276 1.308-.94 1.308zm0-3.433c-1.127 0-1.792.87-1.792 2.124 0 1.256.665 2.127 1.792 2.127 1.124 0 1.79-.87 1.79-2.126 0-1.255-.666-2.125-1.79-2.125zm-3.827.062h-.825v4.124h2.48v-.813h-1.655v-3.31zm-3.058.755c.37 0 .605.165.753.447l.765-.354c-.26-.535-.73-.91-1.507-.91-1.077 0-1.83.87-1.83 2.124 0 1.302.722 2.127 1.8 2.127.75 0 1.243-.347 1.526-.93l-.694-.413c-.22.366-.437.525-.807.525-.62 0-.98-.566-.98-1.308 0-.765.356-1.307.974-1.307zm-4.66 2.568h-.407v-2.52h.437c.87 0 1.23.417 1.23 1.26 0 .754-.394 1.26-1.26 1.26zm.06-3.323h-1.29v4.124h1.23c1.06 0 2.11-.613 2.11-2.062 0-1.507-.874-2.062-2.05-2.062zm-3.163 1.745c0 .23.01.748.01.9-.05-.105-.188-.312-.287-.465l-1.462-2.18h-.79v4.124h.814v-1.814c0-.23-.012-.748-.012-.9.053.105.19.31.29.465l1.512 2.25h.737V21.59h-.813v1.745zm-4.383.57c0 .66-.325 1.067-.848 1.067-.524 0-.842-.42-.842-1.078v-2.304h-.825v2.316c0 1.202.67 1.873 1.666 1.873 1.048 0 1.672-.69 1.672-1.884v-2.304h-.824v2.316zm-5.118 1.055c-.665 0-.942-.57-.942-1.308 0-.736.277-1.307.942-1.307.665 0 .942.57.942 1.307s-.277 1.308-.942 1.308zm0-3.433c-1.125 0-1.79.87-1.79 2.124 0 1.256.665 2.127 1.79 2.127 1.124 0 1.79-.87 1.79-2.126 0-1.255-.666-2.125-1.79-2.125zm-3.794 1.665c-.654-.154-.83-.236-.83-.495 0-.182.147-.372.59-.372.375 0 .67.155.936.425l.594-.577c-.39-.406-.86-.647-1.502-.647-.813 0-1.473.457-1.473 1.206 0 .812.53 1.054 1.29 1.23.778.176.92.296.92.56 0 .312-.23.448-.72.448-.394 0-.764-.136-1.053-.472l-.596.53c.313.46.914.75 1.603.75 1.125 0 1.62-.53 1.62-1.315 0-.895-.724-1.118-1.378-1.272z" fill="#f50" fill-rule="evenodd"></path>
                                        </svg></div>
                                    <div id="youtube-button" on-click="youtubeTap" class="submenu-icon youtube hidden"><svg width="49" height="21" viewBox="0 0 49 21" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M18.06 16.22h-1.82v-1.055c-.69.79-1.276 1.19-1.914 1.19-.56 0-.95-.263-1.143-.74-.12-.29-.202-.744-.202-1.41V6.538h1.822v7.86c.042.27.157.368.388.368.35 0 .664-.303 1.05-.847v-7.38h1.82v9.68zM9.817 13.343c.096.96-.202 1.434-.767 1.434-.566 0-.863-.475-.767-1.434V9.51c-.096-.96.2-1.41.767-1.41.566 0 .864.45.768 1.41v3.833zm1.82-3.643c0-1.034-.207-1.81-.574-2.3-.485-.663-1.246-.934-2.013-.934-.868 0-1.53.27-2.013.934-.373.49-.573 1.274-.573 2.31l-.002 3.44c0 1.03.178 1.74.55 2.225.486.66 1.27 1.01 2.038 1.01.767 0 1.566-.35 2.05-1.01.37-.484.538-1.195.538-2.224V9.7zM4.45 10.947v5.272H2.53v-5.273S.545 4.483.135 3.277h2.013l1.345 5.05 1.34-5.05h2.012l-2.396 7.67zM36.794 8.077c-.286 0-.613.15-.903.437v5.814c.29.29.618.437.904.437.5 0 .726-.367.726-1.326V9.316c0-.96-.226-1.24-.726-1.24M43.943 9.23c0-.887-.23-1.153-.804-1.153-.58 0-.826.244-.826 1.14v1.06l1.63-.002V9.23z" fill="#cc181e" fill-rule="evenodd"></path>
                                            <path d="M43.155 14.765c.427 0 .676-.232.775-.696.016-.096.013-.51.013-1.206h1.82v.272c0 .56-.045.955-.06 1.128-.06.385-.195.733-.406 1.04-.48.696-1.192 1.038-2.1 1.038-.907 0-1.598-.326-2.1-.98-.368-.48-.605-1.193-.605-2.21V9.797c0-1.025.215-1.816.584-2.3.502-.656 1.193-1.003 2.08-1.003.87 0 1.56.347 2.047 1.003.363.484.564 1.233.564 2.257v1.96h-3.453v1.72c-.007.885.245 1.33.84 1.33zm-3.813-1.422c0 .886-.076 1.51-.192 1.917-.23.713-.736 1.082-1.428 1.082-.616 0-1.25-.37-1.83-1.088v.965h-1.727V3.373h1.726v4.188c.56-.69 1.194-1.083 1.832-1.083.692 0 1.156.4 1.388 1.116.116.385.232 1.005.232 1.913v3.833zm-6.615 2.876h-1.82v-1.055c-.69.79-1.276 1.19-1.915 1.19-.56 0-.948-.263-1.143-.74-.12-.29-.203-.744-.203-1.41V6.634h1.82v7.764c.044.27.158.368.39.368.348 0 .664-.303 1.05-.847V6.633h1.82v9.586zm-6.9 0h-1.918V5.194h-2.014v-1.82h6.04v1.82h-2.11V16.22zm22.05-11.896s-.28-1.964-1.138-2.83C45.65.36 44.43.355 43.87.29 39.867 0 33.858 0 33.858 0h-.012s-6.01 0-10.014.288c-.56.066-1.78.072-2.868 1.207-.858.865-1.137 2.83-1.137 2.83s-.286 2.304-.286 4.61v2.162c0 2.306.285 4.612.285 4.612s.28 1.963 1.137 2.828c1.09 1.135 2.52 1.1 3.157 1.217 2.29.22 9.73.287 9.73.287s6.016-.01 10.02-.297c.56-.067 1.78-.072 2.87-1.207.858-.865 1.137-2.83 1.137-2.83s.286-2.305.286-4.61V8.934c0-2.306-.286-4.61-.286-4.61z" fill="#cc181e" fill-rule="evenodd"></path>
                                        </svg></div>
                                </div>
                            </div>
                            <div id="videos-footer-push-to-talk" on-mousedown="pttMouseDown" on-touchstart="pttTouchStart" on-touchend="pttTouchEnd"><svg width="24" height="32" viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 6.997v10.006C7 19.763 9.24 22 12 22c2.757 0 5-2.24 5-4.997V6.997C17 4.237 14.76 2 12 2 9.243 2 7 4.24 7 6.997zm6 21.963v2.03c0 .558-.444 1.01-1 1.01-.552 0-1-.443-1-1.01v-1.98-.05c-6.15-.496-11-5.53-11-11.667 0-.552.448-1 1-1s1 .448 1 1C2 22.643 6.475 27 12 27c5.53 0 10-4.352 10-9.707 0-.552.448-1 1-1s1 .448 1 1c0 6.143-4.845 11.172-11 11.667zM5 6.997C5 3.135 8.14 0 12 0c3.865 0 7 3.134 7 6.997v10.006C19 20.865 15.86 24 12 24c-3.865 0-7-3.134-7-6.997V6.997z" fill="#fff" fill-rule="nonzero"></path>
                                </svg></div>
                            <div class="waiting">
                                <div class="waiting-content"><span></span><span></span><span></span><span></span><span></span></div>
                            </div>
                            <dom-if if="[[showSelfPreview]]"><template strip-whitespace="">
                                    <div class="video">
                                        <div class="ratio-16-9">
                                            <tc-video-preview item="[[videolist.selfItem]]"></tc-video-preview>
                                        </div>
                                    </div>
                                </template></dom-if>
                        </div>
                    </div>
                </div>
            </template>
            <script>
                class ChatroomVideolist extends Polymer.Element {
                    static get is() {
                        return "tinychat-videolist"
                    }
                    static get properties() {
                        return {
                            videolist: {
                                type: Object,
                                observer: "videolistAssigned"
                            },
                            roomsettings: {
                                type: Object,
                                value: null
                            },
                            _items: {
                                type: Array,
                                value: []
                            },
                            _itemsplain: {
                                type: Array,
                                value: []
                            },
                            _itemsFeatured: {
                                type: Array,
                                value: []
                            },
                            ytplayer: {
                                type: Object,
                                value: null
                            },
                            ytplayer_ready: {
                                type: Boolean,
                                value: !1
                            },
                            ytplayer_hide: {
                                type: Boolean,
                                value: !1,
                                observer: "ytplayer_hide_changed"
                            },
                            ytplayer_pause: {
                                type: Boolean,
                                value: !1,
                                observer: "ytplayer_pause_changed"
                            },
                            ytplayer_duration: {
                                type: Number,
                                value: 0
                            },
                            ytplayer_position: {
                                type: Number,
                                value: 0
                            },
                            ytplayer_volume: {
                                type: Number,
                                value: 100,
                                computed: "ytplayer_volumeCompute(ytplayer_internal_volume, volume)"
                            },
                            ytplayer_internal_volume: {
                                type: Number,
                                value: 100
                            },
                            ytplayer_timer_handler: {
                                type: Number,
                                value: 0
                            },
                            ytplayer_close_allow: {
                                type: Boolean,
                                value: !1
                            },
                            onFullscreenExitHandler: Object,
                            showContextMenuOnContextHandler: Object,
                            clickWindowSomewhereHandler: Object,
                            mouseupHandler: Object,
                            windowResizeHandler: Object,
                            broadcasting: {
                                type: Boolean,
                                value: !1
                            },
                            broadcastProgress: {
                                type: Boolean,
                                value: !1
                            },
                            broadcastProgressClass: {
                                type: String,
                                computed: "convertBroadcastClass(broadcastProgress, broadcasting, pttActive, roomsettings.pushtotalk, isSelfModerating, isSelfWaiting)"
                            },
                            broadcastTitle: {
                                type: String,
                                computed: "convertBroadcastTitle(broadcasting, isSelfModerating, isSelfWaiting)"
                            },
                            pttActive: {
                                type: Boolean,
                                value: !1,
                                observer: "pttActiveChanged"
                            },
                            volTickCaptured: {
                                type: Boolean,
                                value: !1
                            },
                            volTickSize: {
                                type: Number,
                                value: 0
                            },
                            volTickRight: {
                                type: Number,
                                value: 0
                            },
                            volume: {
                                type: Number,
                                value: 100,
                                observer: "_volTickSetVolumeObserver"
                            },
                            volumeBefore: {
                                type: Number,
                                value: 100
                            },
                            isSelfWaiting: {
                                type: Boolean,
                                value: !1
                            },
                            isSelfModerating: {
                                type: Boolean,
                                value: !1
                            },
                            showSelfPreview: {
                                type: Boolean,
                                value: !1
                            }
                        }
                    }
                    constructor() {
                        super()
                    }
                    get app() {
                        return this.videolist ? this.videolist.chatroom.app : null
                    }
                    get chatroom() {
                        return this.videolist.chatroom
                    }
                    get userlist() {
                        return this.chatroom.userlist
                    }
                    connectedCallback() {
                        super.connectedCallback();
                        this;
                        this.onFullscreenExitHandler = this.onFullscreen.bind(this), window.fullscreenManager.addEventListener(this.onFullscreenExitHandler, !1), this.showContextMenuOnContextHandler = this.showContextMenuOnContext.bind(this), document.body.addEventListener("contextmenu", this.showContextMenuOnContextHandler), this.mouseupHandler = this.mouseup_around.bind(this), window.addEventListener("mouseup", this.mouseupHandler), this.windowResizeHandler = this.windowResize.bind(this), window.addEventListener("resize", this.windowResizeHandler)
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), window.fullscreenManager.removeEventListener(this.onFullscreenExitHandler, !1), document.body.removeEventListener("contextmenu", this.showContextMenuOnContextHandler), window.removeEventListener("click", this.clickWindowSomewhereHandler), window.removeEventListener("mouseup", this.mouseupHandler), window.removeEventListener("resize", this.windowResizeHandler)
                    }
                    videolistAssigned() {
                        let a = this,
                            b = this.videolist.chatroom.app.EventBus,
                            c = TinychatApp.BLL.VideolistItem,
                            d = TinychatApp.BLL.YoutubeEvent,
                            e = this.$["videos-content"];
                        b.subscribe(TinychatApp.BLL.VideolistEvent.ID, b => {
                            if (b.action === TinychatApp.BLL.VideolistAction.Add) {
                                let c = b.videolistitem;
                                c.progress = !0, a.splice("_items", b.index, 0, c), a._itemsplain = a.computeVideoItems(a._items), a.notifyPath("_itemsplain"), a._itemsFeatured = a.computeVideoFeatured(a._items), a.notifyPath("_itemsFeatured"), c.handle == a.chatroom.self_handle && (a.isSelfModerating = !1, a.isSelfWaiting = !1, a.showSelfPreview = !1, a.notifyPath("videolist.selfItem"))
                            } else b.action === TinychatApp.BLL.VideolistAction.AddPending ? (a.isSelfModerating = !0, a.isSelfWaiting = !1, a.showSelfPreview = !0, a.notifyPath("videolist.selfItem")) : b.action === TinychatApp.BLL.VideolistAction.AddWaiting ? (a.isSelfModerating = !1, a.isSelfWaiting = !0, a.showSelfPreview = !0, a.notifyPath("videolist.selfItem")) : b.action === TinychatApp.BLL.VideolistAction.Remove ? (a.splice("_items", b.index, 1), a._itemsplain = a.computeVideoItems(a._items), a.notifyPath("_itemsplain"), a._itemsFeatured = a.computeVideoFeatured(a._items), a.notifyPath("_itemsFeatured"), setTimeout(() => {
                                let a = e.querySelectorAll("video");
                                a instanceof NodeList && a.forEach(a => {
                                    a.load(), a.play()
                                })
                            }, 1)) : b.action === TinychatApp.BLL.VideolistAction.RemovePendingWaiting ? (a.isSelfModerating = !1, a.isSelfWaiting = !1, a.showSelfPreview = !1, a.notifyPath("videolist.selfItem")) : b.action === TinychatApp.BLL.VideolistAction.Update && (a._items[b.index] = b.videolistitem, a.notifyPath("_items." + b.index + ".large"), a.notifyPath("_items." + b.index + ".hidden"), a.notifyPath("_items." + b.index + ".mute"), a.notifyPath("_items." + b.index + ".volume"), a.notifyPath("_items." + b.index + ".audiolevel"), a.notifyPath("_items." + b.index + ".progress"), a._itemsplain = a.computeVideoItems(a._items), a.notifyPath("_itemsplain"), a._itemsFeatured = a.computeVideoFeatured(a._items), a.notifyPath("_itemsFeatured"))
                        }), b.subscribe(TinychatApp.BLL.BroadcastProgressEvent.ID, b => {
                            let c = TinychatApp.BLL.BroadcastProgressEvent;
                            b.stage == c.MEDIA_START ? a.broadcastProgress = !0 : b.stage == c.MEDIA_OK || b.stage == c.MEDIA_ICE || (b.stage == c.MEDIA_STARTED_SUCCESS ? (a.broadcasting = !0, a.broadcastProgress = !1) : b.stage == c.MEDIA_FAILED ? (console.error(b.error), a.broadcastProgress = !1, a.app.showToastWarn(b.error.message)) : b.stage == c.MEDIA_RTC_FAILED ? (console.error(b.error), a.broadcastProgress = !1) : b.stage == c.MEDIA_STOPING ? a.broadcastProgress = !0 : b.stage == c.MEDIA_STOPED && (a.broadcasting = !1, a.broadcastProgress = !1))
                        }), b.subscribe(TinychatApp.BLL.RoomConnected.ID, () => {
                            a.set("_items", []), a.set("_itemsFeatured", []), a.notifyPath("_itemsFeatured"), a.set("_itemsplain", []), a.notifyPath("_itemsplain");
                            let b = a.$.videolist,
                                c = a.$.ytplayer,
                                d = this.$["youtube-button"],
                                e = this.$["videos-footer-youtube"];
                            a.chatroom.isLurker() ? b.classList.add("lurker") : b.classList.remove("lurker"), a.chatroom.isOperator() ? (c.classList.add("operator"), d.classList.remove("hidden"), e.classList.remove("hidden")) : (c.classList.remove("operator"), d.classList.add("hidden"), e.classList.add("hidden"))
                        }), b.subscribe(TinychatApp.BLL.RoomQuitEvent.ID, () => {
                            a.set("_items", []), a.isSelfModerating = !1, a.isSelfWaiting = !1, a.notifyPath("videolist.selfItem");
                            let b = new d(d.YT_STOP);
                            a.youtubeHandler(b)
                        }), b.subscribe(TinychatApp.BLL.RoomSettingsEvent.ID, b => {
                            a.set("roomsettings", b.roomSettings);
                            let c = this.$["videos-header-mic"];
                            this.chatroom.roomSettings.pushtotalk ? c.classList.add("hidden") : c.classList.remove("hidden")
                        }), b.subscribe(TinychatApp.BLL.YoutubeEvent.ID, b => {
                            a.youtubeHandler(b), a.recalcVideosPosition()
                        }), b.subscribe(TinychatApp.BLL.IgnorelistUpdateUserEvent.ID, function(b) {
                            let c = -1;
                            Object.keys(a._items).forEach(d => {
                                let e = a._items[d];
                                if (e.handle === b.userentity.handle) return c = d, !0
                            }), -1 < c && (a.notifyPath("_items." + c + ".ignoreAllow"), a.notifyPath("_items." + c + ".unignoreAllow"))
                        }), b.subscribe(TinychatApp.BLL.ChatlistUIUpdateEvent.ID, function() {
                            a.recalcVideosPosition()
                        }), b.subscribe(TinychatApp.UI.UISideMenuToggle.ID, function() {
                            let b = setInterval(() => a.recalcVideosPosition(), 4);
                            setTimeout(() => clearInterval(b), 800)
                        }), b.subscribe(TinychatApp.UI.UIChatlogWiderToggle.ID, function() {
                            let b = setInterval(() => a.recalcVideosPosition(), 4);
                            setTimeout(() => clearInterval(b), 800)
                        }), setTimeout(() => {
                            a.volTickMeasure()
                        }, 10)
                    }
                    computeVideoItems(a) {
                        return a.filter(a => !a.userentity.isFeatured)
                    }
                    computeVideoFeatured(a) {
                        return a.filter(a => a.userentity.isFeatured)
                    }
                    showSelfPreviewCompute(a, b) {
                        return a || b
                    }
                    muteSwitchTap(a) {
                        a.preventDefault();
                        a.path ? a.path[0] : (a.composedPath && a.composedPath())[0];
                        this._volMuteToggle()
                    }
                    micmuteTap() {
                        let a = this.$["videos-header-mic"],
                            b = this.videolist.switchMicMute();
                        b ? a.classList.add("muted") : a.classList.remove("muted")
                    }
                    snapshotTap(a) {
                        a.preventDefault(), this.chatroom.takeSnapshot() ? this.app.showToastWarn("Snapshot is not implemented") : this.app.showToastWarn("Snapshot has been failed")
                    }
                    fullscreenTap(a) {
                        if (a.preventDefault(), !this.chatroom.selfUser().hasSubscriptions) this.app.Upgrade();
                        else {
                            let a = this.chatroom.switchFullscreen(!window.fullscreenManager.status()),
                                b = document.getElementsByTagName("body")[0];
                            a ? null !== b && window.fullscreenManager.request(b) : window.fullscreenManager.exit()
                        }
                    }
                    onFullscreen() {
                        let a = window.fullscreenManager.status();
                        if (this.chatroom.switchFullscreen(a), a) {
                            let a = document.getElementsByTagName("body")[0];
                            a.classList.add("full-screen"), this.$.videolist.classList.add("full-screen")
                        } else {
                            let a = document.getElementsByTagName("body")[0];
                            a.classList.remove("full-screen"), this.$.videolist.classList.remove("full-screen")
                        }
                        let b = this;
                        setTimeout(() => {
                            b.volTickMeasure(), b.recalcVideosPosition()
                        }, 150);
                        let c = setInterval(() => b.recalcVideosPosition(), 4);
                        setTimeout(() => clearInterval(c), 800)
                    }
                    cameraSettingsTap() {
                        this.app.MediaSettings()
                    }
                    micSettingsTap() {
                        this.app.MediaSettings()
                    }
                    soundcloudTap() {
                        this.app.showToastWarn("SoundCloud Not Implemented...")
                    }
                    youtubeTap() {
                        this.app.Youtube()
                    }
                    onSolveCaptcha() {
                        this.app.ReconnectDefaultChatroom()
                    }
                    broadcastTap(a) {
                        return a.preventDefault(), this.chatroom.isLurker() ? void this.app.showToastLurker() : void(this.broadcastProgress || this.videolist.chatroom.BroadcastSwitch(this.broadcasting))
                    }
                    pttTouchStart(a) {
                        this.pttActive || (a.preventDefault(), this.set("pttActive", !0))
                    }
                    pttTouchEnd(a) {
                        this.pttActive && (a.preventDefault(), this.set("pttActive", !1))
                    }
                    pttMouseDown(a) {
                        this.pttActive || (a.preventDefault(), this.set("pttActive", !0))
                    }
                    pttActiveChanged(a) {
                        void 0 == this.videolist || this.videolist.switchPTT(a)
                    }
                    mouseup_around(a) {
                        this.pttActive && (a.preventDefault(), this.set("pttActive", !1)), this.volTickCaptured && (a.preventDefault(), this.volTickCaptured = !1)
                    }
                    windowResize() {
                        this.volTickMeasure(), self = this, self.recalcVideosPosition()
                    }
                    volTickTouchStart(a) {
                        this.volTickCaptured || (a.preventDefault(), this.volTickCaptured = !0)
                    }
                    volTickTouchEnd(a) {
                        this.volTickCaptured && (a.preventDefault(), this.volTickCaptured = !1)
                    }
                    volTickMouseDown(a) {
                        this.volTickCaptured || (a.preventDefault(), this.volTickCaptured = !0)
                    }
                    volTickMouseMove(a) {
                        if (this.volTickCaptured) {
                            a.preventDefault !== void 0 && a.preventDefault();
                            var b = Math.round(100 - 100 * (a.clientY - this.volTickRight) / this.volTickSize);
                            100 < b && (b = 100), 0 > b && (b = 0), this.set("volume", b)
                        }
                    }
                    volTickTouchMove(a) {
                        if (1 == a.touches.length) {
                            a.preventDefault();
                            let b = a.touches[0];
                            this.volTickMouseMove(b)
                        }
                    }
                    volTickClick(a) {
                        a.preventDefault();
                        var b = Math.round(100 - 100 * (a.clientY - this.volTickRight) / this.volTickSize);
                        100 < b && (b = 100), 0 > b && (b = 0), this.set("volume", b)
                    }
                    volWheel(a) {
                        a.composedPath()[0];
                        a.preventDefault();
                        let b = -1 < navigator.userAgent.toLowerCase().indexOf("firefox") ? -100 : -10;
                        var c = this.volume + Math.round(a.deltaY * b / this.volTickSize);
                        100 < c && (c = 100), 0 > c && (c = 0), this.set("volume", c)
                    }
                    volTickMeasure() {
                        let a = this.$["videos-header-volume"];
                        var b = this.$["videos-header-volume-level"];
                        let c = b.style.top;
                        b.style.top = "0%";
                        let d = b.getBoundingClientRect();
                        this.volTickSize = a.clientHeight, this.volTickRight = d.top, b.style.top = c
                    }
                    _volTickSetVolumeObserver(a, b) {
                        var c = Math.round,
                            d = c(a);
                        100 < d && (d = 100), 0 > d && (d = 0);
                        var e = c(b);
                        100 < e && (e = 100), 0 > e && (e = 0), this._volSetVolume(d);
                        let f = this,
                            g = f.$["videos-header-sound-mute"];
                        var h = null;
                        0 >= e && 0 < d ? h = !1 : 0 < e && 0 >= d && (h = !0), null != h && h != this.chatroom.mute && f._volMuteToggle(h, !1)
                    }
                    _volSetVolume(a) {
                        this.$["videos-header-volume-level"].style.top = 100 - a + "%";
                        null != this.videolist && this.videolist.setVolume(a / 100)
                    }
                    _volMuteToggle(a, b) {
                        let c = this.chatroom.mute;
                        if (a === c) return;
                        let d = this,
                            e = this.$["videos-header-sound-mute"],
                            f = null != this.videolist && this.videolist.switchMute(a);
                        this._ytplayerIsReady() && (f ? this.ytplayer.mute() : this.ytplayer.unMute()), f ? e.classList.add("muted") : e.classList.remove("muted");
                        void 0 != b || (f ? (this.volumeBefore = this.volume, d.volume = 0) : d.volume = d.volumeBefore)
                    }
                    _ytplayerIsReady() {
                        let a = null != this.ytplayer && this.ytplayer_ready;
                        return a
                    }
                    convertBroadcastClass(a, b, c, d, e, f) {
                        var g = a ? b ? "wait active" : "wait" : b ? "active" : "";
                        return g = g + (d && b ? " show-ptt" : "") + (c ? " active-ptt" : ""), g += e || f ? " moderation" : "", g
                    }
                    convertBroadcastTitle(a, b, c) {
                        return b ? "Pending moderation..." : c ? "Waiting for your turn..." : a ? "Stop Broadcast" : "Start Broadcast"
                    }
                    convertVideoSizeClass(a) {
                        var b = "js-video";
                        return b += a ? " large" : "", setTimeout(() => this.recalcVideosPosition(), 0), b
                    }
                    convertYTClass(a, b, c, d) {
                        var e = "js-video video large";
                        e += null == a ? " hidden" : "", e += c ? " not-visible" : "", e += d ? " muted" : "", e += b ? " pause" : "";
                        let f = this.$["icon-seek"];
                        return b ? f.classList.add("pause") : f.classList.remove("pause"), e
                    }
                    convertVideoClass(a, b) {
                        var c = "ratio-4-3";
                        let d = TinychatApp.BLL.User.getCssClass(a.userentity);
                        return c += "" === d ? "" : ` ${d}`, c += b ? " wait" : "", c
                    }
                    convertPTT(a, b) {
                        return a && b
                    }
                    convertSource(a) {
                        return a.mediasrc
                    }
                    videoPlaying(a) {
                        try {
                            let b = a.model.item,
                                c = this._itemsplain.indexOf(b);
                            b.progress = !1, this.notifyPath("_itemsplain." + c + ".progress")
                        } catch (a) {
                            console.error(a)
                        }
                    }
                    videoFeaturedPlaying(a) {
                        try {
                            let b = a.model.item,
                                c = this._itemsFeatured.indexOf(b);
                            b.progress = !1, this.notifyPath("_itemsFeatured." + c + ".progress")
                        } catch (a) {
                            console.error(a)
                        }
                    }
                    showContextMenuOnContext(a) {
                        this.showContextMenu(a) && a.preventDefault()
                    }
                    showContextMenu(a) {
                        if (void 0 != this.videolist) {
                            var b = !1;
                            let d = a.path ? a.path[0] : (a.composedPath && a.composedPath())[0];
                            var c = parseInt(d.getAttribute("data-video-id"));
                            let e = this.userlist.get(c);
                            if (null != e && (b = !0), b) {
                                this
                            }
                            return b
                        }
                    }
                    youtubeHandler(a) {
                        let b = TinychatApp.BLL.YoutubeEvent,
                            c = this,
                            d = this.$["videos-content"],
                            e = this.$.youtube,
                            f = this.$.ytplayer,
                            g = "ytplayer_script",
                            h = document.getElementById(g),
                            i = c.chatroom.isOperator();
                        this.ytplayer_close_allow = i;
                        let j = (b, d) => {
                                e.classList.remove("hidden"), c.videolist.toggleSizeVW2Normal(), c.recalcVideosPosition();
                                c.ytplayer_timer_handler = setInterval(() => {
                                    c._ytplayerIsReady() && (c.ytplayer_position = c.ytplayer.getCurrentTime())
                                }, 1e3);
                                let g = () => {
                                        c.ytplayer.setVolume(c.ytplayer_volume), c.ytplayer_duration = c.ytplayer.getDuration(), c.ytplayer_position = 0, c.ytplayer.seekTo(b, !0);
                                        let a = c.ytplayer.getPlayerState();
                                        a == YT.PlayerState.PLAYING && d && d()
                                    },
                                    h = a => {
                                        if (a.data == YT.PlayerState.PLAYING) {
                                            c.ytplayer_ready = !0, d && (d(), d = void 0);
                                            let a = c.chatroom.mute || c.ytplayer_hide || c.ytplayer_mute;
                                            a ? c.ytplayer.mute() : c.ytplayer.setVolume(c.ytplayer_volume)
                                        } else if (a.data == YT.PlayerState.PAUSED);
                                    };
                                c.ytplayer = new YT.Player(f, {
                                    videoId: a.id,
                                    playerVars: {
                                        theme: "light",
                                        autohide: 2,
                                        controls: 0,
                                        showinfo: 0,
                                        rel: 0,
                                        disablekb: 1,
                                        enablejsapi: 1,
                                        origin: "tinychat.com",
                                        iv_load_policy: 3,
                                        autoplay: 1,
                                        loop: 0,
                                        fs: 0,
                                        playsinline: 1,
                                        modestbranding: 1,
                                        playerapiid: f.id
                                    },
                                    events: {
                                        onReady: g,
                                        onStateChange: h,
                                        onError: a => {
                                            console.error(a), c.app.showToastWarn("Something went wrong with Youtube ... (" + a.data + ")")
                                        }
                                    }
                                }), c.ytplayer.playlist = a.playlist
                            },
                            k = () => {
                                null != c.ytplayer && (c.ytplayer.destroy(), c.ytplayer = null), c.ytplayer_timer_handler && (clearInterval(c.ytplayer_timer_handler), c.ytplayer_timer_handler = 0), c.ytplayer_ready = !1, e.classList.add("hidden"), c.recalcVideosPosition()
                            };
                        if (a.cmd == b.YT_PLAY || a.cmd == b.YT_PAUSE) {
                            let d = a.cmd == b.YT_PLAY,
                                e = a.cmd == b.YT_PAUSE;
                            if (c.ytplayer_pause = e, null == h) {
                                var l = document.createElement("script");
                                l.id = g, l.src = "https://www.youtube.com/player_api";
                                var m = document.getElementsByTagName("script")[0];
                                m.parentNode.insertBefore(l, m), window.onYouTubePlayerAPIReady = () => {
                                    j(a.offset, () => {
                                        c.ytplayer_position = a.offset, e && c.ytplayer.pauseVideo()
                                    })
                                }
                            } else if (null == c.ytplayer) j(a.offset, () => {
                                c.ytplayer_position = a.offset, e && c.ytplayer.pauseVideo()
                            });
                            else {
                                let b = c._ytplayerIsReady() ? c.ytplayer.getVideoData().video_id : "";
                                b == a.id ? (e ? (c.ytplayer.pauseVideo(), c.ytplayer.seekTo(a.offset, !0), c.ytplayer_position = c.ytplayer.getCurrentTime()) : (c.ytplayer.playVideo(), c.ytplayer.seekTo(a.offset, !0), c.ytplayer_position = a.offset), c.ytplayer.playlist = a.playlist) : (k(), j(a.offset, () => {
                                    c.ytplayer_position = a.offset, e && c.ytplayer.pauseVideo()
                                }))
                            }
                        } else a.cmd == b.YT_STOP && null != c.ytplayer && k()
                    }
                    onCloseYT() {
                        if (!this.chatroom.isOperator()) return void this.app.showToast("Operator or Owner is able close Youtube");
                        let a = TinychatApp.BLL.YoutubeEvent,
                            b = this.ytplayer;
                        var c = a.YT_STOP;
                        let d = new a(c);
                        d.id = b.getVideoData().video_id, d.handle = this.chatroom.self_handle, this.youtubeHandler(d), this.chatroom.Youtube(d)
                    }
                    onHideYT() {
                        this.ytplayer_hide = !this.ytplayer_hide
                    }
                    onMuteYT() {
                        this.ytplayer_mute = !this.ytplayer_mute
                    }
                    onPlayPauseYT() {
                        if (!this.chatroom.isOperator()) return void this.app.showToast("Operator or Owner is able to play/pause Youtube");
                        if (this.ytplayer_pause = !this.ytplayer_pause, this.videolist && !this.chatroom.isOperator()) return;
                        if (!this._ytplayerIsReady()) return;
                        let a = TinychatApp.BLL.YoutubeEvent,
                            b = this.ytplayer;
                        var c = this.ytplayer_pause ? a.YT_PAUSE : a.YT_PLAY;
                        let d = new a(c);
                        d.id = b.getVideoData().video_id, d.handle = this.chatroom.self_handle, d.offset = b.getCurrentTime(), d.duration = b.getDuration(), d.playlist = b.playlist, d.seekByUser = !0, c == a.YT_PAUSE, this.chatroom.Youtube(d)
                    }
                    ytplayer_volumeCompute(a, b) {
                        let c = 100;
                        return void 0 === a && void 0 !== b ? c = b : void 0 !== a && void 0 === b ? c = a : void 0 !== a && void 0 !== b && (c = b < a ? b : a), null !== this.ytplayer && this.ytplayer.setVolume(c), c
                    }
                    ytplayer_onvolume(a) {
                        let b = a.target,
                            c = b.getBoundingClientRect(),
                            d = Math.round(100 * (a.clientX - c.left) / c.width) / 100;
                        0 > d && (d = 0), 1 < d && (d = 1), this._ytplayerIsReady() && this.ytplayer.setVolume(this.ytplayer_volume)
                    }
                    ytplayer_onseek(a) {
                        if (!this.chatroom.isOperator()) return void this.app.showToast("Operator or Owner is able to seek on Youtube");
                        let b = a.target,
                            c = b.getBoundingClientRect(),
                            d = Math.round(100 * (a.clientX - c.left) / c.width) / 100;
                        0 > d && (d = 0), 1 < d && (d = 1);
                        let e = TinychatApp.BLL.YoutubeEvent,
                            f = this.ytplayer,
                            g = f.getPlayerState();
                        var h = e.YT_PAUSE;
                        (g == YT.PlayerState.PLAYING || g == YT.PlayerState.BUFFERING) && (h = e.YT_PLAY);
                        let i = new e(h);
                        i.id = f.getVideoData().video_id, i.handle = this.chatroom.self_handle, i.duration = f.getDuration(), i.offset = i.duration * d, i.playlist = f.playlist, i.seekByUser = !0, console.log(h + " ~ d:" + i.duration + "s o:" + i.offset + "s"), h == e.YT_PAUSE && this.youtubeHandler(i), this.chatroom.Youtube(i)
                    }
                    ytplayer_hide_changed(a) {
                        this._ytplayerIsReady() && (a ? this.ytplayer.mute() : !this.ytplayer_mute && this.ytplayer.unMute())
                    }
                    ytplayer_mute_changed(a) {
                        this._ytplayerIsReady() && (a ? this.ytplayer.mute() : this.ytplayer.unMute())
                    }
                    ytplayer_pause_changed() {}
                    _poslevel_style(a, b, c) {
                        let d = Math.round(100 * b / c);
                        return a + ":" + d + "%;"
                    }
                    ytplayer_postitle_computed(a, b) {
                        return this.get_ytplayer_time(a, b)
                    }
                    ytplayer_durtitle_computed(a, b) {
                        return this.get_ytplayer_time(a, b) + " / " + this.get_ytplayer_time(b, b)
                    }
                    get_ytplayer_time(a, b) {
                        var c = Math.floor,
                            d = [];
                        let e = c(b / 3600);
                        b %= 3600;
                        let f = c(b / 60),
                            g = b % 60;
                        if (e && d.push(e), d.push(10 > f && e ? "0" + f : f), d.push(10 > g ? "0" + g : g), d = d.join(":"), c(a) == c(b)) return d;
                        var h = new Date(1970, 0, 1);
                        h.setSeconds(a);
                        var i = h.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1");
                        return i.substring(i.length - d.length)
                    }
                    recalcVideosPosition() {
                        function a(a) {
                            let c = a.childs.length,
                                d = 100,
                                e = "100%",
                                f = 0;
                            for (; c;) {
                                let g = b(a.height / c),
                                    h = b(g / .75);
                                h > a.width && (h = a.width, g = b(.75 * h));
                                let i = b(a.width / h);
                                for (; i * c < a.childs.length || g * c > a.height;) i++, h = b(a.width / i), g = b(.75 * h);
                                let j = g * h,
                                    k = a.height * a.width,
                                    l = b(1e4 * ((k - j * a.childs.length) / k)) / 100;
                                if (0 < l && d >= l) {
                                    if (1 < c && a.childs.length % i) {
                                        let d = i;
                                        for (; d;) {
                                            if (Math.ceil(a.childs.length / d) > c) {
                                                d++;
                                                break
                                            }
                                            d--
                                        }
                                        f = d < i && d ? b((a.width - d * h) / 2) : 0
                                    } else f = 0;
                                    d = l, e = b(100 * (100 * (h / (a.width - 2 * f)))) / 100 + "%"
                                }
                                c--
                            }
                            for (var g in a.wrapper.style.padding = "0 " + f + "px", a.childs) "object" == typeof a.childs[g] && (a.childs[g].style.width = e)
                        }
                        var b = Math.floor;
                        let c = this.$.videos,
                            d = this.$.youtube,
                            e = "";
                        e = c.clientWidth / c.clientHeight > 1 / .75 ? "row" : "column";
                        let f = {
                            featured: c.querySelectorAll(".videos-items:nth-child(1) > .js-video:not(.hidden)"),
                            regular: c.querySelectorAll(".videos-items:nth-child(2) > .js-video:not(.hidden)")
                        };
                        f.featured.length || c.querySelector(".videos-items:nth-child(1)").classList.add("hidden"), f.regular.length || c.querySelector(".videos-items:nth-child(2)").classList.add("hidden"), f.featured.length && f.regular.length ? (c.className = e, f.featured.length == f.regular.length && 1 == f.featured.length && "youtube" == f.featured[0].id ? (c.classList.remove("featured-2"), c.classList.remove("featured-3")) : f.featured.length >= f.regular.length && 2 >= f.featured.length ? (c.classList.add("featured-2"), c.classList.remove("featured-3")) : f.featured.length >= f.regular.length && 3 <= f.featured.length ? (c.classList.add("featured-3"), c.classList.remove("featured-2")) : (c.classList.remove("featured-2"), c.classList.remove("featured-3"))) : c.className = "";
                        let g = c.querySelectorAll(".videos-items");
                        for (var h in g) {
                            if ("object" != typeof g[h]) continue;
                            let b = g[h],
                                d = c.querySelectorAll(".videos-items:nth-child(" + (1 * h + 1) + ") > .js-video:not(.hidden)");
                            d.length && (b.classList.remove("hidden"), a({
                                wrapper: b,
                                height: b.clientHeight,
                                width: b.clientWidth,
                                childs: d
                            }))
                        }
                    }
                }
                customElements.define(ChatroomVideolist.is, ChatroomVideolist);
            </script>
        </dom-module>
        <dom-module id="client-user-contextmenu" assetpath="../../styles/"><template>
                <style>
                    .context {
                        position: absolute;
                        padding: 7px;
                        border-radius: 4px;
                        background-color: #fff;
                        text-align: left;
                        opacity: 0;
                        visibility: hidden;
                        transition: opacity .2s,
                            visibility .2s;
                    }

                    .context:before,
                    .context:after {
                        content: "";
                        position: absolute;
                        display: block;
                        height: 0;
                        width: 0;
                        left: 13px;
                        bottom: -8px;
                        border-width: 7px 7px 0 7px;
                        border-style: solid;
                        border-color: rgba(0, 0, 0, .06) transparent;
                    }

                    .context:after {
                        bottom: -7px;
                        border-color: #fff transparent;
                    }

                    .context.show {
                        opacity: 1;
                        visibility: visible;
                    }

                    .context.down:before,
                    .context.down:after {
                        top: -8px;
                        bottom: auto;
                        border-width: 0 7px 7px 7px;
                    }

                    .context.down:after {
                        top: -7px;
                    }

                    .context>span {
                        position: relative;
                        display: block;
                        height: 26px;
                        padding: 0 20px;
                        border-radius: 4px;
                        font-size: 13px;
                        font-weight: 600;
                        color: #000;
                        line-height: 26px;
                        white-space: nowrap;
                        cursor: pointer;
                        transition: .2s;
                    }

                    .context>span:hover {
                        background-color: #04caff;
                        color: #fff;
                    }

                    .context>span>svg {
                        position: absolute;
                        height: 18px;
                        width: 18px;
                        top: 4px;
                        left: 9px;
                        bottom: 4px;
                    }

                    .context>span>svg path {
                        transition: .2s;
                    }

                    .context>span:hover>svg path {
                        fill: #fff;
                    }
                </style>
            </template></dom-module>
        <dom-module id="tinychat-user-contextmenu" assetpath="../ui/"><template strip-whitespace="">
                <style include="client-user-contextmenu"></style>
                <div id="main" class="context">
                    <dom-if if="[[changenickAllow]]"><template strip-whitespace=""><span on-click="changenick">Change Nickname</span></template></dom-if>
                    <dom-if if="[[followAllow]]"><template strip-whitespace=""><span on-click="follow">Follow</span></template></dom-if>
                    <dom-if if="[[ignoreAllow]]"><template strip-whitespace=""><span on-click="ignore">Ignore</span></template></dom-if>
                    <dom-if if="[[unignoreAllow]]"><template strip-whitespace=""><span on-click="unignore">Unignore</span></template></dom-if>
                    <dom-if if="[[openprivateAllow]]"><template strip-whitespace=""><span on-click="openprivate">Private Message</span></template></dom-if>
                    <dom-if if="[[profileAllow]]"><template strip-whitespace=""><span on-click="profile">Profile</span></template></dom-if>
                    <dom-if if="[[banAllow]]"><template strip-whitespace=""><span on-click="ban">Ban</span></template></dom-if>
                    <dom-if if="[[unbanAllow]]"><template strip-whitespace=""><span on-click="unban">Unban</span></template></dom-if>
                    <dom-if if="[[kickAllow]]"><template strip-whitespace=""><span on-click="kick">Kick</span></template></dom-if>
                    <dom-if if="[[abuseAllow]]"><template strip-whitespace=""><span on-click="abuse">Abuse</span></template></dom-if>
                    <dom-if if="[[giveagiftAllow]]"><template strip-whitespace=""><span on-click="giveagift">Send Virtual Gift</span></template></dom-if>
                </div>
            </template>
            <script>
                class UserContextMenu extends Polymer.Element {
                    static get is() {
                        return "tinychat-user-contextmenu"
                    }
                    static get properties() {
                        return {
                            userlist: {
                                type: Object,
                                observer: "userlistAssigned"
                            },
                            user: {
                                type: Object,
                                observer: "userAssigned"
                            },
                            chatlist: Boolean,
                            changenickAllow: {
                                type: Boolean,
                                value: !1
                            },
                            followAllow: {
                                type: Boolean,
                                value: !1
                            },
                            ignoreAllow: {
                                type: Boolean,
                                value: !1
                            },
                            unignoreAllow: {
                                type: Boolean,
                                value: !1
                            },
                            openprivateAllow: {
                                type: Boolean,
                                value: !1
                            },
                            profileAllow: {
                                type: Boolean,
                                value: !1
                            },
                            abuseAllow: {
                                type: Boolean,
                                value: !1
                            },
                            kickAllow: {
                                type: Boolean,
                                value: !1
                            },
                            banAllow: {
                                type: Boolean,
                                value: !1
                            },
                            unbanAllow: {
                                type: Boolean,
                                value: !1
                            },
                            giveagiftAllow: {
                                type: Boolean,
                                value: !1
                            },
                            onkeydownHandler: Object
                        }
                    }
                    constructor() {
                        super()
                    }
                    get app() {
                        return this.userlist.chatroom.app
                    }
                    get chatroom() {
                        return this.userlist.chatroom
                    }
                    get chatlog() {
                        return this.userlist.chatroom.chatlog
                    }
                    connectedCallback() {
                        super.connectedCallback(), this.onkeydownHandler = this.onkeydown.bind(this), document.addEventListener("keydown", this.onkeydownHandler)
                    }
                    disconnectedCallback() {
                        super.disconnectedCallback(), document.removeEventListener("keydown", this.onkeydownHandler)
                    }
                    userlistAssigned(a) {
                        let b = this,
                            c = a.chatroom.app.EventBus;
                        c.subscribe(TinychatApp.BLL.IgnorelistUpdateUserEvent.ID, function(a) {
                            b.user != void 0 && b.user.handle == a.userentity.handle && (b.ignoreAllow = b.userlist.ignoreIsAllowed(b.user), b.unignoreAllow = b.userlist.isIgnored(b.user))
                        })
                    }
                    userAssigned(a) {
                        let b = this;
                        this.changenickAllow = a.isSelf, this.followAllow = this.userlist.followIsAllowed(a), this.ignoreAllow = this.userlist.ignoreIsAllowed(a), this.banAllow = this.userlist.banIsAllowed(a), this.kickAllow = this.userlist.kickIsAllowed(a), this.profileAllow = !0, this.giveagiftAllow = !0, this.openprivateAllow = !a.isSelf && !this.userlist.chatroom.selfUser().isGuest && !this.chatlist, this.abuseAllow = !a.isSelf, this.unignoreAllow = this.userlist.isIgnored(a), this.unbanAllow = this.userlist.isBanned(a)
                    }
                    show(a) {
                        let b = a.path ? a.path[0] : (a.composedPath && a.composedPath())[0],
                            c = this.$.main,
                            d = this.getRootNode().host,
                            e = d.getRootNode().host;
                        var f = !0,
                            g = b.offsetTop;
                        let h = c.clientHeight,
                            i = b.getBoundingClientRect().top - e.getBoundingClientRect().top,
                            j = e.getBoundingClientRect().bottom - b.getBoundingClientRect().bottom;
                        if (f = i > j, f) {
                            let a = b.offsetTop - h;
                            0 >= a && (f = !f)
                        } else {
                            let a = b.offsetTop + b.clientHeight + h;
                            a >= e.scrollHeight && (f = !f)
                        }
                        f ? (c.classList.add("up"), c.classList.remove("down"), g = g - c.clientHeight - 7) : (c.classList.add("down"), c.classList.remove("up"), g = g + b.clientHeight + 7), c.style.top = g + "px", c.classList.add("show")
                    }
                    hide() {
                        this.$.main.classList.remove("show")
                    }
                    onkeydown(a) {
                        a = a || window.event, (27 == a.keyCode || "Escape" == a.key || "Esc" == a.key) && this.hide()
                    }
                    changenick() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.userlist.changenick(this.user)
                    }
                    follow() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.userlist.follow(this.user)
                    }
                    ignore() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void(this.userlist.ignore(this.user), this.unignoreAllow = !0, this.ignoreAllow = !this.unignoreAllow)
                    }
                    unignore() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void(this.userlist.unignore(this.user), this.ignoreAllow = !0, this.unignoreAllow = !this.ignoreAllow)
                    }
                    openprivate() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.chatlog.openprivate(this.user)
                    }
                    profile() {
                        this.user.isUsername ? this.app.UserProfile(this.user.username) : this.app.showToast("[" + this.user.nickname + "] is anonymous, therefore has no profile")
                    }
                    abuse() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.userlist.abuse(this.user)
                    }
                    kick() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.userlist.kick(this.user)
                    }
                    ban() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.userlist.ban(this.user)
                    }
                    unban() {
                        return this.chatroom.isLurker() ? void this.app.showToastLurker() : void this.userlist.unban(this.user)
                    }
                    giveagift() {
                        this.user.isUsername ? this.app.GiveAGift(this.user.username) : this.app.showToast("[" + this.user.nickname + "] is anonymous, virtual gifts for registered users only.")
                    }
                }
                customElements.define(UserContextMenu.is, UserContextMenu);
            </script>
        </dom-module>
    </div>
    <dom-module id="tinychat-webrtc-app"><template>
            <style include="client-app"></style>
            <tinychat-sidemenu id="users" chatlog="[[chatroom.chatlog]]" userlist="[[chatroom.userlist]]" chatroom="[[chatroom]]"></tinychat-sidemenu>
            <div id="room">
                <tinychat-title chatroom="[[chatroom]]"></tinychat-title>
                <div id="room-content">
                    <tinychat-videolist videolist="[[chatroom.videolist]]"></tinychat-videolist>
                    <tinychat-chatlog chatlog="[[chatroom.chatlog]]"></tinychat-chatlog>
                </div>
            </div>
            <tinychat-modal id="modal"></tinychat-modal>
            <div id="toast"></div>
        </template>
        <script>
            class TinychatWebrtcApp extends Polymer.Element {
                static get is() {
                    return "tinychat-webrtc-app"
                }
                static get properties() {
                    return {
                        roomname: String,
                        tcToken: String,
                        loginInfo: String,
                        debug: String,
                        app: Object,
                        chatroom: {
                            type: Object,
                            observer: "chatroomAssigned"
                        },
                        isconnecting: {
                            type: Boolean,
                            value: !1,
                            observer: "isconnectingAssigned"
                        },
                        recaptchaHanle: Number,
                        onkeydownHandler: Object,
                        onkeyupHandler: Object,
                        _browserErrorHandler: Object,
                        _browserRejectionHandler: Object,
                        onFullscreenHandler: Object,
                        offline: Boolean,
                        language: {
                            type: String,
                            value: "en"
                        },
                        deboucePermission: Number
                    }
                }
                static get observers() {
                    return []
                }
                get captchaid() {
                    return "captcha-content-element"
                }
                constructor() {
                    super()
                }
                get settings() {
                    return this.chatroom.app.settings
                }
                connectedCallback() {
                    super.connectedCallback(), this.onFullscreenHandler = this.onFullscreen.bind(this), window.fullscreenManager.addEventListener(this.onFullscreenHandler, !1), this._browserErrorHandler = this._browserError.bind(this), this._browserRejectionHandler = this._browserRejection.bind(this), window.addEventListener("error", this._browserErrorHandler), window.addEventListener("unhandledrejection", this._browserRejectionHandler);
                    var a = null;
                    let b = "string" == typeof this.debug && JSON.parse(this.debug);
                    if ("string" === typeof this.loginInfo && (this.loginInfo = JSON.parse(this.loginInfo.replace(/'/gi, "\""))), "string" !== typeof this.tcToken && (a = "No TC token"), "string" !== typeof this.roomname && (a = "No chatroom name specified"), b && 1 < window.location.hash.length && (this.roomname = window.location.hash.substring(1), console.warn("override roomname by hash -> " + this.roomname)), null != a) throw new Error(a);
                    this.set("app", TinychatApp.getInstance(this.tcToken, this.loginInfo, b)), this.set("chatroom", this.app.GetChatroom(this.roomname)), this.onkeydownHandler = this.onkeydown.bind(this), this.onkeyupHandler = this.onkeyup.bind(this), document.addEventListener("keydown", this.onkeydownHandler), document.addEventListener("keyup", this.onkeyupHandler), document.addEventListener("mobile-app-modal-show", this.app.showMobileAppHandler), Polymer.RenderStatus.afterNextRender(this, function() {}), this._consolenoiseSetup(), this.removeAttribute("unresolved"), isMobile.apple.device || isMobile.android.device ? this.app.MoblileApp(() => this.chatroom.Connect(!1)) : this.chatroom.Connect(!1)
                }
                disconnectedCallback() {
                    super.disconnectedCallback(), window.fullscreenManager.removeEventListener(this.onFullscreenHandler, !1), document.removeEventListener("keydown", this.onkeydownHandler), document.removeEventListener("keyup", this.onkeyupHandler), document.removeEventListener("mobile-app-modal-show", this.app.showMobileAppHandler), window.removeEventListener("error", this._browserErrorHandler), window.removeEventListener("unhandledrejection", this._browserRejectionHandler), this._recaptchaRemoveScriptApi()
                }
                chatroomAssigned() {
                    let a = this,
                        b = this.chatroom.app.EventBus;
                    const c = "roompassword",
                        e = "chagenickname",
                        f = "share",
                        g = "mediafilters",
                        h = "mediasettings",
                        i = "settings",
                        j = "upgrade",
                        k = "notification",
                        l = "userprofile",
                        m = "banlist",
                        n = "youtube",
                        o = "mobilestore";
                    let d = ["reconnect", c, e, f, h, i, j, k, l, m, n, o];
                    b.subscribe(TinychatApp.BLL.RoomConnectEvent.ID, function() {
                        a._dialogclose(a.$.modal, "reconnect"), a.isconnecting = !0
                    }), b.subscribe(TinychatApp.BLL.RoomConnectPassword.ID, function() {
                        a.isconnecting = !1;
                        a._dialogopen(a.$.modal, c, () => {
                            let b = new ModalDialogPassword;
                            return b.id = c, b.ok = b => {
                                a._dialogclose(a.$.modal, c), a.isconnecting = !0, a.chatroom.ConnectPassword(b)
                            }, b
                        })
                    }), b.subscribe(TinychatApp.BLL.RoomConnectCaptcha.ID, function(b) {
                        a.isconnecting = !1, a._recaptchaOpen(b.key)
                    }), b.subscribe(TinychatApp.BLL.RoomConnectStandby.ID, function(b) {
                        a.isconnecting = !1, a._recaptchaClose(), a._dialogclose(a.$.modal, c);
                        a._dialogopen(a.$.modal, "reconnect", () => {
                            let c = new ModalReconnect;
                            return c.id = "reconnect", c.chatroom = a.chatroom, c.tries = b.tries, c.waitms = b.waitms, c
                        })
                    }), b.subscribe(TinychatApp.BLL.RoomConnectFatal.ID, function() {
                        a._dialogcloseall(a.$.modal, d), a.isconnecting = !1, a._showFatalError()
                    }), b.subscribe(TinychatApp.BLL.RoomConnected.ID, function() {
                        a.isconnecting = !1
                    }), b.subscribe(TinychatApp.BLL.RoomNicknameChangeEvent.ID, function(b) {
                        a._dialogopen(a.$.modal, e, () => {
                            let c = new ModalDialogChangeNickname(b.type);
                            return c.id = e, c.nickname = b.nickname, c.chatroom = a.chatroom, c.ok = b => {
                                a._dialogclose(a.$.modal, e), a.chatroom.NicknameChange(b, !0)
                            }, c.notvalid = b => !a.chatroom.NicknameIsValid(b), c.inuse = b => a.chatroom.NicknameIsInUseFast(b), c
                        })
                    }), b.subscribe(TinychatApp.BLL.RoomQuitEvent.ID, function() {
                        a.isconnecting = !1, a._recaptchaClose(), a._dialogcloseall(a.$.modal, d)
                    }), b.subscribe(TinychatApp.BLL.ToastEvent.ID, function(b) {
                        let c = new Toast;
                        c.id = "", c.type = b.type, c.text = b.text, c.wait = b.wait, c.ok_handler = b.ok_handler, c.ok_text = b.ok_text, a.$.toast.appendChild(c)
                    }), b.subscribe(TinychatApp.UI.UISideMenuToggle.ID, function() {
                        a.$.room.classList.toggle("wider")
                    }), this.app.showYoutubeHandler = () => {
                        a._dialogopen(a.$.modal, n, () => {
                            let b = new ModalDialogYoutube;
                            return b.id = n, b.chatroom = a.chatroom, b
                        })
                    }, this.app.showBanlistHandler = () => {
                        a._dialogopen(a.$.modal, m, () => {
                            let b = new ModalDialogBanlist;
                            return b.id = m, b.chatroom = a.chatroom, b
                        })
                    }, this.app.showShareHandler = () => {
                        a._dialogopen(a.$.modal, f, () => {
                            let b = new ModalDialogRoomShare;
                            return b.id = f, b.chatroom = a.chatroom, b
                        })
                    }, this.app.showMediaFiltersHandler = () => {
                        a._dialogopen(a.$.modal, g, () => {
                            let b = new ModalDialogMediaFilters;
                            return b.id = g, b.chatroom = a.chatroom, b
                        })
                    }, this.app.showMediaSettingsHandler = b => {
                        a._dialogopen(a.$.modal, h, () => {
                            let c = new ModalDialogMediaSettings;
                            return c.id = h, c.chatroom = a.chatroom, c.onClose = b, c
                        })
                    }, this.app.showSettingsHandler = () => {
                        a._dialogopen(a.$.modal, i, () => {
                            let b = new ModalDialogSettings;
                            return b.id = i, b.chatroom = a.chatroom, b
                        })
                    }, this.app.showUpgradeHandler = b => {
                        a._dialogopen(a.$.modal, j, () => {
                            let a = new ModalDialogUpgrade;
                            return a.id = j, void 0 !== b && "" !== b && (a.msg = b), a
                        })
                    }, this.app.showNotificationHandler = (b, c, e) => {
                        a._dialogopen(a.$.modal, k, () => {
                            let f = new ModalDialogNotification;
                            return f.id = k, f.chatroom = a.chatroom, f.title = b, f.message = c, void 0 !== e && (f.btnMessage = e), f
                        })
                    }, this.app.showUserProfile = b => {
                        a._dialogopen(a.$.modal, l, () => {
                            let c = new ModalProfile(b);
                            return c.id = l, c.chatroom = a.chatroom, c
                        })
                    }, this.app.showMobileAppHandler = b => {
                        a._dialogopen(a.$.modal, o, () => {
                            let c = new ModalDialogMobile;
                            return c.id = o, c.app = a.app, c.onClose = b, c
                        })
                    }, b.subscribe(TinychatApp.BLL.BroadcastProgressEvent.ID, b => {
                        let c = TinychatApp.BLL.BroadcastProgressEvent;
                        b.stage == c.MEDIA_START ? a.deboucePermission = setTimeout(() => {
                            a._showPermissionOverlay()
                        }, 150) : b.stage == c.MEDIA_OK ? (clearTimeout(a.deboucePermission), a._hidePermissionOverlay()) : b.stage == c.MEDIA_FAILED && (clearTimeout(a.deboucePermission), a._hidePermissionOverlay())
                    })
                }
                isconnectingAssigned(a) {
                    this._dialog(this.$.modal, "loader", () => {
                        let a = new ModalLoader;
                        return a.id = "loader", a
                    }, a)
                }
                Switch2OldClientVersion() {
                    this.app.SwitchClientVersion()
                }
                _dialogopen(a, b, c) {
                    this._dialog(a, b, c, !0)
                }
                _dialogclose(a, b) {
                    this._dialog(a, b, null, !1)
                }
                _dialogcloseall(a, b) {
                    for (var c in b) this._dialogclose(a, b[c])
                }
                _dialog(a, b, c, d) {
                    var e = a.querySelector("#" + b);
                    d ? (null == e && (e = c(), a.appendChild(e)), e.open()) : null != e && e.close()
                }
                onkeydown(a) {
                    a = a || window.event, (27 == a.keyCode || "Escape" == a.key || "Esc" == a.key) && this._recaptchaIsOpened() && (this._recaptchaClose(), this._recaptchaResponseSkip());
                    let b = this.settings.getSettings();
                    b.enableHotkeys && "?" == a.key, b.enableHotkeys && " " == a.key && this.chatroom
                }
                onkeyup(a) {
                    a = a || window.event;
                    let b = this.settings.getSettings();
                    b.enableHotkeys && " " == a.key
                }
                onFullscreen() {
                    let a = window.fullscreenManager.status();
                    a ? this.$.room.classList.add("full-screen") : this.$.room.classList.remove("full-screen")
                }
                onWiderToggle() {
                    this.$.room.classList.toggle("wider")
                }
                _recaptchaIsOpened() {
                    let a = document.body.querySelector("#captcha");
                    return a.classList.contains("show")
                }
                _recaptchaOpen(a) {
                    this._recaptchaAddScriptApi();
                    let b = this,
                        c = document.body.querySelector("#captcha"),
                        d = document.body.querySelector("#captcha-content-skip-button");
                    c.classList.add("show");
                    let e = document.body.querySelector("#" + this.captchaid);
                    if (this.recaptchaHanle != void 0) grecaptcha.reset(this.recaptchaHanle);
                    else {
                        d.addEventListener("click", () => {
                            b._recaptchaClose(), b._recaptchaResponseSkip(a)
                        });
                        let c = () => {
                            b.recaptchaHanle = grecaptcha.render(e, {
                                sitekey: a,
                                theme: "light",
                                callback: c => {
                                    b._recaptchaClose(), b._recaptchaResponseHandler(a, c), b.isconnecting = !0
                                },
                                "expired-callback": () => {
                                    b._recaptchaClose(), b._recaptchaExpiredHandler(a)
                                }
                            })
                        };
                        if (!window.grecaptcha) {
                            var f = 0;
                            let a = setInterval(() => {
                                window.grecaptcha && window.grecaptcha.render && (clearInterval(a), c()), f += 50
                            }, f)
                        } else c()
                    }
                }
                _recaptchaClose() {
                    this.recaptchaHanle != void 0 && grecaptcha.reset(this.recaptchaHanle);
                    let a = document.body.querySelector("#captcha");
                    a.classList.remove("show")
                }
                _recaptchaAddScriptApi() {
                    let a = document.querySelector("script#captcha_script");
                    if (a) return;
                    let b = document.getElementsByTagName("head")[0],
                        c = document.createElement("script");
                    c.setAttribute("id", "captcha_script"), c.setAttribute("charset", "utf-8"), c.setAttribute("type", "text/javascript"), c.setAttribute("async", ""), c.setAttribute("defer", ""), c.setAttribute("src", "//www.google.com/recaptcha/api.js"), b.appendChild(c)
                }
                _recaptchaRemoveScriptApi() {
                    let a = document.querySelector("script#captcha_script"),
                        b = document.getElementsByTagName("head")[0];
                    a && b.removeChild(a)
                }
                _recaptchaResponseHandler(a, b) {
                    this.chatroom.ConnectSolveCaptcha(b)
                }
                _recaptchaResponseSkip() {
                    this.chatroom.ConnectSolveSkip()
                }
                _recaptchaExpiredHandler() {
                    this.chatroom.ConnectSolveTimeout()
                }
                _languageChanged(a) {
                    let b = this.resolveUrl("../res/" + a + "/strings.json");
                    console.log("Locale loading: " + b), this.loadResources(b)
                }
                _notifyNetworkStatus() {
                    this.offline;
                    this.offline = !navigator.onLine, console.log("Offline: " + this.offline)
                }
                _browserError(a) {
                    let b = a ? a.error : void 0;
                    console.error(b), this._showFatalError(b), a.preventDefault()
                }
                _browserRejection(a) {
                    let b = a ? a.reason : void 0;
                    console.error(b), a.preventDefault()
                }
                _showFatalError(a) {
                    this._dialogopen(this.$.modal, "fatal", () => {
                        let b = new ModalFatalError;
                        return b.id = "fatal", b.error = a, b
                    })
                }
                _showPermissionOverlay() {
                    this._dialogopen(this.$.modal, "permission", () => {
                        let a = new ModalPermissions;
                        return a.id = "permission", a
                    })
                }
                _hidePermissionOverlay() {
                    setTimeout(() => this._dialogclose(this.$.modal, "permission"), 1e3)
                }
                _consolenoiseSetup() {
                    this.app.isDebug()
                }
            }
            customElements.define(TinychatWebrtcApp.is, TinychatWebrtcApp);
        </script>
    </dom-module>
</body>

</html>